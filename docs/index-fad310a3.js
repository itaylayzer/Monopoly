var PC=Object.defineProperty;var RC=(t,e,n)=>e in t?PC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ve=(t,e,n)=>(RC(t,typeof e!="symbol"?e+"":e,n),n);function IC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function kC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h={},AC={get exports(){return h},set exports(t){h=t}},Eu={},C={},bC={get exports(){return C},set exports(t){C=t}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=Symbol.for("react.element"),xC=Symbol.for("react.portal"),NC=Symbol.for("react.fragment"),OC=Symbol.for("react.strict_mode"),DC=Symbol.for("react.profiler"),MC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),LC=Symbol.for("react.forward_ref"),VC=Symbol.for("react.suspense"),FC=Symbol.for("react.memo"),UC=Symbol.for("react.lazy"),Dg=Symbol.iterator;function $C(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var Zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e_=Object.assign,t_={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zv}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function n_(){}n_.prototype=Hs.prototype;function hp(t,e,n){this.props=t,this.context=e,this.refs=t_,this.updater=n||Zv}var fp=hp.prototype=new n_;fp.constructor=hp;e_(fp,Hs.prototype);fp.isPureReactComponent=!0;var Mg=Array.isArray,r_=Object.prototype.hasOwnProperty,pp={current:null},i_={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)r_.call(e,r)&&!i_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:La,type:t,key:s,ref:o,props:i,_owner:pp.current}}function BC(t,e){return{$$typeof:La,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===La}function zC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jg=/\/+/g;function Ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zC(""+t.key):e.toString(36)}function Gl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case La:case xC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ed(o,0):r,Mg(i)?(n="",t!=null&&(n=t.replace(jg,"$&/")+"/"),Gl(i,e,n,"",function(c){return c})):i!=null&&(mp(i)&&(i=BC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Mg(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Ed(s,l);o+=Gl(s,e,n,a,i)}else if(a=$C(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Ed(s,l++),o+=Gl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gl(t,e,n){if(t==null)return t;var r=[],i=0;return Gl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function qC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Kl={transition:null},HC={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Kl,ReactCurrentOwner:pp};le.Children={map:gl,forEach:function(t,e,n){gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gl(t,function(){e++}),e},toArray:function(t){return gl(t,function(e){return e})||[]},only:function(t){if(!mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Hs;le.Fragment=NC;le.Profiler=DC;le.PureComponent=hp;le.StrictMode=OC;le.Suspense=VC;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HC;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=e_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)r_.call(e,a)&&!i_.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:La,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:jC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MC,_context:t},t.Consumer=t};le.createElement=s_;le.createFactory=function(t){var e=s_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:LC,render:t}};le.isValidElement=mp;le.lazy=function(t){return{$$typeof:UC,_payload:{_status:-1,_result:t},_init:qC}};le.memo=function(t,e){return{$$typeof:FC,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Kl.transition;Kl.transition={};try{t()}finally{Kl.transition=e}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(t,e){return Ft.current.useCallback(t,e)};le.useContext=function(t){return Ft.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};le.useEffect=function(t,e){return Ft.current.useEffect(t,e)};le.useId=function(){return Ft.current.useId()};le.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Ft.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};le.useRef=function(t){return Ft.current.useRef(t)};le.useState=function(t){return Ft.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Ft.current.useTransition()};le.version="18.2.0";(function(t){t.exports=le})(bC);const WC=kC(C),GC=IC({__proto__:null,default:WC},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC=C,JC=Symbol.for("react.element"),QC=Symbol.for("react.fragment"),YC=Object.prototype.hasOwnProperty,XC=KC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZC={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YC.call(e,r)&&!ZC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JC,type:t,key:s,ref:o,props:i,_owner:XC.current}}Eu.Fragment=QC;Eu.jsx=o_;Eu.jsxs=o_;(function(t){t.exports=Eu})(AC);var Eh={},Sh={},eP={get exports(){return Sh},set exports(t){Sh=t}},tn={},Th={},tP={get exports(){return Th},set exports(t){Th=t}},a_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,j){var V=x.length;x.push(j);e:for(;0<V;){var ne=V-1>>>1,ie=x[ne];if(0<i(ie,j))x[ne]=j,x[V]=ie,V=ne;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var j=x[0],V=x.pop();if(V!==j){x[0]=V;e:for(var ne=0,ie=x.length,oe=ie>>>1;ne<oe;){var Se=2*(ne+1)-1,Be=x[Se],Pe=Se+1,we=x[Pe];if(0>i(Be,V))Pe<ie&&0>i(we,Be)?(x[ne]=we,x[Pe]=V,ne=Pe):(x[ne]=Be,x[Se]=V,ne=Se);else if(Pe<ie&&0>i(we,V))x[ne]=we,x[Pe]=V,ne=Pe;else break e}}return j}function i(x,j){var V=x.sortIndex-j.sortIndex;return V!==0?V:x.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,y=!1,g=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(x){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=x)r(c),j.sortIndex=j.expirationTime,e(a,j);else break;j=n(c)}}function S(x){if(_=!1,E(x),!g)if(n(a)!==null)g=!0,Ce(P);else{var j=n(c);j!==null&&Ie(S,j.startTime-x)}}function P(x,j){g=!1,_&&(_=!1,v(m),m=-1),y=!0;var V=f;try{for(E(j),d=n(a);d!==null&&(!(d.expirationTime>j)||x&&!H());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var ie=ne(d.expirationTime<=j);j=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(a)&&r(a),E(j)}else r(a);d=n(a)}if(d!==null)var oe=!0;else{var Se=n(c);Se!==null&&Ie(S,Se.startTime-j),oe=!1}return oe}finally{d=null,f=V,y=!1}}var I=!1,A=null,m=-1,R=5,w=-1;function H(){return!(t.unstable_now()-w<R)}function W(){if(A!==null){var x=t.unstable_now();w=x;var j=!0;try{j=A(!0,x)}finally{j?se():(I=!1,A=null)}}else I=!1}var se;if(typeof p=="function")se=function(){p(W)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,G=ce.port2;ce.port1.onmessage=W,se=function(){G.postMessage(null)}}else se=function(){T(W,0)};function Ce(x){A=x,I||(I=!0,se())}function Ie(x,j){m=T(function(){x(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,Ce(P))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(x){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var V=f;f=j;try{return x()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,j){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var V=f;f=x;try{return j()}finally{f=V}},t.unstable_scheduleCallback=function(x,j,V){var ne=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,x){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=V+ie,x={id:u++,callback:j,priorityLevel:x,startTime:V,expirationTime:ie,sortIndex:-1},V>ne?(x.sortIndex=V,e(c,x),n(a)===null&&x===n(c)&&(_?(v(m),m=-1):_=!0,Ie(S,V-ne))):(x.sortIndex=ie,e(a,x),g||y||(g=!0,Ce(P))),x},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(x){var j=f;return function(){var V=f;f=j;try{return x.apply(this,arguments)}finally{f=V}}}})(a_);(function(t){t.exports=a_})(tP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_=C,Zt=Th;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c_=new Set,Zo={};function Vi(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(Zo[t]=e,t=0;t<e.length;t++)c_.add(e[t])}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,nP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lg={},Vg={};function rP(t){return wh.call(Vg,t)?!0:wh.call(Lg,t)?!1:nP.test(t)?Vg[t]=!0:(Lg[t]=!0,!1)}function iP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sP(t,e,n,r){if(e===null||typeof e>"u"||iP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var gp=/[\-:]([a-z])/g;function yp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gp,yp);mt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gp,yp);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gp,yp);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function vp(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sP(e,n,i,r)&&(n=null),r||i===null?rP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yr=l_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),d_=Symbol.for("react.context"),Ep=Symbol.for("react.forward_ref"),Ph=Symbol.for("react.suspense"),Rh=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),h_=Symbol.for("react.offscreen"),Fg=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Sd;function wo(t){if(Sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var Td=!1;function wd(t,e){if(!t||Td)return"";Td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Td=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wo(t):""}function oP(t){switch(t.tag){case 5:return wo(t.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return t=wd(t.type,!1),t;case 11:return t=wd(t.type.render,!1),t;case 1:return t=wd(t.type,!0),t;default:return""}}function Ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case Ch:return"Profiler";case _p:return"StrictMode";case Ph:return"Suspense";case Rh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d_:return(t.displayName||"Context")+".Consumer";case u_:return(t._context.displayName||"Context")+".Provider";case Ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sp:return e=t.displayName||null,e!==null?e:Ih(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return Ih(t(e))}catch{}}return null}function aP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ih(e);case 8:return e===_p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lP(t){var e=f_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=lP(t))}function p_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m_(t,e){e=e.checked,e!=null&&vp(t,"checked",e,!1)}function Ah(t,e){m_(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bh(t,e.type,n):e.hasOwnProperty("defaultValue")&&bh(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $g(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bh(t,e,n){(e!=="number"||Ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function ps(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Co(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function g_(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _l,v_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cP=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(t){cP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jo[e]=jo[t]})});function __(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jo.hasOwnProperty(t)&&jo[t]?(""+e).trim():e+"px"}function E_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=__(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uP=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(uP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Dh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=null;function Tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,ms=null,gs=null;function qg(t){if(t=Ua(t)){if(typeof jh!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Pu(e),jh(t.stateNode,t.type,e))}}function S_(t){ms?gs?gs.push(t):gs=[t]:ms=t}function T_(){if(ms){var t=ms,e=gs;if(gs=ms=null,qg(t),e)for(t=0;t<e.length;t++)qg(e[t])}}function w_(t,e){return t(e)}function C_(){}var Cd=!1;function P_(t,e,n){if(Cd)return t(e,n);Cd=!0;try{return w_(t,e,n)}finally{Cd=!1,(ms!==null||gs!==null)&&(C_(),T_())}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var r=Pu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Lh=!1;if(lr)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{Lh=!1}function dP(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Lo=!1,Sc=null,Tc=!1,Vh=null,hP={onError:function(t){Lo=!0,Sc=t}};function fP(t,e,n,r,i,s,o,l,a){Lo=!1,Sc=null,dP.apply(hP,arguments)}function pP(t,e,n,r,i,s,o,l,a){if(fP.apply(this,arguments),Lo){if(Lo){var c=Sc;Lo=!1,Sc=null}else throw Error(D(198));Tc||(Tc=!0,Vh=c)}}function Fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function R_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hg(t){if(Fi(t)!==t)throw Error(D(188))}function mP(t){var e=t.alternate;if(!e){if(e=Fi(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Hg(i),t;if(s===r)return Hg(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function I_(t){return t=mP(t),t!==null?k_(t):null}function k_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k_(t);if(e!==null)return e;t=t.sibling}return null}var A_=Zt.unstable_scheduleCallback,Wg=Zt.unstable_cancelCallback,gP=Zt.unstable_shouldYield,yP=Zt.unstable_requestPaint,We=Zt.unstable_now,vP=Zt.unstable_getCurrentPriorityLevel,wp=Zt.unstable_ImmediatePriority,b_=Zt.unstable_UserBlockingPriority,wc=Zt.unstable_NormalPriority,_P=Zt.unstable_LowPriority,x_=Zt.unstable_IdlePriority,Su=null,Fn=null;function EP(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Su,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:wP,SP=Math.log,TP=Math.LN2;function wP(t){return t>>>=0,t===0?32:31-(SP(t)/TP|0)|0}var El=64,Sl=4194304;function Po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Po(l):(s&=o,s!==0&&(r=Po(s)))}else o=n&~i,o!==0?r=Po(o):s!==0&&(r=Po(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),i=1<<n,r|=t[n],e&=~i;return r}function CP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=CP(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N_(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function Pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function RP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function O_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D_,Pp,M_,j_,L_,Uh=!1,Tl=[],$r=null,Br=null,zr=null,na=new Map,ra=new Map,xr=[],IP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gg(t,e){switch(t){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(e.pointerId)}}function ho(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ua(e),e!==null&&Pp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kP(t,e,n,r,i){switch(e){case"focusin":return $r=ho($r,t,e,n,r,i),!0;case"dragenter":return Br=ho(Br,t,e,n,r,i),!0;case"mouseover":return zr=ho(zr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return na.set(s,ho(na.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ra.set(s,ho(ra.get(s)||null,t,e,n,r,i)),!0}return!1}function V_(t){var e=gi(t.target);if(e!==null){var n=Fi(e);if(n!==null){if(e=n.tag,e===13){if(e=R_(n),e!==null){t.blockedOn=e,L_(t.priority,function(){M_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mh=r,n.target.dispatchEvent(r),Mh=null}else return e=Ua(n),e!==null&&Pp(e),t.blockedOn=n,!1;e.shift()}return!0}function Kg(t,e,n){Jl(t)&&n.delete(e)}function AP(){Uh=!1,$r!==null&&Jl($r)&&($r=null),Br!==null&&Jl(Br)&&(Br=null),zr!==null&&Jl(zr)&&(zr=null),na.forEach(Kg),ra.forEach(Kg)}function fo(t,e){t.blockedOn===e&&(t.blockedOn=null,Uh||(Uh=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,AP)))}function ia(t){function e(i){return fo(i,t)}if(0<Tl.length){fo(Tl[0],t);for(var n=1;n<Tl.length;n++){var r=Tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for($r!==null&&fo($r,t),Br!==null&&fo(Br,t),zr!==null&&fo(zr,t),na.forEach(e),ra.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)V_(n),n.blockedOn===null&&xr.shift()}var ys=yr.ReactCurrentBatchConfig,Pc=!0;function bP(t,e,n,r){var i=_e,s=ys.transition;ys.transition=null;try{_e=1,Rp(t,e,n,r)}finally{_e=i,ys.transition=s}}function xP(t,e,n,r){var i=_e,s=ys.transition;ys.transition=null;try{_e=4,Rp(t,e,n,r)}finally{_e=i,ys.transition=s}}function Rp(t,e,n,r){if(Pc){var i=$h(t,e,n,r);if(i===null)Md(t,e,r,Rc,n),Gg(t,r);else if(kP(i,t,e,n,r))r.stopPropagation();else if(Gg(t,r),e&4&&-1<IP.indexOf(t)){for(;i!==null;){var s=Ua(i);if(s!==null&&D_(s),s=$h(t,e,n,r),s===null&&Md(t,e,r,Rc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Md(t,e,r,null,n)}}var Rc=null;function $h(t,e,n,r){if(Rc=null,t=Tp(r),t=gi(t),t!==null)if(e=Fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=R_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function F_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vP()){case wp:return 1;case b_:return 4;case wc:case _P:return 16;case x_:return 536870912;default:return 16}default:return 16}}var Lr=null,Ip=null,Ql=null;function U_(){if(Ql)return Ql;var t,e=Ip,n=e.length,r,i="value"in Lr?Lr.value:Lr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ql=i.slice(t,1<r?1-r:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function Jg(){return!1}function nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:Jg,this.isPropagationStopped=Jg,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kp=nn(Ws),Fa=Le({},Ws,{view:0,detail:0}),NP=nn(Fa),Rd,Id,po,Tu=Le({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ap,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?(Rd=t.screenX-po.screenX,Id=t.screenY-po.screenY):Id=Rd=0,po=t),Rd)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),Qg=nn(Tu),OP=Le({},Tu,{dataTransfer:0}),DP=nn(OP),MP=Le({},Fa,{relatedTarget:0}),kd=nn(MP),jP=Le({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),LP=nn(jP),VP=Le({},Ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FP=nn(VP),UP=Le({},Ws,{data:0}),Yg=nn(UP),$P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zP[t])?!!e[t]:!1}function Ap(){return qP}var HP=Le({},Fa,{key:function(t){if(t.key){var e=$P[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ap,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WP=nn(HP),GP=Le({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xg=nn(GP),KP=Le({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ap}),JP=nn(KP),QP=Le({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),YP=nn(QP),XP=Le({},Tu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZP=nn(XP),eR=[9,13,27,32],bp=lr&&"CompositionEvent"in window,Vo=null;lr&&"documentMode"in document&&(Vo=document.documentMode);var tR=lr&&"TextEvent"in window&&!Vo,$_=lr&&(!bp||Vo&&8<Vo&&11>=Vo),Zg=String.fromCharCode(32),ey=!1;function B_(t,e){switch(t){case"keyup":return eR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function nR(t,e){switch(t){case"compositionend":return z_(e);case"keypress":return e.which!==32?null:(ey=!0,Zg);case"textInput":return t=e.data,t===Zg&&ey?null:t;default:return null}}function rR(t,e){if(ns)return t==="compositionend"||!bp&&B_(t,e)?(t=U_(),Ql=Ip=Lr=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $_&&e.locale!=="ko"?null:e.data;default:return null}}var iR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iR[t.type]:e==="textarea"}function q_(t,e,n,r){S_(r),e=Ic(e,"onChange"),0<e.length&&(n=new kp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fo=null,sa=null;function sR(t){t1(t,0)}function wu(t){var e=ss(t);if(p_(e))return t}function oR(t,e){if(t==="change")return e}var H_=!1;if(lr){var Ad;if(lr){var bd="oninput"in document;if(!bd){var ny=document.createElement("div");ny.setAttribute("oninput","return;"),bd=typeof ny.oninput=="function"}Ad=bd}else Ad=!1;H_=Ad&&(!document.documentMode||9<document.documentMode)}function ry(){Fo&&(Fo.detachEvent("onpropertychange",W_),sa=Fo=null)}function W_(t){if(t.propertyName==="value"&&wu(sa)){var e=[];q_(e,sa,t,Tp(t)),P_(sR,e)}}function aR(t,e,n){t==="focusin"?(ry(),Fo=e,sa=n,Fo.attachEvent("onpropertychange",W_)):t==="focusout"&&ry()}function lR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(sa)}function cR(t,e){if(t==="click")return wu(e)}function uR(t,e){if(t==="input"||t==="change")return wu(e)}function dR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kn=typeof Object.is=="function"?Object.is:dR;function oa(t,e){if(kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wh.call(e,i)||!kn(t[i],e[i]))return!1}return!0}function iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sy(t,e){var n=iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iy(n)}}function G_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K_(){for(var t=window,e=Ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ec(t.document)}return e}function xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hR(t){var e=K_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G_(n.ownerDocument.documentElement,n)){if(r!==null&&xp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sy(n,s);var o=sy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fR=lr&&"documentMode"in document&&11>=document.documentMode,rs=null,Bh=null,Uo=null,zh=!1;function oy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zh||rs==null||rs!==Ec(r)||(r=rs,"selectionStart"in r&&xp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Uo&&oa(Uo,r)||(Uo=r,r=Ic(Bh,"onSelect"),0<r.length&&(e=new kp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function Cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},xd={},J_={};lr&&(J_=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Cu(t){if(xd[t])return xd[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J_)return xd[t]=e[n];return t}var Q_=Cu("animationend"),Y_=Cu("animationiteration"),X_=Cu("animationstart"),Z_=Cu("transitionend"),e1=new Map,ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(t,e){e1.set(t,e),Vi(e,[t])}for(var Nd=0;Nd<ay.length;Nd++){var Od=ay[Nd],pR=Od.toLowerCase(),mR=Od[0].toUpperCase()+Od.slice(1);ii(pR,"on"+mR)}ii(Q_,"onAnimationEnd");ii(Y_,"onAnimationIteration");ii(X_,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(Z_,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function ly(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pP(r,e,void 0,t),t.currentTarget=null}function t1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;ly(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;ly(i,l,c),s=a}}}if(Tc)throw t=Vh,Tc=!1,Vh=null,t}function ke(t,e){var n=e[Kh];n===void 0&&(n=e[Kh]=new Set);var r=t+"__bubble";n.has(r)||(n1(e,t,2,!1),n.add(r))}function Dd(t,e,n){var r=0;e&&(r|=4),n1(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[Pl]){t[Pl]=!0,c_.forEach(function(n){n!=="selectionchange"&&(gR.has(n)||Dd(n,!1,t),Dd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,Dd("selectionchange",!1,e))}}function n1(t,e,n,r){switch(F_(e)){case 1:var i=bP;break;case 4:i=xP;break;default:i=Rp}n=i.bind(null,e,n,t),i=void 0,!Lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Md(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=gi(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}P_(function(){var c=s,u=Tp(n),d=[];e:{var f=e1.get(t);if(f!==void 0){var y=kp,g=t;switch(t){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":y=WP;break;case"focusin":g="focus",y=kd;break;case"focusout":g="blur",y=kd;break;case"beforeblur":case"afterblur":y=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=DP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=JP;break;case Q_:case Y_:case X_:y=LP;break;case Z_:y=YP;break;case"scroll":y=NP;break;case"wheel":y=ZP;break;case"copy":case"cut":case"paste":y=FP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xg}var _=(e&4)!==0,T=!_&&t==="scroll",v=_?f!==null?f+"Capture":null:f;_=[];for(var p=c,E;p!==null;){E=p;var S=E.stateNode;if(E.tag===5&&S!==null&&(E=S,v!==null&&(S=ta(p,v),S!=null&&_.push(la(p,S,E)))),T)break;p=p.return}0<_.length&&(f=new y(f,g,null,n,u),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Mh&&(g=n.relatedTarget||n.fromElement)&&(gi(g)||g[cr]))break e;if((y||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=c,g=g?gi(g):null,g!==null&&(T=Fi(g),g!==T||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(_=Qg,S="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=Xg,S="onPointerLeave",v="onPointerEnter",p="pointer"),T=y==null?f:ss(y),E=g==null?f:ss(g),f=new _(S,p+"leave",y,n,u),f.target=T,f.relatedTarget=E,S=null,gi(u)===c&&(_=new _(v,p+"enter",g,n,u),_.target=E,_.relatedTarget=T,S=_),T=S,y&&g)t:{for(_=y,v=g,p=0,E=_;E;E=Ki(E))p++;for(E=0,S=v;S;S=Ki(S))E++;for(;0<p-E;)_=Ki(_),p--;for(;0<E-p;)v=Ki(v),E--;for(;p--;){if(_===v||v!==null&&_===v.alternate)break t;_=Ki(_),v=Ki(v)}_=null}else _=null;y!==null&&cy(d,f,y,_,!1),g!==null&&T!==null&&cy(d,T,g,_,!0)}}e:{if(f=c?ss(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var P=oR;else if(ty(f))if(H_)P=uR;else{P=lR;var I=aR}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=cR);if(P&&(P=P(t,c))){q_(d,P,n,u);break e}I&&I(t,f,c),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&bh(f,"number",f.value)}switch(I=c?ss(c):window,t){case"focusin":(ty(I)||I.contentEditable==="true")&&(rs=I,Bh=c,Uo=null);break;case"focusout":Uo=Bh=rs=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,oy(d,n,u);break;case"selectionchange":if(fR)break;case"keydown":case"keyup":oy(d,n,u)}var A;if(bp)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ns?B_(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&($_&&n.locale!=="ko"&&(ns||m!=="onCompositionStart"?m==="onCompositionEnd"&&ns&&(A=U_()):(Lr=u,Ip="value"in Lr?Lr.value:Lr.textContent,ns=!0)),I=Ic(c,m),0<I.length&&(m=new Yg(m,t,null,n,u),d.push({event:m,listeners:I}),A?m.data=A:(A=z_(n),A!==null&&(m.data=A)))),(A=tR?nR(t,n):rR(t,n))&&(c=Ic(c,"onBeforeInput"),0<c.length&&(u=new Yg("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}t1(d,e)})}function la(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ta(t,n),s!=null&&r.unshift(la(t,s,i)),s=ta(t,e),s!=null&&r.push(la(t,s,i))),t=t.return}return r}function Ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=ta(n,s),a!=null&&o.unshift(la(n,a,l))):i||(a=ta(n,s),a!=null&&o.push(la(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yR=/\r\n?/g,vR=/\u0000|\uFFFD/g;function uy(t){return(typeof t=="string"?t:""+t).replace(yR,`
`).replace(vR,"")}function Rl(t,e,n){if(e=uy(e),uy(t)!==e&&n)throw Error(D(425))}function kc(){}var qh=null,Hh=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gh=typeof setTimeout=="function"?setTimeout:void 0,_R=typeof clearTimeout=="function"?clearTimeout:void 0,dy=typeof Promise=="function"?Promise:void 0,ER=typeof queueMicrotask=="function"?queueMicrotask:typeof dy<"u"?function(t){return dy.resolve(null).then(t).catch(SR)}:Gh;function SR(t){setTimeout(function(){throw t})}function jd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ia(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ia(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Gs,ca="__reactProps$"+Gs,cr="__reactContainer$"+Gs,Kh="__reactEvents$"+Gs,TR="__reactListeners$"+Gs,wR="__reactHandles$"+Gs;function gi(t){var e=t[Dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hy(t);t!==null;){if(n=t[Dn])return n;t=hy(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[Dn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Pu(t){return t[ca]||null}var Jh=[],os=-1;function si(t){return{current:t}}function be(t){0>os||(t.current=Jh[os],Jh[os]=null,os--)}function Re(t,e){os++,Jh[os]=t.current,t.current=e}var ei={},xt=si(ei),Ht=si(!1),Ri=ei;function ks(t,e){var n=t.type.contextTypes;if(!n)return ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Wt(t){return t=t.childContextTypes,t!=null}function Ac(){be(Ht),be(xt)}function fy(t,e,n){if(xt.current!==ei)throw Error(D(168));Re(xt,e),Re(Ht,n)}function r1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,aP(t)||"Unknown",i));return Le({},n,r)}function bc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,Ri=xt.current,Re(xt,t),Re(Ht,Ht.current),!0}function py(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=r1(t,e,Ri),r.__reactInternalMemoizedMergedChildContext=t,be(Ht),be(xt),Re(xt,t)):be(Ht),Re(Ht,n)}var Yn=null,Ru=!1,Ld=!1;function i1(t){Yn===null?Yn=[t]:Yn.push(t)}function CR(t){Ru=!0,i1(t)}function oi(){if(!Ld&&Yn!==null){Ld=!0;var t=0,e=_e;try{var n=Yn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yn=null,Ru=!1}catch(i){throw Yn!==null&&(Yn=Yn.slice(t+1)),A_(wp,oi),i}finally{_e=e,Ld=!1}}return null}var as=[],ls=0,xc=null,Nc=0,sn=[],on=0,Ii=null,Xn=1,Zn="";function fi(t,e){as[ls++]=Nc,as[ls++]=xc,xc=t,Nc=e}function s1(t,e,n){sn[on++]=Xn,sn[on++]=Zn,sn[on++]=Ii,Ii=t;var r=Xn;t=Zn;var i=32-Rn(r)-1;r&=~(1<<i),n+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xn=1<<32-Rn(e)+i|n<<i|r,Zn=s+t}else Xn=1<<s|n<<i|r,Zn=t}function Np(t){t.return!==null&&(fi(t,1),s1(t,1,0))}function Op(t){for(;t===xc;)xc=as[--ls],as[ls]=null,Nc=as[--ls],as[ls]=null;for(;t===Ii;)Ii=sn[--on],sn[on]=null,Zn=sn[--on],sn[on]=null,Xn=sn[--on],sn[on]=null}var Xt=null,Yt=null,Ne=!1,wn=null;function o1(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function my(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Xn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Yt=null,!0):!1;default:return!1}}function Qh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yh(t){if(Ne){var e=Yt;if(e){var n=e;if(!my(t,e)){if(Qh(t))throw Error(D(418));e=qr(n.nextSibling);var r=Xt;e&&my(t,e)?o1(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Xt=t)}}else{if(Qh(t))throw Error(D(418));t.flags=t.flags&-4097|2,Ne=!1,Xt=t}}}function gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Il(t){if(t!==Xt)return!1;if(!Ne)return gy(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=Yt)){if(Qh(t))throw a1(),Error(D(418));for(;e;)o1(t,e),e=qr(e.nextSibling)}if(gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?qr(t.stateNode.nextSibling):null;return!0}function a1(){for(var t=Yt;t;)t=qr(t.nextSibling)}function As(){Yt=Xt=null,Ne=!1}function Dp(t){wn===null?wn=[t]:wn.push(t)}var PR=yr.ReactCurrentBatchConfig;function Sn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Oc=si(null),Dc=null,cs=null,Mp=null;function jp(){Mp=cs=Dc=null}function Lp(t){var e=Oc.current;be(Oc),t._currentValue=e}function Xh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){Dc=t,Mp=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Mp!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(Dc===null)throw Error(D(308));cs=t,Dc.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var yi=null;function Vp(t){yi===null?yi=[t]:yi.push(t)}function l1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vp(e)):(n.next=i.next,i.next=n),e.interleaved=n,ur(t,r)}function ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function Fp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ur(t,n)}return i=r.interleaved,i===null?(e.next=e,Vp(r)):(e.next=i.next,i.next=e),r.interleaved=e,ur(t,n)}function Xl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cp(t,n)}}function yy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mc(t,e,n,r){var i=t.updateQueue;br=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,y=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,_=l;switch(f=e,y=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=_.payload,f=typeof g=="function"?g.call(y,d,f):g,f==null)break e;d=Le({},d,f);break e;case 2:br=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=y,a=d):u=u.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=d}}function vy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var u1=new l_.Component().refs;function Zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?Fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Gr(t),s=ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(In(e,t,i,r),Xl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Gr(t),s=ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(In(e,t,i,r),Xl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=Gr(t),i=ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(In(e,t,r,n),Xl(e,t,r))}};function _y(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!oa(n,r)||!oa(i,s):!0}function d1(t,e,n){var r=!1,i=ei,s=e.contextType;return typeof s=="object"&&s!==null?s=fn(s):(i=Wt(e)?Ri:xt.current,r=e.contextTypes,s=(r=r!=null)?ks(t,i):ei),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ey(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=u1,Fp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fn(s):(s=Wt(e)?Ri:xt.current,i.context=ks(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Iu.enqueueReplaceState(i,i.state,null),Mc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===u1&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sy(t){var e=t._init;return e(t._payload)}function h1(t){function e(v,p){if(t){var E=v.deletions;E===null?(v.deletions=[p],v.flags|=16):E.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function i(v,p){return v=Kr(v,p),v.index=0,v.sibling=null,v}function s(v,p,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<p?(v.flags|=2,p):E):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,p,E,S){return p===null||p.tag!==6?(p=qd(E,v.mode,S),p.return=v,p):(p=i(p,E),p.return=v,p)}function a(v,p,E,S){var P=E.type;return P===ts?u(v,p,E.props.children,S,E.key):p!==null&&(p.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ar&&Sy(P)===p.type)?(S=i(p,E.props),S.ref=mo(v,p,E),S.return=v,S):(S=ic(E.type,E.key,E.props,null,v.mode,S),S.ref=mo(v,p,E),S.return=v,S)}function c(v,p,E,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==E.containerInfo||p.stateNode.implementation!==E.implementation?(p=Hd(E,v.mode,S),p.return=v,p):(p=i(p,E.children||[]),p.return=v,p)}function u(v,p,E,S,P){return p===null||p.tag!==7?(p=wi(E,v.mode,S,P),p.return=v,p):(p=i(p,E),p.return=v,p)}function d(v,p,E){if(typeof p=="string"&&p!==""||typeof p=="number")return p=qd(""+p,v.mode,E),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case yl:return E=ic(p.type,p.key,p.props,null,v.mode,E),E.ref=mo(v,null,p),E.return=v,E;case es:return p=Hd(p,v.mode,E),p.return=v,p;case Ar:var S=p._init;return d(v,S(p._payload),E)}if(Co(p)||co(p))return p=wi(p,v.mode,E,null),p.return=v,p;kl(v,p)}return null}function f(v,p,E,S){var P=p!==null?p.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:l(v,p,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yl:return E.key===P?a(v,p,E,S):null;case es:return E.key===P?c(v,p,E,S):null;case Ar:return P=E._init,f(v,p,P(E._payload),S)}if(Co(E)||co(E))return P!==null?null:u(v,p,E,S,null);kl(v,E)}return null}function y(v,p,E,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(E)||null,l(p,v,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yl:return v=v.get(S.key===null?E:S.key)||null,a(p,v,S,P);case es:return v=v.get(S.key===null?E:S.key)||null,c(p,v,S,P);case Ar:var I=S._init;return y(v,p,E,I(S._payload),P)}if(Co(S)||co(S))return v=v.get(E)||null,u(p,v,S,P,null);kl(p,S)}return null}function g(v,p,E,S){for(var P=null,I=null,A=p,m=p=0,R=null;A!==null&&m<E.length;m++){A.index>m?(R=A,A=null):R=A.sibling;var w=f(v,A,E[m],S);if(w===null){A===null&&(A=R);break}t&&A&&w.alternate===null&&e(v,A),p=s(w,p,m),I===null?P=w:I.sibling=w,I=w,A=R}if(m===E.length)return n(v,A),Ne&&fi(v,m),P;if(A===null){for(;m<E.length;m++)A=d(v,E[m],S),A!==null&&(p=s(A,p,m),I===null?P=A:I.sibling=A,I=A);return Ne&&fi(v,m),P}for(A=r(v,A);m<E.length;m++)R=y(A,v,m,E[m],S),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?m:R.key),p=s(R,p,m),I===null?P=R:I.sibling=R,I=R);return t&&A.forEach(function(H){return e(v,H)}),Ne&&fi(v,m),P}function _(v,p,E,S){var P=co(E);if(typeof P!="function")throw Error(D(150));if(E=P.call(E),E==null)throw Error(D(151));for(var I=P=null,A=p,m=p=0,R=null,w=E.next();A!==null&&!w.done;m++,w=E.next()){A.index>m?(R=A,A=null):R=A.sibling;var H=f(v,A,w.value,S);if(H===null){A===null&&(A=R);break}t&&A&&H.alternate===null&&e(v,A),p=s(H,p,m),I===null?P=H:I.sibling=H,I=H,A=R}if(w.done)return n(v,A),Ne&&fi(v,m),P;if(A===null){for(;!w.done;m++,w=E.next())w=d(v,w.value,S),w!==null&&(p=s(w,p,m),I===null?P=w:I.sibling=w,I=w);return Ne&&fi(v,m),P}for(A=r(v,A);!w.done;m++,w=E.next())w=y(A,v,m,w.value,S),w!==null&&(t&&w.alternate!==null&&A.delete(w.key===null?m:w.key),p=s(w,p,m),I===null?P=w:I.sibling=w,I=w);return t&&A.forEach(function(W){return e(v,W)}),Ne&&fi(v,m),P}function T(v,p,E,S){if(typeof E=="object"&&E!==null&&E.type===ts&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case yl:e:{for(var P=E.key,I=p;I!==null;){if(I.key===P){if(P=E.type,P===ts){if(I.tag===7){n(v,I.sibling),p=i(I,E.props.children),p.return=v,v=p;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ar&&Sy(P)===I.type){n(v,I.sibling),p=i(I,E.props),p.ref=mo(v,I,E),p.return=v,v=p;break e}n(v,I);break}else e(v,I);I=I.sibling}E.type===ts?(p=wi(E.props.children,v.mode,S,E.key),p.return=v,v=p):(S=ic(E.type,E.key,E.props,null,v.mode,S),S.ref=mo(v,p,E),S.return=v,v=S)}return o(v);case es:e:{for(I=E.key;p!==null;){if(p.key===I)if(p.tag===4&&p.stateNode.containerInfo===E.containerInfo&&p.stateNode.implementation===E.implementation){n(v,p.sibling),p=i(p,E.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=Hd(E,v.mode,S),p.return=v,v=p}return o(v);case Ar:return I=E._init,T(v,p,I(E._payload),S)}if(Co(E))return g(v,p,E,S);if(co(E))return _(v,p,E,S);kl(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,p!==null&&p.tag===6?(n(v,p.sibling),p=i(p,E),p.return=v,v=p):(n(v,p),p=qd(E,v.mode,S),p.return=v,v=p),o(v)):n(v,p)}return T}var bs=h1(!0),f1=h1(!1),$a={},Un=si($a),ua=si($a),da=si($a);function vi(t){if(t===$a)throw Error(D(174));return t}function Up(t,e){switch(Re(da,e),Re(ua,t),Re(Un,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nh(e,t)}be(Un),Re(Un,e)}function xs(){be(Un),be(ua),be(da)}function p1(t){vi(da.current);var e=vi(Un.current),n=Nh(e,t.type);e!==n&&(Re(ua,t),Re(Un,n))}function $p(t){ua.current===t&&(be(Un),be(ua))}var Me=si(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vd=[];function Bp(){for(var t=0;t<Vd.length;t++)Vd[t]._workInProgressVersionPrimary=null;Vd.length=0}var Zl=yr.ReactCurrentDispatcher,Fd=yr.ReactCurrentBatchConfig,ki=0,je=null,Ze=null,st=null,Lc=!1,$o=!1,ha=0,RR=0;function Et(){throw Error(D(321))}function zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kn(t[n],e[n]))return!1;return!0}function qp(t,e,n,r,i,s){if(ki=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zl.current=t===null||t.memoizedState===null?bR:xR,t=n(r,i),$o){s=0;do{if($o=!1,ha=0,25<=s)throw Error(D(301));s+=1,st=Ze=null,e.updateQueue=null,Zl.current=NR,t=n(r,i)}while($o)}if(Zl.current=Vc,e=Ze!==null&&Ze.next!==null,ki=0,st=Ze=je=null,Lc=!1,e)throw Error(D(300));return t}function Hp(){var t=ha!==0;return ha=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?je.memoizedState=st=t:st=st.next=t,st}function pn(){if(Ze===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=st===null?je.memoizedState:st.next;if(e!==null)st=e,Ze=t;else{if(t===null)throw Error(D(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?je.memoizedState=st=t:st=st.next=t}return st}function fa(t,e){return typeof e=="function"?e(t):e}function Ud(t){var e=pn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((ki&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,je.lanes|=u,Ai|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,kn(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,Ai|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $d(t){var e=pn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);kn(s,e.memoizedState)||(qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function m1(){}function g1(t,e){var n=je,r=pn(),i=e(),s=!kn(r.memoizedState,i);if(s&&(r.memoizedState=i,qt=!0),r=r.queue,Wp(_1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,pa(9,v1.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(D(349));ki&30||y1(n,e,i)}return i}function y1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v1(t,e,n,r){e.value=n,e.getSnapshot=r,E1(e)&&S1(t)}function _1(t,e,n){return n(function(){E1(e)&&S1(t)})}function E1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kn(t,n)}catch{return!0}}function S1(t){var e=ur(t,1);e!==null&&In(e,t,1,-1)}function Ty(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},e.queue=t,t=t.dispatch=AR.bind(null,je,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function T1(){return pn().memoizedState}function ec(t,e,n,r){var i=Nn();je.flags|=t,i.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function ku(t,e,n,r){var i=pn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&zp(r,o.deps)){i.memoizedState=pa(e,n,s,r);return}}je.flags|=t,i.memoizedState=pa(1|e,n,s,r)}function wy(t,e){return ec(8390656,8,t,e)}function Wp(t,e){return ku(2048,8,t,e)}function w1(t,e){return ku(4,2,t,e)}function C1(t,e){return ku(4,4,t,e)}function P1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function R1(t,e,n){return n=n!=null?n.concat([t]):null,ku(4,4,P1.bind(null,e,t),n)}function Gp(){}function I1(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k1(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function A1(t,e,n){return ki&21?(kn(n,e)||(n=N_(),je.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function IR(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Fd.transition;Fd.transition={};try{t(!1),e()}finally{_e=n,Fd.transition=r}}function b1(){return pn().memoizedState}function kR(t,e,n){var r=Gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},x1(t))N1(e,n);else if(n=l1(t,e,n,r),n!==null){var i=Lt();In(n,t,r,i),O1(n,e,r)}}function AR(t,e,n){var r=Gr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(x1(t))N1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,kn(l,o)){var a=e.interleaved;a===null?(i.next=i,Vp(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=l1(t,e,i,r),n!==null&&(i=Lt(),In(n,t,r,i),O1(n,e,r))}}function x1(t){var e=t.alternate;return t===je||e!==null&&e===je}function N1(t,e){$o=Lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function O1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cp(t,n)}}var Vc={readContext:fn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},bR={readContext:fn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:wy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ec(4194308,4,P1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return ec(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kR.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Ty,useDebugValue:Gp,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Ty(!1),e=t[0];return t=IR.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=Nn();if(Ne){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),ot===null)throw Error(D(349));ki&30||y1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wy(_1.bind(null,r,s,t),[t]),r.flags|=2048,pa(9,v1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=ot.identifierPrefix;if(Ne){var n=Zn,r=Xn;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xR={readContext:fn,useCallback:I1,useContext:fn,useEffect:Wp,useImperativeHandle:R1,useInsertionEffect:w1,useLayoutEffect:C1,useMemo:k1,useReducer:Ud,useRef:T1,useState:function(){return Ud(fa)},useDebugValue:Gp,useDeferredValue:function(t){var e=pn();return A1(e,Ze.memoizedState,t)},useTransition:function(){var t=Ud(fa)[0],e=pn().memoizedState;return[t,e]},useMutableSource:m1,useSyncExternalStore:g1,useId:b1,unstable_isNewReconciler:!1},NR={readContext:fn,useCallback:I1,useContext:fn,useEffect:Wp,useImperativeHandle:R1,useInsertionEffect:w1,useLayoutEffect:C1,useMemo:k1,useReducer:$d,useRef:T1,useState:function(){return $d(fa)},useDebugValue:Gp,useDeferredValue:function(t){var e=pn();return Ze===null?e.memoizedState=t:A1(e,Ze.memoizedState,t)},useTransition:function(){var t=$d(fa)[0],e=pn().memoizedState;return[t,e]},useMutableSource:m1,useSyncExternalStore:g1,useId:b1,unstable_isNewReconciler:!1};function Ns(t,e){try{var n="",r=e;do n+=oP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OR=typeof WeakMap=="function"?WeakMap:Map;function D1(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,hf=r),tf(t,e)},n}function M1(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GR.bind(null,t,e,n),e.then(t,t))}function Py(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ry(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var DR=yr.ReactCurrentOwner,qt=!1;function Mt(t,e,n,r){e.child=t===null?f1(e,null,n,r):bs(e,t.child,n,r)}function Iy(t,e,n,r,i){n=n.render;var s=e.ref;return vs(e,i),r=qp(t,e,n,r,s,i),n=Hp(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ne&&n&&Np(e),e.flags|=1,Mt(t,e,r,i),e.child)}function ky(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!tm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,j1(t,e,s,r,i)):(t=ic(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:oa,n(o,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=Kr(s,r),t.ref=e.ref,t.return=e,e.child=t}function j1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(oa(s,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,dr(t,e,i)}return nf(t,e,n,r,i)}function L1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(ds,Qt),Qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(ds,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Re(ds,Qt),Qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Re(ds,Qt),Qt|=r;return Mt(t,e,i,n),e.child}function V1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,i){var s=Wt(n)?Ri:xt.current;return s=ks(e,s),vs(e,i),n=qp(t,e,n,r,s,i),r=Hp(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Ne&&r&&Np(e),e.flags|=1,Mt(t,e,n,i),e.child)}function Ay(t,e,n,r,i){if(Wt(n)){var s=!0;bc(e)}else s=!1;if(vs(e,i),e.stateNode===null)tc(t,e),d1(e,n,r),ef(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=Wt(n)?Ri:xt.current,c=ks(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Ey(e,o,r,c),br=!1;var f=e.memoizedState;o.state=f,Mc(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Ht.current||br?(typeof u=="function"&&(Zh(e,n,u,r),a=e.memoizedState),(l=br||_y(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,c1(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Sn(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=fn(a):(a=Wt(n)?Ri:xt.current,a=ks(e,a));var y=n.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Ey(e,o,r,a),br=!1,f=e.memoizedState,o.state=f,Mc(e,r,o,i);var g=e.memoizedState;l!==d||f!==g||Ht.current||br?(typeof y=="function"&&(Zh(e,n,y,r),g=e.memoizedState),(c=br||_y(e,n,c,r,f,g,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,s,i)}function rf(t,e,n,r,i,s){V1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&py(e,n,!1),dr(t,e,s);r=e.stateNode,DR.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bs(e,t.child,null,s),e.child=bs(e,null,l,s)):Mt(t,e,l,s),e.memoizedState=r.state,i&&py(e,n,!0),e.child}function F1(t){var e=t.stateNode;e.pendingContext?fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fy(t,e.context,!1),Up(t,e.containerInfo)}function by(t,e,n,r,i){return As(),Dp(i),e.flags|=256,Mt(t,e,n,r),e.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function of(t){return{baseLanes:t,cachePool:null,transitions:null}}function U1(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Re(Me,i&1),t===null)return Yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xu(o,r,0,null),t=wi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=of(n),e.memoizedState=sf,t):Kp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return MR(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Kr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Kr(l,s):(s=wi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?of(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=sf,r}return s=t.child,t=s.sibling,r=Kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kp(t,e){return e=xu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&Dp(r),bs(e,t.child,null,n),t=Kp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bd(Error(D(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xu({mode:"visible",children:r.children},i,0,null),s=wi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bs(e,t.child,null,o),e.child.memoizedState=of(o),e.memoizedState=sf,s);if(!(e.mode&1))return Al(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(D(419)),r=Bd(s,r,void 0),Al(t,e,o,r)}if(l=(o&t.childLanes)!==0,qt||l){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ur(t,i),In(r,t,i,-1))}return em(),r=Bd(Error(D(421))),Al(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yt=qr(i.nextSibling),Xt=e,Ne=!0,wn=null,t!==null&&(sn[on++]=Xn,sn[on++]=Zn,sn[on++]=Ii,Xn=t.id,Zn=t.overflow,Ii=e),e=Kp(e,r.children),e.flags|=4096,e)}function xy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xh(t.return,e,n)}function zd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xy(t,n,e);else if(t.tag===19)xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zd(e,!0,n,null,s);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jR(t,e,n){switch(e.tag){case 3:F1(e),As();break;case 5:p1(e);break;case 1:Wt(e.type)&&bc(e);break;case 4:Up(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Re(Oc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Re(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?U1(t,e,n):(Re(Me,Me.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Re(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,L1(t,e,n)}return dr(t,e,n)}var B1,af,z1,q1;B1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};z1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vi(Un.current);var s=null;switch(n){case"input":i=kh(t,i),r=kh(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=xh(t,i),r=xh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kc)}Oh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zo.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ke("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};q1=function(t,e,n,r){n!==r&&(e.flags|=4)};function go(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LR(t,e,n){var r=e.pendingProps;switch(Op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Wt(e.type)&&Ac(),St(e),null;case 3:return r=e.stateNode,xs(),be(Ht),be(xt),Bp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(mf(wn),wn=null))),af(t,e),St(e),null;case 5:$p(e);var i=vi(da.current);if(n=e.type,t!==null&&e.stateNode!=null)z1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return St(e),null}if(t=vi(Un.current),Il(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Dn]=e,r[ca]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<Ro.length;i++)ke(Ro[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Ug(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":Bg(r,s),ke("invalid",r)}Oh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),i=["children",""+l]):Zo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":vl(r),$g(r,s,!0);break;case"textarea":vl(r),zg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Dn]=e,t[ca]=r,B1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dh(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ro.length;i++)ke(Ro[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":Ug(t,r),i=kh(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Bg(t,r),i=xh(t,r),ke("invalid",t);break;default:i=r}Oh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?E_(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&v_(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ea(t,a):typeof a=="number"&&ea(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zo.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ke("scroll",t):a!=null&&vp(t,s,a,o))}switch(n){case"input":vl(t),$g(t,r,!1);break;case"textarea":vl(t),zg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ps(t,!!r.multiple,s,!1):r.defaultValue!=null&&ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=kc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)q1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=vi(da.current),vi(Un.current),Il(e)){if(r=e.stateNode,n=e.memoizedProps,r[Dn]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Dn]=e,e.stateNode=r}return St(e),null;case 13:if(be(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Yt!==null&&e.mode&1&&!(e.flags&128))a1(),As(),e.flags|=98560,s=!1;else if(s=Il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Dn]=e}else As(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else wn!==null&&(mf(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?tt===0&&(tt=3):em())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return xs(),af(t,e),t===null&&aa(e.stateNode.containerInfo),St(e),null;case 10:return Lp(e.type._context),St(e),null;case 17:return Wt(e.type)&&Ac(),St(e),null;case 19:if(be(Me),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)go(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,go(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>Os&&(e.flags|=128,r=!0,go(s,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),go(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ne)return St(e),null}else 2*We()-s.renderingStartTime>Os&&n!==1073741824&&(e.flags|=128,r=!0,go(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Me.current,Re(Me,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Zp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function VR(t,e){switch(Op(e),e.tag){case 1:return Wt(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xs(),be(Ht),be(xt),Bp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $p(e),null;case 13:if(be(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));As()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Me),null;case 4:return xs(),null;case 10:return Lp(e.type._context),null;case 22:case 23:return Zp(),null;case 24:return null;default:return null}}var bl=!1,Pt=!1,FR=typeof WeakSet=="function"?WeakSet:Set,U=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Ny=!1;function UR(t,e){if(qh=Pc,t=K_(),xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hh={focusedElem:t,selectionRange:n},Pc=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var _=g.memoizedProps,T=g.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:Sn(e.type,_),T);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(S){Fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return g=Ny,Ny=!1,g}function Bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lf(e,n,s)}i=i.next}while(i!==r)}}function Au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H1(t){var e=t.alternate;e!==null&&(t.alternate=null,H1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dn],delete e[ca],delete e[Kh],delete e[TR],delete e[wR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function W1(t){return t.tag===5||t.tag===3||t.tag===4}function Oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||W1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kc));else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var ct=null,Tn=!1;function Rr(t,e,n){for(n=n.child;n!==null;)G1(t,e,n),n=n.sibling}function G1(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Su,n)}catch{}switch(n.tag){case 5:Pt||us(n,e);case 6:var r=ct,i=Tn;ct=null,Rr(t,e,n),ct=r,Tn=i,ct!==null&&(Tn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(Tn?(t=ct,n=n.stateNode,t.nodeType===8?jd(t.parentNode,n):t.nodeType===1&&jd(t,n),ia(t)):jd(ct,n.stateNode));break;case 4:r=ct,i=Tn,ct=n.stateNode.containerInfo,Tn=!0,Rr(t,e,n),ct=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lf(n,e,o),i=i.next}while(i!==r)}Rr(t,e,n);break;case 1:if(!Pt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,Rr(t,e,n),Pt=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function Dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FR),e.forEach(function(r){var i=JR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,Tn=!1;break e;case 3:ct=l.stateNode.containerInfo,Tn=!0;break e;case 4:ct=l.stateNode.containerInfo,Tn=!0;break e}l=l.return}if(ct===null)throw Error(D(160));G1(s,o,i),ct=null,Tn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Fe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)K1(e,t),e=e.sibling}function K1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),xn(t),r&4){try{Bo(3,t,t.return),Au(3,t)}catch(_){Fe(t,t.return,_)}try{Bo(5,t,t.return)}catch(_){Fe(t,t.return,_)}}break;case 1:En(e,t),xn(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(En(e,t),xn(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var i=t.stateNode;try{ea(i,"")}catch(_){Fe(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&m_(i,s),Dh(l,o);var c=Dh(l,s);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?E_(i,d):u==="dangerouslySetInnerHTML"?v_(i,d):u==="children"?ea(i,d):vp(i,u,d,c)}switch(l){case"input":Ah(i,s);break;case"textarea":g_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?ps(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?ps(i,!!s.multiple,s.defaultValue,!0):ps(i,!!s.multiple,s.multiple?[]:"",!1))}i[ca]=s}catch(_){Fe(t,t.return,_)}}break;case 6:if(En(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Fe(t,t.return,_)}}break;case 3:if(En(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(e.containerInfo)}catch(_){Fe(t,t.return,_)}break;case 4:En(e,t),xn(t);break;case 13:En(e,t),xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Yp=We())),r&4&&Dy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Pt=(c=Pt)||u,En(e,t),Pt=c):En(e,t),xn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(U=t,u=t.child;u!==null;){for(d=U=u;U!==null;){switch(f=U,y=f.child,f.tag){case 0:case 11:case 14:case 15:Bo(4,f,f.return);break;case 1:us(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(_){Fe(r,n,_)}}break;case 5:us(f,f.return);break;case 22:if(f.memoizedState!==null){jy(d);continue}}y!==null?(y.return=f,U=y):jy(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=__("display",o))}catch(_){Fe(t,t.return,_)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){Fe(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:En(e,t),xn(t),r&4&&Dy(t);break;case 21:break;default:En(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(W1(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ea(i,""),r.flags&=-33);var s=Oy(t);df(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Oy(t);uf(t,l,o);break;default:throw Error(D(161))}}catch(a){Fe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $R(t,e,n){U=t,J1(t)}function J1(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Pt;l=bl;var c=Pt;if(bl=o,(Pt=a)&&!c)for(U=i;U!==null;)o=U,a=o.child,o.tag===22&&o.memoizedState!==null?Ly(i):a!==null?(a.return=o,U=a):Ly(i);for(;s!==null;)U=s,J1(s),s=s.sibling;U=i,bl=l,Pt=c}My(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):My(t)}}function My(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pt||Au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ia(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Pt||e.flags&512&&cf(e)}catch(f){Fe(e,e.return,f)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function jy(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Ly(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Au(4,e)}catch(a){Fe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Fe(e,i,a)}}var s=e.return;try{cf(e)}catch(a){Fe(e,s,a)}break;case 5:var o=e.return;try{cf(e)}catch(a){Fe(e,o,a)}}}catch(a){Fe(e,e.return,a)}if(e===t){U=null;break}var l=e.sibling;if(l!==null){l.return=e.return,U=l;break}U=e.return}}var BR=Math.ceil,Fc=yr.ReactCurrentDispatcher,Jp=yr.ReactCurrentOwner,un=yr.ReactCurrentBatchConfig,fe=0,ot=null,Ye=null,ft=0,Qt=0,ds=si(0),tt=0,ma=null,Ai=0,bu=0,Qp=0,zo=null,zt=null,Yp=0,Os=1/0,Jn=null,Uc=!1,hf=null,Wr=null,xl=!1,Vr=null,$c=0,qo=0,ff=null,nc=-1,rc=0;function Lt(){return fe&6?We():nc!==-1?nc:nc=We()}function Gr(t){return t.mode&1?fe&2&&ft!==0?ft&-ft:PR.transition!==null?(rc===0&&(rc=N_()),rc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:F_(t.type)),t):1}function In(t,e,n,r){if(50<qo)throw qo=0,ff=null,Error(D(185));Va(t,n,r),(!(fe&2)||t!==ot)&&(t===ot&&(!(fe&2)&&(bu|=n),tt===4&&Nr(t,ft)),Gt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Os=We()+500,Ru&&oi()))}function Gt(t,e){var n=t.callbackNode;PP(t,e);var r=Cc(t,t===ot?ft:0);if(r===0)n!==null&&Wg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wg(n),e===1)t.tag===0?CR(Vy.bind(null,t)):i1(Vy.bind(null,t)),ER(function(){!(fe&6)&&oi()}),n=null;else{switch(O_(r)){case 1:n=wp;break;case 4:n=b_;break;case 16:n=wc;break;case 536870912:n=x_;break;default:n=wc}n=rE(n,Q1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q1(t,e){if(nc=-1,rc=0,fe&6)throw Error(D(327));var n=t.callbackNode;if(_s()&&t.callbackNode!==n)return null;var r=Cc(t,t===ot?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bc(t,r);else{e=r;var i=fe;fe|=2;var s=X1();(ot!==t||ft!==e)&&(Jn=null,Os=We()+500,Ti(t,e));do try{HR();break}catch(l){Y1(t,l)}while(1);jp(),Fc.current=s,fe=i,Ye!==null?e=0:(ot=null,ft=0,e=tt)}if(e!==0){if(e===2&&(i=Fh(t),i!==0&&(r=i,e=pf(t,i))),e===1)throw n=ma,Ti(t,0),Nr(t,r),Gt(t,We()),n;if(e===6)Nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!zR(i)&&(e=Bc(t,r),e===2&&(s=Fh(t),s!==0&&(r=s,e=pf(t,s))),e===1))throw n=ma,Ti(t,0),Nr(t,r),Gt(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:pi(t,zt,Jn);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=Yp+500-We(),10<e)){if(Cc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gh(pi.bind(null,t,zt,Jn),e);break}pi(t,zt,Jn);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BR(r/1960))-r,10<r){t.timeoutHandle=Gh(pi.bind(null,t,zt,Jn),r);break}pi(t,zt,Jn);break;case 5:pi(t,zt,Jn);break;default:throw Error(D(329))}}}return Gt(t,We()),t.callbackNode===n?Q1.bind(null,t):null}function pf(t,e){var n=zo;return t.current.memoizedState.isDehydrated&&(Ti(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=zt,zt=n,e!==null&&mf(e)),t}function mf(t){zt===null?zt=t:zt.push.apply(zt,t)}function zR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!kn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Qp,e&=~bu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function Vy(t){if(fe&6)throw Error(D(327));_s();var e=Cc(t,0);if(!(e&1))return Gt(t,We()),null;var n=Bc(t,e);if(t.tag!==0&&n===2){var r=Fh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=ma,Ti(t,0),Nr(t,e),Gt(t,We()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pi(t,zt,Jn),Gt(t,We()),null}function Xp(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Os=We()+500,Ru&&oi())}}function bi(t){Vr!==null&&Vr.tag===0&&!(fe&6)&&_s();var e=fe;fe|=1;var n=un.transition,r=_e;try{if(un.transition=null,_e=1,t)return t()}finally{_e=r,un.transition=n,fe=e,!(fe&6)&&oi()}}function Zp(){Qt=ds.current,be(ds)}function Ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_R(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(Op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ac();break;case 3:xs(),be(Ht),be(xt),Bp();break;case 5:$p(r);break;case 4:xs();break;case 13:be(Me);break;case 19:be(Me);break;case 10:Lp(r.type._context);break;case 22:case 23:Zp()}n=n.return}if(ot=t,Ye=t=Kr(t.current,null),ft=Qt=e,tt=0,ma=null,Qp=bu=Ai=0,zt=zo=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}yi=null}return t}function Y1(t,e){do{var n=Ye;try{if(jp(),Zl.current=Vc,Lc){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lc=!1}if(ki=0,st=Ze=je=null,$o=!1,ha=0,Jp.current=null,n===null||n.return===null){tt=1,ma=e,Ye=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ft,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=Py(o);if(y!==null){y.flags&=-257,Ry(y,o,l,s,e),y.mode&1&&Cy(s,c,e),e=y,a=c;var g=e.updateQueue;if(g===null){var _=new Set;_.add(a),e.updateQueue=_}else g.add(a);break e}else{if(!(e&1)){Cy(s,c,e),em();break e}a=Error(D(426))}}else if(Ne&&l.mode&1){var T=Py(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Ry(T,o,l,s,e),Dp(Ns(a,l));break e}}s=a=Ns(a,l),tt!==4&&(tt=2),zo===null?zo=[s]:zo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=D1(s,a,e);yy(s,v);break e;case 1:l=a;var p=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Wr===null||!Wr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=M1(s,l,e);yy(s,S);break e}}s=s.return}while(s!==null)}eE(n)}catch(P){e=P,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function X1(){var t=Fc.current;return Fc.current=Vc,t===null?Vc:t}function em(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(Ai&268435455)&&!(bu&268435455)||Nr(ot,ft)}function Bc(t,e){var n=fe;fe|=2;var r=X1();(ot!==t||ft!==e)&&(Jn=null,Ti(t,e));do try{qR();break}catch(i){Y1(t,i)}while(1);if(jp(),fe=n,Fc.current=r,Ye!==null)throw Error(D(261));return ot=null,ft=0,tt}function qR(){for(;Ye!==null;)Z1(Ye)}function HR(){for(;Ye!==null&&!gP();)Z1(Ye)}function Z1(t){var e=nE(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?eE(t):Ye=e,Jp.current=null}function eE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VR(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ye=null;return}}else if(n=LR(n,e,Qt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);tt===0&&(tt=5)}function pi(t,e,n){var r=_e,i=un.transition;try{un.transition=null,_e=1,WR(t,e,n,r)}finally{un.transition=i,_e=r}return null}function WR(t,e,n,r){do _s();while(Vr!==null);if(fe&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RP(t,s),t===ot&&(Ye=ot=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,rE(wc,function(){return _s(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=un.transition,un.transition=null;var o=_e;_e=1;var l=fe;fe|=4,Jp.current=null,UR(t,n),K1(n,t),hR(Hh),Pc=!!qh,Hh=qh=null,t.current=n,$R(n),yP(),fe=l,_e=o,un.transition=s}else t.current=n;if(xl&&(xl=!1,Vr=t,$c=i),s=t.pendingLanes,s===0&&(Wr=null),EP(n.stateNode),Gt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Uc)throw Uc=!1,t=hf,hf=null,t;return $c&1&&t.tag!==0&&_s(),s=t.pendingLanes,s&1?t===ff?qo++:(qo=0,ff=t):qo=0,oi(),null}function _s(){if(Vr!==null){var t=O_($c),e=un.transition,n=_e;try{if(un.transition=null,_e=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,$c=0,fe&6)throw Error(D(331));var i=fe;for(fe|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(U=c;U!==null;){var u=U;switch(u.tag){case 0:case 11:case 15:Bo(8,u,s)}var d=u.child;if(d!==null)d.return=u,U=d;else for(;U!==null;){u=U;var f=u.sibling,y=u.return;if(H1(u),u===c){U=null;break}if(f!==null){f.return=y,U=f;break}U=y}}}var g=s.alternate;if(g!==null){var _=g.child;if(_!==null){g.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bo(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,U=v;break e}U=s.return}}var p=t.current;for(U=p;U!==null;){o=U;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,U=E;else e:for(o=p;U!==null;){if(l=U,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Au(9,l)}}catch(P){Fe(l,l.return,P)}if(l===o){U=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,U=S;break e}U=l.return}}if(fe=i,oi(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Su,t)}catch{}r=!0}return r}finally{_e=n,un.transition=e}}return!1}function Fy(t,e,n){e=Ns(n,e),e=D1(t,e,1),t=Hr(t,e,1),e=Lt(),t!==null&&(Va(t,1,e),Gt(t,e))}function Fe(t,e,n){if(t.tag===3)Fy(t,t,n);else for(;e!==null;){if(e.tag===3){Fy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=Ns(n,t),t=M1(e,t,1),e=Hr(e,t,1),t=Lt(),e!==null&&(Va(e,1,t),Gt(e,t));break}}e=e.return}}function GR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>We()-Yp?Ti(t,0):Qp|=n),Gt(t,e)}function tE(t,e){e===0&&(t.mode&1?(e=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):e=1);var n=Lt();t=ur(t,e),t!==null&&(Va(t,e,n),Gt(t,n))}function KR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tE(t,n)}function JR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),tE(t,n)}var nE;nE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,jR(t,e,n);qt=!!(t.flags&131072)}else qt=!1,Ne&&e.flags&1048576&&s1(e,Nc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tc(t,e),t=e.pendingProps;var i=ks(e,xt.current);vs(e,n),i=qp(null,e,r,t,i,n);var s=Hp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(s=!0,bc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fp(e),i.updater=Iu,e.stateNode=i,i._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,s,n)):(e.tag=0,Ne&&s&&Np(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YR(r),t=Sn(r,t),i){case 0:e=nf(null,e,r,t,n);break e;case 1:e=Ay(null,e,r,t,n);break e;case 11:e=Iy(null,e,r,t,n);break e;case 14:e=ky(null,e,r,Sn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),nf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Ay(t,e,r,i,n);case 3:e:{if(F1(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,c1(t,e),Mc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ns(Error(D(423)),e),e=by(t,e,r,n,i);break e}else if(r!==i){i=Ns(Error(D(424)),e),e=by(t,e,r,n,i);break e}else for(Yt=qr(e.stateNode.containerInfo.firstChild),Xt=e,Ne=!0,wn=null,n=f1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(As(),r===i){e=dr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return p1(e),t===null&&Yh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wh(r,i)?o=null:s!==null&&Wh(r,s)&&(e.flags|=32),V1(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Yh(e),null;case 13:return U1(t,e,n);case 4:return Up(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bs(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Iy(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Re(Oc,r._currentValue),r._currentValue=o,s!==null)if(kn(s.value,o)){if(s.children===i.children&&!Ht.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=ir(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Xh(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Xh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vs(e,n),i=fn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=Sn(r,e.pendingProps),i=Sn(r.type,i),ky(t,e,r,i,n);case 15:return j1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),tc(t,e),e.tag=1,Wt(r)?(t=!0,bc(e)):t=!1,vs(e,n),d1(e,r,i),ef(e,r,i,n),rf(null,e,r,!0,t,n);case 19:return $1(t,e,n);case 22:return L1(t,e,n)}throw Error(D(156,e.tag))};function rE(t,e){return A_(t,e)}function QR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new QR(t,e,n,r)}function tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YR(t){if(typeof t=="function")return tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ep)return 11;if(t===Sp)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ic(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return wi(n.children,i,s,e);case _p:o=8,i|=8;break;case Ch:return t=cn(12,n,e,i|2),t.elementType=Ch,t.lanes=s,t;case Ph:return t=cn(13,n,e,i),t.elementType=Ph,t.lanes=s,t;case Rh:return t=cn(19,n,e,i),t.elementType=Rh,t.lanes=s,t;case h_:return xu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u_:o=10;break e;case d_:o=9;break e;case Ep:o=11;break e;case Sp:o=14;break e;case Ar:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function wi(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function xu(t,e,n,r){return t=cn(22,t,r,e),t.elementType=h_,t.lanes=n,t.stateNode={isHidden:!1},t}function qd(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Hd(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pd(0),this.expirationTimes=Pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nm(t,e,n,r,i,s,o,l,a){return t=new XR(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fp(s),t}function ZR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iE(t){if(!t)return ei;t=t._reactInternals;e:{if(Fi(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Wt(n))return r1(t,n,e)}return e}function sE(t,e,n,r,i,s,o,l,a){return t=nm(n,r,!0,t,i,s,o,l,a),t.context=iE(null),n=t.current,r=Lt(),i=Gr(n),s=ir(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,Va(t,i,r),Gt(t,r),t}function Nu(t,e,n,r){var i=e.current,s=Lt(),o=Gr(i);return n=iE(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,o),t!==null&&(In(t,i,o,s),Xl(t,i,o)),o}function zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rm(t,e){Uy(t,e),(t=t.alternate)&&Uy(t,e)}function eI(){return null}var oE=typeof reportError=="function"?reportError:function(t){console.error(t)};function im(t){this._internalRoot=t}Ou.prototype.render=im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Nu(t,e,null,null)};Ou.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bi(function(){Nu(null,t,null,null)}),e[cr]=null}};function Ou(t){this._internalRoot=t}Ou.prototype.unstable_scheduleHydration=function(t){if(t){var e=j_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&V_(t)}};function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $y(){}function tI(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=zc(o);s.call(c)}}var o=sE(e,r,t,0,null,!1,!1,"",$y);return t._reactRootContainer=o,t[cr]=o.current,aa(t.nodeType===8?t.parentNode:t),bi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=zc(a);l.call(c)}}var a=nm(t,0,!1,null,null,!1,!1,"",$y);return t._reactRootContainer=a,t[cr]=a.current,aa(t.nodeType===8?t.parentNode:t),bi(function(){Nu(e,a,n,r)}),a}function Mu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=zc(o);l.call(a)}}Nu(e,o,t,i)}else o=tI(n,e,t,i,r);return zc(o)}D_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Po(e.pendingLanes);n!==0&&(Cp(e,n|1),Gt(e,We()),!(fe&6)&&(Os=We()+500,oi()))}break;case 13:bi(function(){var r=ur(t,1);if(r!==null){var i=Lt();In(r,t,1,i)}}),rm(t,1)}};Pp=function(t){if(t.tag===13){var e=ur(t,134217728);if(e!==null){var n=Lt();In(e,t,134217728,n)}rm(t,134217728)}};M_=function(t){if(t.tag===13){var e=Gr(t),n=ur(t,e);if(n!==null){var r=Lt();In(n,t,e,r)}rm(t,e)}};j_=function(){return _e};L_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};jh=function(t,e,n){switch(e){case"input":if(Ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pu(r);if(!i)throw Error(D(90));p_(r),Ah(r,i)}}}break;case"textarea":g_(t,n);break;case"select":e=n.value,e!=null&&ps(t,!!n.multiple,e,!1)}};w_=Xp;C_=bi;var nI={usingClientEntryPoint:!1,Events:[Ua,ss,Pu,S_,T_,Xp]},yo={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rI={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I_(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||eI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{Su=Nl.inject(rI),Fn=Nl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nI;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(e))throw Error(D(200));return ZR(t,e,null,n)};tn.createRoot=function(t,e){if(!sm(t))throw Error(D(299));var n=!1,r="",i=oE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nm(t,1,!1,null,null,n,!1,r,i),t[cr]=e.current,aa(t.nodeType===8?t.parentNode:t),new im(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=I_(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return bi(t)};tn.hydrate=function(t,e,n){if(!Du(e))throw Error(D(200));return Mu(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!sm(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=oE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sE(e,null,t,1,n??null,i,!1,s,o),t[cr]=e.current,aa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ou(e)};tn.render=function(t,e,n){if(!Du(e))throw Error(D(200));return Mu(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!Du(t))throw Error(D(40));return t._reactRootContainer?(bi(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};tn.unstable_batchedUpdates=Xp;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Du(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Mu(t,e,n,!1,r)};tn.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=tn})(eP);var By=Sh;Eh.createRoot=By.createRoot,Eh.hydrateRoot=By.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qc.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const zy="popstate";function iI(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return gf("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:aE(i)}return oI(e,n,null,t)}function Kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function om(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sI(){return Math.random().toString(36).substr(2,8)}function qy(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n,r){return n===void 0&&(n=null),qc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ju(e):e,{state:n,key:e&&e.key||r||sI()})}function aE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ju(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Fr.Pop,a=null,c=u();c==null&&(c=0,o.replaceState(qc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){l=Fr.Pop;let T=u(),v=T==null?null:T-c;c=T,a&&a({action:l,location:_.location,delta:v})}function f(T,v){l=Fr.Push;let p=gf(_.location,T,v);n&&n(p,T),c=u()+1;let E=qy(p,c),S=_.createHref(p);try{o.pushState(E,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(S)}s&&a&&a({action:l,location:_.location,delta:1})}function y(T,v){l=Fr.Replace;let p=gf(_.location,T,v);n&&n(p,T),c=u();let E=qy(p,c),S=_.createHref(p);o.replaceState(E,"",S),s&&a&&a({action:l,location:_.location,delta:0})}function g(T){let v=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof T=="string"?T:aE(T);return Kt(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let _={get action(){return l},get location(){return t(i,o)},listen(T){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(zy,d),a=T,()=>{i.removeEventListener(zy,d),a=null}},createHref(T){return e(i,T)},createURL:g,encodeLocation(T){let v=g(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:y,go(T){return o.go(T)}};return _}var Hy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hy||(Hy={}));function aI(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ju(e):e,i=uE(r.pathname||"/",n);if(i==null)return null;let s=lE(t);lI(s);let o=null;for(let l=0;o==null&&l<s.length;++l)o=yI(s[l],EI(i));return o}function lE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(Kt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Es([r,a.relativePath]),u=n.concat(a);s.children&&s.children.length>0&&(Kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lE(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mI(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of cE(s.path))i(s,o,a)}),e}function cE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=cE(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function lI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cI=/^:\w+$/,uI=3,dI=2,hI=1,fI=10,pI=-2,Wy=t=>t==="*";function mI(t,e){let n=t.split("/"),r=n.length;return n.some(Wy)&&(r+=pI),e&&(r+=dI),n.filter(i=>!Wy(i)).reduce((i,s)=>i+(cI.test(s)?uI:s===""?hI:fI),r)}function gI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function yI(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],a=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=vI({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},c);if(!u)return null;Object.assign(r,u.params);let d=l.route;s.push({params:r,pathname:Es([i,u.pathname]),pathnameBase:TI(Es([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Es([i,u.pathnameBase]))}return s}function vI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_I(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let f=l[d]||"";o=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return c[u]=SI(l[d]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _I(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),om(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,l)=>(r.push(l),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EI(t){try{return decodeURI(t)}catch(e){return om(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function SI(t,e){try{return decodeURIComponent(t)}catch(n){return om(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function uE(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Es=t=>t.join("/").replace(/\/\/+/g,"/"),TI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function wI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CI=["post","put","patch","delete"];[...CI];/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yf.apply(this,arguments)}const PI=C.createContext(null),RI=C.createContext(null),dE=C.createContext(null),Lu=C.createContext(null),Vu=C.createContext({outlet:null,matches:[],isDataRoute:!1}),hE=C.createContext(null);function am(){return C.useContext(Lu)!=null}function II(){return am()||Kt(!1),C.useContext(Lu).location}function kI(t,e){return AI(t,e)}function AI(t,e,n){am()||Kt(!1);let{navigator:r}=C.useContext(dE),{matches:i}=C.useContext(Vu),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let a=II(),c;if(e){var u;let _=typeof e=="string"?ju(e):e;l==="/"||(u=_.pathname)!=null&&u.startsWith(l)||Kt(!1),c=_}else c=a;let d=c.pathname||"/",f=l==="/"?d:d.slice(l.length)||"/",y=aI(t,{pathname:f}),g=DI(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Es([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Es([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n);return e&&g?C.createElement(Lu.Provider,{value:{location:yf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fr.Pop}},g):g}function bI(){let t=VI(),e=wI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:i},n):null,s)}const xI=C.createElement(bI,null);class NI extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?C.createElement(Vu.Provider,{value:this.props.routeContext},C.createElement(hE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OI(t){let{routeContext:e,match:n,children:r}=t,i=C.useContext(PI);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Vu.Provider,{value:e},r)}function DI(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=s.findIndex(a=>a.route.id&&(o==null?void 0:o[a.route.id]));l>=0||Kt(!1),s=s.slice(0,Math.min(s.length,l+1))}return s.reduceRight((l,a,c)=>{let u=a.route.id?o==null?void 0:o[a.route.id]:null,d=null;n&&(d=a.route.errorElement||xI);let f=e.concat(s.slice(0,c+1)),y=()=>{let g;return u?g=d:a.route.Component?g=C.createElement(a.route.Component,null):a.route.element?g=a.route.element:g=l,C.createElement(OI,{match:a,routeContext:{outlet:l,matches:f,isDataRoute:n!=null},children:g})};return n&&(a.route.ErrorBoundary||a.route.errorElement||c===0)?C.createElement(NI,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:y(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):y()},null)}var vf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vf||{});function MI(t){let e=C.useContext(RI);return e||Kt(!1),e}function jI(t){let e=C.useContext(Vu);return e||Kt(!1),e}function LI(t){let e=jI(),n=e.matches[e.matches.length-1];return n.route.id||Kt(!1),n.route.id}function VI(){var t;let e=C.useContext(hE),n=MI(vf.UseRouteError),r=LI(vf.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Qi(t){Kt(!1)}function FI(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fr.Pop,navigator:s,static:o=!1}=t;am()&&Kt(!1);let l=e.replace(/^\/*/,"/"),a=C.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof r=="string"&&(r=ju(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:y="default"}=r,g=C.useMemo(()=>{let _=uE(c,l);return _==null?null:{location:{pathname:_,search:u,hash:d,state:f,key:y},navigationType:i}},[l,c,u,d,f,y,i]);return g==null?null:C.createElement(dE.Provider,{value:a},C.createElement(Lu.Provider,{children:n,value:g}))}function UI(t){let{children:e,location:n}=t;return kI(_f(e),n)}new Promise(()=>{});function _f(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){n.push.apply(n,_f(r.props.children,s));return}r.type!==Qi&&Kt(!1),!r.props.index||!r.props.children||Kt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_f(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const $I="startTransition",Gy=GC[$I];function BI(t){let{basename:e,children:n,future:r,window:i}=t,s=C.useRef();s.current==null&&(s.current=iI({window:i,v5Compat:!0}));let o=s.current,[l,a]=C.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=C.useCallback(d=>{c&&Gy?Gy(()=>a(d)):a(d)},[a,c]);return C.useLayoutEffect(()=>o.listen(u),[o,u]),C.createElement(FI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o})}var Ky;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Ky||(Ky={}));var Jy;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jy||(Jy={}));function zI(){return C.useEffect(()=>{document.title="Monopoly Gallery"},[]),h.jsx("main",{children:h.jsx("div",{className:"gallery-main",children:["1.PNG","2.PNG","3.PNG","4.PNG","5.PNG","6.PNG","7.PNG","8.PNG"].map(t=>h.jsx("img",{src:"/gallery/"+t,onClick:()=>{document.location.href="/gallery/"+t}}))})})}let Qy=class{constructor(e,n){ve(this,"id");ve(this,"username");ve(this,"icon");ve(this,"position");ve(this,"balance");ve(this,"properties");ve(this,"isInJail");ve(this,"jailTurnsRemaining");ve(this,"getoutCards");ve(this,"ready");ve(this,"positions");this.id=e,this.username=n,this.icon=-1,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0,this.ready=!1,this.positions={x:0,y:0}}recieveJson(e){return this.username=e.username,this.position=e.position,this.icon=e.icon,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards,this}toJson(){return{balance:this.balance,icon:this.icon,id:this.id,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,position:this.position,properties:this.properties,username:this.username,getoutCards:this.getoutCards}}get color(){switch(this.icon){case 0:return"#E0115F";case 1:return"#4169e1";case 2:return"#50C878";case 3:return"#FFC000";case 5:return"#FF7F50";case 4:default:return""}}};const qI="https://coder-1t45.github.io/Monopoly/assets/players-69e481c3.png",Yy="https://coder-1t45.github.io/Monopoly/assets/chat-98a8e3f3.png",HI="https://coder-1t45.github.io/Monopoly/assets/chat_new-733d0bcc.png",WI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAjpQTFRFAAAA509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P/m/HAgAAAL50Uk5TABmAwNbYyZApXvX//H8BhTam5vvli0I8oud1DYTvgxQd+p4n/qwzukHITwLUXATfagnoeA/whhb3lB+hKq+9RMpRXwXhbQrqexDyiRj4liGkLLI5R81VA9liBuPrsdAONO0Hcodh/flD9OQg2xfDtZVxUPM1JKXs2s/CtIFvQKgM1x5GVxxokbniKEVWaX6Tp7gLEziInWQVVBIjIt6CWL96dO5OSUtmu7yrbhE9t5cajXfp0U0uJZySfGdSzLBMfx0AAATRSURBVHic7d35fxNFGAbwFxoK9AloFQtigUYDWCqI9aBYMAKCWiwoVpCzgEoFTzwIh1qqiOCJijfgfVRRvG//N7eNNWn2SrKTnbzv531+ntl5v712dnYmJdJoNKVkzNi6xDh7qR8/wYxjYgMsJzlpsgmHbcZQzovuGGP9+zGc8yNDxtom5NIYGVJnm5DLBZEhCduEXC6MDBlnm5BLUiEKqU4UEgCZclHT1FgyrcoQ4OLpl0S+bglprjoEmDFzloFKQxIHBGgY3xK91ODEAwFSl15moNqAxAUB0rPnGKjXN/FBnMy93MQzj3dihQCt89oMFO2VmCHAFfMXGCjbndghwJULrzJQeHEsQID2q68xUProWIEA1163yEDxhbEEAToWX2+g/HysQZwH0s4lBgAjsQhxsjT6ws1I7EKAGzKG7pG2IcCNy4zcI+1DgMTyFTIgwE0rV8mAADffcqsMCNC1+jYZEKB7zVoZEKeC2++QAXGy7k4hEKCup5J7ZA1CgLvWb5ABAe7euEkGBNgsBQKFKEQhCvHK9IKuWzhDphZ03coZ0rYt37XHp01vyXMfixDa3jHSs9OvSaaZA4QyO/5z7PRtgXs4QGjRvYnuLVv9fq6GIbiPAyQ0DmTXMiEQ9N0vBILdpSzTcoBgRwlr5ywg2POAEAgefEgIBNvCljW5QPBwyFozGwgeCX4BwAeCxsC3MowgeDRoKswJgplSINgrBYLlUiDJx4RA0NckBILHn7ALebK5ouxzj5L1PpIVF8T9pa04ezz39jCEYL/XVJgjBAc8dsGxhOCgeyrME4JDrqkwUwj2FU+FuUKwuGgqzBaCp6RA8LQUCCZKgSTnCYGg+xkhEHRtFwLBaiGQ/vyeJNaQuQUbkjhD6g8XDMAYMjDqrCRfyOZnRw3AFlL86M4V4nqvyBSSeq54AJ6Q9BHXADwhC90DsIRM8hiAI6T4KZcrpN/zFVxckOePVpQX3KMc897xzW41ftQEizFkwO/DKJhBjrf4teQFyb7o25IVJGjjFidI6qWAlowg6ZeDWjKCvBLYkg/k1eCWbCCvhWwu5wI5EXbynAnk9dAjdTwgrW+EtmQBSbwZ3pIDxH+CxQsSMMFiBdntsx2otiAn3+p/+53eIEgqU9qVrELePTTcL/uePyS9vsRr2YS8PzDS0/fUTiZ4glUjkPyusu4PfJr4Hr6qJcipgq5ryuxbU5CjBV1Pc4acKeia4gwRc+hYIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhZSdD8vL0pqFRIhCFFKlKOT/DIQPEkc6IkM+sk3IpT4y5GPbhFw+iQyZ9altw1DaA3Y6lZrPdtlWOL/qAZ/4W3o+b7ftyH5hwkF0+MvGrwbzOTCj0oIGK8rX35w143Dn2+8qg1SrngiZMzstA0K0ZFpSBoTo1Lk+GRCi739okAFxbpdnyvkTZrvawPT++JMMCNGqlcdlQIg2bdwvA0K04cjPMiBEk39plQFxKE2DMiBOTq4TAiH69UTA44vt4srLb7+nZECIWv7okAEZ+o80XTIgRGf/zMqAOA/Ie6fIgBDt/Ou0DAjRgvkJGRCitr//kQFxZi49B2VAKL98ZLsOA8ktH9muwkgmdCZlQIjWnrNdgUaj8c6/sjbbOODJyXwAAAAASUVORK5CYII=",GI="https://coder-1t45.github.io/Monopoly/assets/proprety-ed9394e1.png",KI="https://coder-1t45.github.io/Monopoly/assets/settings-ec1fd821.png",JI="https://coder-1t45.github.io/Monopoly/assets/icon-96ad3b33.png",lm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYCAMAAADS+I/aAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGxQTFRFAAAAoM6mW7BnVK1hdLp+1enX7fbuRqdUL6BCOKJJNKFGHpw1qdOu6PPqPaRNI5054vDkKp8/KJ48mMqf0OfTvt3CkMeXuNq9isSSrdSyf7+IeryDbbd3YbJtMaFE3+/iyePNSapYrdWyxuHJWHk5egAAACR0Uk5TAP//////IP///////3D//9D/////////////////////////OqkGVgAABKFJREFUeJzt3dFW4jAUheGiAm3RFCqIjgIq7/+Og+OoUJImTXLaHdn/tXblW+iyx5SQZUy00dX1zXjoRfTRZJoXRTm7HXod8t2pQn1UjYZeiXTz8lP6+63jxZdUqfp+6NVItqzVUb/ZuqrUSfVDl+9WDkmtvGvrWXNl9WOHb0+I+lSdL23RwZoOdaSRHqx/nC+QDPWh1i/O3ZoK9c/CtLr8xvESiVCfc/PyXK1pUF9apM7WJKibbfsC8xeXq6RAvS5tK3SyJkCdWqVKbTf268BTJ9PCvkKlSrsVnXq3dZK6vK7g1J2r9PC6XlmuhU0d185SuxWa+qq97TVbr1uvhkxdGW57Pa3A1Kez8dRufWu5Hi511PU1tVlhqfc+UqWKqfGKqNRHP+nBalwuKNU8njpYJ/prYlJvWoc2m7XQWyGptqHNar3TXRWReuUwyrRbS50VkGofTx2s8wSoE5fx1MuKRr0rOtzgt1kXO3Dq3H1os1nzphWLerynGFzdeIgAirr0vUXStzi1IlE7D2226iUodd1tEHepOrbiUN/jSw+v6ysgVb+nGNxsD0e9l5Eefoa/rSBU7/HUwbqCogaMp+5WCGrQeOpgXcNQA8dTe7M1CPVKWnp4XZ8gqG8xhjZb1fvwVMc9xeCq26GpscZTe9XI5avkpLuyL+nB6vJFYtJx3p/ULSnpsvv+k3RC0ujjaYRkpOePvAIkIr2VGmWCkpB67ilKJyA1PfI6dPGlokNbSNGlwkNbQLGl7Y+8DlpkaQ9Dm3dxpRH2FOWKKo2ypyhWROjX+xRRiyeNt6coVDRp1D1FkWJJl6g3Dj9Fku4hb/BPiyMV2FOMXxSp7n2KeMWQCu0pxi6CFHVoaxYuhR3amgVLcYe2ZqFS4KGtWaA0+EHQHguTQg9tzYKk2ENbswDoBHxoa+Yvnfe2pxgpb+kOfmhr5isdp/NH5itP6Svi/pMlP2nzGJ0k8pKmMbQ1W9phZ2HuKVo7fqjWMdA9RXtVV6vgg6DS/TxU61Qy46mu74dqXUpnPNX2/0FTlxIaT/U5W5H3FB3796CpvaTGU1NO1rTGU2MfD9W219+DoNJVlpNq5z0+CCpd++mt+HuKXapbrAnsKXbKfHprCnuK3TJZk9hT7Jj+pFqR9ykOnu6k2kT2FDt3fqJpKnuK3WtaEx5PreXPx9LnX/ZX5rTjE02TH9os/VjF36c4eF8nmqa0e+rb9uVSpJ9WxLcFSVSvsseLeFGVKm4uh7rJ1r/6T+pP5eHGv6c3FQ9dtcuyuaq35pL6B0xhbvb5H4n9vbmHt1R+wPN8+mbs5VU/o5+2SuOuMXffvDC3T+F1reJ8QNkG//e1jPRxRyP8caA+OwjQr1t86sJw9iyppJKKFamkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJJKKlikkkoqqWCRSiqppIJFKqmkkgoWqaSSSipYpJJKKqlgkUoqqaSCRSqppJIKFqmkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJL6QcU/dTQWNYFDR8s40iyDp27PPvPDt32FfcDqdhpLmmXjTZG3HA09cErzmTWX3V/etxxj46OriAAAAABJRU5ErkJggg==",cm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYBAMAAAAXCGLbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAA9QTFRFAAAAswAAswAAswAAswAAZtGxUwAAAAV0Uk5TAP8gcNCNz+2CAAACfklEQVR4nO3di1HDQAyEYQwUEAUKgA5IB9B/U+QJse8hXbx7B5lVAfrmzxjM+Aw8PPyzmcz6o49mtumu7vZq99jnA9o91k7TF53Oat9Ys2qsJYNAp59t+ViO6q2jqNPVumwsRXX3MdRpti8Xy1D9hQR1WizMxBLUwEa8ukzNxeLVdGO6Eq6+Z9QkFq0+ZdB0J1rNokksWE0vpexSsFpAl7FYtZS63IpVi+giFqqWUxdroWoFncci1VrqfC9SraK25aj1VLM3iuqg9sJQvVSzD4LqovaKV3N3uOV8otX8Ha60G6V+hdTLtwqQ6l9Ks+UgNYheYjFqNPWyHaOG0XMsRI2nntdD1Ab0FItQW1JP+xFqE3qMBahtqUcAoDaih9j1amvqQVivNqP72NVqe+qeWKs+3oDaZq26u0XNTBN6y+e7XkWhTSostUmFoS0qLrVFxaENKjC1QQWicRWZGleRaFiFpoZVKBpVsalRFYsG1d0I9RmMxlQ0GlLBl1JQhaMRFZ8aUfFoQCWkBlQC6quMVF9loK5KSXVVCuqpnFRP5aCOGnkgC1fhd7iQykKrKulSclQaWlN5qTWVh1ZehCKmVmKZaDGWmlqM5aKFWHJq+K0v8ORi6anBF6Hgk8Z2SE1jY0eOa2cZGztyXD0DPl/z3yAhzYjUeWw39Dq2X+p1bEf0N7Znau3AnzojUstn4OQZkVo6FqbPiNT8SWmHkUpXR1xNxnskUJnNkC+d5AfUQQ8RGZdX4FeHxjwHvxd166NSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKl/UA39hfo7USMo/CPu/88dCvMNgwpEBhudalAAAAAASUVORK5CYII=",QI="https://coder-1t45.github.io/Monopoly/assets/rails-b5a8f288.png",YI="https://coder-1t45.github.io/Monopoly/assets/elects-0ca4f3b8.png",XI="https://coder-1t45.github.io/Monopoly/assets/water-7bf83b59.png";function Hc(t){try{switch(t.toLowerCase()){case"red":return"#ED1B24";case"darkgreen":return"#1FB25A";case"darkblue":return"#0072BB";case"yellow":return"#FEF200";case"purple":return"#955436";case"lightgreen":return"#AAE0FA";case"orange":return"#F7941D";case"violet":return"#D93A96";default:return t.toLowerCase()}}catch{return t}}function Ss({street:t,utility:e,railroad:n}){return t!==void 0?h.jsx(ZI,{args:t}):e!==void 0?h.jsx(tk,{args:e}):n!==void 0?h.jsx(ek,{args:n}):h.jsx(h.Fragment,{})}function ZI({args:t}){const e=Hc(t.group);return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{style:{backgroundColor:e},children:[h.jsx("p",{children:"title dreed"}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[t.rent,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with color set"}),h.jsxs("p",{children:[t.rentWithColorSet,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 1 house"}),h.jsxs("p",{children:[t.multpliedrent[0],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 2 houses"}),h.jsxs("p",{children:[t.multpliedrent[1],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 3 houses"}),h.jsxs("p",{children:[t.multpliedrent[2],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 4 houses"}),h.jsxs("p",{children:[t.multpliedrent[3],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with hotel"}),h.jsxs("p",{children:[t.multpliedrent[4],"M"]})]})]}),h.jsx("hr",{}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"House cost"}),h.jsxs("p",{children:[t.housesCost,"M each"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Hotels cost"}),h.jsxs("label",{children:[t.hotelsCost,"M each",h.jsx("br",{}),h.jsx("p",{style:{fontSize:12},children:"(plus 4 houses)"})]})]})]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function ek({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("img",{"data-type":"rail",src:QI.replace("/public",""),alt:""}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[25,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 2 stations are owned"}),h.jsxs("p",{children:[50,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 3 stations are owned"}),h.jsxs("p",{children:[100,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 4 stations are owned"}),h.jsxs("p",{children:[200,"M"]})]})]}),h.jsx("h4",{children:"mortgage Value 100M"}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function tk({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("center",{children:h.jsx("img",{"data-type":t.type,src:t.type==="electricity"?YI.replace("/public",""):XI.replace("/public",""),alt:""})}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("p",{style:{lineHeight:1,paddingInline:10},children:["If one Utility is owned, rent is 4 times amount shown on dice.",h.jsx("br",{}),h.jsx("br",{}),"If both Utilities are owned, rent is 10 times amount shown on dice"]}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}const nk=[{name:"Mediterranean Avenue",id:"mediterraneanave",posistion:1,price:60,rent:2,multpliedrent:[10,30,90,160,250],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1314,rel:{Square:"Mediterranean Avenue","Probability % (Jail Short)":2.1314,Rank:36,"Probability % (Jail Long)":2.0073},ohousecost:50,oprice:60,averageProbability:2.06935},{name:"Baltic Avenue",id:"balticave",posistion:3,price:60,rent:4,multpliedrent:[20,60,180,320,450],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1624,rel:{Square:"Baltic Avenue","Probability % (Jail Short)":2.1624,Rank:35,"Probability % (Jail Long)":2.0369},ohousecost:50,oprice:60,averageProbability:2.09965},{name:"Oriental Avenue",id:"orientalave",posistion:6,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Oriental Avenue","Probability % (Jail Short)":2.2621,Rank:32,"Probability % (Jail Long)":2.1317},ohousecost:50,oprice:100,averageProbability:2.1969000000000003},{name:"Vermont Avenue",id:"vermontave",posistion:8,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Vermont Avenue","Probability % (Jail Short)":2.321,Rank:28,"Probability % (Jail Long)":2.1874},ohousecost:50,oprice:100,averageProbability:2.2542},{name:"Connecticut Avenue",id:"connecticutave",posistion:9,price:120,rent:8,multpliedrent:[40,100,300,450,600],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Connecticut Avenue","Probability % (Jail Short)":2.3003,Rank:30,"Probability % (Jail Long)":2.168},ohousecost:50,oprice:120,averageProbability:2.23415},{name:"St. Charles Place",id:"stcharlesplace",posistion:11,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. Charles Place","Probability % (Jail Short)":2.7017,Rank:15,"Probability % (Jail Long)":2.556},ohousecost:100,oprice:140,averageProbability:2.62885},{name:"States Avenue",id:"statesave",posistion:13,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"States Avenue","Probability % (Jail Short)":2.3721,Rank:29,"Probability % (Jail Long)":2.1741},ohousecost:100,oprice:140,averageProbability:2.2731000000000003},{name:"Virginia Avenue",id:"virginiaave",posistion:14,price:160,rent:12,multpliedrent:[60,180,500,700,900],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Virginia Avenue","Probability % (Jail Short)":2.4649,Rank:22,"Probability % (Jail Long)":2.4255},ohousecost:100,oprice:160,averageProbability:2.4452},{name:"St. James Place",id:"stjamesplace",posistion:16,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. James Place","Probability % (Jail Short)":2.7924,Rank:9,"Probability % (Jail Long)":2.6802},ohousecost:100,oprice:180,averageProbability:2.7363},{name:"Tennessee Avenue",id:"tennesseeave",posistion:18,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Tennessee Avenue","Probability % (Jail Short)":2.9356,Rank:6,"Probability % (Jail Long)":2.821},ohousecost:100,oprice:180,averageProbability:2.8783000000000003},{name:"New York Avenue",id:"newyorkave",posistion:19,price:200,rent:16,multpliedrent:[80,220,600,800,1e3],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"New York Avenue","Probability % (Jail Short)":3.0852,Rank:7,"Probability % (Jail Long)":2.8118},ohousecost:100,oprice:200,averageProbability:2.9485},{name:"Kentucky Avenue",id:"kentuckyave",posistion:21,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Kentucky Avenue","Probability % (Jail Short)":2.8358,Rank:12,"Probability % (Jail Long)":2.6143},ohousecost:150,oprice:220,averageProbability:2.72505},{name:"Indiana Avenue",id:"indianaave",posistion:23,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Indiana Avenue","Probability % (Jail Short)":2.7357,Rank:14,"Probability % (Jail Long)":2.5671},ohousecost:150,oprice:220,averageProbability:2.6513999999999998},{name:"Illinois Avenue",id:"illinoisave",posistion:24,price:240,rent:20,multpliedrent:[100,300,750,925,1100],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Illinois Avenue","Probability % (Jail Short)":3.1858,Rank:2,"Probability % (Jail Long)":2.9929},ohousecost:150,oprice:240,averageProbability:3.08935},{name:"Atlantic Avenue",id:"atlanticave",posistion:26,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Atlantic Avenue","Probability % (Jail Short)":2.7072,Rank:16,"Probability % (Jail Long)":2.537},ohousecost:150,oprice:260,averageProbability:2.6220999999999997},{name:"Ventnor Avenue",id:"ventnorave",posistion:27,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Ventnor Avenue","Probability % (Jail Short)":2.6789,Rank:18,"Probability % (Jail Long)":2.5191},ohousecost:150,oprice:260,averageProbability:2.599},{name:"Marvin Gardens",id:"marvingardens",posistion:29,price:280,rent:22,multpliedrent:[120,360,850,1025,1200],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Marvin Gardens","Probability % (Jail Short)":2.5861,Rank:21,"Probability % (Jail Long)":2.4381},ohousecost:150,oprice:280,averageProbability:2.5121},{name:"Pacific Avenue",id:"pacificave",posistion:31,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pacific Avenue","Probability % (Jail Short)":2.6774,Rank:17,"Probability % (Jail Long)":2.5236},ohousecost:200,oprice:300,averageProbability:2.6005000000000003},{name:"North Carolina Avenue",id:"northcarolinaave",posistion:32,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"North Carolina Avenue","Probability % (Jail Short)":2.6252,Rank:20,"Probability % (Jail Long)":2.4721},ohousecost:200,oprice:300,averageProbability:2.5486500000000003},{name:"Pennsylvania Avenue",id:"pennsylvaniaave",posistion:34,price:320,rent:28,multpliedrent:[150,450,1e3,1200,1400],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pennsylvania Avenue","Probability % (Jail Short)":2.5006,Rank:23,"Probability % (Jail Long)":2.3531},ohousecost:200,oprice:320,averageProbability:2.42685},{name:"Park Place",id:"parkplace",posistion:37,price:350,rent:35,multpliedrent:[175,500,1100,1300,1500],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Park Place","Probability % (Jail Short)":2.1864,Rank:33,"Probability % (Jail Long)":2.0595},ohousecost:200,oprice:350,averageProbability:2.12295},{name:"Boardwalk",id:"boardwalk",posistion:39,price:400,rent:50,multpliedrent:[200,600,1400,1700,2e3],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Boardwalk","Probability % (Jail Short)":2.626,Rank:19,"Probability % (Jail Long)":2.4832},ohousecost:200,oprice:400,averageProbability:2.5545999999999998},{name:"Electric Company",id:"electriccompany",posistion:12,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Electric Company","Probability % (Jail Short)":2.604,Rank:13,"Probability % (Jail Long)":2.614},oprice:150,averageProbability:2.609},{name:"Water Works",id:"waterworks",posistion:28,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Water Works","Probability % (Jail Short)":2.8074,Rank:10,"Probability % (Jail Long)":2.6507},oprice:150,averageProbability:2.72905},{name:"Reading Railroad",id:"readingrailroad",posistion:5,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,probability:2.1314,rel:{Square:"Reading Railroad","Probability % (Jail Short)":2.9631,Rank:8,"Probability % (Jail Long)":2.801},oprice:200,averageProbability:2.88205},{name:"Pennsylvania Railroad",id:"pennsylvaniarailroad",posistion:15,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,rel:{Square:"Pennsylvania Railroad","Probability % (Jail Short)":2.92,Rank:11,"Probability % (Jail Long)":2.6354},oprice:200,averageProbability:2.7777000000000003},{name:"B. & O. Railroad",id:"borailroad",posistion:25,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.975},{name:"Short Line Railroad",id:"shortlinerailroad",posistion:35,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.3609500000000003},{name:"Go",id:"go",posistion:0,group:"Special",rel:{Square:"Go","Probability % (Jail Short)":3.0961,Rank:3,"Probability % (Jail Long)":2.9143},averageProbability:3.0052},{name:"Income Tax",id:"incometax",group:"Special",posistion:4,rel:{Square:"Income Tax","Probability % (Jail Short)":2.3285,Rank:27,"Probability % (Jail Long)":2.1934},averageProbability:2.2609500000000002},{name:"Jail / Just Visiting",id:"jail",posistion:10,group:"Special",averageProbability:8.897},{name:"Chance",id:"chance",group:"Special",posistion:36,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:7,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:22,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Free Parking",id:"freeparking",group:"Special",posistion:20,rel:{Square:"Free Parking","Probability % (Jail Short)":2.8836,Rank:5,"Probability % (Jail Long)":2.8253},averageProbability:2.85445},{name:"Community Chest",id:"communitychest",group:"Special",posistion:2,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:33,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:17,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Go To Jail",id:"gotojail",group:"Special",posistion:30,rel:{Square:"Go To Jail","Probability % (Jail Short)":0,Rank:41,"Probability % (Jail Long)":0},averageProbability:0},{name:"Luxury Tax",id:"luxerytax",group:"Special",posistion:38,averageProbability:2.116}],rk=[{id:"go"},{id:"mediterraneanave"},{id:"communitychest"},{id:"balticave"},{id:"incometax"},{id:"readingrailroad"},{id:"orientalave"},{id:"chance"},{id:"vermontave"},{id:"connecticutave"},{id:"jail"},{id:"stcharlesplace"},{id:"electriccompany"},{id:"statesave"},{id:"virginiaave"},{id:"pennsylvaniarailroad"},{id:"stjamesplace"},{id:"communitychest"},{id:"tennesseeave"},{id:"newyorkave"},{id:"freeparking"},{id:"kentuckyave"},{id:"chance"},{id:"indianaave"},{id:"illinoisave"},{id:"borailroad"},{id:"atlanticave"},{id:"ventnorave"},{id:"waterworks"},{id:"marvingardens"},{id:"gotojail"},{id:"pacificave"},{id:"northcarolinaave"},{id:"communitychest"},{id:"pennsylvaniaave"},{id:"shortlinerailroad"},{id:"chance"},{id:"parkplace"},{id:"luxerytax"},{id:"boardwalk"}],ik=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Advance to Illinois Avenue - If you pass Go, collect $200",action:"move",tileid:"illinoisave"},{title:"Advance to St. Charles Place - If you pass Go, collect $200",action:"move",tileid:"stcharlesplace"},{title:"Advance token to nearest Utility. If unowned, you may buy it from the Bank. If owned, throw dice and pay owner a total ten times the amount thrown.",action:"movenearest",groupid:"utility",rentmultiplier:10},{title:"Advance token to the nearest Railroad and pay owner twice the rental to which he/she is otherwise entitled. If Railroad is unowned, you may buy it from the Bank.",action:"movenearest",groupid:"railroad",rentmultiplier:2},{title:"Bank pays you dividend of $50",action:"addfunds",amount:50},{title:"Get out of Jail Free - This card may be kept until needed, or traded/sold",action:"jail",subaction:"getout"},{title:"Go Back 3 Spaces",action:"move",count:-3},{title:"Go to Jail - Go directly to Jail - Do not pass Go, do not collect $200",action:"jail",subaction:"goto"},{title:"Make general repairs on all your property - For each house pay $25 - For each hotel $100",action:"propertycharges",buildings:25,hotels:100},{title:"Pay poor tax of $15",action:"removefunds",amount:15},{title:"Take a trip to Reading Railroad - If you pass Go, collect $200",action:"move",tileid:"readingrailroad"},{title:"Take a walk on the Boardwalk - Advance token to Boardwalk",action:"move",tileid:"boardwalk"},{title:"You have been elected Chairman of the Board - Pay each player $50",action:"removefundstoplayers",amount:50},{title:"Your building loan matures - Collect $150",action:"addfunds",amount:50}],sk=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Bank error in your favor - Collect $200 ",action:"addfunds",amount:200},{title:"Doctor fee - Pay $50",action:"removefunds",amount:50},{title:"From sale of stock you get $50",action:"addfunds",amount:50},{title:"Get Out of Jail Free",action:"jail",subaction:"getout"},{title:"Go to Jail - Go directly to jail - Do not pass Go - Do not collect $200",action:"jail",subaction:"goto"},{title:"Grand Opera Night - Collect $50 from every player for opening night seats",action:"addfundsfromplayers",amount:50},{title:"Holiday Fund matures - Receive $100",action:"addfunds",amount:100},{title:"Income tax refund - Collect $20",action:"addfunds",amount:20},{title:"Life insurance matures - Collect $100",action:"addfunds",amount:100},{title:"Pay hospital fees of $100",action:"removefunds",amount:100},{title:"Pay school fees of $150",action:"removefunds",amount:150},{title:"Receive $25 consultancy fee",action:"addfunds",amount:25},{title:"You are assessed for street repairs - $40 per house - $115 per hotel",action:"propertycharges",buildings:40,hotels:115},{title:"You have won second prize in a beauty contest - Collect $10",action:"addfunds",amount:10},{title:"You inherit $100",action:"addfunds",amount:100}],sr={properties:nk,tiles:rk,chance:ik,communitychest:sk};function Xy(t){const e=new Map(sr.properties.map(s=>[s.posistion??0,s]));let n={},r="Utilities";const i=e.get(t.posistion);if(i)return i.group==="Special"?h.jsx(h.Fragment,{}):(i.group==="Utilities"?(r="Utilities",n={cardCost:i.price??-1,title:i.name??"error",type:i.id.includes("water")?"water":"electricity"}):i.group==="Railroad"?(r="Railroad",n={cardCost:i.price??-1,title:i.name??"error"}):(r="Street",n={cardCost:i.price??-1,hotelsCost:i.ohousecost??-1,housesCost:i.housecost??-1,rent:i.rent??-1,multpliedrent:i.multpliedrent?[i.multpliedrent[0]??-1,i.multpliedrent[1]??-1,i.multpliedrent[2]??-1,i.multpliedrent[3]??-1,i.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:i.rent?i.rent*2:-1,title:i.name??"error",group:i.group}),h.jsx("div",{style:t.style,onClick:t.OnClick,children:r==="Railroad"?h.jsx(Ss,{railroad:n}):r==="Utilities"?h.jsx(Ss,{utility:n}):h.jsx(Ss,{street:n})}))}const ok=C.forwardRef((t,e)=>{const n=new Map(sr.properties.map(g=>[g.posistion??0,g])),r={isRailroad:g=>{const _=n.get(g),T=t.players.filter(v=>v.id===t.socket.id)[0];return _!==void 0&&_.group==="Railroad"&&T.properties.filter(v=>v.group==="Railroad"&&v.posistion===g).length>0},isMortaged:g=>{const T=t.players.filter(v=>v.id===t.socket.id)[0].properties.filter(v=>v.group==="Railroad"&&v.posistion===g)[0];return T.morgage!==void 0&&T.morgage===!0},buttons:{cancel:()=>{const g=s,_=t.players.filter(v=>v.id===t.socket.id)[0],T=_.properties.filter(v=>v.group==="Railroad"&&v.posistion===g)[0];T.morgage=!1,t.Morgage.onCanc(10),o(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:_.toJson()})},pay:()=>{const g=s,_=t.players.filter(v=>v.id===t.socket.id)[0],T=_.properties.filter(v=>v.group==="Railroad"&&v.posistion===g)[0];T.morgage=!0,t.Morgage.onMort(100),o(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:_.toJson()})}}},i=t.players.filter(g=>g.id===t.socket.id)[0];if(i===void 0)return h.jsx(h.Fragment,{children:"Could not read local player!"});C.useImperativeHandle(e,()=>({clickedOnBoard(g){f(-1),a(""),u([]),o(g)}}));const[s,o]=C.useState(-1),[l,a]=C.useState(""),[c,u]=C.useState([]),[d,f]=C.useState(-1);function y(){f(-1),o(-1);const g=Array.from(n.values()).filter(p=>p.group!="Special"),_=g.map(p=>[p.name,p.posistion]),T=g.map(p=>p.posistion.toString()),v=[];for(const p of T)p.includes(l)&&v.push(parseInt(p));for(const p of _)p[0].toLowerCase().includes(l.toLowerCase())&&v.push(p[1]);u(v)}return C.useEffect(y,[l]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Propreties"}),h.jsx("input",{type:"text",onChange:g=>a(g.currentTarget.value),placeholder:"Search for global cards..."}),h.jsx("div",{className:"propertyList",style:{overflowY:"auto",position:"relative",flexGrow:1,cursor:"pointer"},children:l.length>0?c.map((g,_)=>{var T,v;return h.jsx(h.Fragment,{children:d===g?h.jsx("center",{children:h.jsx(Xy,{style:{cursor:"pointer",marginBottom:25,marginTop:10},posistion:g,OnClick:()=>{f(-1)}},_)}):h.jsxs("div",{onClick:()=>f(g),className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Hc(((T=n.get(g))==null?void 0:T.group)??"")}}),h.jsx("h3",{children:((v=n.get(g))==null?void 0:v.name)??""})]},_)})}):s===-1?i.properties.map((g,_)=>{var T;return h.jsxs("div",{onClick:()=>{o(g.posistion)},className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Hc(g.group)}}),h.jsx("h3",{children:((T=n.get(g.posistion))==null?void 0:T.name)??""}),h.jsx("div",{children:g.count=="h"?h.jsx("img",{src:cm.replace("public/",""),alt:""}):typeof g.count=="number"&&g.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:g.count}),h.jsx("img",{src:lm.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},_)}):h.jsx("div",{children:h.jsxs("center",{style:{transform:"scale(1) translateY(-50%) translateX(-50%)",position:"absolute",top:"50%",left:"50%"},children:[h.jsx(Xy,{style:{filter:"drop-shadow(5px 5px 0px rgba(255,255,255,20%))"},posistion:s,OnClick:()=>{o(-1)}}),r.isRailroad(s)?h.jsxs(h.Fragment,{children:[" ",h.jsx("h2",{children:"Actions"}),r.isMortaged(s)?h.jsx("button",{className:"railroads-actions",onClick:r.buttons.cancel,children:"Cancel Mortgage [Pay 10M]"}):h.jsxs("button",{className:"railroads-actions",onClick:r.buttons.pay,children:[" ","Mortgage [Pay 100M]"]})]}):h.jsx(h.Fragment,{})]})})})]})}),Ef="https://coder-1t45.github.io/Monopoly/assets/roll-893dc331.png",ak=C.forwardRef((t,e)=>{const n=t.players.filter(a=>a.id===t.socket.id)[0],r=new Map(sr.properties.map(a=>[a.posistion??0,a])),[i,s]=C.useState(),[o,l]=C.useState();return C.useEffect(()=>{l(JSON.parse(document.cookie).settings)},[document.cookie]),C.useImperativeHandle(e,()=>({clickdOnPlayer(a){for(const c of t.players)c.id===a&&s(c)}})),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:n!==void 0?"container-top":"",style:n===void 0?{height:"100%"}:{},children:[h.jsx("h3",{"data-clickable":i!==void 0,style:{textAlign:"center"},onClick:()=>{i!==void 0&&s(void 0)},children:"Players"}),i!=null?h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"Cards"}),h.jsx("h4",{children:"Propreties"}),i.properties.length===0?h.jsx("p",{children:"none"}):i.properties.map((a,c)=>{var u;return h.jsxs("div",{onClick:()=>{s(void 0),t.clickedOnPlayer(a.posistion)},className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Hc(a.group)}}),h.jsx("h3",{children:((u=r.get(a.posistion))==null?void 0:u.name)??""}),h.jsx("div",{children:a.count=="h"?h.jsx("img",{src:cm.replace("public/",""),alt:""}):typeof a.count=="number"&&a.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:a.count}),h.jsx("img",{src:lm.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},c)})]}):h.jsx("div",{className:"playersInfos",children:t.players.map((a,c)=>h.jsx(h.Fragment,{children:h.jsxs("div",{className:"playerInfo",style:o!==void 0&&o.accessibility[4]===!0?{backgroundColor:a.color}:{},onClick:()=>{const u=document.querySelector(`div.player[player-id="${a.id}"]`);u.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{u.style.animation=""},1*1e3)},onDoubleClick:()=>{s(a)},children:[h.jsxs("p",{children:[o!=null&&o.accessibility[2]?`[${a.id}]`:""," ",a.username]}),a.id===t.currentTurn?h.jsx("img",{src:Ef.replace("public/","")}):h.jsx(h.Fragment,{}),a.getoutCards>0?h.jsx("p",{className:"orange",children:a.getoutCards}):h.jsx(h.Fragment,{}),h.jsx("p",{children:a.balance}),h.jsx("p",{children:a.properties.length})]},c)}))})]}),n!==void 0?h.jsx(h.Fragment,{children:h.jsx("div",{className:"container-bottom",style:{},children:h.jsxs("p",{style:{margin:0,marginTop:5},children:[" ",n.balance," M"]})})}):h.jsx(h.Fragment,{})]})});function Yi(t){const[e,n]=C.useState(t.defaultValue??0);return h.jsxs("div",{className:"slider-component",children:[h.jsx("input",{type:"range",onChange:r=>{var i;(i=t.onChange)==null||i.call(t,r),n(parseFloat(r.currentTarget.value))},defaultValue:t.defaultValue??50,step:t.step??1,max:t.max??100,min:t.min??0}),e.toFixed(t.fixedNum??0),t.suffix]})}function fE(){const t=JSON.parse(document.cookie),e={gameEngine:C.useState("2d"),numbers:[C.useState(t.settings?t.settings.accessibility[0]:45),C.useState(t.settings?t.settings.accessibility[1]:5),C.useState(t.settings?t.settings.audio[0]:100),C.useState(t.settings?t.settings.audio[1]:100),C.useState(t.settings?t.settings.audio[2]:25)],booleans:[C.useState(t.settings?t.settings.accessibility[2]:!1),C.useState(t.settings?t.settings.accessibility[3]:!1),C.useState(t.settings?t.settings.accessibility[4]:!1),C.useState(t.settings?t.settings.notifications:!1)]};return C.useEffect(()=>{const n=JSON.parse(document.cookie),r={gameEngine:e.gameEngine[0],accessibility:[e.numbers[0][0],e.numbers[1][0],e.booleans[0][0],e.booleans[1][0],e.booleans[2][0]],audio:[e.numbers[2][0],e.numbers[3][0],e.numbers[4][0]],notifications:e.booleans[3][0]};document.cookie=JSON.stringify({login:n.login,settings:r})},[e.gameEngine[0],...e.numbers.map(n=>n[0]),,...e.booleans.map(n=>n[0])]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Settings"}),h.jsxs("div",{className:"scroll",children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Game Engine "}),h.jsx("div",{children:h.jsxs("select",{name:"",id:"",children:[h.jsx("option",{children:"2D"}),h.jsx("option",{children:"3D"})]})})]}),h.jsxs("p",{style:{marginBlock:0,marginInline:10,fontSize:12,opacity:.5},children:["3d isnt developed yet"," "]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsx("h2",{children:"Accessibility"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Rotation Speed "}),h.jsx(Yi,{step:90/8,min:0,max:180,defaultValue:e.numbers[0][0],onChange:n=>{e.numbers[0][1](parseFloat(n.currentTarget.value))},fixedNum:2,suffix:" deg"})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Scale Speed "}),h.jsx(Yi,{step:1,min:1,max:10,defaultValue:e.numbers[1][0],onChange:n=>{e.numbers[1][1](parseFloat(n.currentTarget.value))},fixedNum:0})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Id "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[0][0],type:"checkbox",onChange:n=>{e.booleans[0][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Mouse "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[1][0],type:"checkbox",onChange:n=>{e.booleans[1][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Add Colors to Users "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[2][0],type:"checkbox",onChange:n=>{e.booleans[2][1](n.currentTarget.checked)}})})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Audio"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Master Audio "}),h.jsx(Yi,{step:1,min:0,max:100,defaultValue:e.numbers[2][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[2][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"SFX Audio "}),h.jsx(Yi,{step:1,min:0,max:100,defaultValue:e.numbers[3][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[3][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Music Audio "}),h.jsx(Yi,{step:1,min:0,max:100,defaultValue:e.numbers[4][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[4][1](parseFloat(n.currentTarget.value))}})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Notifications"}),h.jsx("div",{children:h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Notify Balance Movements "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[3][0],type:"checkbox",onChange:n=>{e.booleans[3][1](n.currentTarget.checked)}})})]})})]})]})}const lk=C.forwardRef((t,e)=>{const[n,r]=C.useState(0),[i,s]=C.useState([]);function o(){a(t.players)}const[l,a]=C.useState(t.players);C.useImperativeHandle(e,()=>({addMessage(d){if(s(f=>[...f,d]),n!==2){const f=document.getElementById("chatIconChange"),y=f.querySelector("img");y.style.animation="spin3 2s cubic-bezier(.68,.05,.49,.95) infinite",y.src=HI.replace("/public",""),f.onclick=()=>{y.src=Yy.replace("/public",""),y.style.animation="",r(2),f.onclick=()=>{r(2)}}}},reRenderPlayerList:o,clickedOnBoard:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})}}));const c=C.useRef(null),u=C.useRef(null);return C.useEffect(o,[t.players.map(d=>d.properties),t.players.map(d=>d.balance)]),C.useEffect(()=>{const d=f=>{const y=parseInt(f.key);if(!isNaN(y)){const g=document.activeElement;(g===null||g.tagName!=="INPUT")&&r(y-1)}};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),h.jsxs("nav",{className:"main",children:[h.jsxs("nav",{className:"header",children:[h.jsx("img",{style:{marginTop:75},className:"header",src:JI.replace("public/","")}),h.jsxs("div",{className:"upper",children:[h.jsx("div",{"data-selected":n==0,onClick:()=>r(0),"data-tooltip-hover":"players",className:"button",children:h.jsx("img",{src:qI.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==1,onClick:()=>r(1),"data-tooltip-hover":"propreties",className:"button",children:h.jsx("img",{src:GI.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==2,onClick:()=>r(2),"data-tooltip-hover":"chat",className:"button",id:"chatIconChange",children:h.jsx("img",{src:Yy.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n===3,onClick:()=>{r(3)},"data-tooltip-hover":"trades",className:"button",children:h.jsx("img",{src:"morgage.png",alt:""})}),h.jsx("div",{"data-selected":n===4,onClick:()=>{r(4)},"data-tooltip-hover":"history",className:"button",children:h.jsx("img",{src:"history.png",alt:""})}),t.server!==void 0?h.jsx("div",{"data-selected":!1,onClick:()=>t.callServer(),"data-tooltip-hover":"server",className:"button",children:h.jsx("img",{src:"server.png",alt:""})}):h.jsx(h.Fragment,{})]}),h.jsxs("div",{className:"lower",children:[h.jsx("div",{"data-selected":n==5,onClick:()=>r(5),"data-tooltip-hover":"settings",className:"button",children:h.jsx("img",{src:KI.replace("public/",""),alt:""})}),h.jsx("div",{"data-tooltip":"leave",className:"button color","data-tooltip-hover":"leave",onClick:()=>{document.location.reload()},children:h.jsx("img",{src:WI.replace("public/",""),alt:""})})]})]}),h.jsx("nav",{className:"content","data-index":n>5||n<0?0:n,children:n==1?h.jsx(ok,{ref:c,players:l,socket:t.socket,Morgage:t.Morgage}):n==2?h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Chat"}),h.jsxs("div",{className:"main-chat",children:[h.jsx("div",{className:"messages",children:i.map((d,f)=>h.jsxs("div",{className:"message",children:[h.jsxs("p",{children:[d.from,":"]}),h.jsx("p",{children:d.message})]},f))}),h.jsx("input",{placeholder:"Type Message Here...",type:"text",onKeyDown:d=>{if(d.which===13&&d.currentTarget.value.length>0){const f=d.currentTarget.value;t.socket.emit("message",f),d.currentTarget.value=""}}})]})]}):n===3?h.jsx(h.Fragment,{children:h.jsx("h3",{style:{textAlign:"center"},children:"Trades"})}):n==4?h.jsx(h.Fragment,{children:h.jsx("h3",{style:{textAlign:"center"},children:"History"})}):n==5?h.jsx(fE,{}):h.jsx(ak,{ref:u,clickedOnPlayer:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})},players:l,socket:t.socket,currentTurn:t.currentTurn})})]})});function Zy({chance:t,chest:e}){return t!==void 0?h.jsx(ck,{args:t}):e!==void 0?h.jsx(uk,{args:e}):h.jsx(h.Fragment,{})}function ck({args:t}){return h.jsxs("div",{"data-b-image":"chance",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}function uk({args:t}){return h.jsxs("div",{"data-b-image":"chest",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}const dk=C.forwardRef((t,e)=>{const n=new Map(sr.properties.map(m=>[m.posistion??0,m])),[r,i]=C.useState(!1),[s,o]=C.useState(!1),[l,a]=C.useState(!1),[c,u]=C.useState(!1),[d,f]=C.useState(0),[y,g]=C.useState(1),[_,T]=C.useState();C.useEffect(()=>{const m=setInterval(()=>{T(JSON.parse(document.cookie).settings)},200);return()=>{clearInterval(m)}},[document.cookie]);const[v,p]=C.useState({cardCost:-1,hotelsCost:-1,housesCost:-1,multpliedrent:[-1,-1,-1,-1,-1],rent:-1,rentWithColorSet:-1,title:"deafult",type:"electricity"}),[E,S]=C.useState("Street");function P(m,R){const w=document.getElementById("dice-panel");var H=!0;function W(){var ce="./c";const G=Math.floor(Math.random()*6)+1,Ce=Math.floor(Math.random()*6)+1;w.innerHTML=`
                <img src="${ce}${G}.png" />
                <img src="${ce}${Ce}.png" />
                
                `}function se(){if(H)W(),requestAnimationFrame(se);else{var ce="./c";w.innerHTML=`
                <img src="${ce}${m}.png" />
                <img src="${ce}${R}.png" />
                `}}setTimeout(()=>{H=!1},1e3),requestAnimationFrame(se)}function I(m){const R=document.querySelector("img#moneyAnimations");if(R===null)return;const w=R;w.setAttribute("data-anim","0"),requestAnimationFrame(()=>{w.setAttribute("data-anim",m.toString()),setTimeout(()=>{w.setAttribute("data-anim","0")},1e3)})}function A(){const m=JSON.parse(document.cookie).settings;let R=new Audio("./card.mp3");R.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),R.loop=!1,R.play()}return C.useImperativeHandle(e,()=>({diceResults:m=>{P(...m.l),i(!0),setTimeout(()=>{i(!1),m.onDone()},m.time)},freeDice:()=>{const m=document.getElementById("dice-panel");m.innerHTML="",o(!1)},setStreet:m=>{const R=t.players.filter(ce=>ce.id===t.socket.id)[0],w=n.get(m.location);if(w&&m.location!==-1&&m.location<40&&m.location>=0){let ce=function(G,Ce,Ie){function x(){const V=JSON.parse(document.cookie).settings;let ne=new Audio("./click.mp3");ne.volume=((V==null?void 0:V.audio[1])??100)/100*(((V==null?void 0:V.audio[0])??100)/100),ne.loop=!1,ne.play()}function j(){if(G){const V=document.querySelector("div#advanced-responses");if(V){let ne=function(we){switch(we){case"h":return 5;default:return we}};const ie=n.get(Ce);if(!ie)return;const oe=V;for(;oe.firstChild;)oe.removeChild(oe.firstChild);const Se=Array.from(new Map(R.properties.map((we,b)=>[b,we])).entries()).filter(we=>we[1].posistion===m.location)[0][0],Be=ne(R.properties[Se].count);for(let we=Be+1;we<6;we++){const b=document.createElement("button");we===5?(b.innerHTML="buy hotel",b.disabled=we!==Be+1||(ie.ohousecost??0)>(t.players.filter(N=>N.id===t.socket.id)[0].balance??0),b.onclick=()=>{m.onResponse("advance-buy",{state:we,money:1}),a(!1)}):(b.innerHTML=`buy ${we} house${we>1?"s":""}`,b.onclick=()=>{m.onResponse("advance-buy",{state:we,money:we-Be}),a(!1)},b.disabled=(we-Be)*(ie.housecost??0)>(t.players.filter(N=>N.id===t.socket.id)[0].balance??0)),oe.appendChild(b)}const Pe=document.createElement("button");Pe.innerHTML="CONTINUE",Pe.onclick=()=>{x(),m.onResponse("nothing",{}),a(!1)},oe.appendChild(Pe)}else requestAnimationFrame(j)}else{const V=document.querySelector("button#card-response-yes");V?(V.onclick=()=>{Ie!==void 0?m.onResponse("special_action",{rolls:Ie.rolls}):m.onResponse("buy",{}),a(!1)},document.querySelector("button#card-response-no").onclick=()=>{x(),m.onResponse("nothing",{}),a(!1)}):requestAnimationFrame(j)}}return j};var H=!1,W=!1,se=0;for(const G of R.properties)!H&&G.posistion===m.location&&(H=!0,se=G.count);for(const G of t.players)for(const Ce of G.properties)Ce.posistion===m.location&&G.id!=R.id&&(W=!0);if(w.group==="Special")m.onResponse("nothing",{}),a(!1);else if(w.group==="Utilities")if(H)m.onResponse("nothing",{});else if(W){m.onResponse("someones",{}),a(!1);return}else if(R.balance-((w==null?void 0:w.price)??0)<0){a(!1),m.onResponse("nothing",{});return}else{S("Utilities");const G={cardCost:w.price??-1,title:w.name??"error",type:w.id.includes("water")?"water":"electricity"};p(G),u(!1),A(),a(!0),requestAnimationFrame(ce(!1,m.location,{rolls:m.rolls}))}else if(w.group==="Railroad")if(H)m.onResponse("nothing",{});else if(W){m.onResponse("someones",{}),a(!1);return}else if(R.balance-((w==null?void 0:w.price)??0)<0){a(!1),m.onResponse("nothing",{});return}else{S("Railroad");const G={cardCost:w.price??-1,title:w.name??"error"};p(G),A(),a(!0),requestAnimationFrame(ce(!1,m.location))}else{if(!H&&R.balance-((w==null?void 0:w.price)??0)<0){a(!1),m.onResponse("nothing",{});return}if(!H){if(W){m.onResponse("someones",{}),a(!1);return}}if(H&&se==="h"){a(!1),m.onResponse("nothing",{});return}S("Street");const G={cardCost:w.price??-1,hotelsCost:w.ohousecost??-1,housesCost:w.housecost??-1,rent:w.rent??-1,multpliedrent:w.multpliedrent?[w.multpliedrent[0]??-1,w.multpliedrent[1]??-1,w.multpliedrent[2]??-1,w.multpliedrent[3]??-1,w.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:w.rent?w.rent*2:-1,title:w.name??"error",group:w.group};p(G),u(!!H),A(),a(!0),requestAnimationFrame(ce(H,m.location))}}else m.onResponse("nothing",{}),a(!1)},chorch(m,R,w){S(R?"Chance":"CommunityChest"),p({title:m.title}),A(),a(!0),setTimeout(()=>{a(!1)},w)},applyAnimation(m){I(m)},showJailsButtons:m=>{const R=document.querySelector('button.roll-button[data-button-type="pay"]'),w=document.querySelector('button.roll-button[data-button-type="card"]'),H=document.querySelector('button.roll-button[data-button-type="roll"]');function W(){H.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("roll after return to normal")},o(!0),w.onclick=()=>{},w.style.translate="0px 0px",w.setAttribute("aria-disabled","true"),setTimeout(()=>{w.setAttribute("aria-disabled","true")},300),R.style.translate="0px 0px",R.onclick=()=>{},R.setAttribute("aria-disabled","true"),setTimeout(()=>{R.setAttribute("aria-disabled","true")},300)}if(R.setAttribute("aria-disabled","false"),R.style.translate="0px -80px",R.onclick=()=>{I(1),t.socket.emit("unjail","pay"),t.socket.emit("roll_dice"),console.warn("pay"),W()},m){const se=w;se.setAttribute("aria-disabled","false"),se.style.translate="0px -160px",se.style.backgroundColor="gold",se.onclick=()=>{t.socket.emit("unjail","card"),t.socket.emit("roll_dice"),console.warn("card"),W()}}H.onclick=()=>{t.socket.emit("roll_dice"),console.warn("roll when in jail"),W(),o(!0)}}})),C.useEffect(()=>{document.getElementById("locations").onwheel=R=>{R.shiftKey?g(w=>w+R.deltaY*(_!==void 0?_.accessibility[1]:5)/5e3):f(w=>w+R.deltaY*(_!==void 0?_.accessibility[0]:45)/100)};const m=Array.from(n.values()).filter(R=>R.group!="Special");for(const R of m){const w=document.getElementById("locations").querySelector(`div.street[data-position="${R.posistion}"]`);w.onclick=()=>{t.clickedOnBoard(R.posistion)},w.onmousemove=()=>{w.style.cursor="pointer",w.style.backgroundColor="rgba(0,0,0,15%)"},w.onmouseleave=()=>{w.style.cursor="unset",w.style.scale="1",w.style.backgroundColor="rgba(0,0,0,0%)"}}},[_]),C.useEffect(()=>{var m=!0,R=()=>{var H,W,se,ce;for(const G of t.players.filter(Ce=>Ce.balance>=0)){const Ce=G.position,Ie=G.icon+1,x=G.isInJail,j=document.querySelector(`div.player[player-id="${G.id}"]`);if(j!==null){const V=j.querySelector("div");V.style.rotate=`${-d}deg`,V.style.aspectRatio="1",_!==void 0&&_.accessibility[4]===!0?V.setAttribute("data-tooltip-color",G.color):V.hasAttribute("data-tooltip-color")&&(V.querySelector("img").style.filter="",V.removeAttribute("data-tooltip-color"));const ne=(H=j.parentElement)==null?void 0:H.getAttribute("data-position");if(parseInt(ne)!==G.position&&((W=j.parentElement)==null||W.removeChild(j),(se=document.querySelector(`div.street[data-position="${Ce}"]`))==null||se.appendChild(j)),!x&&j.querySelector("img.jailIcon")!=null){const ie=j.querySelector("img.jailIcon");j.removeChild(ie)}if(x&&j.querySelector("img.jailIcon")==null){for(;j.firstChild;)j.removeChild(j.firstChild);const ie=document.createElement("div");ie.setAttribute("data-tooltip-hover",G.username);const oe=document.createElement("img");oe.src=`./p${Ie}.png`,ie.appendChild(oe);const Se=document.createElement("img");Se.src="./jail.png",Se.className="jailIcon",ie.appendChild(Se),j.appendChild(ie)}}else{const V=document.createElement("div");V.className="player",V.setAttribute("player-id",G.id),V.setAttribute("player-position",G.position.toString());const ne=document.createElement("div");ne.setAttribute("data-tooltip-hover",G.username);const ie=document.createElement("img");if(ie.src=`./p${Ie}.png`,ne.appendChild(ie),V.appendChild(ne),x){const oe=document.createElement("img");oe.src="./jail.png",oe.className="jailIcon",V.appendChild(oe)}(ce=document.querySelector(`div.street[data-position="${Ce}"]`))==null||ce.appendChild(V)}}function w(){const G=document.getElementById("display-houses"),Ce=Array.from(G.querySelectorAll("div.street-houses"));for(const x of Ce){const j=x;for(;j.firstChild;)j.removeChild(j.firstChild);j.onclick=()=>{},j.style.cursor="unset",j.style.backgroundColor="rgba(0,0,0,0%)",j.style.padding="0px",j.innerHTML="",j.setAttribute("data-tooltip-hover",""),j.style.zIndex="unset",j.style.boxShadow=""}for(const x of t.players)for(const j of x.properties){const V=j.posistion,ne=j.count,ie=G.querySelector(`div.street-houses[data-position="${V}"`);if(ie!=null){const oe=ie;switch(oe.setAttribute("data-tooltip-hover",x.username),oe.onclick=()=>{const Se=document.querySelector(`div.player[player-id="${x.id}"]`);Se.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{Se.style.animation=""},1*1e3)},oe.style.cursor="pointer",oe.style.zIndex="5",ne){case 0:oe.style.backgroundColor="rgba(0,0,0,25%)",_!==void 0&&(_!=null&&_.accessibility[4])&&(oe.style.backgroundColor=x.color,oe.style.boxShadow="0px 0px 5px black");var Ie=0;if(j.group==="Railroad"){const Be=x.properties.filter(b=>b.group==="Railroad").length;var Ie=[25,50,100,200][Be]}else if(j.group==="Utilities"&&j.rent){const Be=x.properties.filter(Pe=>Pe.group==="Utilities").length===2?10:4;Ie=j.rent*Be}Ie!==0&&(oe.innerHTML=`<p>${Ie}M</p>`,oe.style.backgroundColor="rgba(0,0,0,75%)",_!==void 0&&(_!=null&&_.accessibility[4])&&(oe.style.backgroundColor=`${x.color}`,oe.style.boxShadow="0px 0px 5px black"));break;case 1:case 2:case 3:case 4:for(let Be=0;Be<ne;Be++){const Pe=document.createElement("img");Pe.src=lm.replace("public/",""),oe.appendChild(Pe)}break;case"h":const Se=document.createElement("img");Se.src=cm.replace("public/",""),oe.appendChild(Se);break}}}}w(),m&&requestAnimationFrame(R)};return requestAnimationFrame(R),()=>{m=!1}},[t.players,d]),C.useEffect(()=>{const m=document.querySelector('button.roll-button[data-button-type="roll"]');m.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("first roll")}},[]),h.jsx(h.Fragment,{children:h.jsxs("div",{className:"game",children:[h.jsx("div",{id:"dice-panel","data-show":r}),h.jsxs("div",{className:"board",style:{transform:`translateX(-50%) translateY(-50%) rotate(${d}deg) scale(${y})`},id:"locations",children:[h.jsxs("div",{id:"display-houses",children:[h.jsx("div",{"data-position":"39","data-rotate":"4",className:"street-houses",style:{top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"37","data-rotate":"4",className:"street-houses",style:{top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"35","data-rotate":"4",className:"street-houses",style:{top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34","data-rotate":"4",className:"street-houses",style:{top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"32","data-rotate":"4",className:"street-houses",style:{top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31","data-rotate":"4",className:"street-houses",style:{top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"29","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"21","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"19","data-rotate":"2",className:"street-houses",style:{top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18","data-rotate":"2",className:"street-houses",style:{top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16","data-rotate":"2",className:"street-houses",style:{top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15","data-rotate":"2",className:"street-houses",style:{top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14","data-rotate":"2",className:"street-houses",style:{top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13","data-rotate":"2",className:"street-houses",style:{top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12","data-rotate":"2",className:"street-houses",style:{top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11","data-rotate":"2",className:"street-houses",style:{top:"83%",left:"6.5%"}}),h.jsx("div",{"data-position":"9","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"6","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"3","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"1","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"83%"}})]}),h.jsxs("div",{id:"display-streets",children:[h.jsx("div",{"data-position":"39",className:"street",style:{width:120,height:75,top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"38",className:"street",style:{width:120,height:75,top:"74.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"37",className:"street",style:{width:120,height:75,top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"36",className:"street",style:{width:120,height:75,top:"58.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"35",className:"street",style:{width:120,height:75,top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34",className:"street",style:{width:120,height:75,top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"33",className:"street",style:{width:120,height:75,top:"33.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"32",className:"street",style:{width:120,height:75,top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31",className:"street",style:{width:120,height:75,top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"30",className:"street",style:{width:120,height:120,top:"6.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"29",className:"street",style:{width:75,height:120,top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28",className:"street",style:{width:75,height:120,top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27",className:"street",style:{width:75,height:120,top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26",className:"street",style:{width:75,height:120,top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25",className:"street",style:{width:75,height:120,top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24",className:"street",style:{width:75,height:120,top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23",className:"street",style:{width:75,height:120,top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"22",className:"street",style:{width:75,height:120,top:"6.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"21",className:"street",style:{width:75,height:120,top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"20",className:"street",style:{width:120,height:120,top:"6.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"19",className:"street",style:{width:120,height:75,top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18",className:"street",style:{width:120,height:75,top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"17",className:"street",style:{width:120,height:75,top:"33.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16",className:"street",style:{width:120,height:75,top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15",className:"street",style:{width:120,height:75,top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14",className:"street",style:{width:120,height:75,top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13",className:"street",style:{width:120,height:75,top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12",className:"street",style:{width:120,height:75,top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11",className:"street",style:{width:120,height:75,top:"83%",left:"6.5%"}}),h.jsx("div",{className:"street","data-position":"10",style:{width:120,height:120,top:"93.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"9",className:"street",style:{width:75,height:120,top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8",className:"street",style:{width:75,height:120,top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"7",className:"street",style:{width:75,height:120,top:"93.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"6",className:"street",style:{width:75,height:120,top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5",className:"street",style:{width:75,height:120,top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"4",className:"street",style:{width:75,height:120,top:"93.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"3",className:"street",style:{width:75,height:120,top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"2",className:"street",style:{width:75,height:120,top:"93.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"1",className:"street",style:{width:75,height:120,top:"93.5%",left:"83%"}}),h.jsx("div",{"data-position":"0",className:"street",style:{width:120,height:120,top:"93.5%",left:"93.5%"}})]})]}),h.jsxs("div",{className:"roll-panel",children:[h.jsx("button",{className:"roll-button","data-button-type":"card","aria-disabled":!0,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"CARD"})}),h.jsx("button",{className:"roll-button","data-button-type":"pay","aria-disabled":!0,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"PAY"})}),h.jsxs("button",{className:"roll-button","data-button-type":"roll","aria-disabled":!1,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:[h.jsx("img",{src:Ef.replace("public/","")}),h.jsx("p",{children:"ROLL THE DICE"})," ",h.jsx("img",{src:Ef.replace("public/","")})]})]}),h.jsx("div",{className:E==="Chance"||E==="CommunityChest"?"chance-display-actions":"card-display-actions",style:l?{}:{transform:"translateY(-50%) translateX(-70vw)"},children:E==="Chance"||E==="CommunityChest"?h.jsx(h.Fragment,{children:E==="Chance"?h.jsx(Zy,{chance:v}):E==="CommunityChest"?h.jsx(Zy,{chance:v}):h.jsx(h.Fragment,{})}):h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:c?"would you like to buy this card?":"you can buy houses and hotels"}),E==="Railroad"?h.jsx(Ss,{railroad:v}):E==="Utilities"?h.jsx(Ss,{utility:v}):h.jsx(Ss,{street:v}),h.jsx("div",{children:h.jsx("center",{children:c?h.jsx("div",{id:"advanced-responses"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{id:"card-response-yes",children:"YES"}),h.jsx("button",{id:"card-response-no",children:"NO"})]})})})]})}),h.jsx("img",{"data-anim":"0",id:"moneyAnimations",alt:""})]})})}),pE=C.forwardRef((t,e)=>(C.useImperativeHandle(e,()=>({message(n,r,i,s,o){const l=document.querySelector("div.notify"),a=document.createElement("div");a.className="notification",a.innerHTML=n,a.setAttribute("data-notif-type",r??"info"),l.appendChild(a);var c=!1,u="popoff .7s cubic-bezier(.62,.25,1,-0.73)";if(a.onclick=()=>{c=!0,a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700)},setTimeout(()=>{c||(a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700))},(i??2)*1e3),o===void 0||o!==void 0&&o===!0){const d=JSON.parse(document.cookie).settings;let f=new Audio("./notifications.mp3");f.volume=((d==null?void 0:d.audio[1])??100)/100*(((d==null?void 0:d.audio[0])??100)/100),f.play()}},dialog(n,r){const i=document.querySelector("div.dialog-screen"),s=document.querySelector("div.dialog-box"),o=s.querySelector("div.texts"),l=s.querySelector("div.buttons"),a=n(()=>{i.setAttribute("data-show","false"),s.setAttribute("data-show","false"),s.style.animation="dialogout 1s cubic-bezier(.5,0,1,.5)",setTimeout(()=>{s.style.animation="",o.innerHTML="",l.innerHTML=""},1e3)},(d,f)=>{const y=document.createElement("button");return y.onclick=f,y.innerHTML=d,y});s.setAttribute("data-show","true"),i.setAttribute("data-show","true"),o.innerHTML=a.innerHTML;for(const d of a.buttons)l.appendChild(d);const c=JSON.parse(document.cookie).settings;switch(r){case"loosing":var u=new Audio("./dying.mp3");u.volume=.16*(((c==null?void 0:c.audio[1])??100)/100)*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break;case"winning":var u=new Audio("./winning.mp3");u.volume=((c==null?void 0:c.audio[1])??100)/100*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break}}})),h.jsxs(h.Fragment,{children:[" ",h.jsx("div",{className:"notify"}),h.jsx("div",{className:"dialog-screen","data-show":!1}),h.jsxs("div",{className:"dialog-box","data-show":!1,children:[h.jsx("div",{className:"texts"}),h.jsx("div",{className:"buttons"})]})]}))),Ol=[{AllowDeals:!0,WinningMode:"last-standing",Name:"Classic",startingCash:1500,mortageAllowed:!0},{AllowDeals:!0,WinningMode:"monopols",Name:"Monopol",startingCash:1500,mortageAllowed:!1},{AllowDeals:!1,WinningMode:"last-standing",Name:"Run-Down",startingCash:1500,mortageAllowed:!1}];function hk({socket:t,name:e,server:n}){const[r,i]=C.useState(new Map),s=Array.from(r.values()),[o,l]=C.useState(""),[a,c]=C.useState(!1),[u,d]=C.useState(!1),[f,y]=C.useState(!1),[g,_]=C.useState(0),[T,v]=C.useState(),[p,E]=C.useState(new Audio("./main-theme.mp3"));C.useEffect(()=>{u&&(p.loop=!0,p.play(),p.volume=.25,T!==void 0&&(p.volume=T.audio[0]/100*(T.audio[2]/100)),E(p))},[u]),C.useEffect(()=>{const m=setInterval(()=>{const R=JSON.parse(document.cookie).settings;v(R)},1e3);return()=>{clearInterval(m)}},[document.cookie]),C.useEffect(()=>{T!==void 0&&(p.volume=T.audio[0]/100*(T.audio[2]/100))},[T]);const S=C.useRef(null),P=C.useRef(null),I=C.useRef(null),A=new Map(sr.properties.map(m=>[m.posistion??0,m]));return n!==void 0&&n.RenderLogs(m=>{try{const R=document.body.querySelector("#server main div.middle");R.innerHTML="";for(const w of m)R.innerHTML+=`<p> ${w.join("	")} </p>`}catch{}}),C.useEffect(()=>{let m;const R=setInterval(()=>{m=JSON.parse(document.cookie).settings},1e3);function w(b){const N={x:b.clientX,y:b.clientY},K=r.get(t.id);t.emit("mouse",N),K&&(K.positions=N)}function H(b){function N(){r.delete(b),i(new Map(r)),requestAnimationFrame(()=>{r.has(b)&&requestAnimationFrame(N)})}N();function K(){const B=document.querySelector(`div.player[player-id="${b}"]`);B!==null&&(B.parentElement&&B.parentElement.removeChild(B),B.remove(),requestAnimationFrame(()=>{document.querySelector(`div.player[player-id="${b}"]`)!==null&&requestAnimationFrame(K)}))}K()}function W(b,N,K=!0,B,F=!0){var Xe=(b-N.position)%40;(b<N.position||Xe<0)&&F&&(Xe=40-N.position+b),F||(Xe=N.position-b,Xe<0&&(Xe+=40));const ze=.35*1e3*Xe;console.log(`${new Date().toTimeString()} generator ${Math.random()} target ${b} time ${ze} current ${N.position}`);function z(){var rn=0,Oe=!1,Ge=0;const Ke=document.querySelector(`div.player[player-id="${N.id}"]`);rn=N.position,N.position+=1;var gn=new Audio("./step2.mp3");gn.volume=.1*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),gn.loop=!1,gn.play(),Ke.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)";const pe=()=>{var _r,Er,Sr,vt;if(Ge<Xe){Ge+=1;var De=new Audio("./step2.mp3");if(De.volume=1*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),De.loop=!1,De.play(),N.position=(N.position+(F?1:-1))%40,N.position==0&&K){N.balance+=200;var De=new Audio("./moneyplus.mp3");De.volume=1*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),De.loop=!1,De.play(),N.id===t.id&&(m!==void 0&&m.notifications===!0&&((_r=I.current)==null||_r.message(`${200} of money is added to the account`,"info",2,()=>{},!1)),(Er=S.current)==null||Er.applyAnimation(2)),Oe=!0,i(new Map(r.set(N.id,N)))}if(Ge==Xe-1){if(N.position=b,Ke.style.animation="part 0.9s cubic-bezier(0,.7,.57,1)",setTimeout(()=>{Ke.style.animation=""},900),!Oe&&rn>N.position&&K){var De=new Audio("./moneyplus.mp3");De.volume=1*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),De.loop=!1,De.play(),N.balance+=200,N.id===t.id&&(m!==void 0&&m.notifications===!0&&((Sr=I.current)==null||Sr.message(`${200} of money is added to the account`,"info",2,()=>{},!1)),(vt=S.current)==null||vt.applyAnimation(2)),Oe=!0,i(new Map(r.set(N.id,N)))}B&&B()}else Ke.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)",setTimeout(pe,.35*1e3)}};setTimeout(pe,.35*1e3)}return{func:z,time:ze}}const se=b=>{l(b.turn_id.toString());for(const N of b.other_players)i(r.set(N.id,new Qy(N.id,N.username).recieveJson(N)))},ce=b=>{i(new Map(r.set(b.id,new Qy(b.id,b.username).recieveJson(b))))},G=b=>{const N=r.get(b.id);N!==void 0&&(N.ready=b.state,i(new Map(r.set(N.id,N))),_(b.selectedMode))},Ce=()=>{c(!0);function b(N){const K=document.querySelector("p#floating-clock");K.innerHTML=`${N}`,K.className="clocking"}b(3),setTimeout(()=>{b(2),setTimeout(()=>{b(1),setTimeout(()=>{d(!0)},1e3)},1e3)},1e3)},Ie=b=>{var N,K,B;if(l(b.turn),r.size>2){const F=((N=r.get(b.id))==null?void 0:N.username)??"player";(K=I.current)==null||K.message(`${F} disconected`,"error")}else p.pause(),(B=I.current)==null||B.dialog((F,Xe)=>{var ze;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((ze=r.get(t.id))==null?void 0:ze.balance)??0} </p>`,buttons:[Xe("PLAY ANOTHER GAME",()=>{F(),document.location.reload()})]}},"winning");H(b.id)},x=b=>{var B,F,Xe,ze,z,rn;const N=r.get(b.from);if(N!==void 0&&JSON.stringify(N.properties)!=JSON.stringify(b.pJson.properties)){var K=new Audio("./buying1.mp3");K.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),K.loop=!1,K.play()}if(b.from!==t.id&&N&&(N.recieveJson(b.pJson),i(new Map(r.set(b.from,N)))),b.pJson.balance<0){if(b.pJson.id!==t.id)if(r.size>2){const Oe=b.pJson.username;(B=I.current)==null||B.message(`${Oe} lost`,"info")}else if(r.has(t.id))p.pause(),(F=I.current)==null||F.dialog((Oe,Ge)=>{var Ke;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((Ke=r.get(t.id))==null?void 0:Ke.balance)??0} </p>`,buttons:[Ge("PLAY ANOTHER GAME",()=>{Oe(),document.location.reload()})]}},"winning");else{const Ge=Array.from(r.values()).filter(Ke=>Ke.id!==b.pJson.id)[0].username??0;p.pause(),(Xe=I.current)==null||Xe.dialog((Ke,gn)=>{var pe;return{innerHTML:`<h3> ${Ge} WON! </h3> <p> ${Ge} won with the balance of ${((pe=r.get(t.id))==null?void 0:pe.balance)??0} </p>`,buttons:[gn("PLAY ANOTHER GAME",()=>{Ke(),document.location.reload()})]}},"winning")}else p.pause(),(ze=I.current)==null||ze.dialog((Oe,Ge)=>{var Ke;return{innerHTML:`<h3> YOU LOST! </h3> <p> you lost your money and lost the monopol with a wanted balance of ${-(((Ke=r.get(t.id))==null?void 0:Ke.balance)??0)} </p>`,buttons:[Ge("CONTINUE WATCHING",()=>{Oe()}),Ge("PLAY ANOTHER GAME",()=>{Oe(),document.location.reload()})]}},"loosing");H(b.pJson.id)}if(l(b.turnId),b.turnId===t.id){const Oe=r.get(b.turnId);Oe&&Oe.isInJail&&((z=S.current)==null||z.showJailsButtons(((Oe==null?void 0:Oe.getoutCards)??-1)>0))}(rn=P.current)==null||rn.reRenderPlayerList()},j=b=>{var N;(N=P.current)==null||N.addMessage(b)},V=b=>{var Xe;var N=new Audio("./rolling.mp3");N.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),N.loop=!1,N.play();const K=r.get(t.id),B=r.get(b.turnId),F=W(b.listOfNums[2],B,!0,()=>{b.turnId!=t.id&&b.listOfNums[2]===30&&setTimeout(()=>{W(10,B,!1,()=>{B.position=10,B.isInJail=!0;var z=new Audio("./jail.mp3");z.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),z.loop=!1,z.play(),B.jailTurnsRemaining=3}).func()},800)});(Xe=S.current)==null||Xe.diceResults({l:[b.listOfNums[0],b.listOfNums[1]],time:K.isInJail?2e3:F.time+2e3+800,onDone:()=>{var rn,Oe;if(t.id!==b.turnId)return;const ze=((rn=r.get(t.id))==null?void 0:rn.position)??-1,z=A.get(ze);z!=null&&(z.id==="communitychest"||z.id==="chance"?t.emit("chorch_roll",{is_chance:z.id==="chance",rolls:b.listOfNums[0]+b.listOfNums[1]}):(Oe=S.current)==null||Oe.setStreet({location:ze,rolls:b.listOfNums[1]+b.listOfNums[0],onResponse:(Ge,Ke)=>{var _r,Er,Sr,vt,ui,Tr,wr,yn,ue,_t,Te,vn,io,$t,_n,so,oo;var gn=0;if(Ge==="buy"){m!==void 0&&m.notifications===!0&&((_r=I.current)==null||_r.message(`${((z==null?void 0:z.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),K.balance-=((z==null?void 0:z.price)??0)*1,(Er=S.current)==null||Er.applyAnimation(1),K.properties.push({posistion:K.position,count:0,group:((Sr=A.get(K.position))==null?void 0:Sr.group)??""});var pe=new Audio("./buying1.mp3");pe.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play()}else if(Ge==="advance-buy"){var pe=new Audio("./buying1.mp3");pe.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play();const Jt=Array.from(new Map(K.properties.map((Hi,Cr)=>[Cr,Hi])).entries()).filter(Hi=>Hi[1].posistion===ze)[0][0],qe=Ke;K.properties[Jt].count=qe.state===5?"h":qe.state,qe.state===5?(m!==void 0&&m.notifications===!0&&((vt=I.current)==null||vt.message(`${z.ohousecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),K.balance-=z.ohousecost??0,(ui=S.current)==null||ui.applyAnimation(1)):(m!==void 0&&m.notifications===!0&&((Tr=I.current)==null||Tr.message(`${z.housecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),K.balance-=(z.housecost??0)*qe.money,(wr=S.current)==null||wr.applyAnimation(1))}else if(Ge==="someones"){const Kn=Array.from(r.values());for(const Jt of Kn)for(const qe of Jt.properties)if(qe.posistion===ze){var De=0;if(z.group==="Utilities"&&qe.rent){const Cr=Jt.properties.filter(ao=>ao.group==="Utilities").length===2?10:4;De=qe.rent*Cr}else if(z.group==="Railroad"){const Cr=Jt.properties.filter(hl=>hl.group==="Railroad").length;De=[25,50,100,200][Cr]}else qe.count===0?De=(z==null?void 0:z.rent)??0:typeof qe.count=="number"&&qe.count>0?De=((z==null?void 0:z.multpliedrent)??[0,0,0,0])[qe.count-1]??0:qe.count==="h"&&(De=((z==null?void 0:z.multpliedrent)??[0,0,0,0,0])[4]??0);m!==void 0&&m.notifications===!0&&((yn=I.current)==null||yn.message(`${De} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play(),(qe.morgage===void 0||qe.morgage!==void 0&&qe.morgage===!1)&&(K.balance-=De),(ue=S.current)==null||ue.applyAnimation(1),t.emit("pay",{balance:De,from:t.id,to:Jt.id}),(_t=S.current)==null||_t.applyAnimation(1)}}else if(Ge==="nothing"){if(((z==null?void 0:z.id)??"")=="gotojail"){const Kn=W(10,B,!1,()=>{B.position=10,B.isInJail=!0,B.jailTurnsRemaining=3});gn=Kn.time,Kn.func()}if((z==null?void 0:z.id)==="incometax"){K.balance-=200,m!==void 0&&m.notifications===!0&&((Te=I.current)==null||Te.message(`${200} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play(),(vn=S.current)==null||vn.applyAnimation(1)}if((z==null?void 0:z.id)==="luxerytax"){K.balance-=100,m!==void 0&&m.notifications===!0&&((io=I.current)==null||io.message(`${100} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play(),($t=S.current)==null||$t.applyAnimation(1)}}else if(Ge==="special_action"){m!==void 0&&m.notifications===!0&&((_n=I.current)==null||_n.message(`${((z==null?void 0:z.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./buying1.mp3");pe.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),pe.loop=!1,pe.play(),K.balance-=((z==null?void 0:z.price)??0)*1,(so=S.current)==null||so.applyAnimation(1);const qe=Ke.rolls;K.properties.push({posistion:K.position,count:0,rent:qe,group:((oo=A.get(K.position))==null?void 0:oo.group)??""})}setTimeout(()=>{var Jt;i(new Map(r.set(t.id,K))),(Jt=S.current)==null||Jt.freeDice();const Kn=r.get(t.id).toJson();t.emit("finish-turn",Kn)},gn)}}))}}),B.isInJail?setTimeout(()=>{b.listOfNums[0]==b.listOfNums[1]?(B.isInJail=!1,setTimeout(()=>{F.func()},2e3)):B.jailTurnsRemaining>0&&(B.jailTurnsRemaining-=1,B.jailTurnsRemaining===0&&(B.isInJail=!1)),i(new Map(r.set(b.turnId,B)))},1500):setTimeout(()=>{F.func()},2e3)},ne=b=>{var B;const N=r.get(b.to);if(N){if(b.option==="card")N.getoutCards-=1;else{N.balance-=50,N.id===t.id&&m!==void 0&&m.notifications===!0&&((B=I.current)==null||B.message(`${50} of money is deducted from the account`,"info",2,()=>{},!1));var K=new Audio("./moneyminus.mp3");K.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),K.loop=!1,K.play()}N.isInJail=!1,N.jailTurnsRemaining=0,i(new Map(r.set(b.to,N)))}},ie=b=>{var N;for(const K of b.pJson){const B=r.get(K.id);B==null||B.recieveJson(K)}t.id===b.playerId&&((N=S.current)==null||N.applyAnimation(2))},oe=b=>{var K;(K=S.current)==null||K.chorch(b.element,b.is_chance,3e3),setTimeout(()=>{var Ge,Ke,gn,pe,De,_r,Er,Sr;const B=b.element,F=r.get(b.turnId);if(F===void 0)return;function Xe(vt){var wr;if(F===void 0)return 0;const ui=Array.from(r.values()).filter(yn=>yn.id!==F.id);for(const yn of ui){if(yn.balance+=vt,yn.id===t.id&&m!==void 0&&m.notifications===!0){(wr=I.current)==null||wr.message(`${vt} of money is added to the account`,"info",2,()=>{},!1);var Tr=new Audio("./moneyplus.mp3");Tr.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),Tr.loop=!1,Tr.play()}i(new Map(r.set(yn.id,yn))),F.id===t.id&&(vt>0?t.emit("pay",{balance:vt,from:t.id,to:F.id}):t.emit("pay",{balance:vt,from:F.id,to:t.id}))}return ui.length}var ze=0;switch(B.action){case"move":if(B.tileid){const _t=(Ge=new Map(sr.properties.map(vn=>[vn.id,vn])).get(B.tileid))==null?void 0:Ge.posistion;if(_t===void 0)break;const Te=W(_t,F);ze=Te.time,Te.func()}else if(B.count){const ue=W((F.position+B.count)%40,F,!0,()=>{},B.count>=0);ze=ue.time,ue.func()}break;case"addfunds":if(F.balance+=B.amount??0,F.id===t.id){m!==void 0&&m.notifications===!0&&((Ke=I.current)==null||Ke.message(`${B.amount??0} of money is added to the account`,"info",2,()=>{},!1));var z=new Audio("./moneyplus.mp3");z.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),z.loop=!1,z.play(),(gn=S.current)==null||gn.applyAnimation(2)}break;case"jail":if(B.subaction!==void 0){switch(B.subaction){case"getout":F.getoutCards+=1;break;case"goto":const ue=W(10,F,!1,()=>{F.position=10,F.isInJail=!0;var _t=new Audio("./jail.mp3");_t.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),_t.loop=!1,_t.play(),F.jailTurnsRemaining=3});ze=ue.time,ue.func();break}i(new Map(r.set(F.id,F)))}break;case"removefunds":if(F.balance-=B.amount??0,F.id===t.id){(pe=S.current)==null||pe.applyAnimation(1),m!==void 0&&m.notifications===!0&&((De=I.current)==null||De.message(`${B.amount??0} of money is deducted from the account`,"info",2,()=>{},!1));var z=new Audio("./moneyminus.mp3");z.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),z.loop=!1,z.play()}break;case"removefundstoplayers":Xe(B.amount??0),F.id===t.id&&((_r=S.current)==null||_r.applyAnimation(1));break;case"addfundsfromplayers":Xe(-(B.amount??0));break;case"movenearest":let vt=function(ue,_t){ue.sort((Te,vn)=>Te-vn);for(let Te=0;Te<ue.length;Te++)if(ue[Te]>_t)return ue[Te];return ue[0]};if(!B.groupid)return;var rn="";B.groupid==="utility"?rn="Utilities":rn="Railroad";const ui=sr.properties.filter(ue=>ue.group===rn).map(ue=>ue.posistion),Tr=vt(ui,F.position),wr=W(Tr,F);ze=-1,wr.func(),setTimeout(()=>{var ue;if(F.id===t.id){const _t=(F==null?void 0:F.position)??-1,Te=A.get(_t);Te!==void 0&&((ue=S.current)==null||ue.setStreet({location:_t,rolls:b.rolls,onResponse:(vn,io)=>{var so,oo,Kn,Jt,qe,Hi,Cr,ao,hl,Ag,bg,xg,Ng;if(vn==="buy"){m!==void 0&&m.notifications===!0&&((so=I.current)==null||so.message(`${((Te==null?void 0:Te.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),F.balance-=((Te==null?void 0:Te.price)??0)*1,(oo=S.current)==null||oo.applyAnimation(1),F.properties.push({posistion:F.position,count:0,group:((Kn=A.get(F.position))==null?void 0:Kn.group)??""});var $t=new Audio("./buying1.mp3");$t.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),$t.loop=!1,$t.play(),i(new Map(r.set(t.id,F))),(Jt=S.current)==null||Jt.freeDice();const Wi=r.get(t.id).toJson();t.emit("finish-turn",Wi)}else if(vn==="special_action"){console.log(io),m!==void 0&&m.notifications===!0&&((qe=I.current)==null||qe.message(`${((Te==null?void 0:Te.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),F.balance-=((Te==null?void 0:Te.price)??0)*1;const Gi=io.rolls;(Hi=S.current)==null||Hi.applyAnimation(1),F.properties.push({posistion:F.position,count:0,rent:Gi,group:((Cr=A.get(F.position))==null?void 0:Cr.group)??""});var $t=new Audio("./buying1.mp3");$t.volume=.5*(((m==null?void 0:m.audio[1])??100)/100)*(((m==null?void 0:m.audio[0])??100)/100),$t.loop=!1,$t.play(),i(new Map(r.set(t.id,F))),(ao=S.current)==null||ao.freeDice();const Pr=r.get(t.id).toJson();t.emit("finish-turn",Pr)}else if(vn==="someones"){const Wi=Array.from(r.values());for(const Gi of Wi)for(const lo of Gi.properties)if(lo.posistion===_t){var _n=0;if(Te.group==="Utilities"&&lo.rent){const Pr=[Math.floor(Math.random()*6)+1,Math.floor(Math.random()*6)+1];(hl=S.current)==null||hl.diceResults({l:[Pr[0],Pr[1]],time:2e3,onDone:()=>{var pl,ml,Og;_n=(Pr[0]+Pr[1])*(B.rentmultiplier??1),m!==void 0&&m.notifications===!0&&((pl=I.current)==null||pl.message(`${_n} of money is deducted from the account`,"info",2,()=>{},!1));var fl=new Audio("./moneyminus.mp3");fl.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),fl.loop=!1,fl.play(),F.balance-=_n,(ml=S.current)==null||ml.applyAnimation(1),t.emit("pay",{balance:_n,from:t.id,to:Gi.id}),i(new Map(r.set(t.id,F))),(Og=S.current)==null||Og.freeDice();const CC=r.get(t.id).toJson();t.emit("finish-turn",CC)}})}else if(Te.group==="Railroad"){const Pr=Gi.properties.filter(ml=>ml.group==="Railroad").length;_n=[25,50,100,200][Pr]*(B.rentmultiplier??1),m!==void 0&&m.notifications===!0&&((Ag=I.current)==null||Ag.message(`${_n} of money is deducted from the account`,"info",2,()=>{},!1));var $t=new Audio("./moneyminus.mp3");$t.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),$t.loop=!1,$t.play(),(lo.morgage===void 0||lo.morgage!==void 0&&lo.morgage===!1)&&(F.balance-=_n),(bg=S.current)==null||bg.applyAnimation(1),t.emit("pay",{balance:_n,from:t.id,to:Gi.id}),i(new Map(r.set(t.id,F))),(xg=S.current)==null||xg.freeDice();const pl=r.get(t.id).toJson();t.emit("finish-turn",pl)}}}else{(Ng=S.current)==null||Ng.freeDice();const Wi=r.get(t.id).toJson();t.emit("finish-turn",Wi)}}}))}},wr.time);break;case"propertycharges":let yn=function(ue){for(const _t of ue);return 1};var Oe=(B.buildings??1)*yn(F.properties.filter(ue=>typeof ue.count=="number").map(ue=>ue.count))+(B.hotels??1)*F.properties.filter(ue=>ue.count==="h").length;if(console.log(`
                        ${B.hotels??1} * ${F.properties.filter(ue=>typeof ue.count=="number").length} + 
                        ${B.buildings??1} * ${F.properties.filter(ue=>ue.count==="h").length}
                        `),F.id===t.id){m!==void 0&&m.notifications===!0&&((Er=I.current)==null||Er.message(`${Oe} of money is deducted from the account`,"info",2,()=>{},!1));var z=new Audio("./moneyminus.mp3");z.volume=((m==null?void 0:m.audio[1])??100)/100*(((m==null?void 0:m.audio[0])??100)/100),z.loop=!1,z.play(),(Sr=S.current)==null||Sr.applyAnimation(1)}F.balance-=Oe,i(new Map(r.set(F.id,F)));break}ze>=0&&setTimeout(()=>{var vt;i(new Map(r.set(F.id,F))),F.id===t.id&&((vt=S.current)==null||vt.freeDice(),t.emit("finish-turn",r.get(t.id).toJson()))},ze)},3e3)};function Se(b){const N=r.get(b.id);N!==void 0&&(N.positions={x:b.x,y:b.y},r.set(b.id,N))}function Be(){var b;p.pause(),(b=I.current)==null||b.dialog((N,K)=>({innerHTML:"<h3> LOST CONNECTION </h3> <p> you were disconnected from the game </p>",buttons:[K("PLAY ANOTHER GAME",()=>{N(),document.location.reload()})]}),"loosing")}function Pe(b){const N=r.get(b.playerId);N!==void 0&&N.recieveJson(b.pJson)}document.addEventListener("mousemove",w),t.on("initials",se),t.on("new-player",ce),t.on("ready",G),t.on("start-game",Ce),t.on("disconnected-player",Ie),t.on("turn-finished",x),t.on("message",j),t.on("dice_roll_result",V),t.on("unjail",ne),t.on("member_updating",ie),t.on("chorch_result",oe),t.on("mouse",Se),t.on("disconnect",Be),t.on("player_update",Pe);var we=!0;return we&&t.emit("name",e),()=>{we=!1,clearInterval(R),document.removeEventListener("mousemove",w)}},[]),C.useEffect(()=>{var m;(m=P.current)==null||m.reRenderPlayerList()},[r]),u?h.jsxs(h.Fragment,{children:[T!==void 0&&T.accessibility[3]?h.jsx("div",{className:"cursors",children:Array.from(r.values()).filter(m=>m.id!==t.id).map((m,R)=>h.jsx("img",{src:"./cursor.png",style:{translate:`${m.positions.x}px ${m.positions.y}px`},className:"cursor"},R))}):h.jsx(h.Fragment,{}),h.jsxs("main",{children:[h.jsx(lk,{currentTurn:o,ref:P,name:e,socket:t,players:s,server:n,Morgage:{onCanc:m=>{var W,se;var R=JSON.parse(document.cookie).settings;const w=r.get(t.id);if(w!==void 0){R!==void 0&&R.notifications===!0&&((W=I.current)==null||W.message(`${m} of money is deducted from the account for canceling mortgage`,"info",2,()=>{},!1)),w.balance-=m,(se=S.current)==null||se.applyAnimation(1);var H=new Audio("./buying1.mp3");H.volume=.5*(((R==null?void 0:R.audio[1])??100)/100)*(((R==null?void 0:R.audio[0])??100)/100),H.loop=!1,H.play(),i(new Map(r.set(t.id,w)))}},onMort:m=>{var W,se;var R=JSON.parse(document.cookie).settings;const w=r.get(t.id);if(w!==void 0){R!==void 0&&R.notifications===!0&&((W=I.current)==null||W.message(`${m} of money is deducted from the account for mortgage`,"info",2,()=>{},!1)),w.balance-=m,(se=S.current)==null||se.applyAnimation(1);var H=new Audio("./buying1.mp3");H.volume=.5*(((R==null?void 0:R.audio[1])??100)/100)*(((R==null?void 0:R.audio[0])??100)/100),H.loop=!1,H.play(),i(new Map(r.set(t.id,w)))}}},callServer:()=>{const m=document.body.querySelector("#root");m.style.transform="translateX(100%)"}}),h.jsx(dk,{clickedOnBoard:m=>{var R;(R=P.current)==null||R.clickedOnBoard(m)},ref:S,socket:t,players:Array.from(r.values()),myTurn:o===t.id})]}),h.jsx(pE,{ref:I}),h.jsxs("div",{id:"server",children:[h.jsxs("main",{children:[h.jsx("div",{className:"upper",onClick:()=>{const m=document.body.querySelector("#root");m.style.transform=""},children:"Server.exe"}),h.jsx("div",{className:"middle"}),h.jsx("div",{className:"lower",children:h.jsx("input",{type:"text"})})]}),h.jsx("footer",{onClick:()=>{const m=document.body.querySelector("#root");m.style.transform=""},children:h.jsx("img",{src:"icon.png",alt:""})})]})]}):h.jsxs("div",{className:"lobby",children:[h.jsxs("main",{children:[h.jsx("section",{children:h.jsxs("div",{children:[h.jsxs("h3",{children:["Hello there ",e]}),"the players that are currently in the lobby are",h.jsxs("div",{children:[Array.from(r.values()).map((m,R)=>h.jsx("p",{style:m.ready?{backgroundColor:"#32a852"}:{},className:"lobby-players",children:m.username},R)),h.jsx("center",{children:h.jsx("button",{disabled:a,onClick:()=>{t.emit("ready",{ready:!f}),y(!f)},children:f?"Not Ready":"Ready"})})]}),h.jsx("br",{})]})}),h.jsxs("div",{children:[n===void 0?h.jsx(h.Fragment,{children:h.jsxs("p",{style:{opacity:.5,margin:0,textAlign:"center"},children:["the server-admin is ",h.jsx("br",{})," choosing the gamemode"]})}):h.jsx(h.Fragment,{}),h.jsxs("div",{className:"modes",children:[h.jsxs("main",{children:[h.jsx("h3",{children:Ol[g].Name}),h.jsxs("p",{children:["Winning: ",Ol[g].WinningMode.toUpperCase()]}),h.jsxs("p",{children:["Deals: ",Ol[g].AllowDeals?"Allowed":"Not-Allowed"]})]}),h.jsx("div",{children:Ol.map((m,R)=>h.jsx("p",{"data-select":R===g,onClick:()=>{n!==void 0&&t.emit("ready",{mode:R})},"data-disabled":n===void 0,children:m.Name},R))}),h.jsx("button",{children:"Custom Mode"})]})]})]}),h.jsx("p",{id:"floating-clock"})]})}var Wc={},fk={get exports(){return Wc},set exports(t){Wc=t}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,s=0,o=this._parts.length;s<o;s++)i.append(this._parts[s]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(fk);var pk=Wc.BufferBuilder,e0=Wc.binaryFeatures,mk={unpack:function(t){var e=new gt(t);return e.unpack()},pack:function(t){var e=new yt;e.pack(t);var n=e.getBuffer();return n}},t0=mk;function gt(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}gt.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};gt.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};gt.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};gt.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};gt.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};gt.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-(1<<8)};gt.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-(1<<16)};gt.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};gt.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};gt.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};gt.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,s;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(s=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(s),n+=2):(s=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(s),n+=3);return this.index+=t,r};gt.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};gt.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};gt.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};gt.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,s=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*s};gt.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function yt(){this.bufferBuilder=new pk}yt.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};yt.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)e0.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)e0.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};yt.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};yt.prototype.pack_string=function(t){var e=yk(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};yt.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};yt.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};yt.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),s=Math.pow(2,32),o=e<<31|n+1023<<20|i/s&1048575,l=i%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(l)};yt.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};yt.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};yt.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};yt.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};yt.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};yt.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};yt.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};yt.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};yt.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function gk(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function yk(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,gk).length}let mE=!0,gE=!0;function Io(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Ks(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,l){if(o!==e)return i.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,a),i.apply(this,[o,a])};const s=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(l))return s.apply(this,arguments);const a=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function vk(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(mE=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function _k(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(gE=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function um(){if(typeof window=="object"){if(mE)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Fu(t,e){gE&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Ek(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Io(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=Io(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=Io(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Io(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function n0(t){return Object.prototype.toString.call(t)==="[object Object]"}function yE(t){return n0(t)?Object.keys(t).reduce(function(e,n){const r=n0(t[n]),i=r?yE(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Sf(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Sf(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Sf(t,t.get(i),n)})}))}function r0(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(l=>{l.type===r&&l.trackId===o.id&&Sf(t,l,i)})}),i}const i0=um;function vE(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,y){return f?f+y.charAt(0).toUpperCase()+y.slice(1):y==="deviceId"?"sourceId":y};if(u.ideal!==void 0){a.optional=a.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",c)]=u.ideal,a.optional.push(f),f={},f[d("max",c)]=u.ideal,a.optional.push(f)):(f[d("",c)]=u.ideal,a.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[d("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[d(f,c)]=u[f])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(e.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(g=>g.kind==="videoinput");let y=f.find(g=>d.some(_=>g.label.toLowerCase().includes(_)));return!y&&f.length&&d.includes("back")&&(y=f[f.length-1]),y&&(l.video.deviceId=c.exact?{exact:y.deviceId}:{ideal:y.deviceId}),l.video=r(l.video),i0("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return i0("chrome: "+JSON.stringify(l)),a(l)},s=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,a,c){i(l,u=>{n.webkitGetUserMedia(u,a,d=>{c&&c(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function Sk(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),t.navigator.mediaDevices.getUserMedia(r)})}}}function _E(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function EE(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ks(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function SE(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const l=this._senders.find(a=>a.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function TE(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const o=function(a){const c={};return a.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(y=>{f[y]=d.stat(y)}),c[f.id]=f}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(o(c)))};return e.apply(this,[a,r])}return new Promise((a,c)=>{e.apply(this,[function(u){a(l(o(u)))},c])}).then(i,s)}}function wE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>r0(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Ks(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>r0(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(l=>{l.track===r&&(i?o=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(s?o=!0:s=l),l.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function CE(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(o);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function PE(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return CE(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(y=>y.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(_=>_===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(_=>_.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[d.id];if(g)g.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const _=new t.MediaStream([u]);this._streams[d.id]=_,this._reverseStreams[_.id]=d,this.addStream(_)}return this.getSenders().find(_=>_.track===u)};function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const y=c._reverseStreams[f],g=c._streams[y.id];d=d.replace(new RegExp(g.id,"g"),y.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const y=c._reverseStreams[f],g=c._streams[y.id];d=d.replace(new RegExp(y.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[g=>{const _=s(this,g);f[0].apply(null,[_])},g=>{f[1]&&f[1].apply(null,g)},arguments[2]]):u.apply(this,arguments).then(g=>s(this,g))}};t.RTCPeerConnection.prototype[c]=d[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(y=>{this._streams[y].getTracks().find(_=>u.track===_)&&(f=this._streams[y])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Tf(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function RE(t,e){Ks(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const s0=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:RE,shimAddTrackRemoveTrack:PE,shimAddTrackRemoveTrackWithNative:CE,shimGetDisplayMedia:Sk,shimGetSendersWithDtmf:SE,shimGetStats:TE,shimGetUserMedia:vE,shimMediaStream:_E,shimOnTrack:EE,shimPeerConnection:Tf,shimSenderReceiverGetStats:wE},Symbol.toStringTag,{value:"Module"}));function Tk(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&Fu("RTCIceServer.url","RTCIceServer.urls");const s=typeof i=="string";return s&&(i=[i]),i=i.filter(o=>{if(o.indexOf("stun:")===0)return!1;const l=o.startsWith("turn")&&!o.startsWith("turn:[")&&o.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}var Gc={},wk={get exports(){return Gc},set exports(t){Gc=t}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,s){return(s>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]=r[s+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,s=n.substr(n.indexOf(" ")+1).split(";"),o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var s=[];Object.keys(n.parameters).forEach(function(o){n.parameters[o]?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(s){r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substr(r+1,s-r-1),i.value=n.substr(s+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(s){i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substr(12),password:s.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),s=i[0].split(" "),o=3;o<s.length;o++){var l=s[o],a=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=e.parseRtpMap(a),u=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=u.length?e.parseFmtp(u[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(d){r.headerExtensions.push(e.parseExtmap(d))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(o){return o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(o){i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});var s=0;return r.codecs.forEach(function(o){o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(o){i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,u=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){var y=f.substr(17).split(" ");return y.map(function(g){return parseInt(g,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),i.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var y={ssrc:a,codecPayloadType:parseInt(f.parameters.apt,10)};a&&c&&(y.rtx={ssrc:c}),r.push(y),s&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},r.push(y))}}),r.length===0&&a&&r.push({ssrc:a});var d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substr(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(function(f){f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;var o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var s=e.matchPrefix(n,"a=ssrc:").map(function(o){return e.parseSsrcMedia(o)}).filter(function(o){return o.attribute==="msid"});if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),s;i.length>0&&(s=parseInt(i[0].substr(19),10)),isNaN(s)&&(s=65536);var o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:s};var l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var s,o=r!==void 0?r:2;n?s=n:s=e.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,s){var o=e.writeRtpDescription(n.kind,r);if(o+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),o+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),o+="a=mid:"+n.mid+`\r
`,n.direction?o+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?o+=`a=sendrecv\r
`:n.rtpSender?o+=`a=sendonly\r
`:n.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,n.rtpSender){var l="msid:"+s.id+" "+n.rtpSender.track.id+`\r
`;o+="a="+l,o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),o},e.getDirection=function(n,r){for(var i=e.splitLines(n),s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(wk);const sc=Gc;var Y=Gc;function Ck(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function o0(t,e,n,r,i){var s=Y.writeRtpDescription(t.kind,e);if(s+=Y.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=Y.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),s+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?s+=`a=sendrecv\r
`:t.rtpSender?s+=`a=sendonly\r
`:t.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var l="msid:"+(r?r.id:"-")+" "+o+`\r
`;s+="a="+l,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+Y.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+Y.localCName+`\r
`),s}function Pk(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var s=typeof i=="string";return s&&(i=[i]),i=i.filter(function(o){var l=o.indexOf("turn:")===0&&o.indexOf("transport=udp")!==-1&&o.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):o.indexOf("stun:")===0&&e>=14393&&o.indexOf("?transport=udp")===-1}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}function Dl(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(s,o){s=parseInt(s,10);for(var l=0;l<o.length;l++)if(o[l].payloadType===s||o[l].preferredPayloadType===s)return o[l]},i=function(s,o,l,a){var c=r(s.parameters.apt,l),u=r(o.parameters.apt,a);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return t.codecs.forEach(function(s){for(var o=0;o<e.codecs.length;o++){var l=e.codecs[o];if(s.name.toLowerCase()===l.name.toLowerCase()&&s.clockRate===l.clockRate){if(s.name.toLowerCase()==="rtx"&&s.parameters&&l.parameters.apt&&!i(s,l,t.codecs,e.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(s.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<s.rtcpFeedback.length;c++)if(s.rtcpFeedback[c].type===a.type&&s.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(s){for(var o=0;o<e.headerExtensions.length;o++){var l=e.headerExtensions[o];if(s.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function a0(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function Wd(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function Tt(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var Rk=function(t,e){function n(a,c){c.addTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,u,d){var f=new Event("track");f.track=c,f.receiver=u,f.transceiver={receiver:u},f.streams=d,t.setTimeout(function(){a._dispatchEvent("track",f)})}var s=function(a){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){c[f]=u[f].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw Tt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=Pk(a.iceServers||[],e),this._iceGatherers=[],a.iceCandidatePoolSize)for(var d=a.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=Y.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},s.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(a,c){var u=this.transceivers.length>0,d={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)d.iceTransport=this.transceivers[0].iceTransport,d.dtlsTransport=this.transceivers[0].dtlsTransport;else{var f=this._createIceAndDtlsTransports();d.iceTransport=f.iceTransport,d.dtlsTransport=f.dtlsTransport}return c||this.transceivers.push(d),d},s.prototype.addTrack=function(a,c){if(this._isClosed)throw Tt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(y){return y.track===a});if(u)throw Tt("InvalidAccessError","Track already exists.");for(var d,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===a.kind&&(d=this.transceivers[f]);return d||(d=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),d.track=a,d.stream=c,d.rtpSender=new t.RTCRtpSender(a,d.dtlsTransport),d.rtpSender},s.prototype.addStream=function(a){var c=this;if(e>=15025)a.getTracks().forEach(function(d){c.addTrack(d,a)});else{var u=a.clone();a.getTracks().forEach(function(d,f){var y=u.getTracks()[f];d.addEventListener("enabled",function(g){y.enabled=g.enabled})}),u.getTracks().forEach(function(d){c.addTrack(d,u)})}},s.prototype.removeTrack=function(a){if(this._isClosed)throw Tt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(f){return f.rtpSender===a});if(!c)throw Tt("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var d=this.transceivers.map(function(f){return f.stream});d.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(u){var d=c.getSenders().find(function(f){return f.track===u});d&&c.removeTrack(d)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},s.prototype._createIceGatherer=function(a,c){var u=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(d,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(f){var y=!f.candidate||Object.keys(f.candidate).length===0;d.state=y?"completed":"gathering",u.transceivers[a].bufferedCandidateEvents!==null&&u.transceivers[a].bufferedCandidateEvents.push(f)},d.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),d},s.prototype._gather=function(a,c){var u=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var f=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(y){if(!(u.usingBundle&&c>0)){var g=new Event("icecandidate");g.candidate={sdpMid:a,sdpMLineIndex:c};var _=y.candidate,T=!_||Object.keys(_).length===0;if(T)(d.state==="new"||d.state==="gathering")&&(d.state="completed");else{d.state==="new"&&(d.state="gathering"),_.component=1,_.ufrag=d.getLocalParameters().usernameFragment;var v=Y.writeCandidate(_);g.candidate=Object.assign(g.candidate,Y.parseCandidate(v)),g.candidate.candidate=v,g.candidate.toJSON=function(){return{candidate:g.candidate.candidate,sdpMid:g.candidate.sdpMid,sdpMLineIndex:g.candidate.sdpMLineIndex,usernameFragment:g.candidate.usernameFragment}}}var p=Y.getMediaSections(u._localDescription.sdp);T?p[g.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:p[g.candidate.sdpMLineIndex]+="a="+g.candidate.candidate+`\r
`,u._localDescription.sdp=Y.getDescription(u._localDescription.sdp)+p.join("");var E=u.transceivers.every(function(S){return S.iceGatherer&&S.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),T||u._dispatchEvent("icecandidate",g),E&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},t.setTimeout(function(){f.forEach(function(y){d.onlocalcandidate(y)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var a=this,c=new t.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var u=new t.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){a._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},s.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var u=this.transceivers[a].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[a].iceTransport);var d=this.transceivers[a].dtlsTransport;d&&(delete d.ondtlsstatechange,delete d.onerror,delete this.transceivers[a].dtlsTransport)},s.prototype._transceive=function(a,c,u){var d=Dl(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(d.encodings=a.sendEncodingParameters,d.rtcp={cname:Y.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(d.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(d)),u&&a.rtpReceiver&&d.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&e<15019&&a.recvEncodingParameters.forEach(function(f){delete f.rtx}),a.recvEncodingParameters.length?d.encodings=a.recvEncodingParameters:d.encodings=[{}],d.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(d.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(d.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(d))},s.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Tt("TypeError",'Unsupported type "'+a.type+'"'));if(!a0("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Tt("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var u,d;if(a.type==="offer")u=Y.splitSections(a.sdp),d=u.shift(),u.forEach(function(y,g){var _=Y.parseRtpParameters(y);c.transceivers[g].localCapabilities=_}),c.transceivers.forEach(function(y,g){c._gather(y.mid,g)});else if(a.type==="answer"){u=Y.splitSections(c._remoteDescription.sdp),d=u.shift();var f=Y.matchPrefix(d,"a=ice-lite").length>0;u.forEach(function(y,g){var _=c.transceivers[g],T=_.iceGatherer,v=_.iceTransport,p=_.dtlsTransport,E=_.localCapabilities,S=_.remoteCapabilities,P=Y.isRejected(y)&&Y.matchPrefix(y,"a=bundle-only").length===0;if(!P&&!_.rejected){var I=Y.getIceParameters(y,d),A=Y.getDtlsParameters(y,d);f&&(A.role="server"),(!c.usingBundle||g===0)&&(c._gather(_.mid,g),v.state==="new"&&v.start(T,I,f?"controlling":"controlled"),p.state==="new"&&p.start(A));var m=Dl(E,S);c._transceive(_,m.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Tt("TypeError",'Unsupported type "'+a.type+'"'));if(!a0("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Tt("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(v){u[v.id]=v});var d=[],f=Y.splitSections(a.sdp),y=f.shift(),g=Y.matchPrefix(y,"a=ice-lite").length>0,_=Y.matchPrefix(y,"a=group:BUNDLE ").length>0;c.usingBundle=_;var T=Y.matchPrefix(y,"a=ice-options:")[0];return T?c.canTrickleIceCandidates=T.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,f.forEach(function(v,p){var E=Y.splitLines(v),S=Y.getKind(v),P=Y.isRejected(v)&&Y.matchPrefix(v,"a=bundle-only").length===0,I=E[0].substr(2).split(" ")[2],A=Y.getDirection(v,y),m=Y.parseMsid(v),R=Y.getMid(v)||Y.generateIdentifier();if(P||S==="application"&&(I==="DTLS/SCTP"||I==="UDP/DTLS/SCTP")){c.transceivers[p]={mid:R,kind:S,protocol:I,rejected:!0};return}!P&&c.transceivers[p]&&c.transceivers[p].rejected&&(c.transceivers[p]=c._createTransceiver(S,!0));var w,H,W,se,ce,G,Ce,Ie,x,j=Y.parseRtpParameters(v),V,ne;P||(V=Y.getIceParameters(v,y),ne=Y.getDtlsParameters(v,y),ne.role="client"),Ce=Y.parseRtpEncodingParameters(v);var ie=Y.parseRtcpParameters(v),oe=Y.matchPrefix(v,"a=end-of-candidates",y).length>0,Se=Y.matchPrefix(v,"a=candidate:").map(function(N){return Y.parseCandidate(N)}).filter(function(N){return N.component===1});if((a.type==="offer"||a.type==="answer")&&!P&&_&&p>0&&c.transceivers[p]&&(c._disposeIceAndDtlsTransports(p),c.transceivers[p].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[p].iceTransport=c.transceivers[0].iceTransport,c.transceivers[p].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[p].rtpSender&&c.transceivers[p].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[p].rtpReceiver&&c.transceivers[p].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!P){w=c.transceivers[p]||c._createTransceiver(S),w.mid=R,w.iceGatherer||(w.iceGatherer=c._createIceGatherer(p,_)),Se.length&&w.iceTransport.state==="new"&&(oe&&(!_||p===0)?w.iceTransport.setRemoteCandidates(Se):Se.forEach(function(N){Wd(w.iceTransport,N)})),Ie=t.RTCRtpReceiver.getCapabilities(S),e<15019&&(Ie.codecs=Ie.codecs.filter(function(N){return N.name!=="rtx"})),G=w.sendEncodingParameters||[{ssrc:(2*p+2)*1001}];var Be=!1;if(A==="sendrecv"||A==="sendonly"){if(Be=!w.rtpReceiver,ce=w.rtpReceiver||new t.RTCRtpReceiver(w.dtlsTransport,S),Be){var Pe;x=ce.track,m&&m.stream==="-"||(m?(u[m.stream]||(u[m.stream]=new t.MediaStream,Object.defineProperty(u[m.stream],"id",{get:function(){return m.stream}})),Object.defineProperty(x,"id",{get:function(){return m.track}}),Pe=u[m.stream]):(u.default||(u.default=new t.MediaStream),Pe=u.default)),Pe&&(n(x,Pe),w.associatedRemoteMediaStreams.push(Pe)),d.push([x,ce,Pe])}}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach(function(N){var K=N.getTracks().find(function(B){return B.id===w.rtpReceiver.track.id});K&&r(K,N)}),w.associatedRemoteMediaStreams=[]);w.localCapabilities=Ie,w.remoteCapabilities=j,w.rtpReceiver=ce,w.rtcpParameters=ie,w.sendEncodingParameters=G,w.recvEncodingParameters=Ce,c._transceive(c.transceivers[p],!1,Be)}else if(a.type==="answer"&&!P){w=c.transceivers[p],H=w.iceGatherer,W=w.iceTransport,se=w.dtlsTransport,ce=w.rtpReceiver,G=w.sendEncodingParameters,Ie=w.localCapabilities,c.transceivers[p].recvEncodingParameters=Ce,c.transceivers[p].remoteCapabilities=j,c.transceivers[p].rtcpParameters=ie,Se.length&&W.state==="new"&&((g||oe)&&(!_||p===0)?W.setRemoteCandidates(Se):Se.forEach(function(N){Wd(w.iceTransport,N)})),(!_||p===0)&&(W.state==="new"&&W.start(H,V,"controlling"),se.state==="new"&&se.start(ne));var we=Dl(w.localCapabilities,w.remoteCapabilities),b=we.codecs.filter(function(N){return N.name.toLowerCase()==="rtx"}).length;!b&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,c._transceive(w,A==="sendrecv"||A==="recvonly",A==="sendrecv"||A==="sendonly"),ce&&(A==="sendrecv"||A==="sendonly")?(x=ce.track,m?(u[m.stream]||(u[m.stream]=new t.MediaStream),n(x,u[m.stream]),d.push([x,ce,u[m.stream]])):(u.default||(u.default=new t.MediaStream),n(x,u.default),d.push([x,ce,u.default]))):delete w.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(v){var p=u[v];if(p.getTracks().length){if(c.remoteStreams.indexOf(p)===-1){c.remoteStreams.push(p);var E=new Event("addstream");E.stream=p,t.setTimeout(function(){c._dispatchEvent("addstream",E)})}d.forEach(function(S){var P=S[0],I=S[1];p.id===S[2].id&&i(c,P,I,[p])})}}),d.forEach(function(v){v[2]||i(c,v[0],v[1],[])}),t.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.state==="new"&&v.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),v.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},s.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},s.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&!d.rejected&&c[d.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},s.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&d.dtlsTransport&&!d.rejected&&(c[d.iceTransport.state]++,c[d.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},s.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(Tt("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(g){return g.kind==="audio"}).length,u=a.transceivers.filter(function(g){return g.kind==="video"}).length,d=arguments[0];if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");d.offerToReceiveAudio!==void 0&&(d.offerToReceiveAudio===!0?c=1:d.offerToReceiveAudio===!1?c=0:c=d.offerToReceiveAudio),d.offerToReceiveVideo!==void 0&&(d.offerToReceiveVideo===!0?u=1:d.offerToReceiveVideo===!1?u=0:u=d.offerToReceiveVideo)}for(a.transceivers.forEach(function(g){g.kind==="audio"?(c--,c<0&&(g.wantReceive=!1)):g.kind==="video"&&(u--,u<0&&(g.wantReceive=!1))});c>0||u>0;)c>0&&(a._createTransceiver("audio"),c--),u>0&&(a._createTransceiver("video"),u--);var f=Y.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(g,_){var T=g.track,v=g.kind,p=g.mid||Y.generateIdentifier();g.mid=p,g.iceGatherer||(g.iceGatherer=a._createIceGatherer(_,a.usingBundle));var E=t.RTCRtpSender.getCapabilities(v);e<15019&&(E.codecs=E.codecs.filter(function(P){return P.name!=="rtx"})),E.codecs.forEach(function(P){P.name==="H264"&&P.parameters["level-asymmetry-allowed"]===void 0&&(P.parameters["level-asymmetry-allowed"]="1"),g.remoteCapabilities&&g.remoteCapabilities.codecs&&g.remoteCapabilities.codecs.forEach(function(I){P.name.toLowerCase()===I.name.toLowerCase()&&P.clockRate===I.clockRate&&(P.preferredPayloadType=I.payloadType)})}),E.headerExtensions.forEach(function(P){var I=g.remoteCapabilities&&g.remoteCapabilities.headerExtensions||[];I.forEach(function(A){P.uri===A.uri&&(P.id=A.id)})});var S=g.sendEncodingParameters||[{ssrc:(2*_+1)*1001}];T&&e>=15019&&v==="video"&&!S[0].rtx&&(S[0].rtx={ssrc:S[0].ssrc+1}),g.wantReceive&&(g.rtpReceiver=new t.RTCRtpReceiver(g.dtlsTransport,v)),g.localCapabilities=E,g.sendEncodingParameters=S}),a._config.bundlePolicy!=="max-compat"&&(f+="a=group:BUNDLE "+a.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(g,_){f+=o0(g,g.localCapabilities,"offer",g.stream,a._dtlsRole),f+=`a=rtcp-rsize\r
`,g.iceGatherer&&a.iceGatheringState!=="new"&&(_===0||!a.usingBundle)&&(g.iceGatherer.getLocalCandidates().forEach(function(T){T.component=1,f+="a="+Y.writeCandidate(T)+`\r
`}),g.iceGatherer.state==="completed"&&(f+=`a=end-of-candidates\r
`))});var y=new t.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(y)},s.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(Tt("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(Tt("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=Y.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=Y.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(f,y){if(!(y+1>u)){if(f.rejected){f.kind==="application"?f.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+f.protocol+` webrtc-datachannel\r
`:f.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:f.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+f.mid+`\r
`;return}if(f.stream){var g;f.kind==="audio"?g=f.stream.getAudioTracks()[0]:f.kind==="video"&&(g=f.stream.getVideoTracks()[0]),g&&e>=15019&&f.kind==="video"&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1})}var _=Dl(f.localCapabilities,f.remoteCapabilities),T=_.codecs.filter(function(v){return v.name.toLowerCase()==="rtx"}).length;!T&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,c+=o0(f,_,"answer",f.stream,a._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var d=new t.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(d)},s.prototype.addIceCandidate=function(a){var c=this,u;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(d,f){if(c._remoteDescription)if(!a||a.candidate==="")for(var y=0;y<c.transceivers.length&&!(!c.transceivers[y].rejected&&(c.transceivers[y].iceTransport.addRemoteCandidate({}),u=Y.getMediaSections(c._remoteDescription.sdp),u[y]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=Y.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));y++);else{var g=a.sdpMLineIndex;if(a.sdpMid){for(var _=0;_<c.transceivers.length;_++)if(c.transceivers[_].mid===a.sdpMid){g=_;break}}var T=c.transceivers[g];if(T){if(T.rejected)return d();var v=Object.keys(a.candidate).length>0?Y.parseCandidate(a.candidate):{};if(v.protocol==="tcp"&&(v.port===0||v.port===9)||v.component&&v.component!==1)return d();if((g===0||g>0&&T.iceTransport!==c.transceivers[0].iceTransport)&&!Wd(T.iceTransport,v))return f(Tt("OperationError","Can not add ICE candidate"));var p=a.candidate.trim();p.indexOf("a=")===0&&(p=p.substr(2)),u=Y.getMediaSections(c._remoteDescription.sdp),u[g]+="a="+(v.type?p:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=Y.getDescription(c._remoteDescription.sdp)+u.join("")}else return f(Tt("OperationError","Can not add ICE candidate"))}else return f(Tt("InvalidStateError","Can not add ICE candidate without a remote description"));d()})},s.prototype.getStats=function(a){if(a&&a instanceof t.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(d){d.rtpSender&&d.rtpSender.track===a?c=d.rtpSender:d.rtpReceiver&&d.rtpReceiver.track===a&&(c=d.rtpReceiver)}),!c)throw Tt("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(d){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(f){d[f]&&u.push(d[f].getStats())})}),Promise.all(u).then(function(d){var f=new Map;return d.forEach(function(y){y.forEach(function(g){f.set(g.id,g)})}),f})};var o=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];o.forEach(function(a){var c=t[a];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(d){var f=new Map;return Object.keys(d).forEach(function(y){d[y].type=Ck(d[y]),f.set(y,d[y])}),f})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(d){typeof u[0]=="function"&&u[0].apply(null,[d])},function(d){typeof u[1]=="function"&&u[1].apply(null,[d])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(d){typeof u[2]=="function"&&u[2].apply(null,[d])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),s};function IE(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(s=>Promise.reject(n(s)))}}function kE(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function wf(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const s=new Event("enabled");s.enabled=i,this.dispatchEvent(s)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=Rk(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=Tk(i.iceServers,e.version),um("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function AE(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const l0=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:kE,shimGetUserMedia:IE,shimPeerConnection:wf,shimReplaceTrack:AE},Symbol.toStringTag,{value:"Module"}));function bE(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Fu("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,l,a){l in o&&!(a in o)&&(o[a]=o[l],delete o[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function Ik(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function xE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Cf(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,l]=arguments;return r.apply(this,[s||null]).then(a=>{if(e.version<53&&!o)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,d)=>{a.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(o,l)}}function NE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function OE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Ks(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function DE(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Fu("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function ME(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function jE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,o.sendEncodings=r.sendEncodings,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function LE(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function VE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function FE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const c0=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:jE,shimCreateAnswer:FE,shimCreateOffer:VE,shimGetDisplayMedia:Ik,shimGetParameters:LE,shimGetUserMedia:bE,shimOnTrack:xE,shimPeerConnection:Cf,shimRTCDataChannel:ME,shimReceiverGetStats:OE,shimRemoveStream:DE,shimSenderGetStats:NE},Symbol.toStringTag,{value:"Module"}));function UE(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function $E(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function BE(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let l=function(a,c,u){const d=i.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=l,l=function(a,c,u){const d=s.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=l,l=function(a,c,u){const d=o.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=l}function zE(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(qE(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}.bind(e))}function qE(t){return t&&t.video!==void 0?Object.assign({},t,{video:yE(t.video)}):t}function HE(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(Fu("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function WE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function GE(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video")}return e.apply(this,arguments)}}function KE(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const u0=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:KE,shimCallbacksAPI:BE,shimConstraints:qE,shimCreateOfferLegacy:GE,shimGetUserMedia:zE,shimLocalStreamsAPI:UE,shimRTCIceServerUrls:HE,shimRemoteStreamsAPI:$E,shimTrackEventTransceiver:WE},Symbol.toStringTag,{value:"Module"}));function oc(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),s=sc.parseCandidate(r.candidate),o=Object.assign(i,s);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Ks(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ko(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=sc.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=sc.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return e.browser==="firefox"&&(e.version<57?l===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},s=function(l,a){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=sc.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),u=s(arguments[0],a);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Ao(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Ks(t,"datachannel",r=>(e(r.channel,r.target),r))}function Pf(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Rf(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function ac(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const kk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Rf,shimAddIceCandidateNullOrEmpty:ac,shimConnectionState:Pf,shimMaxMessageSize:ko,shimRTCIceCandidate:oc,shimSendThrowTypeError:Ao},Symbol.toStringTag,{value:"Module"}));function Ak({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=um,r=Ek(t),i={browserDetails:r,commonShim:kk,extractVersion:Io,disableLog:vk,disableWarnings:_k};switch(r.browser){case"chrome":if(!s0||!Tf||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=s0,ac(t,r),vE(t,r),_E(t),Tf(t,r),EE(t),PE(t,r),SE(t),TE(t),wE(t),RE(t,r),oc(t),Pf(t),ko(t,r),Ao(t),Rf(t,r);break;case"firefox":if(!c0||!Cf||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=c0,ac(t,r),bE(t,r),Cf(t,r),xE(t),DE(t),NE(t),OE(t),ME(t),jE(t),LE(t),VE(t),FE(t),oc(t),Pf(t),ko(t,r),Ao(t);break;case"edge":if(!l0||!wf||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=l0,IE(t),kE(t),wf(t,r),AE(t),ko(t,r),Ao(t);break;case"safari":if(!u0||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=u0,ac(t,r),HE(t),GE(t),BE(t),UE(t),$E(t),WE(t),zE(t),KE(t),oc(t),ko(t,r),Ao(t),Rf(t,r);break;default:n("Unsupported browser!");break}return i}const d0=Ak({window:typeof window>"u"?void 0:window});function Wn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var Gd=d0.default||d0,vo=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return Gd.browserDetails.browser},t.prototype.getVersion=function(){return Gd.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=Gd.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),h0={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},bk=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=h0,this.browser=vo.getBrowser(),this.browserVersion=vo.getVersion(),this.supports=function(){var e={browser:vo.isBrowserSupported(),webRTC:vo.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(h0),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!vo.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=t0.pack,this.unpack=t0.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/ye.chunkedMTU),s=0,o=0;o<r;){var l=Math.min(r,o+ye.chunkedMTU),a=e.slice(o,l),c={__peerData:this._dataCount,n:s,data:a,total:i};n.push(c),o=l,s++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),ye=new bk,JE={};Wn(JE,"Peer",()=>w0,t=>w0=t);var Ba={},xk=Object.prototype.hasOwnProperty,Vt="~";function ga(){}Object.create&&(ga.prototype=Object.create(null),new ga().__proto__||(Vt=!1));function Nk(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function QE(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new Nk(n,r||t,i),o=Vt?Vt+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function lc(t,e){--t._eventsCount===0?t._events=new ga:delete t._events[e]}function Nt(){this._events=new ga,this._eventsCount=0}Nt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)xk.call(n,r)&&e.push(Vt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Nt.prototype.listeners=function(e){var n=Vt?Vt+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};Nt.prototype.listenerCount=function(e){var n=Vt?Vt+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Nt.prototype.emit=function(e,n,r,i,s,o){var l=Vt?Vt+e:e;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,d;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,s),!0;case 6:return a.fn.call(a.context,n,r,i,s,o),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];a.fn.apply(a.context,u)}else{var f=a.length,y;for(d=0;d<f;d++)switch(a[d].once&&this.removeListener(e,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,n);break;case 3:a[d].fn.call(a[d].context,n,r);break;case 4:a[d].fn.call(a[d].context,n,r,i);break;default:if(!u)for(y=1,u=new Array(c-1);y<c;y++)u[y-1]=arguments[y];a[d].fn.apply(a[d].context,u)}}return!0};Nt.prototype.on=function(e,n,r){return QE(this,e,n,r,!1)};Nt.prototype.once=function(e,n,r){return QE(this,e,n,r,!0)};Nt.prototype.removeListener=function(e,n,r,i){var s=Vt?Vt+e:e;if(!this._events[s])return this;if(!n)return lc(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&lc(this,s);else{for(var l=0,a=[],c=o.length;l<c;l++)(o[l].fn!==n||i&&!o[l].once||r&&o[l].context!==r)&&a.push(o[l]);a.length?this._events[s]=a.length===1?a[0]:a:lc(this,s)}return this};Nt.prototype.removeAllListeners=function(e){var n;return e?(n=Vt?Vt+e:e,this._events[n]&&lc(this,n)):(this._events=new ga,this._eventsCount=0),this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.addListener=Nt.prototype.on;Nt.prefixed=Vt;Nt.EventEmitter=Nt;Ba=Nt;var $={};Wn($,"LogLevel",()=>Bt,t=>Bt=t);Wn($,"default",()=>f0,t=>f0=t);var di=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},hi=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Ok="PeerJS: ",Bt;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(Bt||(Bt={}));var Dk=function(){function t(){this._logLevel=Bt.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Bt.All&&this._print.apply(this,hi([Bt.All],di(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Bt.Warnings&&this._print.apply(this,hi([Bt.Warnings],di(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Bt.Errors&&this._print.apply(this,hi([Bt.Errors],di(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=hi([Ok],di(n),!1);for(var s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);e>=Bt.All?console.log.apply(console,hi([],di(i),!1)):e>=Bt.Warnings?console.warn.apply(console,hi(["WARNING"],di(i),!1)):e>=Bt.Errors&&console.error.apply(console,hi(["ERROR"],di(i),!1))},t}(),f0=new Dk,YE={};Wn(YE,"Socket",()=>p0,t=>p0=t);var Cn;(function(t){t.Data="data",t.Media="media"})(Cn||(Cn={}));var He;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(He||(He={}));var Qn;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(Qn||(Qn={}));var er;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(er||(er={}));var dt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(dt||(dt={}));var dm={};dm=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Mk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jk=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},Lk=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Vk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p0=function(t){Mk(e,t);function e(n,r,i,s,o,l){l===void 0&&(l=5e3);var a=t.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+s+"peerjs?key="+o,a}return e.prototype.start=function(n,r){var i=this;this._id=n;var s="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+dm.version),this._disconnected=!1,this._socket.onmessage=function(o){var l;try{l=JSON.parse(o.data),$.default.log("Server message received:",l)}catch{$.default.log("Invalid server message",o.data);return}i.emit(er.Message,l)},this._socket.onclose=function(o){i._disconnected||($.default.log("Socket closed.",o),i._cleanup(),i._disconnected=!0,i.emit(er.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),$.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){$.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:dt.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=Lk([],jk(this._messagesQueue),!1);this._messagesQueue=[];try{for(var s=Vk(i),o=s.next();!o.done;o=s.next()){var l=o.value;this.send(l)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(er.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(Ba.EventEmitter),If={};Wn(If,"MediaConnection",()=>y0,t=>y0=t);var hm={};Wn(hm,"Negotiator",()=>m0,t=>m0=t);var Kc=function(){return Kc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Kc.apply(this,arguments)},Ml=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},jl=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},m0=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Cn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===Cn.Data){var r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r.initialize(s)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){$.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,s=this.connection.type,o=this.connection.provider;$.default.log("Listening for ICE candidates."),e.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||($.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),o.socket.send({type:dt.Candidate,payload:{candidate:l.candidate,type:s,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":$.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":$.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":$.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=ye.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},$.default.log("Listening for data channel"),e.ondatachannel=function(l){$.default.log("Received data channel");var a=l.channel,c=o.getConnection(r,i);c.initialize(a)},$.default.log("Listening for remote stream"),e.ontrack=function(l){$.default.log("Received remote stream");var a=l.streams[0],c=o.getConnection(r,i);if(c.type===Cn.Media){var u=c;n._addStreamToMediaConnection(a,u)}}},t.prototype.cleanup=function(){$.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===Cn.Data){var i=this.connection,s=i.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return Ml(this,void 0,Promise,function(){var e,n,r,i,s,o,l;return jl(this,function(a){switch(a.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),$.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),$.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:ye.browser},this.connection.type===Cn.Data&&(s=this.connection,i=Kc(Kc({},i),{label:s.label,reliable:s.reliable,serialization:s.serialization})),n.socket.send({type:dt.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return o=a.sent(),o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(He.WebRTC,o),$.default.log("Failed to setLocalDescription, ",o)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError(He.WebRTC,l),$.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return Ml(this,void 0,Promise,function(){var e,n,r,i,s;return jl(this,function(o){switch(o.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=o.sent(),$.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),$.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:dt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:ye.browser},dst:this.connection.peer}),[3,6];case 5:return i=o.sent(),n.emitError(He.WebRTC,i),$.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return s=o.sent(),n.emitError(He.WebRTC,s),$.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return Ml(this,void 0,Promise,function(){var r,i,s,o;return jl(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,$.default.log("Setting remote description",n),s=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),$.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,s._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return o=l.sent(),i.emitError(He.WebRTC,o),$.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return Ml(this,void 0,Promise,function(){var n,r,i,s,o,l;return jl(this,function(a){switch(a.label){case 0:$.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,s=this.connection.peerConnection,o=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),$.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),o.emitError(He.WebRTC,l),$.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if($.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return $.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){$.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),fm={};Wn(fm,"BaseConnection",()=>g0,t=>g0=t);var Fk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),g0=function(t){Fk(e,t);function e(n,r,i){var s=t.call(this)||this;return s.peer=n,s.provider=r,s.options=i,s._open=!1,s.metadata=i.metadata,s}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(Ba.EventEmitter),Uk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jc=function(){return Jc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jc.apply(this,arguments)},$k=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y0=function(t){Uk(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||e.ID_PREFIX+ye.randomToken(),s._negotiator=new hm.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return Cn.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){$.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case dt.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case dt.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:$.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,s;if(r===void 0&&(r={}),this._localStream){$.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Jc(Jc({},this.options._payload),{_stream:n}));var o=this.provider._getMessages(this.connectionId);try{for(var l=$k(o),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(fm.BaseConnection),kf={};Wn(kf,"DataConnection",()=>_0,t=>_0=t);var XE={};Wn(XE,"EncodingQueue",()=>v0,t=>v0=t);var Bk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v0=function(t){Bk(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){$.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(Ba.EventEmitter),zk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_0=function(t){zk(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new XE.EncodingQueue,s.connectionId=s.options.connectionId||e.ID_PREFIX+ye.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||Qn.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(o){s._bufferedSend(o)}),s._encodingQueue.on("error",function(){$.default.error("DC#".concat(s.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),s.close()}),s._negotiator=new hm.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return Cn.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!ye.supports.binaryBlob||ye.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){$.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){$.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){$.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,s=i.constructor,o=this.serialization===Qn.Binary||this.serialization===Qn.BinaryUTF8,l=i;if(o){if(s===Blob){ye.blobToArrayBuffer(i,function(c){var u=ye.unpack(c);r.emit("data",u)});return}else if(s===ArrayBuffer)l=ye.unpack(i);else if(s===String){var a=ye.binaryStringToArrayBuffer(i);l=ye.unpack(a)}}else this.serialization===Qn.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}t.prototype.emit.call(this,"data",l)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var s=new Blob(i.data);this._handleDataMessage({data:s})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Qn.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===Qn.Binary||this.serialization===Qn.BinaryUTF8){var i=ye.pack(n);if(!r&&i.size>ye.chunkedMTU){this._sendChunks(i);return}ye.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return $.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,s=ye.chunk(n);$.default.log("DC#".concat(this.connectionId," Try to send ").concat(s.length," chunks..."));try{for(var o=qk(s),l=o.next();!l.done;l=o.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case dt.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case dt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:$.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(fm.BaseConnection),ZE={};Wn(ZE,"API",()=>T0,t=>T0=t);var E0=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},S0=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},T0=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,s=r.port,o=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(s).concat(o).concat(l,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",dm.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return E0(this,void 0,Promise,function(){var e,n,r;return S0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),$.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==ye.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return E0(this,void 0,Promise,function(){var e,n,r;return S0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===ye.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),$.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),Hk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ho=function(){return Ho=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ho.apply(this,arguments)},_o=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wk=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},w0=function(t){Hk(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var s;return n&&n.constructor==Object?r=n:n&&(s=n.toString()),r=Ho({debug:0,host:ye.CLOUD_HOST,port:ye.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:ye.randomToken(),config:ye.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==ye.CLOUD_HOST?i._options.secure=ye.isSecure():i._options.host==ye.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&$.default.setLogFunction(i._options.logFunction),$.default.logLevel=i._options.debug||0,i._api=new ZE.API(r),i._socket=i._createServerConnection(),!ye.supports.audioVideo&&!ye.supports.data?(i._delayedAbort(He.BrowserIncompatible,"The current browser does not support WebRTC"),i):s&&!ye.validateId(s)?(i._delayedAbort(He.InvalidID,'ID "'.concat(s,'" is invalid')),i):(s?i._initialize(s):i._api.retrieveId().then(function(o){return i._initialize(o)}).catch(function(o){return i._abort(He.ServerError,o)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var s=_o(this._connections),o=s.next();!o.done;o=s.next()){var l=Wk(o.value,2),a=l[0],c=l[1];i[a]=c}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new YE.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(er.Message,function(i){n._handleMessage(i)}),r.on(er.Error,function(i){n._abort(He.SocketError,i)}),r.on(er.Disconnected,function(){n.disconnected||(n.emitError(He.Network,"Lost connection to server."),n.disconnect())}),r.on(er.Close,function(){n.disconnected||n._abort(He.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,s=n.type,o=n.payload,l=n.src;switch(s){case dt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case dt.Error:this._abort(He.ServerError,o.msg);break;case dt.IdTaken:this._abort(He.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case dt.InvalidKey:this._abort(He.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case dt.Leave:$.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case dt.Expire:this.emitError(He.PeerUnavailable,"Could not connect to peer ".concat(l));break;case dt.Offer:var g=o.connectionId,_=this.getConnection(l,g);if(_&&(_.close(),$.default.warn("Offer received for existing Connection ID:".concat(g))),o.type===Cn.Media){var a=new If.MediaConnection(l,this,{connectionId:g,_payload:o,metadata:o.metadata});_=a,this._addConnection(l,_),this.emit("call",a)}else if(o.type===Cn.Data){var c=new kf.DataConnection(l,this,{connectionId:g,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});_=c,this._addConnection(l,_),this.emit("connection",c)}else{$.default.warn("Received malformed connection type:".concat(o.type));return}var u=this._getMessages(g);try{for(var d=_o(u),f=d.next();!f.done;f=d.next()){var y=f.value;_.handleMessage(y)}}catch(T){r={error:T}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}break;default:if(!o){$.default.warn("You received a malformed message from ".concat(l," of type ").concat(s));return}var g=o.connectionId,_=this.getConnection(l,g);_&&_.peerConnection?_.handleMessage(n):g?this._storeMessage(g,n):$.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){$.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(He.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new kf.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){$.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(He.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){$.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var s=new If.MediaConnection(n,this,Ho(Ho({},i),{_stream:r}));return this._addConnection(n,s),s},e.prototype._addConnection=function(n,r){$.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,s,o=this._connections.get(n);if(!o)return null;try{for(var l=_o(o),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){$.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){$.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||($.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=_o(this._connections.keys()),s=i.next();!s.done;s=i.next()){var o=s.value;this._cleanupPeer(o),this._connections.delete(o)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,s=this._connections.get(n);if(s)try{for(var o=_o(s),l=o.next();!l.done;l=o.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;$.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)$.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(He.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(Ba.EventEmitter),eS=JE.Peer;function Gk(t){return new Promise((e,n)=>{const r=new eS({debug:0,secure:!1});r.on("open",i=>{const s=r.connect(t,{reliable:!0}),o=new tS(s);o.id=i,e(o)}),r.on("error",i=>{console.error("PeerJS error:",i),n(i)})})}class tS{constructor(e){ve(this,"client");ve(this,"events");ve(this,"id");this.id="",this.client=e,this.events=new Map,this.client.on("data",n=>{try{const r=JSON.parse(n),i=this.events.get(r.event);i!==void 0&&i(r.args)}catch{}}),this.client.on("error",n=>{console.error("Data connection error:",n)}),this.client.on("close",()=>{try{const n=this.events.get("disconnect");n!==void 0&&n("")}catch{}})}on(e,n){this.events.set(e,n),this.client.on("data",()=>{})}emit(e,n){this.client.send(JSON.stringify({event:e,args:n??void 0}))}disconnect(){this.emit("disconnect"),this.client.close()}}class Kk{constructor(e,n){ve(this,"socket");ve(this,"logFunction");ve(this,"renderFunction");ve(this,"logs",[]);ve(this,"whenCloseF");this.socket=new eS({debug:0}),this.logFunction=(...r)=>{this.logs.push(r),console.log(r),this.renderFunction(this.logs)},this.whenCloseF=()=>{},this.renderFunction=()=>{},this.socket.on("open",async r=>{const i=await(e==null?void 0:e(r,this));i&&(this.whenCloseF=i)}),this.socket.on("connection",r=>{r.on("open",()=>{const i=new tS(r);i.id=r.peer,n==null||n(i,this)})})}set OnLogs(e){this.logFunction=e}RenderLogs(e){this.renderFunction=e,e(this.logs)}stop(){this.socket.destroy(),this.whenCloseF()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|c>>6,y=c&63;a||(y=64,o||(f=64)),r.push(n[u],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||d==null)throw new Qk;const f=s<<2|l>>4;if(r.push(f),c!==64){const y=l<<4&240|c>>2;if(r.push(y),d!==64){const g=c<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Qk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yk=function(t){const e=nS(t);return rS.encodeByteArray(e,!0)},Qc=function(t){return Yk(t).replace(/\./g,"")},iS=function(t){try{return rS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=()=>Xk().__FIREBASE_DEFAULTS__,eA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},pm=()=>{try{return Zk()||eA()||tA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sS=t=>{var e,n;return(n=(e=pm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nA=t=>{const e=sS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oS=()=>{var t;return(t=pm())===null||t===void 0?void 0:t.config},aS=t=>{var e;return(e=pm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Qc(JSON.stringify(n)),Qc(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function oA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lA(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cA(){try{return typeof indexedDB=="object"}catch{return!1}}function uA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dA,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hA(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new vr(i,l,r)}}function hA(t,e){return t.replace(fA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fA=/\{\$([^}]+)}/g;function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(C0(s)&&C0(o)){if(!Yc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function C0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function xo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mA(t,e){const n=new gA(t,e);return n.subscribe.bind(n)}class gA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Kd),i.error===void 0&&(i.error=Kd),i.complete===void 0&&(i.complete=Kd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EA(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_A(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _A(t){return t===mi?void 0:t}function EA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const TA={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},wA=me.INFO,CA={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},PA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=CA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=wA,this._logHandler=PA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const RA=(t,e)=>e.some(n=>t instanceof n);let P0,R0;function IA(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kA(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lS=new WeakMap,Af=new WeakMap,cS=new WeakMap,Jd=new WeakMap,gm=new WeakMap;function AA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lS.set(n,t)}).catch(()=>{}),gm.set(e,t),e}function bA(t){if(Af.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Af.set(t,e)}let bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xA(t){bf=t(bf)}function NA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qd(this),e,...n);return cS.set(r,e.sort?e.sort():[e]),Jr(r)}:kA().includes(t)?function(...e){return t.apply(Qd(this),e),Jr(lS.get(this))}:function(...e){return Jr(t.apply(Qd(this),e))}}function OA(t){return typeof t=="function"?NA(t):(t instanceof IDBTransaction&&bA(t),RA(t,IA())?new Proxy(t,bf):t)}function Jr(t){if(t instanceof IDBRequest)return AA(t);if(Jd.has(t))return Jd.get(t);const e=OA(t);return e!==t&&(Jd.set(t,e),gm.set(e,t)),e}const Qd=t=>gm.get(t);function DA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Jr(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Jr(o.result),a.oldVersion,a.newVersion,Jr(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const MA=["get","getKey","getAll","getAllKeys","count"],jA=["put","add","delete","clear"],Yd=new Map;function I0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yd.get(e))return Yd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=jA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MA.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return Yd.set(e,s),s}xA(t=>({...t,get:(e,n,r)=>I0(e,n)||t.get(e,n,r),has:(e,n)=>!!I0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",k0="0.9.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new mm("@firebase/app"),FA="@firebase/app-compat",UA="@firebase/analytics-compat",$A="@firebase/analytics",BA="@firebase/app-check-compat",zA="@firebase/app-check",qA="@firebase/auth",HA="@firebase/auth-compat",WA="@firebase/database",GA="@firebase/database-compat",KA="@firebase/functions",JA="@firebase/functions-compat",QA="@firebase/installations",YA="@firebase/installations-compat",XA="@firebase/messaging",ZA="@firebase/messaging-compat",eb="@firebase/performance",tb="@firebase/performance-compat",nb="@firebase/remote-config",rb="@firebase/remote-config-compat",ib="@firebase/storage",sb="@firebase/storage-compat",ob="@firebase/firestore",ab="@firebase/firestore-compat",lb="firebase",cb="10.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",ub={[xf]:"fire-core",[FA]:"fire-core-compat",[$A]:"fire-analytics",[UA]:"fire-analytics-compat",[zA]:"fire-app-check",[BA]:"fire-app-check-compat",[qA]:"fire-auth",[HA]:"fire-auth-compat",[WA]:"fire-rtdb",[GA]:"fire-rtdb-compat",[KA]:"fire-fn",[JA]:"fire-fn-compat",[QA]:"fire-iid",[YA]:"fire-iid-compat",[XA]:"fire-fcm",[ZA]:"fire-fcm-compat",[eb]:"fire-perf",[tb]:"fire-perf-compat",[nb]:"fire-rc",[rb]:"fire-rc-compat",[ib]:"fire-gcs",[sb]:"fire-gcs-compat",[ob]:"fire-fst",[ab]:"fire-fst-compat","fire-js":"fire-js",[lb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=new Map,Of=new Map;function db(t,e){try{t.container.addComponent(e)}catch(n){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Of.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Xc.values())db(n,t);return!0}function ym(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Qr=new za("app","Firebase",hb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=cb;function uS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qr.create("bad-app-name",{appName:String(i)});if(n||(n=oS()),!n)throw Qr.create("no-options");const s=Xc.get(i);if(s){if(Yc(n,s.options)&&Yc(r,s.config))return s;throw Qr.create("duplicate-app",{appName:i})}const o=new SA(i);for(const a of Of.values())o.addComponent(a);const l=new fb(n,r,o);return Xc.set(i,l),l}function dS(t=Nf){const e=Xc.get(t);if(!e&&t===Nf&&oS())return uS();if(!e)throw Qr.create("no-app",{appName:t});return e}function Yr(t,e,n){var r;let i=(r=ub[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(l.join(" "));return}Ds(new xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="firebase-heartbeat-database",mb=1,ya="firebase-heartbeat-store";let Xd=null;function hS(){return Xd||(Xd=DA(pb,mb,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ya)}}}).catch(t=>{throw Qr.create("idb-open",{originalErrorMessage:t.message})})),Xd}async function gb(t){try{return await(await hS()).transaction(ya).objectStore(ya).get(fS(t))}catch(e){if(e instanceof vr)Ni.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(n.message)}}}async function A0(t,e){try{const r=(await hS()).transaction(ya,"readwrite");await r.objectStore(ya).put(e,fS(t)),await r.done}catch(n){if(n instanceof vr)Ni.warn(n.message);else{const r=Qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(r.message)}}}function fS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=1024,vb=30*24*60*60*1e3;class _b{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Sb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=b0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=vb}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=b0(),{heartbeatsToSend:n,unsentEntries:r}=Eb(this._heartbeatsCache.heartbeats),i=Qc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function b0(){return new Date().toISOString().substring(0,10)}function Eb(t,e=yb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),x0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),x0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Sb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cA()?uA().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gb(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function x0(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){Ds(new xi("platform-logger",e=>new LA(e),"PRIVATE")),Ds(new xi("heartbeat",e=>new _b(e),"PRIVATE")),Yr(xf,k0,t),Yr(xf,k0,"esm2017"),Yr("fire-js","")}Tb("");function vm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function N0(t){return t!==void 0&&t.enterprise!==void 0}class wb{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function pS(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cb=pS,mS=new za("auth","Firebase",pS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new mm("@firebase/auth");function Pb(t,...e){Zc.logLevel<=me.WARN&&Zc.warn(`Auth (${Js}): ${t}`,...e)}function cc(t,...e){Zc.logLevel<=me.ERROR&&Zc.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw _m(t,...e)}function $n(t,...e){return _m(t,...e)}function Rb(t,e,n){const r=Object.assign(Object.assign({},Cb()),{[e]:n});return new za("auth","Firebase",r).create(e,{appName:t.name})}function _m(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mS.create(t,...e)}function X(t,e,...n){if(!t)throw _m(e,...n)}function tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cc(e),new Error(e)}function hr(t,e){t||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ib(){return O0()==="http:"||O0()==="https:"}function O0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||oA()||"connection"in navigator)?navigator.onLine:!0}function Ab(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=sA()||aA()}get(){return kb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Ha(3e4,6e4);function Ui(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ai(t,e,n,r,i={}){return yS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=qa(Object.assign({key:t.config.apiKey},o)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),gS.fetch()(vS(t,t.config.apiHost,n,l),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},s))})}async function yS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bb),e);try{const i=new Nb(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Ll(t,"user-disabled",o);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Rb(t,u,c);An(t,u)}}catch(i){if(i instanceof vr)throw i;An(t,"network-request-failed",{message:String(i)})}}async function Wa(t,e,n,r,i={}){const s=await ai(t,e,n,r,i);return"mfaPendingCredential"in s&&An(t,"multi-factor-auth-required",{_serverResponse:s}),s}function vS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Em(t.config,i):`${t.config.apiScheme}://${i}`}class Nb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),xb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}async function Ob(t,e){return ai(t,"GET","/v2/recaptchaConfig",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e){return ai(t,"POST","/v1/accounts:delete",e)}async function Mb(t,e){return ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jb(t,e=!1){const n=mn(t),r=await n.getIdToken(e),i=Sm(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wo(Zd(i.auth_time)),issuedAtTime:Wo(Zd(i.iat)),expirationTime:Wo(Zd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zd(t){return Number(t)*1e3}function Sm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cc("JWT malformed, contained fewer than 3 sections"),null;try{const i=iS(n);return i?JSON.parse(i):(cc("Failed to decode base64 JWT payload"),null)}catch(i){return cc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Lb(t){const e=Sm(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&Vb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ms(t,Mb(n,{idToken:r}));X(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Bb(s.providerUserInfo):[],l=$b(t.providerData,o),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=a?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _S(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Ub(t){const e=mn(t);await eu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $b(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Bb(t){return t.map(e=>{var{providerId:n}=e,r=vm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t,e){const n=await yS(t,{},async()=>{const r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=vS(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",gS.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return X(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zb(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new va;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ci{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _S(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jb(this,e)}reload(){return Ub(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await eu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ms(this,Db(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,a,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,p=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:S,isAnonymous:P,providerData:I,stsTokenManager:A}=n;X(E&&A,e,"internal-error");const m=va.fromJSON(this.name,A);X(typeof E=="string",e,"internal-error"),Ir(d,e.name),Ir(f,e.name),X(typeof S=="boolean",e,"internal-error"),X(typeof P=="boolean",e,"internal-error"),Ir(y,e.name),Ir(g,e.name),Ir(_,e.name),Ir(T,e.name),Ir(v,e.name),Ir(p,e.name);const R=new Ci({uid:E,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:P,photoURL:g,phoneNumber:y,tenantId:_,stsTokenManager:m,createdAt:v,lastLoginAt:p});return I&&Array.isArray(I)&&(R.providerData=I.map(w=>Object.assign({},w))),T&&(R._redirectEventId=T),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new va;i.updateFromServerResponse(n);const s=new Ci({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await eu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=new Map;function nr(t){hr(t instanceof Function,"Expected a class definition");let e=D0.get(t);return e?(hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,D0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ES.type="NONE";const M0=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ts{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=uc(this.userKey,i.apiKey,s),this.fullPersistenceKey=uc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ts(nr(M0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||nr(M0);const o=uc(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Ci._fromJSON(e,u);c!==s&&(l=d),s=c;break}}catch{}const a=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Ts(s,e,r):(s=a[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ts(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(SS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PS(e))return"Blackberry";if(RS(e))return"Webos";if(Tm(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(CS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function SS(t=Ot()){return/firefox\//i.test(t)}function Tm(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(t=Ot()){return/crios\//i.test(t)}function wS(t=Ot()){return/iemobile/i.test(t)}function CS(t=Ot()){return/android/i.test(t)}function PS(t=Ot()){return/blackberry/i.test(t)}function RS(t=Ot()){return/webos/i.test(t)}function Uu(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qb(t=Ot()){var e;return Uu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Hb(){return lA()&&document.documentMode===10}function IS(t=Ot()){return Uu(t)||CS(t)||RS(t)||PS(t)||/windows phone/i.test(t)||wS(t)}function Wb(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e=[]){let n;switch(t){case"Browser":n=j0(Ot());break;case"Worker":n=`${j0(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const a=e(s);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(t,e={}){return ai(t,"GET","/v2/passwordPolicy",Ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=6;class Qb{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Jb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L0(this),this.idTokenSubscription=new L0(this),this.beforeStateQueue=new Gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ts.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ab()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?mn(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Kb(this),n=new Qb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&nr(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ts.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Pb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $i(t){return mn(t)}class L0{constructor(e){this.auth=e,this.observer=null,this.addObserver=mA(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function AS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$n("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Xb().appendChild(r)})}function Zb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ex="https://www.google.com/recaptcha/enterprise.js?render=",tx="recaptcha-enterprise",nx="NO_RECAPTCHA";class rx{constructor(e){this.type=tx,this.auth=$i(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ob(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new wb(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(a=>{l(a)})})}function i(s,o,l){const a=window.grecaptcha;N0(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(nx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&N0(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}AS(ex+l).then(()=>{i(l,s,o)}).catch(a=>{o(a)})}}).catch(l=>{o(l)})})}}async function tu(t,e,n,r=!1){const i=new rx(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e){const n=ym(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yc(s,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function sx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ox(t,e,n){const r=$i(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=bS(e),{host:o,port:l}=ax(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||lx()}function bS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ax(t){const e=bS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:V0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:V0(o)}}}function V0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,n){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}async function cx(t,e){return ai(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(t,e){return Wa(t,"POST","/v1/accounts:signInWithPassword",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}async function dx(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends wm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await tu(e,r,"signInWithPassword");return eh(e,i)}else return eh(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await tu(e,r,"signInWithPassword");return eh(e,s)}else return Promise.reject(i)});case"emailLink":return ux(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return cx(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return dx(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return Wa(t,"POST","/v1/accounts:signInWithIdp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="http://localhost";class Oi extends wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=vm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Oi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function px(t){const e=bo(xo(t)).link,n=e?bo(xo(e)).deep_link_id:null,r=bo(xo(t)).deep_link_id;return(r?bo(xo(r)).link:null)||r||n||e||t}class Cm{constructor(e){var n,r,i,s,o,l;const a=bo(xo(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,u=(r=a.oobCode)!==null&&r!==void 0?r:null,d=fx((i=a.mode)!==null&&i!==void 0?i:null);X(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=a.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=px(e);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.providerId=Qs.PROVIDER_ID}static credential(e,n){return _a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cm.parseLink(n);return X(r,"argument-error"),_a._fromEmailAndCode(e,r.code,r.tenantId)}}Qs.PROVIDER_ID="password";Qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends xS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Ga{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oi._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ga{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ga{constructor(){super("twitter.com")}static credential(e,n){return Oi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return jr.credential(n,r)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t,e){return Wa(t,"POST","/v1/accounts:signUp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ci._fromIdTokenResponse(e,r,i),o=F0(r);return new Di({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=F0(r);return new Di({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function F0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends vr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,nu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new nu(e,n,r,i)}}function NS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nu._fromErrorAndOperation(t,s,e,r):s})}async function mx(t,e,n=!1){const r=await Ms(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Di._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ms(t,NS(r,i,e,t),n);X(s.idToken,r,"internal-error");const o=Sm(s.idToken);X(o,r,"internal-error");const{sub:l}=o;return X(t.uid===l,r,"user-mismatch"),Di._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&An(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e,n=!1){const r="signIn",i=await NS(t,r,e),s=await Di._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function yx(t,e){return OS($i(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t){const e=$i(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vx(t,e,n){var r;const i=$i(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await tu(i,s,"signUpPassword");o=th(i,c)}else o=th(i,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await tu(i,s,"signUpPassword");return th(i,u)}throw c});const l=await o.catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&DS(t),c}),a=await Di._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(a.user),a}function _x(t,e,n){return yx(mn(t),Qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&DS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(t,e){return ai(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=mn(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ms(r,Ex(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Tx(t,e,n,r){return mn(t).onIdTokenChanged(e,n,r)}function wx(t,e,n){return mn(t).beforeAuthStateChanged(e,n)}const ru="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){const t=Ot();return Tm(t)||Uu(t)}const Px=1e3,Rx=10;class jS extends MS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Cx()&&Wb(),this.fallbackToPolling=IS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Hb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Rx):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Px)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jS.type="LOCAL";const Ix=jS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends MS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LS.type="SESSION";const VS=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $u(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),a=await kx(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$u.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,a)=>{const c=Pm("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return window}function bx(t){Bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}async function xx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ox(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebaseLocalStorageDb",Dx=1,iu="firebaseLocalStorage",$S="fbase_key";class Ka{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bu(t,e){return t.transaction([iu],e?"readwrite":"readonly").objectStore(iu)}function Mx(){const t=indexedDB.deleteDatabase(US);return new Ka(t).toPromise()}function Mf(){const t=indexedDB.open(US,Dx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(iu,{keyPath:$S})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(iu)?e(r):(r.close(),await Mx(),e(await Mf()))})})}async function U0(t,e,n){const r=Bu(t,!0).put({[$S]:e,value:n});return new Ka(r).toPromise()}async function jx(t,e){const n=Bu(t,!1).get(e),r=await new Ka(n).toPromise();return r===void 0?null:r.value}function $0(t,e){const n=Bu(t,!0).delete(e);return new Ka(n).toPromise()}const Lx=800,Vx=3;class BS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Vx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$u._getInstance(Ox()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xx(),!this.activeServiceWorker)return;this.sender=new Ax(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mf();return await U0(e,ru,"1"),await $0(e,ru),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>U0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bu(i,!1).getAll();return new Ka(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BS.type="LOCAL";const Fx=BS;new Ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t,e){return e?nr(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm extends wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $x(t){return OS(t.auth,new Rm(t),t.bypassAuthState)}function Bx(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),gx(n,new Rm(t),t.bypassAuthState)}async function zx(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),mx(n,new Rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $x;case"linkViaPopup":case"linkViaRedirect":return zx;case"reauthViaPopup":case"reauthViaRedirect":return Bx;default:An(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Ha(2e3,1e4);class hs extends zS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qx.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="pendingRedirect",dc=new Map;class Wx extends zS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dc.get(this.auth._key());if(!e){try{const r=await Gx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dc.set(this.auth._key(),e)}return this.bypassAuthState||dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gx(t,e){const n=Qx(e),r=Jx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Kx(t,e){dc.set(t._key(),e)}function Jx(t){return nr(t._redirectPersistence)}function Qx(t){return uc(Hx,t.config.apiKey,t.name)}async function Yx(t,e,n=!1){const r=$i(t),i=Ux(r,e),o=await new Wx(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=10*60*1e3;class Zx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xx&&this.cachedEventUids.clear(),this.cachedEventUids.has(B0(e))}saveEventToCache(e){this.cachedEventUids.add(B0(e)),this.lastProcessedEventTime=Date.now()}}function B0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e={}){return ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r2=/^https?/;async function i2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t2(t);for(const n of e)try{if(s2(n))return}catch{}An(t,"unauthorized-domain")}function s2(t){const e=Df(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!r2.test(n))return!1;if(n2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new Ha(3e4,6e4);function z0(){const t=Bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a2(t){return new Promise((e,n)=>{var r,i,s;function o(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),n($n(t,"network-request-failed"))},timeout:o2.get()})}if(!((i=(r=Bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Bn().gapi)===null||s===void 0)&&s.load)o();else{const l=Zb("iframefcb");return Bn()[l]=()=>{gapi.load?o():n($n(t,"network-request-failed"))},AS(`https://apis.google.com/js/api.js?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw hc=null,e})}let hc=null;function l2(t){return hc=hc||a2(t),hc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Ha(5e3,15e3),u2="__/auth/iframe",d2="emulator/auth/iframe",h2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p2(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Em(e,d2):`https://${t.config.authDomain}/${u2}`,r={apiKey:e.apiKey,appName:t.name,v:Js},i=f2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${qa(r).slice(1)}`}async function m2(t){const e=await l2(t),n=Bn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:p2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$n(t,"network-request-failed"),l=Bn().setTimeout(()=>{s(o)},c2.get());function a(){Bn().clearTimeout(l),i(r)}r.ping(a).then(a,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,v2=600,_2="_blank",E2="http://localhost";class q0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S2(t,e,n,r=y2,i=v2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},g2),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ot().toLowerCase();n&&(l=TS(c)?_2:n),SS(c)&&(e=e||E2,a.scrollbars="yes");const u=Object.entries(a).reduce((f,[y,g])=>`${f}${y}=${g},`,"");if(qb(c)&&l!=="_self")return T2(e||"",l),new q0(null);const d=window.open(e||"",l,u);X(d,t,"popup-blocked");try{d.focus()}catch{}return new q0(d)}function T2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="__/auth/handler",C2="emulator/auth/handler",P2=encodeURIComponent("fac");async function H0(t,e,n,r,i,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:i};if(e instanceof xS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Ga){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const a=await t._getAppCheckToken(),c=a?`#${P2}=${encodeURIComponent(a)}`:"";return`${R2(t)}?${qa(l).slice(1)}${c}`}function R2({config:t}){return t.emulator?Em(t,C2):`https://${t.authDomain}/${w2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="webStorageSupport";class I2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VS,this._completeRedirectFn=Yx,this._overrideRedirectResult=Kx}async _openPopup(e,n,r,i){var s;hr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await H0(e,n,r,Df(),i);return S2(e,o,Pm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await H0(e,n,r,Df(),i);return bx(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await m2(e),r=new Zx(e);return n.register("authEvent",i=>(X(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nh,{type:nh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[nh];o!==void 0&&n(!!o),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IS()||Tm()||Uu()}}const k2=I2;var W0="@firebase/auth",G0="1.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function x2(t){Ds(new xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kS(t)},c=new Yb(r,i,s,a);return sx(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ds(new xi("auth-internal",e=>{const n=$i(e.getProvider("auth").getImmediate());return(r=>new A2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(W0,G0,b2(t)),Yr(W0,G0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=5*60,O2=aS("authIdTokenMaxAge")||N2;let K0=null;const D2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>O2)return;const i=n==null?void 0:n.token;K0!==i&&(K0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function M2(t=dS()){const e=ym(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ix(t,{popupRedirectResolver:k2,persistence:[Fx,Ix,VS]}),r=aS("authTokenSyncURL");if(r){const s=D2(r);wx(n,s,()=>s(n.currentUser)),Tx(n,o=>s(o))}const i=sS("auth");return i&&ox(n,`http://${i}`),n}x2("Browser");var j2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L,Im=Im||{},Z=j2||self;function zu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ja(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function L2(t){return Object.prototype.hasOwnProperty.call(t,rh)&&t[rh]||(t[rh]=++V2)}var rh="closure_uid_"+(1e9*Math.random()>>>0),V2=0;function F2(t,e,n){return t.call.apply(t.bind,arguments)}function U2(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function kt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?kt=F2:kt=U2,kt.apply(null,arguments)}function Vl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(r,o)}}function li(){this.s=this.s,this.o=this.o}var $2=0;li.prototype.s=!1;li.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$2!=0)&&L2(this)};li.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function km(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function J0(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(zu(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var B2=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Z.addEventListener("test",()=>{},e),Z.removeEventListener("test",()=>{},e)}catch{}return t}();function Ea(t){return/^[\s\xa0]*$/.test(t)}function qu(){var t=Z.navigator;return t&&(t=t.userAgent)?t:""}function Mn(t){return qu().indexOf(t)!=-1}function Am(t){return Am[" "](t),t}Am[" "]=function(){};function z2(t,e){var n=MN;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var q2=Mn("Opera"),js=Mn("Trident")||Mn("MSIE"),WS=Mn("Edge"),jf=WS||js,GS=Mn("Gecko")&&!(qu().toLowerCase().indexOf("webkit")!=-1&&!Mn("Edge"))&&!(Mn("Trident")||Mn("MSIE"))&&!Mn("Edge"),H2=qu().toLowerCase().indexOf("webkit")!=-1&&!Mn("Edge");function KS(){var t=Z.document;return t?t.documentMode:void 0}var Lf;e:{var ih="",sh=function(){var t=qu();if(GS)return/rv:([^\);]+)(\)|;)/.exec(t);if(WS)return/Edge\/([\d\.]+)/.exec(t);if(js)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(H2)return/WebKit\/(\S+)/.exec(t);if(q2)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(sh&&(ih=sh?sh[1]:""),js){var oh=KS();if(oh!=null&&oh>parseFloat(ih)){Lf=String(oh);break e}}Lf=ih}var Vf;if(Z.document&&js){var Q0=KS();Vf=Q0||parseInt(Lf,10)||void 0}else Vf=void 0;var W2=Vf;function Sa(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(GS){e:{try{Am(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:G2[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Sa.$.h.call(this)}}lt(Sa,At);var G2={2:"touch",3:"pen",4:"mouse"};Sa.prototype.h=function(){Sa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qa="closure_listenable_"+(1e6*Math.random()|0),K2=0;function J2(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++K2,this.fa=this.ia=!1}function Hu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function bm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Q2(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function JS(t){const e={};for(const n in t)e[n]=t[n];return e}const Y0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QS(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Y0.length;s++)n=Y0[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wu(t){this.src=t,this.g={},this.h=0}Wu.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Uf(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new J2(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Ff(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=HS(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Hu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Uf(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var xm="closure_lm_"+(1e6*Math.random()|0),ah={};function YS(t,e,n,r,i){if(r&&r.once)return ZS(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)YS(t,e[s],n,r,i);return null}return n=Dm(n),t&&t[Qa]?t.O(e,n,Ja(r)?!!r.capture:!!r,i):XS(t,e,n,!1,r,i)}function XS(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ja(i)?!!i.capture:!!i,l=Om(t);if(l||(t[xm]=l=new Wu(t)),n=l.add(e,n,r,o,s),n.proxy)return n;if(r=Y2(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)B2||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Y2(){function t(n){return e.call(t.src,t.listener,n)}const e=X2;return t}function ZS(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ZS(t,e[s],n,r,i);return null}return n=Dm(n),t&&t[Qa]?t.P(e,n,Ja(r)?!!r.capture:!!r,i):XS(t,e,n,!0,r,i)}function eT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)eT(t,e[s],n,r,i);else r=Ja(r)?!!r.capture:!!r,n=Dm(n),t&&t[Qa]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Uf(s,n,r,i),-1<n&&(Hu(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Om(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Uf(e,n,r,i)),(n=-1<t?e[t]:null)&&Nm(n))}function Nm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Qa])Ff(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Om(e))?(Ff(n,t),n.h==0&&(n.src=null,e[xm]=null)):Hu(t)}}}function tT(t){return t in ah?ah[t]:ah[t]="on"+t}function X2(t,e){if(t.fa)t=!0;else{e=new Sa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Nm(t),t=n.call(r,e)}return t}function Om(t){return t=t[xm],t instanceof Wu?t:null}var lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dm(t){return typeof t=="function"?t:(t[lh]||(t[lh]=function(e){return t.handleEvent(e)}),t[lh])}function at(){li.call(this),this.i=new Wu(this),this.S=this,this.J=null}lt(at,li);at.prototype[Qa]=!0;at.prototype.removeEventListener=function(t,e,n,r){eT(this,t,e,n,r)};function pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var i=e;e=new At(r,t),QS(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Fl(o,r,!0,e)&&i}if(o=e.g=t,i=Fl(o,r,!0,e)&&i,i=Fl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Fl(o,r,!1,e)&&i}at.prototype.N=function(){if(at.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hu(n[r]);delete t.g[e],t.h--}}this.J=null};at.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};at.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Fl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var l=o.listener,a=o.la||o.src;o.ia&&Ff(t.i,o),i=l.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var Mm=Z.JSON.stringify;class Z2{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function eN(){var t=jm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class tN{constructor(){this.h=this.g=null}add(e,n){const r=nT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nT=new Z2(()=>new nN,t=>t.reset());class nN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function rN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function iN(t){Z.setTimeout(()=>{throw t},0)}let Ta,wa=!1,jm=new tN,rT=()=>{const t=Z.Promise.resolve(void 0);Ta=()=>{t.then(sN)}};var sN=()=>{for(var t;t=eN();){try{t.h.call(t.g)}catch(n){iN(n)}var e=nT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wa=!1};function Gu(t,e){at.call(this),this.h=t||1,this.g=e||Z,this.j=kt(this.qb,this),this.l=Date.now()}lt(Gu,at);L=Gu.prototype;L.ga=!1;L.T=null;L.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(Lm(this),this.start()))}};L.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Lm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}L.N=function(){Gu.$.N.call(this),Lm(this),delete this.g};function Vm(t,e,n){if(typeof t=="function")n&&(t=kt(t,n));else if(t&&typeof t.handleEvent=="function")t=kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Z.setTimeout(t,e||0)}function iT(t){t.g=Vm(()=>{t.g=null,t.i&&(t.i=!1,iT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class oN extends li{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iT(this)}N(){super.N(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(t){li.call(this),this.h=t,this.g={}}lt(Ca,li);var X0=[];function sT(t,e,n,r){Array.isArray(n)||(n&&(X0[0]=n.toString()),n=X0);for(var i=0;i<n.length;i++){var s=YS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function oT(t){bm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Nm(e)},t),t.g={}}Ca.prototype.N=function(){Ca.$.N.call(this),oT(this)};Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ku(){this.g=!0}Ku.prototype.Ea=function(){this.g=!1};function aN(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",l=s.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function lN(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function fs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+uN(t,n)+(r?" "+r:"")})}function cN(t,e){t.info(function(){return"TIMEOUT: "+e})}Ku.prototype.info=function(){};function uN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Mm(n)}catch{return e}}var Bi={},Z0=null;function Ju(){return Z0=Z0||new at}Bi.Ta="serverreachability";function aT(t){At.call(this,Bi.Ta,t)}lt(aT,At);function Pa(t){const e=Ju();pt(e,new aT(e))}Bi.STAT_EVENT="statevent";function lT(t,e){At.call(this,Bi.STAT_EVENT,t),this.stat=e}lt(lT,At);function jt(t){const e=Ju();pt(e,new lT(e,t))}Bi.Ua="timingevent";function cT(t,e){At.call(this,Bi.Ua,t),this.size=e}lt(cT,At);function Ya(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){t()},e)}var Qu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fm(){}Fm.prototype.h=null;function ev(t){return t.h||(t.h=t.i())}function dT(){}var Xa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Um(){At.call(this,"d")}lt(Um,At);function $m(){At.call(this,"c")}lt($m,At);var $f;function Yu(){}lt(Yu,Fm);Yu.prototype.g=function(){return new XMLHttpRequest};Yu.prototype.i=function(){return{}};$f=new Yu;function Za(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ca(this),this.P=dN,t=jf?125:void 0,this.V=new Gu(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hT}function hT(){this.i=null,this.g="",this.h=!1}var dN=45e3,Bf={},su={};L=Za.prototype;L.setTimeout=function(t){this.P=t};function zf(t,e,n){t.L=1,t.v=Zu(fr(e)),t.s=n,t.S=!0,fT(t,null)}function fT(t,e){t.G=Date.now(),el(t),t.A=fr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),ST(n.i,"t",r),t.C=0,n=t.l.J,t.h=new hT,t.g=BT(t.l,n?e:null,!t.s),0<t.O&&(t.M=new oN(kt(t.Pa,t,t.g),t.O)),sT(t.U,t.g,"readystatechange",t.nb),e=t.I?JS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Pa(),aN(t.j,t.u,t.A,t.m,t.W,t.s)}L.nb=function(t){t=t.target;const e=this.M;e&&jn(t)==3?e.l():this.Pa(t)};L.Pa=function(t){try{if(t==this.g)e:{const u=jn(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||jf||this.g&&(this.h.h||this.g.ja()||iv(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Pa(3):Pa(2)),Xu(this);var n=this.g.da();this.ca=n;t:if(pT(this)){var r=iv(this.g);t="";var i=r.length,s=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Go(this);var o="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,lN(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ea(l)){var c=l;break t}}c=null}if(n=c)fs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qf(this,n);else{this.i=!1,this.o=3,jt(12),_i(this),Go(this);break e}}this.S?(mT(this,u,o),jf&&this.i&&u==3&&(sT(this.U,this.V,"tick",this.mb),this.V.start())):(fs(this.j,this.m,o,null),qf(this,o)),u==4&&_i(this),this.i&&!this.J&&(u==4?VT(this.l,this):(this.i=!1,el(this)))}else NN(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,jt(12)):(this.o=0,jt(13)),_i(this),Go(this)}}}catch{}finally{}};function pT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function mT(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=hN(t,n),i==su){e==4&&(t.o=4,jt(14),r=!1),fs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Bf){t.o=4,jt(15),fs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else fs(t.j,t.m,i,null),qf(t,i);pT(t)&&i!=su&&i!=Bf&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,jt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gm(e),e.M=!0,jt(11))):(fs(t.j,t.m,n,"[Invalid Chunked Response]"),_i(t),Go(t))}L.mb=function(){if(this.g){var t=jn(this.g),e=this.g.ja();this.C<e.length&&(Xu(this),mT(this,t,e),this.i&&t!=4&&el(this))}};function hN(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?su:(n=Number(e.substring(n,r)),isNaN(n)?Bf:(r+=1,r+n>e.length?su:(e=e.slice(r,r+n),t.C=r+n,e)))}L.cancel=function(){this.J=!0,_i(this)};function el(t){t.Y=Date.now()+t.P,gT(t,t.P)}function gT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ya(kt(t.lb,t),e)}function Xu(t){t.B&&(Z.clearTimeout(t.B),t.B=null)}L.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(cN(this.j,this.A),this.L!=2&&(Pa(),jt(17)),_i(this),this.o=2,Go(this)):gT(this,this.Y-t)};function Go(t){t.l.H==0||t.J||VT(t.l,t)}function _i(t){Xu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Lm(t.V),oT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function qf(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Hf(n.i,t))){if(!t.K&&Hf(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)lu(n),nd(n);else break e;Wm(n),jt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ya(kt(n.ib,n),6e3));if(1>=CT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ei(n,11)}else if((t.K||n.g==t)&&lu(n),!Ea(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const g=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Bm(s,s.h),s.h=null))}if(r.F){const _=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,Ae(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=$T(r,r.J?r.pa:null,r.Y),o.K){PT(r.i,o);var l=o,a=r.L;a&&l.setTimeout(a),l.B&&(Xu(l),el(l)),r.g=o}else jT(r);0<n.j.length&&rd(n)}else c[0]!="stop"&&c[0]!="close"||Ei(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ei(n,7):Hm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Pa(4)}catch{}}function fN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function yT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=pN(t),r=fN(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var vT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Pi){this.h=t.h,ou(this,t.j),this.s=t.s,this.g=t.g,au(this,t.m),this.l=t.l;var e=t.i,n=new Ra;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),tv(this,n),this.o=t.o}else t&&(e=String(t).match(vT))?(this.h=!1,ou(this,e[1]||"",!0),this.s=No(e[2]||""),this.g=No(e[3]||"",!0),au(this,e[4]),this.l=No(e[5]||"",!0),tv(this,e[6]||"",!0),this.o=No(e[7]||"")):(this.h=!1,this.i=new Ra(null,this.h))}Pi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Oo(e,nv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Oo(e,nv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Oo(n,n.charAt(0)=="/"?vN:yN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Oo(n,EN)),t.join("")};function fr(t){return new Pi(t)}function ou(t,e,n){t.j=n?No(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function au(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tv(t,e,n){e instanceof Ra?(t.i=e,SN(t.i,t.h)):(n||(e=Oo(e,_N)),t.i=new Ra(e,t.h))}function Ae(t,e,n){t.i.set(e,n)}function Zu(t){return Ae(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function No(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Oo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,gN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var nv=/[#\/\?@]/g,yN=/[#\?:]/g,vN=/[#\?]/g,_N=/[#\?@]/g,EN=/#/g;function Ra(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ci(t){t.g||(t.g=new Map,t.h=0,t.i&&mN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}L=Ra.prototype;L.add=function(t,e){ci(this),this.i=null,t=Ys(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function _T(t,e){ci(t),e=Ys(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ET(t,e){return ci(t),e=Ys(t,e),t.g.has(e)}L.forEach=function(t,e){ci(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};L.ta=function(){ci(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};L.Z=function(t){ci(this);let e=[];if(typeof t=="string")ET(this,t)&&(e=e.concat(this.g.get(Ys(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};L.set=function(t,e){return ci(this),this.i=null,t=Ys(this,t),ET(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};L.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ST(t,e,n){_T(t,e),0<n.length&&(t.i=null,t.g.set(Ys(t,e),km(n)),t.h+=n.length)}L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Ys(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SN(t,e){e&&!t.j&&(ci(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(_T(this,r),ST(this,i,n))},t)),t.j=e}var TN=class{constructor(t,e){this.g=t,this.map=e}};function TT(t){this.l=t||wN,Z.PerformanceNavigationTiming?(t=Z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Z.g&&Z.g.Ka&&Z.g.Ka()&&Z.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wN=10;function wT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function CT(t){return t.h?1:t.g?t.g.size:0}function Hf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Bm(t,e){t.g?t.g.add(e):t.h=e}function PT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}TT.prototype.cancel=function(){if(this.i=RT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function RT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return km(t.i)}var CN=class{stringify(t){return Z.JSON.stringify(t,void 0)}parse(t){return Z.JSON.parse(t,void 0)}};function PN(){this.g=new CN}function RN(t,e,n){const r=n||"";try{yT(t,function(i,s){let o=i;Ja(i)&&(o=Mm(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function IN(t,e){const n=new Ku;if(Z.Image){const r=new Image;r.onload=Vl(Ul,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Vl(Ul,n,r,"TestLoadImage: error",!1,e),r.onabort=Vl(Ul,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vl(Ul,n,r,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ul(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tl(t){this.l=t.fc||null,this.j=t.ob||!1}lt(tl,Fm);tl.prototype.g=function(){return new ed(this.l,this.j)};tl.prototype.i=function(t){return function(){return t}}({});function ed(t,e){at.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lt(ed,at);var zm=0;L=ed.prototype;L.open=function(t,e){if(this.readyState!=zm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ia(this)};L.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=zm};L.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;IT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function IT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}L.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?nl(this):Ia(this),this.readyState==3&&IT(this)}};L.Za=function(t){this.g&&(this.response=this.responseText=t,nl(this))};L.Ya=function(t){this.g&&(this.response=t,nl(this))};L.ka=function(){this.g&&nl(this)};function nl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ia(t)}L.setRequestHeader=function(t,e){this.v.append(t,e)};L.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};L.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ia(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kN=Z.JSON.parse;function $e(t){at.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kT,this.L=this.M=!1}lt($e,at);var kT="",AN=/^https?$/i,bN=["POST","PUT"];L=$e.prototype;L.Oa=function(t){this.M=t};L.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$f.g(),this.C=this.u?ev(this.u):ev($f),this.g.onreadystatechange=kt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){rv(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Z.FormData&&t instanceof Z.FormData,!(0<=HS(bN,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xT(this),0<this.B&&((this.L=xN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kt(this.ua,this)):this.A=Vm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){rv(this,s)}};function xN(t){return js&&typeof t.timeout=="number"&&t.ontimeout!==void 0}L.ua=function(){typeof Im<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function rv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,AT(t),td(t)}function AT(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}L.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),td(this))};L.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),td(this,!0)),$e.$.N.call(this)};L.La=function(){this.s||(this.G||this.v||this.l?bT(this):this.kb())};L.kb=function(){bT(this)};function bT(t){if(t.h&&typeof Im<"u"&&(!t.C[1]||jn(t)!=4||t.da()!=2)){if(t.v&&jn(t)==4)Vm(t.La,0,t);else if(pt(t,"readystatechange"),jn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(vT)[1]||null;!i&&Z.self&&Z.self.location&&(i=Z.self.location.protocol.slice(0,-1)),r=!AN.test(i?i.toLowerCase():"")}n=r}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var s=2<jn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",AT(t)}}finally{td(t)}}}}function td(t,e){if(t.g){xT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function xT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Z.clearTimeout(t.A),t.A=null)}L.isActive=function(){return!!this.g};function jn(t){return t.g?t.g.readyState:0}L.da=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}};L.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};L.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kN(e)}};function iv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case kT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function NN(t){const e={};t=(t.g&&2<=jn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ea(t[r]))continue;var n=rN(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}Q2(e,function(r){return r.join(", ")})}L.Ia=function(){return this.m};L.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NT(t){let e="";return bm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function qm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=NT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ae(t,e,n))}function Eo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OT(t){this.Ga=0,this.j=[],this.l=new Ku,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eo("baseRetryDelayMs",5e3,t),this.hb=Eo("retryDelaySeedMs",1e4,t),this.eb=Eo("forwardChannelMaxRetries",2,t),this.xa=Eo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new TT(t&&t.concurrentRequestLimit),this.Ja=new PN,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}L=OT.prototype;L.ra=8;L.H=1;function Hm(t){if(DT(t),t.H==3){var e=t.W++,n=fr(t.I);if(Ae(n,"SID",t.K),Ae(n,"RID",e),Ae(n,"TYPE","terminate"),rl(t,n),e=new Za(t,t.l,e),e.L=2,e.v=Zu(fr(n)),n=!1,Z.navigator&&Z.navigator.sendBeacon)try{n=Z.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Z.Image&&(new Image().src=e.v,n=!0),n||(e.g=BT(e.l,null),e.g.ha(e.v)),e.G=Date.now(),el(e)}UT(t)}function nd(t){t.g&&(Gm(t),t.g.cancel(),t.g=null)}function DT(t){nd(t),t.u&&(Z.clearTimeout(t.u),t.u=null),lu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Z.clearTimeout(t.m),t.m=null)}function rd(t){if(!wT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ta||rT(),wa||(Ta(),wa=!0),jm.add(e,t),t.C=0}}function ON(t,e){return CT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ya(kt(t.Na,t,e),FT(t,t.C)),t.C++,!0)}L.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Za(this,this.l,t);let s=this.s;if(this.U&&(s?(s=JS(s),QS(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=MT(this,i,e),n=fr(this.I),Ae(n,"RID",t),Ae(n,"CVER",22),this.F&&Ae(n,"X-HTTP-Session-Id",this.F),rl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(NT(s)))+"&"+e:this.o&&qm(n,this.o,s)),Bm(this.i,i),this.bb&&Ae(n,"TYPE","init"),this.P?(Ae(n,"$req",e),Ae(n,"SID","null"),i.aa=!0,zf(i,n,null)):zf(i,n,e),this.H=2}}else this.H==3&&(t?sv(this,t):this.j.length==0||wT(this.i)||sv(this))};function sv(t,e){var n;e?n=e.m:n=t.W++;const r=fr(t.I);Ae(r,"SID",t.K),Ae(r,"RID",n),Ae(r,"AID",t.V),rl(t,r),t.o&&t.s&&qm(r,t.o,t.s),n=new Za(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=MT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Bm(t.i,n),zf(n,r,e)}function rl(t,e){t.na&&bm(t.na,function(n,r){Ae(e,r,n)}),t.h&&yT({},function(n,r){Ae(e,r,n)})}function MT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?kt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let a=0;a<n;a++){let c=i[a].g;const u=i[a].map;if(c-=s,0>c)s=Math.max(0,i[a].g-100),l=!1;else try{RN(u,o,"req"+c+"_")}catch{r&&r(u)}}if(l){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function jT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ta||rT(),wa||(Ta(),wa=!0),jm.add(e,t),t.A=0}}function Wm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ya(kt(t.Ma,t),FT(t,t.A)),t.A++,!0)}L.Ma=function(){if(this.u=null,LT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ya(kt(this.jb,this),t)}};L.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,jt(10),nd(this),LT(this))};function Gm(t){t.B!=null&&(Z.clearTimeout(t.B),t.B=null)}function LT(t){t.g=new Za(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=fr(t.wa);Ae(e,"RID","rpc"),Ae(e,"SID",t.K),Ae(e,"AID",t.V),Ae(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ae(e,"TO",t.qa),Ae(e,"TYPE","xmlhttp"),rl(t,e),t.o&&t.s&&qm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Zu(fr(e)),n.s=null,n.S=!0,fT(n,t)}L.ib=function(){this.v!=null&&(this.v=null,nd(this),Wm(this),jt(19))};function lu(t){t.v!=null&&(Z.clearTimeout(t.v),t.v=null)}function VT(t,e){var n=null;if(t.g==e){lu(t),Gm(t),t.g=null;var r=2}else if(Hf(t.i,e))n=e.F,PT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Ju(),pt(r,new cT(r,n)),rd(t)}else jT(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&ON(t,e)||r==2&&Wm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ei(t,5);break;case 4:Ei(t,10);break;case 3:Ei(t,6);break;default:Ei(t,2)}}}function FT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ei(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=kt(t.pb,t);n||(n=new Pi("//www.google.com/images/cleardot.gif"),Z.location&&Z.location.protocol=="http"||ou(n,"https"),Zu(n)),IN(n.toString(),r)}else jt(2);t.H=0,t.h&&t.h.za(e),UT(t),DT(t)}L.pb=function(t){t?(this.l.info("Successfully pinged google.com"),jt(2)):(this.l.info("Failed to ping google.com"),jt(1))};function UT(t){if(t.H=0,t.ma=[],t.h){const e=RT(t.i);(e.length!=0||t.j.length!=0)&&(J0(t.ma,e),J0(t.ma,t.j),t.i.i.length=0,km(t.j),t.j.length=0),t.h.ya()}}function $T(t,e,n){var r=n instanceof Pi?fr(n):new Pi(n);if(r.g!="")e&&(r.g=e+"."+r.g),au(r,r.m);else{var i=Z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Pi(null);r&&ou(s,r),e&&(s.g=e),i&&au(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ae(r,n,e),Ae(r,"VER",t.ra),rl(t,r),r}function BT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new $e(new tl({ob:!0})):new $e(t.va),e.Oa(t.J),e}L.isActive=function(){return!!this.h&&this.h.isActive(this)};function zT(){}L=zT.prototype;L.Ba=function(){};L.Aa=function(){};L.za=function(){};L.ya=function(){};L.isActive=function(){return!0};L.Va=function(){};function cu(){if(js&&!(10<=Number(W2)))throw Error("Environmental error: no available transport.")}cu.prototype.g=function(t,e){return new en(t,e)};function en(t,e){at.call(this),this.g=new OT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ea(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ea(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xs(this)}lt(en,at);en.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;jt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=$T(t,null,t.Y),rd(t)};en.prototype.close=function(){Hm(this.g)};en.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Mm(t),t=n);e.j.push(new TN(e.fb++,t)),e.H==3&&rd(e)};en.prototype.N=function(){this.g.h=null,delete this.j,Hm(this.g),delete this.g,en.$.N.call(this)};function qT(t){Um.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}lt(qT,Um);function HT(){$m.call(this),this.status=1}lt(HT,$m);function Xs(t){this.g=t}lt(Xs,zT);Xs.prototype.Ba=function(){pt(this.g,"a")};Xs.prototype.Aa=function(t){pt(this.g,new qT(t))};Xs.prototype.za=function(t){pt(this.g,new HT)};Xs.prototype.ya=function(){pt(this.g,"b")};function DN(){this.blockSize=-1}function bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}lt(bn,DN);bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ch(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)ch(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ch(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ch(this,r),i=0;break}}this.h=i,this.i+=e};bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var MN={};function Km(t){return-128<=t&&128>t?z2(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Ln(t){if(isNaN(t)||!isFinite(t))return Cs;if(0>t)return ht(Ln(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Wf;return new Ee(e,0)}function WT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ht(WT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ln(Math.pow(e,8)),r=Cs,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ln(Math.pow(e,s)),r=r.R(s).add(Ln(o))):(r=r.R(n),r=r.add(Ln(o)))}return r}var Wf=4294967296,Cs=Km(0),Gf=Km(1),ov=Km(16777216);L=Ee.prototype;L.ea=function(){if(an(this))return-ht(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Wf+r)*e,e*=Wf}return t};L.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(rr(this))return"0";if(an(this))return"-"+ht(this).toString(t);for(var e=Ln(Math.pow(t,6)),n=this,r="";;){var i=du(n,e).g;n=uu(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,rr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};L.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function rr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function an(t){return t.h==-1}L.X=function(t){return t=uu(this,t),an(t)?-1:rr(t)?0:1};function ht(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(Gf)}L.abs=function(){return an(this)?ht(this):this};L.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function uu(t,e){return t.add(ht(e))}L.R=function(t){if(rr(this)||rr(t))return Cs;if(an(this))return an(t)?ht(this).R(ht(t)):ht(ht(this).R(t));if(an(t))return ht(this.R(ht(t)));if(0>this.X(ov)&&0>t.X(ov))return Ln(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,l=t.D(i)>>>16,a=t.D(i)&65535;n[2*r+2*i]+=o*a,$l(n,2*r+2*i),n[2*r+2*i+1]+=s*a,$l(n,2*r+2*i+1),n[2*r+2*i+1]+=o*l,$l(n,2*r+2*i+1),n[2*r+2*i+2]+=s*l,$l(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function $l(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function So(t,e){this.g=t,this.h=e}function du(t,e){if(rr(e))throw Error("division by zero");if(rr(t))return new So(Cs,Cs);if(an(t))return e=du(ht(t),e),new So(ht(e.g),ht(e.h));if(an(e))return e=du(t,ht(e)),new So(ht(e.g),e.h);if(30<t.g.length){if(an(t)||an(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gf,r=e;0>=r.X(t);)n=av(n),r=av(r);var i=Ji(n,1),s=Ji(r,1);for(r=Ji(r,2),n=Ji(n,2);!rr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ji(r,1),n=Ji(n,1)}return e=uu(t,i.R(e)),new So(i,e)}for(i=Cs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ln(n),o=s.R(e);an(o)||0<o.X(t);)n-=r,s=Ln(n),o=s.R(e);rr(s)&&(s=Gf),i=i.add(s),t=uu(t,o)}return new So(i,t)}L.gb=function(t){return du(this,t).h};L.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};L.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};L.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function av(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function Ji(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ee(i,t.h)}cu.prototype.createWebChannel=cu.prototype.g;en.prototype.send=en.prototype.u;en.prototype.open=en.prototype.m;en.prototype.close=en.prototype.close;Qu.NO_ERROR=0;Qu.TIMEOUT=8;Qu.HTTP_ERROR=6;uT.COMPLETE="complete";dT.EventType=Xa;Xa.OPEN="a";Xa.CLOSE="b";Xa.ERROR="c";Xa.MESSAGE="d";at.prototype.listen=at.prototype.O;$e.prototype.listenOnce=$e.prototype.P;$e.prototype.getLastError=$e.prototype.Sa;$e.prototype.getLastErrorCode=$e.prototype.Ia;$e.prototype.getStatus=$e.prototype.da;$e.prototype.getResponseJson=$e.prototype.Wa;$e.prototype.getResponseText=$e.prototype.ja;$e.prototype.send=$e.prototype.ha;$e.prototype.setWithCredentials=$e.prototype.Oa;bn.prototype.digest=bn.prototype.l;bn.prototype.reset=bn.prototype.reset;bn.prototype.update=bn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Ln;Ee.fromString=WT;var jN=function(){return new cu},LN=function(){return Ju()},uh=Qu,VN=uT,FN=Bi,lv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},UN=tl,Bl=dT,$N=$e,BN=bn,Ps=Ee;const cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs="10.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new mm("@firebase/firestore");function uv(){return Mi.logLevel}function q(t,...e){if(Mi.logLevel<=me.DEBUG){const n=e.map(Jm);Mi.debug(`Firestore (${Zs}): ${t}`,...n)}}function pr(t,...e){if(Mi.logLevel<=me.ERROR){const n=e.map(Jm);Mi.error(`Firestore (${Zs}): ${t}`,...n)}}function Ls(t,...e){if(Mi.logLevel<=me.WARN){const n=e.map(Jm);Mi.warn(`Firestore (${Zs}): ${t}`,...n)}}function Jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: `+t;throw pr(e),new Error(e)}function xe(t,e){t||ee()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class qN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HN{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await i(this.currentUser)})},l=a=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new GT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Ct(e)}}class WN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new KN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Vs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new nt(0,0))}static max(){return new te(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends ka{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const YN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends ka{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return YN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[i+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new Q(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ue.fromString(e))}static fromName(e){return new J(Ue.fromString(e).popFirst(5))}static empty(){return new J(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ue(e.slice()))}}function XN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ti(i,J.empty(),e)}function ZN(t){return new ti(t.readTime,t.key,-1)}class ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ti(te.min(),J.empty(),-1)}static max(){return new ti(te.max(),J.empty(),-1)}}function eO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==tO)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},a=>r(a))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(u=>{o[c]=u,++l,l===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qm.ae=-1;function id(t){return t==null}function hu(t){return t===0&&1/t==-1/0}function rO(t){return typeof t=="number"&&Number.isInteger(t)&&!hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ut.RED,this.left=i??ut.EMPTY,this.right=s??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ut(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ut.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new bt(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QT("Invalid base64 string: "+s):s}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const iO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(t){if(xe(!!t),typeof t=="string"){let e=0;const n=iO.exec(t);if(xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xm(t){const e=t.mapValue.fields.__previous_value__;return Ym(e)?Xm(e):e}function Aa(t){const e=ni(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i,s,o,l,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ym(t)?4:oO(t)?9007199254740991:10:ee()}function qn(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ni(i.timestampValue),l=ni(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ji(i.bytesValue).isEqual(ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),l=Qe(s.doubleValue);return o===l?hu(o)===hu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(dv(o)!==dv(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!qn(o[a],l[a])))return!1;return!0}(t,e);default:return ee()}}function xa(t,e){return(t.values||[]).find(n=>qn(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Qe(s.integerValue||s.doubleValue),a=Qe(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return fv(t.timestampValue,e.timestampValue);case 4:return fv(Aa(t),Aa(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ji(s),a=ji(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),a=o.split("/");for(let c=0;c<l.length&&c<a.length;c++){const u=ge(l[c],a[c]);if(u!==0)return u}return ge(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(Qe(s.latitude),Qe(o.latitude));return l!==0?l:ge(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],a=o.values||[];for(let c=0;c<l.length&&c<a.length;++c){const u=Fs(l[c],a[c]);if(u)return u}return ge(l.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ql.mapValue&&o===ql.mapValue)return 0;if(s===ql.mapValue)return 1;if(o===ql.mapValue)return-1;const l=s.fields||{},a=Object.keys(l),c=o.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let d=0;d<a.length&&d<u.length;++d){const f=ge(a[d],u[d]);if(f!==0)return f;const y=Fs(l[a[d]],c[u[d]]);if(y!==0)return y}return ge(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ee()}}function fv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=ni(t),r=ni(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function Us(t){return Kf(t)}function Kf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Kf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Kf(n.fields[o])}`;return i+"}"}(t.mapValue):ee()}function Jf(t){return!!t&&"integerValue"in t}function Zm(t){return!!t&&"arrayValue"in t}function pv(t){return!!t&&"nullValue"in t}function mv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fc(t){return!!t&&"mapValue"in t}function Ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ko(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=It.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ko(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ln(Ko(this.value))}}function YT(t){const e=[];return eo(t.fields,(n,r)=>{const i=new It([n]);if(fc(r)){const s=YT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,te.min(),te.min(),te.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,te.min(),te.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,te.min(),te.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.position=e,this.inclusive=n}}function gv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Fs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n="asc"){this.field=e,this.dir=n}}function aO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{}class et extends XT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cO(e,n,r):n==="array-contains"?new hO(e,r):n==="in"?new fO(e,r):n==="not-in"?new pO(e,r):n==="array-contains-any"?new mO(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uO(e,r):new dO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fs(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Hn extends XT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Hn(e,n)}matches(e){return ZT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ZT(t){return t.op==="and"}function ew(t){return lO(t)&&ZT(t)}function lO(t){for(const e of t.filters)if(e instanceof Hn)return!1;return!0}function Qf(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Us(t.value);if(ew(t))return t.filters.map(e=>Qf(e)).join(",");{const e=t.filters.map(n=>Qf(n)).join(",");return`${t.op}(${e})`}}function tw(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&qn(r.value,i.value)}(t,e):t instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&tw(o,i.filters[l]),!0):!1}(t,e):void ee()}function nw(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${Us(n.value)}`}(t):t instanceof Hn?function(n){return n.op.toString()+" {"+n.getFilters().map(nw).join(" ,")+"}"}(t):"Filter"}class cO extends et{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class uO extends et{constructor(e,n){super(e,"in",n),this.keys=rw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dO extends et{constructor(e,n){super(e,"not-in",n),this.keys=rw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class hO extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&xa(n.arrayValue,this.value)}}class fO extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xa(this.value.arrayValue,n)}}class pO extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xa(this.value.arrayValue,n)}}class mO extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.he=null}}function vv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gO(t,e,n,r,i,s,o)}function eg(t){const e=re(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Us(r)).join(",")),e.he=n}return e.he}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yv(t.startAt,e.startAt)&&yv(t.endAt,e.endAt)}function Yf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=a,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function yO(t,e,n,r,i,s,o,l){return new sd(t,e,n,r,i,s,o,l)}function ng(t){return new sd(t)}function _v(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vO(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _O(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function EO(t){return t.collectionGroup!==null}function Qo(t){const e=re(t);if(e.Pe===null){e.Pe=[];const n=_O(e),r=vO(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Jo(n)),e.Pe.push(new Jo(It.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Jo(It.keyField(),s))}}}return e.Pe}function mr(t){const e=re(t);return e.Ie||(e.Ie=SO(e,Qo(t))),e.Ie}function SO(t,e){if(t.limitType==="F")return vv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Jo(i.field,s)});const n=t.endAt?new fu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fu(t.startAt.position,t.startAt.inclusive):null;return vv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xf(t,e,n){return new sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function od(t,e){return tg(mr(t),mr(e))&&t.limitType===e.limitType}function iw(t){return`${eg(mr(t))}|lt:${t.limitType}`}function Zf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nw(i)).join(", ")}]`),id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Us(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Us(i)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function ad(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Qo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,a){const c=gv(o,l,a);return o.inclusive?c<=0:c<0}(r.startAt,Qo(r),i)||r.endAt&&!function(o,l,a){const c=gv(o,l,a);return o.inclusive?c>=0:c>0}(r.endAt,Qo(r),i))}(t,e)}function TO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sw(t){return(e,n)=>{let r=!1;for(const i of Qo(t)){const s=wO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wO(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const a=o.data.field(s),c=l.data.field(s);return a!==null&&c!==null?Fs(a,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return JT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Ve(J.comparator);function gr(){return CO}const ow=new Ve(J.comparator);function Do(...t){let e=ow;for(const n of t)e=e.insert(n.key,n);return e}function aw(t){let e=ow;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Si(){return Yo()}function lw(){return Yo()}function Yo(){return new to(t=>t.toString(),(t,e)=>t.isEqual(e))}const PO=new Ve(J.comparator),RO=new bt(J.comparator);function ae(...t){let e=RO;for(const n of t)e=e.add(n);return e}const IO=new bt(ge);function kO(){return IO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function uw(t){return{integerValue:""+t}}function AO(t,e){return rO(e)?uw(e):cw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function bO(t,e,n){return t instanceof pu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ym(s)&&(s=Xm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Na?hw(t,e):t instanceof Oa?fw(t,e):function(i,s){const o=dw(i,s),l=Ev(o)+Ev(i.Ee);return Jf(o)&&Jf(i.Ee)?uw(l):cw(i.serializer,l)}(t,e)}function xO(t,e,n){return t instanceof Na?hw(t,e):t instanceof Oa?fw(t,e):n}function dw(t,e){return t instanceof mu?function(r){return Jf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pu extends ld{}class Na extends ld{constructor(e){super(),this.elements=e}}function hw(t,e){const n=pw(e);for(const r of t.elements)n.some(i=>qn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Oa extends ld{constructor(e){super(),this.elements=e}}function fw(t,e){let n=pw(e);for(const r of t.elements)n=n.filter(i=>!qn(i,r));return{arrayValue:{values:n}}}class mu extends ld{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ev(t){return Qe(t.integerValue||t.doubleValue)}function pw(t){return Zm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Na&&i instanceof Na||r instanceof Oa&&i instanceof Oa?Vs(r.elements,i.elements,qn):r instanceof mu&&i instanceof mu?qn(r.Ee,i.Ee):r instanceof pu&&i instanceof pu}(t.transform,e.transform)}class OO{constructor(e,n){this.version=e,this.transformResults=n}}class or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function mw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yw(t.key,or.none()):new ol(t.key,t.data,or.none());{const n=t.data,r=ln.empty();let i=new bt(It.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zi(t.key,r,new Pn(i.toArray()),or.none())}}function DO(t,e,n){t instanceof ol?function(i,s,o){const l=i.value.clone(),a=Tv(i.fieldTransforms,s,o.transformResults);l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,s,o){if(!pc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Tv(i.fieldTransforms,s,o.transformResults),a=s.data;a.setAll(gw(i)),a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xo(t,e,n,r){return t instanceof ol?function(s,o,l,a){if(!pc(s.precondition,o))return l;const c=s.value.clone(),u=wv(s.fieldTransforms,a,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(s,o,l,a){if(!pc(s.precondition,o))return l;const c=wv(s.fieldTransforms,a,o),u=o.data;return u.setAll(gw(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,l){return pc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function MO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=dw(r.transform,i||null);s!=null&&(n===null&&(n=ln.empty()),n.set(r.field,s))}return n||null}function Sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vs(r,i,(s,o)=>NO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ol extends cd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends cd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tv(t,e,n){const r=new Map;xe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,xO(o,l,n[i]))}return r}function wv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,bO(s,o,e))}return r}class yw extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jO extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&DO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const a=mw(o,l);a!==null&&r.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(n,r)=>Sv(n,r))&&Vs(this.baseMutations,e.baseMutations,(n,r)=>Sv(n,r))}}class rg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length);let i=function(){return PO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,de;function UO(t){switch(t){default:return ee();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function vw(t){if(t===void 0)return pr("GRPC error has no .code"),O.UNKNOWN;switch(t){case Je.OK:return O.OK;case Je.CANCELLED:return O.CANCELLED;case Je.UNKNOWN:return O.UNKNOWN;case Je.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Je.INTERNAL:return O.INTERNAL;case Je.UNAVAILABLE:return O.UNAVAILABLE;case Je.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Je.NOT_FOUND:return O.NOT_FOUND;case Je.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Je.ABORTED:return O.ABORTED;case Je.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Je.DATA_LOSS:return O.DATA_LOSS;default:return ee()}}(de=Je||(Je={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Hl}static getOrCreateInstance(){return Hl===null&&(Hl=new ig),Hl}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Hl=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Ps([4294967295,4294967295],0);function Cv(t){const e=$O().encode(t),n=new BN;return n.update(e),new Uint8Array(n.digest())}function Pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ps([n,r],0),new Ps([i,s],0)]}class sg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Ps.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(Ps.fromNumber(r)));return i.compare(BO)===1&&(i=new Ps([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Cv(e),[r,i]=Pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sg(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ae===0)return;const n=Cv(e),[r,i]=Pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ud(te.min(),i,new Ve(ge),gr(),ae())}}class al{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new al(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class _w{constructor(e,n){this.targetId=e,this.ye=n}}class Ew{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rv{constructor(){this.we=0,this.Se=kv(),this.be=Dt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ae(),n=ae(),r=ae();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new al(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=kv()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class zO{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=gr(),this.Ue=Iv(),this.We=new Ve(ge)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){var n;const r=e.targetId,i=e.ye.count,s=this.et(r);if(s){const o=s.target;if(Yf(o))if(i===0){const l=new J(o.path);this.je(r,l,Rt.newNoDocument(l,te.min()))}else xe(i===1);else{const l=this.tt(r);if(l!==i){const a=this.nt(e),c=a?this.rt(a,e,l):1;if(c!==0){this.Ze(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(r,u)}(n=ig.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(d,f,y,g,_){var T,v,p,E,S,P;const I={localCacheCount:d,existenceFilterCount:f.count,databaseId:y.database,projectId:y.projectId},A=f.unchangedNames;return A&&(I.bloomFilter={applied:_===0,hashCount:(T=A==null?void 0:A.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(E=(p=(v=A==null?void 0:A.bits)===null||v===void 0?void 0:v.bitmap)===null||p===void 0?void 0:p.length)!==null&&E!==void 0?E:0,padding:(P=(S=A==null?void 0:A.bits)===null||S===void 0?void 0:S.padding)!==null&&P!==void 0?P:0,mightContain:m=>{var R;return(R=g==null?void 0:g.mightContain(m))!==null&&R!==void 0&&R}}),I}(l,e.ye,this.Qe.it(),a,c))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ji(r).toUint8Array()}catch(a){if(a instanceof QT)return Ls("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new sg(o,i,s)}catch(a){return Ls(a instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ae===0?null:l}rt(e,n,r){return n.ye.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.je(n,s,null),i++)}),i}ot(e){const n=new Map;this.Ke.forEach((s,o)=>{const l=this.et(o);if(l){if(s.current&&Yf(l.target)){const a=new J(l.target.path);this.$e.get(a)!==null||this._t(o,a)||this.je(o,a,Rt.newNoDocument(a,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ae();this.Ue.forEach((s,o)=>{let l=!0;o.forEachWhile(a=>{const c=this.et(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new ud(e,n,this.We,this.$e,r);return this.$e=gr(),this.Ue=Iv(),this.We=new Ve(ge),i}ze(e,n){if(!this.Ye(e))return;const r=this._t(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ut(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this._t(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ut(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Rv,this.Ke.set(e,n)),n}ut(e){let n=this.Ue.get(e);return n||(n=new bt(ge),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.ct(e)}Ze(e){this.Ke.set(e,new Rv),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}_t(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Iv(){return new Ve(J.comparator)}function kv(){return new Ve(J.comparator)}const qO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),HO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),WO=(()=>({and:"AND",or:"OR"}))();class GO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ep(t,e){return t.useProto3Json||id(e)?e:{value:e}}function gu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KO(t,e){return gu(t,e.toTimestamp())}function zn(t){return xe(!!t),te.fromTimestamp(function(n){const r=ni(n);return new nt(r.seconds,r.nanos)}(t))}function og(t,e){return function(r){return new Ue(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function Tw(t){const e=Ue.fromString(t);return xe(Rw(e)),e}function tp(t,e){return og(t.databaseId,e.path)}function dh(t,e){const n=Tw(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(ww(n))}function np(t,e){return og(t.databaseId,e)}function JO(t){const e=Tw(t);return e.length===4?Ue.emptyPath():ww(e)}function rp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ww(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Av(t,e,n){return{name:tp(t,e),fields:n.value.mapValue.fields}}function QO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(xe(u===void 0||typeof u=="string"),Dt.fromBase64String(u||"")):(xe(u===void 0||u instanceof Uint8Array),Dt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const u=c.code===void 0?O.UNKNOWN:vw(c.code);return new Q(u,c.message||"")}(o);n=new Ew(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(t,r.document.name),s=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):te.min(),l=new ln({mapValue:{fields:r.document.fields}}),a=Rt.newFoundDocument(i,s,o,l),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mc(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dh(t,r.document),s=r.readTime?zn(r.readTime):te.min(),o=Rt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new mc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dh(t,r.document),s=r.removedTargetIds||[];n=new mc([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new FO(i,s),l=r.targetId;n=new _w(l,o)}}return n}function YO(t,e){let n;if(e instanceof ol)n={update:Av(t,e.key,e.value)};else if(e instanceof yw)n={delete:tp(t,e.key)};else if(e instanceof zi)n={update:Av(t,e.key,e.data),updateMask:oD(e.fieldMask)};else{if(!(e instanceof jO))return ee();n={verify:tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof pu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mu)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:KO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(t,e.precondition)),n}function XO(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zn(i.updateTime):zn(s);return o.isEqual(te.min())&&(o=zn(s)),new OO(o,i.transformResults||[])}(n,e))):[]}function ZO(t,e){return{documents:[np(t,e.path)]}}function eD(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=np(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=np(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(a){if(a.length!==0)return Pw(Hn.create(a,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(a){if(a.length!==0)return a.map(c=>function(d){return{field:Xi(d.field),direction:rD(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ep(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(a){return{before:a.inclusive,values:a.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),n}function tD(t){let e=JO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=Cw(d);return f instanceof Hn&&ew(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(g){return new Jo(Zi(g.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,id(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(d){const f=!!d.before,y=d.values||[];return new fu(y,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,y=d.values||[];return new fu(y,f)}(n.endAt)),yO(e,i,o,s,l,"F",a,c)}function nD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Cw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zi(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zi(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zi(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hn.create(n.compositeFilter.filters.map(r=>Cw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function rD(t){return qO[t]}function iD(t){return HO[t]}function sD(t){return WO[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function Zi(t){return It.fromServerFormat(t.fieldPath)}function Pw(t){return t instanceof et?function(n){if(n.op==="=="){if(mv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NAN"}};if(pv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NAN"}};if(pv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(n.field),op:iD(n.op),value:n.value}}}(t):t instanceof Hn?function(n){const r=n.getFilters().map(i=>Pw(i));return r.length===1?r[0]:{compositeFilter:{op:sD(n.op),filters:r}}}(t):ee()}function oD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Rw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,i,s=te.min(),o=te.min(),l=Dt.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.lt=e}}function lD(t){const e=tD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.on=new uD}addToCollectionParentIndex(e,n){return this.on.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ti.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class uD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new bt(Ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new $s(0)}static Nn(){return new $s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.changes=new to(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xo(r.mutation,i,Pn.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const i=Si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Do();return s.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=gr();const o=Yo(),l=function(){return Yo()}();return n.forEach((a,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof zi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Xo(u.mutation,c,u.mutation.getFieldMask(),nt.now())):o.set(c.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return l.set(c,new hD(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Yo();let i=new Ve((o,l)=>o-l),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let u=r.get(a)||Pn.empty();u=l.applyToLocalView(c,u),r.set(a,u);const d=(i.get(l.batchId)||ae()).add(a);i=i.insert(l.batchId,d)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,d=lw();u.forEach(f=>{if(!s.has(f)){const y=mw(n.get(f),r.get(f));y!==null&&d.set(f,y),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Si());let l=-1,a=s;return o.next(c=>M.forEach(c,(u,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(u)?M.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{a=a.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,ae())).next(u=>({batchId:l,changes:aw(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Do();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Do();return this.indexManager.getCollectionParents(e,i).next(o=>M.forEach(o,l=>{const a=function(u,d){return new sd(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((l,a)=>{const c=a.getKey();s.get(c)===null&&(s=s.insert(c,Rt.newInvalidDocument(c)))});let o=Do();return s.forEach((l,a)=>{const c=i.get(l);c!==void 0&&Xo(c.mutation,a,Pn.empty(),nt.now()),ad(n,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return M.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:lD(i.bundledQuery),readTime:zn(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.overlays=new Ve(J.comparator),this.lr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Si();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Pt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Si(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&i.set(a.getKey(),a)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Si(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=Si(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=i)););return M.resolve(l)}Pt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VO(n,r));let s=this.lr.get(n);s===void 0&&(s=ae(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.hr=new bt(it.Pr),this.Ir=new bt(it.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new it(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new it(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new J(new Ue([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new J(new Ue([])),r=new it(n,e),i=new it(n,e+1);let s=ae();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return J.comparator(e.key,n.key)||ge(e.gr,n.gr)}static Tr(e,n){return ge(e.gr,n.gr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new bt(it.Pr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LO(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.yr=this.yr.add(new it(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const l=this.wr(o.gr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bt(ge);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],l=>{r=r.add(l.gr)})}),M.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new it(new J(s),0);let l=new bt(ge);return this.yr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(a.gr)),!0)},o),M.resolve(this.br(l))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return M.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new it(n,0),i=this.yr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.vr=e,this.docs=function(){return new Ve(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,l=new J(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eO(ZN(u),r)<=0||(i.has(u.key)||ad(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}Cr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vD(this)}getSize(e){return M.resolve(this.size)}}class vD extends dD{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.persistence=e,this.Fr=new to(n=>eg(n),tg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ag,this.targetCount=0,this.Nr=$s.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),M.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.kn(n),M.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Qm(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new _D(this),this.indexManager=new cD,this.remoteDocumentCache=function(i){return new yD(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new aD(n),this.Kr=new pD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new gD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new SD(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class SD extends nO{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Gr=new ag,this.zr=null}static jr(e){return new lg(e)}get Hr(){if(this.zr)return this.zr;throw ee()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Hr,r=>{const i=J.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return M.or([()=>M.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ae(),i=ae();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.Ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ui(e,n).next(s=>s||this.Wi(e,n,i,r)).next(s=>s||this.Gi(e,n))}Ui(e,n){if(_v(n))return M.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xf(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ae(...s);return this.$i.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.zi(n,l);return this.ji(n,c,o,a.readTime)?this.Ui(e,Xf(n,null,"F")):this.Hi(e,c,n,a)}))})))}Wi(e,n,r,i){return _v(n)||i.isEqual(te.min())?this.Gi(e,n):this.$i.getDocuments(e,r).next(s=>{const o=this.zi(n,s);return this.ji(n,o,r,i)?this.Gi(e,n):(uv()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zf(n)),this.Hi(e,o,n,XN(i,-1)))})}zi(e,n){let r=new bt(sw(e));return n.forEach((i,s)=>{ad(e,s)&&(r=r.add(s))}),r}ji(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Gi(e,n){return uv()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Zf(n)),this.$i.getDocumentsMatchingQuery(e,n,ti.min())}Hi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r,i){this.persistence=e,this.Ji=n,this.serializer=i,this.Yi=new Ve(ge),this.Zi=new to(s=>eg(s),tg),this.Xi=new Map,this.es=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.ts(r)}ts(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fD(this.es,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.es.setIndexManager(this.indexManager),this.Ji.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Yi))}}function CD(t,e,n,r){return new wD(t,e,n,r)}async function Iw(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ts(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let a=ae();for(const c of i){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return n.localDocuments.getDocuments(r,a).next(c=>({ns:c,removedBatchIds:o,addedBatchIds:l}))})})}function PD(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.es.newChangeBuffer({trackRemovals:!0});return function(l,a,c,u){const d=c.batch,f=d.keys();let y=M.resolve();return f.forEach(g=>{y=y.next(()=>u.getEntry(a,g)).next(_=>{const T=c.docVersions.get(g);xe(T!==null),_.version.compareTo(T)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(a,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=ae();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kw(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function RD(t,e){const n=re(t),r=e.snapshotVersion;let i=n.Yi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.es.newChangeBuffer({trackRemovals:!0});i=n.Yi;const l=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;l.push(n.qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,u.addedDocuments,d)));let y=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,r)),i=i.insert(d,y),function(_,T,v){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,y,u)&&l.push(n.qr.updateTargetData(s,y))});let a=gr(),c=ae();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(ID(s,o,e.documentUpdates).next(u=>{a=u.rs,c=u.ss})),!r.isEqual(te.min())){const u=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(u)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.Yi=i,s))}function ID(t,e,n){let r=ae(),i=ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((l,a)=>{const c=s.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),a.isNoDocument()&&a.version.isEqual(te.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{rs:o,ss:i}})}function kD(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AD(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Yi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Yi=n.Yi.insert(r.targetId,r),n.Zi.set(e,r.targetId)),r})}async function ip(t,e,n){const r=re(t),i=r.Yi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Yi=r.Yi.remove(e),r.Zi.delete(i.target)}function bv(t,e,n){const r=re(t);let i=te.min(),s=ae();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const d=re(a),f=d.Zi.get(u);return f!==void 0?M.resolve(d.Yi.get(f)):d.qr.getTargetData(c,u)}(r,o,mr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,l.targetId).next(a=>{s=a})}).next(()=>r.Ji.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:ae())).next(l=>(bD(r,TO(e),l),{documents:l,os:s})))}function bD(t,e,n){let r=t.Xi.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class xv{constructor(){this.activeTargetIds=kO()}Ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}Is(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xD{constructor(){this.Js=new xv,this.Ys={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Js.Ps(e),this.Ys[e]||"not-current"}updateQueryState(e,n,r){this.Ys[e]=n}removeLocalQueryTarget(e){this.Js.Is(e)}isLocalQueryTarget(e){return this.Js.activeTargetIds.has(e)}clearQueryState(e){delete this.Ys[e]}getAllActiveQueryTargets(){return this.Js.activeTargetIds}isActiveQueryTarget(e){return this.Js.activeTargetIds.has(e)}start(){return this.Js=new xv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{Zs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.Xs=()=>this.eo(),this.no=()=>this.ro(),this.io=[],this.so()}Zs(e){this.io.push(e)}shutdown(){window.removeEventListener("online",this.Xs),window.removeEventListener("offline",this.no)}so(){window.addEventListener("online",this.Xs),window.addEventListener("offline",this.no)}eo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.io)e(0)}ro(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.io)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function hh(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.oo=e.oo,this._o=e._o}ao(e){this.uo=e}co(e){this.lo=e}onMessage(e){this.ho=e}close(){this._o()}send(e){this.oo(e)}Po(){this.uo()}Io(e){this.lo(e)}To(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class MD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Eo=r+"://"+n.host,this.Ao=`projects/${i}/databases/${s}`,this.Ro=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Vo(){return!1}mo(n,r,i,s,o){const l=hh(),a=this.fo(n,r);q("RestConnection",`Sending RPC '${n}' ${l}:`,a,i);const c={"google-cloud-resource-prefix":this.Ao,"x-goog-request-params":this.Ro};return this.po(c,s,o),this.yo(n,a,c,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw Ls("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",a,"request:",i),u})}wo(n,r,i,s,o,l){return this.mo(n,r,i,s,o)}po(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}fo(n,r){const i=OD[n];return`${this.Eo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}yo(e,n,r,i){const s=hh();return new Promise((o,l)=>{const a=new $N;a.setWithCredentials(!0),a.listenOnce(VN.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case uh.NO_ERROR:const u=a.getResponseJson();q(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case uh.TIMEOUT:q(wt,`RPC '${e}' ${s} timed out`),l(new Q(O.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const d=a.getStatus();if(q(wt,`RPC '${e}' ${s} failed with status:`,d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const y=f==null?void 0:f.error;if(y&&y.status&&y.message){const g=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(v)>=0?v:O.UNKNOWN}(y.status);l(new Q(g,y.message))}else l(new Q(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new Q(O.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{q(wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(wt,`RPC '${e}' ${s} sending request:`,i),a.send(n,"POST",c,r,15)})}So(e,n,r){const i=hh(),s=[this.Eo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jN(),l=LN(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new UN({})),this.po(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=s.join("");q(wt,`Creating RPC '${e}' stream ${i}: ${u}`,a);const d=o.createWebChannel(u,a);let f=!1,y=!1;const g=new DD({oo:T=>{y?q(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(q(wt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),q(wt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},_o:()=>d.close()}),_=(T,v,p)=>{T.listen(v,E=>{try{p(E)}catch(S){setTimeout(()=>{throw S},0)}})};return _(d,Bl.EventType.OPEN,()=>{y||q(wt,`RPC '${e}' stream ${i} transport opened.`)}),_(d,Bl.EventType.CLOSE,()=>{y||(y=!0,q(wt,`RPC '${e}' stream ${i} transport closed`),g.Io())}),_(d,Bl.EventType.ERROR,T=>{y||(y=!0,Ls(wt,`RPC '${e}' stream ${i} transport errored:`,T),g.Io(new Q(O.UNAVAILABLE,"The operation could not be completed")))}),_(d,Bl.EventType.MESSAGE,T=>{var v;if(!y){const p=T.data[0];xe(!!p);const E=p,S=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(S){q(wt,`RPC '${e}' stream ${i} received error:`,S);const P=S.status;let I=function(R){const w=Je[R];if(w!==void 0)return vw(w)}(P),A=S.message;I===void 0&&(I=O.INTERNAL,A="Unknown error status: "+P+" with message "+S.message),y=!0,g.Io(new Q(I,A)),d.close()}else q(wt,`RPC '${e}' stream ${i} received:`,p),g.To(p)}}),_(l,FN.STAT_EVENT,T=>{T.stat===lv.PROXY?q(wt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===lv.NOPROXY&&q(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Po()},0),g}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new GO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.bo=r,this.Do=i,this.vo=s,this.Co=0,this.Fo=null,this.Mo=Date.now(),this.reset()}reset(){this.Co=0}xo(){this.Co=this.vo}Oo(e){this.cancel();const n=Math.floor(this.Co+this.No()),r=Math.max(0,Date.now()-this.Mo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Co} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Fo=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Mo=Date.now(),e())),this.Co*=this.Do,this.Co<this.bo&&(this.Co=this.bo),this.Co>this.vo&&(this.Co=this.vo)}Bo(){this.Fo!==null&&(this.Fo.skipDelay(),this.Fo=null)}cancel(){this.Fo!==null&&(this.Fo.cancel(),this.Fo=null)}No(){return(Math.random()-.5)*this.Co}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n,r,i,s,o,l,a){this.si=e,this.Lo=r,this.ko=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.qo=0,this.Qo=null,this.Ko=null,this.stream=null,this.$o=new Aw(e,n)}Uo(){return this.state===1||this.state===5||this.Wo()}Wo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}zo(){this.state=0,this.$o.reset()}jo(){this.Wo()&&this.Qo===null&&(this.Qo=this.si.enqueueAfterDelay(this.Lo,6e4,()=>this.Ho()))}Jo(e){this.Yo(),this.stream.send(e)}async Ho(){if(this.Wo())return this.close(0)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}async close(e,n){this.Yo(),this.Zo(),this.$o.cancel(),this.qo++,e!==4?this.$o.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.$o.xo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Xo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Xo(){}auth(){this.state=1;const e=this.e_(this.qo),n=this.qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.qo===n&&this.t_(r,i)},r=>{e(()=>{const i=new Q(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.n_(i)})})}t_(e,n){const r=this.e_(this.qo);this.stream=this.r_(e,n),this.stream.ao(()=>{r(()=>(this.state=2,this.Ko=this.si.enqueueAfterDelay(this.ko,1e4,()=>(this.Wo()&&(this.state=3),Promise.resolve())),this.listener.ao()))}),this.stream.co(i=>{r(()=>this.n_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.$o.Oo(async()=>{this.state=0,this.start()})}n_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}e_(e){return n=>{this.si.enqueueAndForget(()=>this.qo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jD extends bw{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}r_(e,n){return this.connection.So("Listen",e,n)}onMessage(e){this.$o.reset();const n=QO(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?zn(o.readTime):te.min()}(e);return this.listener.i_(n,r)}s_(e){const n={};n.database=rp(this.serializer),n.addTarget=function(s,o){let l;const a=o.target;if(l=Yf(a)?{documents:ZO(s,a)}:{query:eD(s,a)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Sw(s,o.resumeToken);const c=ep(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){l.readTime=gu(s,o.snapshotVersion.toTimestamp());const c=ep(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=nD(this.serializer,e);r&&(n.labels=r),this.Jo(n)}o_(e){const n={};n.database=rp(this.serializer),n.removeTarget=e,this.Jo(n)}}class LD extends bw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.__=!1}get a_(){return this.__}start(){this.__=!1,this.lastStreamToken=void 0,super.start()}Xo(){this.__&&this.u_([])}r_(e,n){return this.connection.So("Write",e,n)}onMessage(e){if(xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.__){this.$o.reset();const n=XO(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.c_(r,n)}return xe(!e.writeResults||e.writeResults.length===0),this.__=!0,this.listener.l_()}h_(){const e={};e.database=rp(this.serializer),this.Jo(e)}u_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YO(this.serializer,r))};this.Jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.P_=!1}I_(){if(this.P_)throw new Q(O.FAILED_PRECONDITION,"The client has already been terminated.")}mo(e,n,r){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.mo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(O.UNKNOWN,i.toString())})}wo(e,n,r,i){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.wo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(O.UNKNOWN,s.toString())})}terminate(){this.P_=!0}}class FD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.E_=0,this.d_=null,this.A_=!0}R_(){this.E_===0&&(this.V_("Unknown"),this.d_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.d_=null,this.m_("Backend didn't respond within 10 seconds."),this.V_("Offline"),Promise.resolve())))}f_(e){this.state==="Online"?this.V_("Unknown"):(this.E_++,this.E_>=1&&(this.g_(),this.m_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.V_("Offline")))}set(e){this.g_(),this.E_=0,e==="Online"&&(this.A_=!1),this.V_(e)}V_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}m_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.A_?(pr(n),this.A_=!1):q("OnlineStateTracker",n)}g_(){this.d_!==null&&(this.d_.cancel(),this.d_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.p_=[],this.y_=new Map,this.w_=new Set,this.S_=[],this.b_=s,this.b_.Zs(o=>{r.enqueueAndForget(async()=>{qi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=re(a);c.w_.add(4),await ll(c),c.D_.set("Unknown"),c.w_.delete(4),await hd(c)}(this))})}),this.D_=new FD(r,i)}}async function hd(t){if(qi(t))for(const e of t.S_)await e(!0)}async function ll(t){for(const e of t.S_)await e(!1)}function xw(t,e){const n=re(t);n.y_.has(e.targetId)||(n.y_.set(e.targetId,e),hg(n)?dg(n):no(n).Wo()&&ug(n,e))}function Nw(t,e){const n=re(t),r=no(n);n.y_.delete(e),r.Wo()&&Ow(n,e),n.y_.size===0&&(r.Wo()?r.jo():qi(n)&&n.D_.set("Unknown"))}function ug(t,e){if(t.v_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}no(t).s_(e)}function Ow(t,e){t.v_.Le(e),no(t).o_(e)}function dg(t){t.v_=new zO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ct:e=>t.y_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),no(t).start(),t.D_.R_()}function hg(t){return qi(t)&&!no(t).Uo()&&t.y_.size>0}function qi(t){return re(t).w_.size===0}function Dw(t){t.v_=void 0}async function $D(t){t.y_.forEach((e,n)=>{ug(t,e)})}async function BD(t,e){Dw(t),hg(t)?(t.D_.f_(e),dg(t)):t.D_.set("Unknown")}async function zD(t,e,n){if(t.D_.set("Online"),e instanceof Ew&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.y_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.y_.delete(l),i.v_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yu(t,r)}else if(e instanceof mc?t.v_.Ge(e):e instanceof _w?t.v_.Xe(e):t.v_.He(e),!n.isEqual(te.min()))try{const r=await kw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.v_.ot(o);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.y_.get(c);u&&s.y_.set(c,u.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,c)=>{const u=s.y_.get(a);if(!u)return;s.y_.set(a,u.withResumeToken(Dt.EMPTY_BYTE_STRING,u.snapshotVersion)),Ow(s,a);const d=new Ur(u.target,a,c,u.sequenceNumber);ug(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await yu(t,r)}}async function yu(t,e,n){if(!sl(e))throw e;t.w_.add(1),await ll(t),t.D_.set("Offline"),n||(n=()=>kw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.w_.delete(1),await hd(t)})}function Mw(t,e){return e().catch(n=>yu(t,n,e))}async function fd(t){const e=re(t),n=ri(e);let r=e.p_.length>0?e.p_[e.p_.length-1].batchId:-1;for(;qD(e);)try{const i=await kD(e.localStore,r);if(i===null){e.p_.length===0&&n.jo();break}r=i.batchId,HD(e,i)}catch(i){await yu(e,i)}jw(e)&&Lw(e)}function qD(t){return qi(t)&&t.p_.length<10}function HD(t,e){t.p_.push(e);const n=ri(t);n.Wo()&&n.a_&&n.u_(e.mutations)}function jw(t){return qi(t)&&!ri(t).Uo()&&t.p_.length>0}function Lw(t){ri(t).start()}async function WD(t){ri(t).h_()}async function GD(t){const e=ri(t);for(const n of t.p_)e.u_(n.mutations)}async function KD(t,e,n){const r=t.p_.shift(),i=rg.from(r,e,n);await Mw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fd(t)}async function JD(t,e){e&&ri(t).a_&&await async function(r,i){if(function(o){return UO(o)&&o!==O.ABORTED}(i.code)){const s=r.p_.shift();ri(r).zo(),await Mw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fd(r)}}(t,e),jw(t)&&Lw(t)}async function Ov(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=qi(n);n.w_.add(3),await ll(n),r&&n.D_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.w_.delete(3),await hd(n)}async function QD(t,e){const n=re(t);e?(n.w_.delete(2),await hd(n)):e||(n.w_.add(2),await ll(n),n.D_.set("Unknown"))}function no(t){return t.C_||(t.C_=function(n,r,i){const s=re(n);return s.I_(),new jD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:$D.bind(null,t),co:BD.bind(null,t),i_:zD.bind(null,t)}),t.S_.push(async e=>{e?(t.C_.zo(),hg(t)?dg(t):t.D_.set("Unknown")):(await t.C_.stop(),Dw(t))})),t.C_}function ri(t){return t.F_||(t.F_=function(n,r,i){const s=re(n);return s.I_(),new LD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:WD.bind(null,t),co:JD.bind(null,t),l_:GD.bind(null,t),c_:KD.bind(null,t)}),t.S_.push(async e=>{e?(t.F_.zo(),await fd(t)):(await t.F_.stop(),t.p_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.p_.length} pending writes`),t.p_=[]))})),t.F_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new fg(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(t,e){if(pr("AsyncQueue",`${e}: ${t}`),sl(t))return new Q(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Do(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Rs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.M_=new Ve(J.comparator)}track(e){const n=e.doc.key,r=this.M_.get(n);r?e.type!==0&&r.type===3?this.M_=this.M_.insert(n,e):e.type===3&&r.type!==1?this.M_=this.M_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.M_=this.M_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.M_=this.M_.remove(n):e.type===1&&r.type===2?this.M_=this.M_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):ee():this.M_=this.M_.insert(n,e)}x_(){const e=[];return this.M_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,i,s,o,l,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bs(e,n,Rs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.O_=void 0,this.listeners=[]}}class XD{constructor(){this.queries=new to(e=>iw(e),od),this.onlineState="Unknown",this.N_=new Set}}async function ZD(t,e){const n=re(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new YD),i)try{s.O_=await n.onListen(r)}catch(o){const l=pg(o,`Initialization of query '${Zf(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.listeners.push(e),e.B_(n.onlineState),s.O_&&e.L_(s.O_)&&mg(n)}async function eM(t,e){const n=re(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function tM(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.listeners)l.L_(i)&&(r=!0);o.O_=i}}r&&mg(n)}function nM(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function mg(t){t.N_.forEach(e=>{e.next()})}class rM{constructor(e,n,r){this.query=e,this.k_=n,this.q_=!1,this.Q_=null,this.onlineState="Unknown",this.options=r||{}}L_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.q_?this.K_(e)&&(this.k_.next(e),n=!0):this.U_(e,this.onlineState)&&(this.W_(e),n=!0),this.Q_=e,n}onError(e){this.k_.error(e)}B_(e){this.onlineState=e;let n=!1;return this.Q_&&!this.q_&&this.U_(this.Q_,e)&&(this.W_(this.Q_),n=!0),n}U_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.G_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}K_(e){if(e.docChanges.length>0)return!0;const n=this.Q_&&this.Q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}W_(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.q_=!0,this.k_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.key=e}}class Fw{constructor(e){this.key=e}}class iM{constructor(e,n){this.query=e,this.ea=n,this.ta=null,this.hasCachedResults=!1,this.current=!1,this.na=ae(),this.mutatedKeys=ae(),this.ra=sw(e),this.ia=new Rs(this.ra)}get sa(){return this.ea}oa(e,n){const r=n?n._a:new Dv,i=n?n.ia:this.ia;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const a=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),y=ad(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;f&&y?f.data.isEqual(y.data)?g!==_&&(r.track({type:3,doc:y}),T=!0):this.aa(f,y)||(r.track({type:2,doc:y}),T=!0,(a&&this.ra(y,a)>0||c&&this.ra(y,c)<0)&&(l=!0)):!f&&y?(r.track({type:0,doc:y}),T=!0):f&&!y&&(r.track({type:1,doc:f}),T=!0,(a||c)&&(l=!0)),T&&(y?(o=o.add(y),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ia:o,_a:r,ji:l,mutatedKeys:s}}aa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ia;this.ia=e.ia,this.mutatedKeys=e.mutatedKeys;const s=e._a.x_();s.sort((c,u)=>function(f,y){const g=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return g(f)-g(y)}(c.type,u.type)||this.ra(c.doc,u.doc)),this.ua(r);const o=n?this.ca():[],l=this.na.size===0&&this.current?1:0,a=l!==this.ta;return this.ta=l,s.length!==0||a?{snapshot:new Bs(this.query,e.ia,i,s,e.mutatedKeys,l===0,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),la:o}:{la:o}}B_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ia:this.ia,_a:new Dv,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{la:[]}}ha(e){return!this.ea.has(e)&&!!this.ia.has(e)&&!this.ia.get(e).hasLocalMutations}ua(e){e&&(e.addedDocuments.forEach(n=>this.ea=this.ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ea=this.ea.delete(n)),this.current=e.current)}ca(){if(!this.current)return[];const e=this.na;this.na=ae(),this.ia.forEach(r=>{this.ha(r.key)&&(this.na=this.na.add(r.key))});const n=[];return e.forEach(r=>{this.na.has(r)||n.push(new Fw(r))}),this.na.forEach(r=>{e.has(r)||n.push(new Vw(r))}),n}Pa(e){this.ea=e.os,this.na=ae();const n=this.oa(e.documents);return this.applyChanges(n,!0)}Ia(){return Bs.fromInitialDocuments(this.query,this.ia,this.mutatedKeys,this.ta===0,this.hasCachedResults)}}class sM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oM{constructor(e){this.key=e,this.Ta=!1}}class aM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ea={},this.da=new to(l=>iw(l),od),this.Aa=new Map,this.Ra=new Set,this.Va=new Ve(J.comparator),this.ma=new Map,this.fa=new ag,this.ga={},this.pa=new Map,this.ya=$s.Nn(),this.onlineState="Unknown",this.wa=void 0}get isPrimaryClient(){return this.wa===!0}}async function lM(t,e){const n=vM(t);let r,i;const s=n.da.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ia();else{const o=await AD(n.localStore,mr(e)),l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await cM(n,e,r,l==="current",o.resumeToken),n.isPrimaryClient&&xw(n.remoteStore,o)}return i}async function cM(t,e,n,r,i){t.Sa=(d,f,y)=>async function(_,T,v,p){let E=T.view.oa(v);E.ji&&(E=await bv(_.localStore,T.query,!1).then(({documents:I})=>T.view.oa(I,E)));const S=p&&p.targetChanges.get(T.targetId),P=T.view.applyChanges(E,_.isPrimaryClient,S);return jv(_,T.targetId,P.la),P.snapshot}(t,d,f,y);const s=await bv(t.localStore,e,!0),o=new iM(e,s.os),l=o.oa(s.documents),a=al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,a);jv(t,n,c.la);const u=new sM(e,n,o);return t.da.set(e,u),t.Aa.has(n)?t.Aa.get(n).push(e):t.Aa.set(n,[e]),c.snapshot}async function uM(t,e){const n=re(t),r=n.da.get(e),i=n.Aa.get(r.targetId);if(i.length>1)return n.Aa.set(r.targetId,i.filter(s=>!od(s,e))),void n.da.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ip(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Nw(n.remoteStore,r.targetId),sp(n,r.targetId)}).catch(il)):(sp(n,r.targetId),await ip(n.localStore,r.targetId,!0))}async function dM(t,e,n){const r=_M(t);try{const i=await function(o,l){const a=re(o),c=nt.now(),u=l.reduce((y,g)=>y.add(g.key),ae());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",y=>{let g=gr(),_=ae();return a.es.getEntries(y,u).next(T=>{g=T,g.forEach((v,p)=>{p.isValidDocument()||(_=_.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(y,g)).next(T=>{d=T;const v=[];for(const p of l){const E=MO(p,d.get(p.key).overlayedDocument);E!=null&&v.push(new zi(p.key,E,YT(E.value.mapValue),or.exists(!0)))}return a.mutationQueue.addMutationBatch(y,c,v,l)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(d,_);return a.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:aw(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,a){let c=o.ga[o.currentUser.toKey()];c||(c=new Ve(ge)),c=c.insert(l,a),o.ga[o.currentUser.toKey()]=c}(r,i.batchId,n),await cl(r,i.changes),await fd(r.remoteStore)}catch(i){const s=pg(i,"Failed to persist write");n.reject(s)}}async function Uw(t,e){const n=re(t);try{const r=await RD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ma.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ta=!0:i.modifiedDocuments.size>0?xe(o.Ta):i.removedDocuments.size>0&&(xe(o.Ta),o.Ta=!1))}),await cl(n,r,e)}catch(r){await il(r)}}function Mv(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.da.forEach((s,o)=>{const l=o.view.B_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const a=re(o);a.onlineState=l;let c=!1;a.queries.forEach((u,d)=>{for(const f of d.listeners)f.B_(l)&&(c=!0)}),c&&mg(a)}(r.eventManager,e),i.length&&r.Ea.i_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hM(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ma.get(e),s=i&&i.key;if(s){let o=new Ve(J.comparator);o=o.insert(s,Rt.newNoDocument(s,te.min()));const l=ae().add(s),a=new ud(te.min(),new Map,new Ve(ge),o,l);await Uw(r,a),r.Va=r.Va.remove(s),r.ma.delete(e),gg(r)}else await ip(r.localStore,e,!1).then(()=>sp(r,e,n)).catch(il)}async function fM(t,e){const n=re(t),r=e.batch.batchId;try{const i=await PD(n.localStore,e);Bw(n,r,null),$w(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cl(n,i)}catch(i){await il(i)}}async function pM(t,e,n){const r=re(t);try{const i=await function(o,l){const a=re(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,l).next(d=>(xe(d!==null),u=d.keys(),a.mutationQueue.removeMutationBatch(c,d))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);Bw(r,e,n),$w(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cl(r,i)}catch(i){await il(i)}}function $w(t,e){(t.pa.get(e)||[]).forEach(n=>{n.resolve()}),t.pa.delete(e)}function Bw(t,e,n){const r=re(t);let i=r.ga[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.ga[r.currentUser.toKey()]=i}}function sp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Aa.get(e))t.da.delete(r),n&&t.Ea.ba(r,n);t.Aa.delete(e),t.isPrimaryClient&&t.fa.Rr(e).forEach(r=>{t.fa.containsKey(r)||zw(t,r)})}function zw(t,e){t.Ra.delete(e.path.canonicalString());const n=t.Va.get(e);n!==null&&(Nw(t.remoteStore,n),t.Va=t.Va.remove(e),t.ma.delete(n),gg(t))}function jv(t,e,n){for(const r of n)r instanceof Vw?(t.fa.addReference(r.key,e),mM(t,r)):r instanceof Fw?(q("SyncEngine","Document no longer in limbo: "+r.key),t.fa.removeReference(r.key,e),t.fa.containsKey(r.key)||zw(t,r.key)):ee()}function mM(t,e){const n=e.key,r=n.path.canonicalString();t.Va.get(n)||t.Ra.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Ra.add(r),gg(t))}function gg(t){for(;t.Ra.size>0&&t.Va.size<t.maxConcurrentLimboResolutions;){const e=t.Ra.values().next().value;t.Ra.delete(e);const n=new J(Ue.fromString(e)),r=t.ya.next();t.ma.set(r,new oM(n)),t.Va=t.Va.insert(n,r),xw(t.remoteStore,new Ur(mr(ng(n.path)),r,"TargetPurposeLimboResolution",Qm.ae))}}async function cl(t,e,n){const r=re(t),i=[],s=[],o=[];r.da.isEmpty()||(r.da.forEach((l,a)=>{o.push(r.Sa(a,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=cg.Qi(a.targetId,c);s.push(u)}}))}),await Promise.all(o),r.Ea.i_(i),await async function(a,c){const u=re(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.ki,y=>u.persistence.referenceDelegate.addReference(d,f.targetId,y)).next(()=>M.forEach(f.qi,y=>u.persistence.referenceDelegate.removeReference(d,f.targetId,y)))))}catch(d){if(!sl(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const y=u.Yi.get(f),g=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(g);u.Yi=u.Yi.insert(f,_)}}}(r.localStore,s))}async function gM(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Iw(n.localStore,e);n.currentUser=e,function(s,o){s.pa.forEach(l=>{l.forEach(a=>{a.reject(new Q(O.CANCELLED,o))})}),s.pa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cl(n,r.ns)}}function yM(t,e){const n=re(t),r=n.ma.get(e);if(r&&r.Ta)return ae().add(r.key);{let i=ae();const s=n.Aa.get(e);if(!s)return i;for(const o of s){const l=n.da.get(o);i=i.unionWith(l.view.sa)}return i}}function vM(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hM.bind(null,e),e.Ea.i_=tM.bind(null,e.eventManager),e.Ea.ba=nM.bind(null,e.eventManager),e}function _M(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pM.bind(null,e),e}class Lv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CD(this.persistence,new TD,e.initialUser,this.serializer)}createPersistence(e){return new ED(lg.jr,this.serializer)}createSharedClientState(e){return new xD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class EM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=gM.bind(null,this.syncEngine),await QD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XD}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=function(s){return new MD(s)}(e.databaseInfo);return function(s,o,l,a){return new VD(s,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new UD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Mv(this.syncEngine,n,0),function(){return Nv.v()?new Nv:new ND}())}createSyncEngine(e,n){return function(i,s,o,l,a,c,u){const d=new aM(i,s,o,l,a,c);return u&&(d.wa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=re(n);q("RemoteStore","RemoteStore shutting down."),r.w_.add(5),await ll(r),r.b_.shutdown(),r.D_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ca(this.observer.next,e)}error(e){this.observer.error?this.Ca(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}Fa(){this.muted=!0}Ca(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=KT.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ph(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Iw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CM(t);q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Ov(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Ov(e.remoteStore,s)),t._onlineComponents=e}function wM(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function CM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wM(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await ph(t,new Lv)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await ph(t,new Lv);return t._offlineComponents}async function qw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Vv(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Vv(t,new EM))),t._onlineComponents}function PM(t){return qw(t).then(e=>e.syncEngine)}async function RM(t){const e=await qw(t),n=e.eventManager;return n.onListen=lM.bind(null,e.syncEngine),n.onUnlisten=uM.bind(null,e.syncEngine),n}function IM(t,e,n={}){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,a,c){const u=new SM({next:f=>{o.enqueueAndForget(()=>eM(s,d));const y=f.docs.has(l);!y&&f.fromCache?c.reject(new Q(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&a&&a.source==="server"?c.reject(new Q(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new rM(ng(l.path),u,{includeMetadataChanges:!0,G_:!0});return ZD(s,d)}(await RM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e,n){if(!n)throw new Q(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AM(t,e,n,r){if(e===!0&&r===!0)throw new Q(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uv(t){if(!J.isDocumentKey(t))throw new Q(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Da(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yg(t);throw new Q(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $v({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $v(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zN;switch(r.type){case"firstParty":return new GN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fv.get(n);r&&(q("ComponentProvider","Removing Datastore"),Fv.delete(n),r.terminate())}(this),Promise.resolve()}}function bM(t,e,n,r={}){var i;const s=(t=Da(t,vg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,a;if(typeof r.mockUserToken=="string")l=r.mockUserToken,a=Ct.MOCK_USER;else{l=iA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ct(c)}t._authCredentials=new qN(new GT(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _g(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Ma extends _g{constructor(e,n,r){super(e,n,ng(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new J(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function op(t,e,...n){if(t=mn(t),arguments.length===1&&(e=KT.V()),kM("doc","path",e),t instanceof vg){const r=Ue.fromString(e,...n);return Uv(r),new dn(t,null,new J(r))}{if(!(t instanceof dn||t instanceof Ma))throw new Q(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Uv(r),new dn(t.firestore,t instanceof Ma?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(){this.Ga=Promise.resolve(),this.za=[],this.ja=!1,this.Ha=[],this.Ja=null,this.Ya=!1,this.Za=!1,this.Xa=[],this.$o=new Aw(this,"async_queue_retry"),this.eu=()=>{const n=fh();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.$o.Bo()};const e=fh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.eu)}get isShuttingDown(){return this.ja}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.tu(),this.nu(e)}enterRestrictedMode(e){if(!this.ja){this.ja=!0,this.Za=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.eu)}}enqueue(e){if(this.tu(),this.ja)return new Promise(()=>{});const n=new Xr;return this.nu(()=>this.ja&&this.Za?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.za.push(e),this.ru()))}async ru(){if(this.za.length!==0){try{await this.za[0](),this.za.shift(),this.$o.reset()}catch(e){if(!sl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.za.length>0&&this.$o.Oo(()=>this.ru())}}nu(e){const n=this.Ga.then(()=>(this.Ya=!0,e().catch(r=>{this.Ja=r,this.Ya=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ya=!1,r))));return this.Ga=n,n}enqueueAfterDelay(e,n,r){this.tu(),this.Xa.indexOf(e)>-1&&(n=0);const i=fg.createAndSchedule(this,e,n,r,s=>this.iu(s));return this.Ha.push(i),i}tu(){this.Ja&&ee()}verifyOperationInProgress(){}async su(){let e;do e=this.Ga,await e;while(e!==this.Ga)}ou(e){for(const n of this.Ha)if(n.timerId===e)return!0;return!1}_u(e){return this.su().then(()=>{this.Ha.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ha)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.su()})}au(e){this.Xa.push(e)}iu(e){const n=this.Ha.indexOf(e);this.Ha.splice(n,1)}}class Eg extends vg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new xM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gw(this),this._firestoreClient.terminate()}}function ap(t,e){const n=typeof t=="object"?t:dS(),r=typeof t=="string"?t:e||"(default)",i=ym(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nA("firestore");s&&bM(i,...s)}return i}function Ww(t){return t._firestoreClient||Gw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Gw(t){var e,n,r;const i=t._freezeSettings(),s=function(l,a,c,u){return new sO(l,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Hw(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new TM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(Dt.fromBase64String(e))}catch(n){throw new Q(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^__.*__$/;class OM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ol(e,this.data,n,this.fieldTransforms)}}function Jw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class wg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.uu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get cu(){return this.settings.cu}lu(e){return new wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}hu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.Iu(e),i}Tu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.uu(),i}Eu(e){return this.lu({path:void 0,Pu:!0})}du(e){return vu(e,this.settings.methodName,this.settings.Au||!1,this.path,this.settings.Ru)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}uu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Iu(this.path.get(e))}Iu(e){if(e.length===0)throw this.du("Document fields must not be empty");if(Jw(this.cu)&&NM.test(e))throw this.du('Document fields cannot begin and end with "__"')}}class DM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}Vu(e,n,r,i=!1){return new wg({cu:e,methodName:n,Ru:r,path:It.emptyPath(),Pu:!1,Au:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MM(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new DM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jM(t,e,n,r,i,s={}){const o=t.Vu(s.merge||s.mergeFields?2:0,e,n,i);Zw("Data must be an object, but it was:",o,r);const l=Yw(r,o);let a,c;if(s.merge)a=new Pn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=LM(e,d,n);if(!o.contains(f))throw new Q(O.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);FM(u,f)||u.push(f)}a=new Pn(u),c=o.fieldTransforms.filter(d=>a.covers(d.field))}else a=null,c=o.fieldTransforms;return new OM(new ln(l),a,c)}function Qw(t,e){if(Xw(t=mn(t)))return Zw("Unsupported field value:",e,t),Yw(t,e);if(t instanceof Kw)return function(r,i){if(!Jw(i.cu))throw i.du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Pu&&e.cu!==4)throw e.du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let a=Qw(l,i.Eu(o));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:gu(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gu(i.serializer,s)}}if(r instanceof Tg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zs)return{bytesValue:Sw(i.serializer,r._byteString)};if(r instanceof dn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:og(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.du(`Unsupported field value: ${yg(r)}`)}(t,e)}function Yw(t,e){const n={};return JT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,i)=>{const s=Qw(i,e.hu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Xw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Tg||t instanceof zs||t instanceof dn||t instanceof Kw)}function Zw(t,e,n){if(!Xw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=yg(n);throw r==="an object"?e.du(t+" a custom object"):e.du(t+" "+r)}}function LM(t,e,n){if((e=mn(e))instanceof Sg)return e._internalPath;if(typeof e=="string")return eC(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const VM=new RegExp("[~\\*/\\[\\]]");function eC(t,e,n){if(e.search(VM)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sg(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(s||o)&&(a+=" (found",s&&(a+=` in field ${r}`),o&&(a+=` in document ${i}`),a+=")"),new Q(O.INVALID_ARGUMENT,l+t+a)}function FM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UM extends tC{data(){return super.data()}}function nC(t,e){return typeof e=="string"?eC(t,e):e instanceof Sg?e._internalPath:e._delegate._internalPath}class $M{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Tg(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=ni(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);xe(Rw(r));const i=new ba(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rC extends tC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qM extends rC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){t=Da(t,dn);const e=Da(t.firestore,Eg);return IM(Ww(e),t._key).then(n=>KM(e,t,n))}class HM extends $M{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function WM(t,e,n){t=Da(t,dn);const r=Da(t.firestore,Eg),i=BM(t.converter,e,n);return GM(r,[jM(MM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,or.none())])}function GM(t,e){return function(r,i){const s=new Xr;return r.asyncQueue.enqueueAndForget(async()=>dM(await PM(r),i,s)),s.promise}(Ww(t),e)}function KM(t,e,n){const r=n.docs.get(e._key),i=new HM(t);return new rC(t,i,e._key,r,new zM(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Zs=i})(Js),Ds(new xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Eg(new HN(r.getProvider("auth-internal")),new JN(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Yr(cv,"4.1.1",e),Yr(cv,"4.1.1","esm2017")})();function JM(t){const[e,n]=C.useState(!1);return h.jsx(h.Fragment,{children:t.currentUser===void 0?h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"login",children:[h.jsx("button",{"data-selected":e===!1,onClick:()=>{n(!1)},children:"LOGIN"}),h.jsx("button",{"data-selected":e===!0,onClick:()=>{n(!0)},children:"REGISTER"})]}),h.jsx("br",{}),h.jsxs("main",{className:"login",children:[e?h.jsx("input",{id:"login-name",type:"text",placeholder:"name"}):h.jsx(h.Fragment,{}),h.jsx("input",{type:"text",id:"login-email",placeholder:"email"}),h.jsx("input",{type:"password",id:"login-password",placeholder:"password"}),h.jsxs("p",{children:["remember this account",h.jsx("input",{type:"checkbox",style:{display:"inline-block"},placeholder:"password",id:"rememberacc"})]})]}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:()=>{if(t.admin===void 0){alert("firebase couldnot connect");return}const r=M2(t.admin),i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;if(e){const o=document.getElementById("login-name").value;vx(r,i,s).then(l=>{Sx(l.user,{displayName:o});const a=l.user.uid;if(document.userid=a,t.admin===void 0){alert("firebase couldnot connect");return}const c=ap(t.admin),u={email:i,name:o,score:0,id:a};WM(op(c,`Users/${a}`),u),u.id=a,t.onLogin(u,document.getElementById("rememberacc").checked??!1)}).catch(l=>{alert(l)})}else _x(r,i,s).then(o=>{const l=o.user.uid;document.userid=l,t.admin!==void 0?iC(op(ap(t.admin),`Users/${l}`)).then(a=>{const c=a.data();c.id=l,t.onLogin(c,document.getElementById("rememberacc").checked??!1)}).catch(a=>{alert(a)}):alert("couldnt connect to firebase")}).catch(o=>{alert(o)})},children:e?"register":"login"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"user-credentials",children:[h.jsxs("p",{children:[t.currentUser.name," ",h.jsxs("p",{style:{opacity:.5},children:["[",h.jsx("p",{style:{fontStyle:"italic"},children:t.currentUser.email}),"]"]})]}),h.jsx("button",{onClick:()=>{document.userid=void 0,t.onLogout()},children:"loggout"})]}),h.jsx("h2",{children:"User Statistics"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"score"}),h.jsx("td",{children:t.currentUser.score})]})})]})})}function QM(t){const[e,n]=C.useState(t.deafultIndex??0);return h.jsxs("div",{className:"switcher-component",children:[h.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e-1;r<0&&(r+=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:"<"}),h.jsx("p",{className:"switcher-component",children:t.options[t.Value??e]}),h.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e+1;r>=t.options.length&&(r-=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:">"})]})}function YM(t){const e=["Recruit","Regular","Hardened","Veteran"],[n,r]=C.useState([1]);return C.useEffect(()=>{t.OnChange(n.map(i=>e[i]))},[n]),h.jsxs(h.Fragment,{children:[n.map((i,s)=>h.jsxs("div",{className:"bot-list-element",children:[h.jsx("p",{children:"Bot"}),h.jsx(QM,{options:e,Value:i,deafultIndex:i,onChange:(o,l)=>{const a=JSON.parse(JSON.stringify(n));a[s]=l,r(a)}}),h.jsx("img",{src:"trash.png",alt:"",onClick:()=>{const o=JSON.parse(JSON.stringify(n));o.splice(s,1),r(o)}})]},s)),n.length!==5?h.jsx("div",{className:"bot-list-add",onClick:()=>{n.length<=4&&r(i=>[...i,1])},children:h.jsx("p",{children:"add bot"})}):h.jsx(h.Fragment,{})]})}function XM(t){const[e,n]=C.useState(0),[r,i]=C.useState(0),[s,o]=C.useState(0);return h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"join",children:[h.jsx("button",{"data-tooltip-hover":"online","data-select":e===0,onClick:()=>{n(0)},children:h.jsx("img",{src:"online.png",alt:""})}),h.jsx("button",{"data-tooltip-hover":"computer","data-select":e===1,onClick:()=>{n(1)},children:h.jsx("img",{src:"bot.png",alt:""})})]}),h.jsx("br",{}),e===1?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:l=>{t.SetName(l.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.fbUser.name,placeholder:"enter name"})]},"bots-name"),h.jsx("p",{children:"bots settings:"}),h.jsx(YM,{OnChange:l=>{}}),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.joinBots(r,s)},disabled:t.disabled,children:"start"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("p",{children:"please enter your code:"}),h.jsx("input",{type:"text",id:"name",onChange:l=>t.SetAddress(l.currentTarget.value),defaultValue:t.addr,placeholder:"enter code"})]},"online-code"),h.jsxs("div",{children:[h.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:l=>{t.SetName(l.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.name,placeholder:"enter name"})]},"online-name"),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.joinViaCode()},disabled:t.disabled,children:"join"})})]})]})}const ZM={apiKey:"AIzaSyAWWAOKvGp2rJg2LhVincjI2oPtC9uscds",authDomain:"monopoly-react.firebaseapp.com",projectId:"monopoly-react",storageBucket:"monopoly-react.appspot.com",messagingSenderId:"530562047914",appId:"1:530562047914:web:7c8a437bbff0abd89f55d3",measurementId:"G-PPJLPZZLZ0"},ej={url:"https://api.jsonbin.io/v3/b/64dff3e3b89b1e2299d2cfcf",masterKey:"$2b$10$Wolgp1Pl5jFGDnkTsivU/.pRmpFnK7gC00691IZleh4TplMzzo6bG",accessKey:"$2b$10$j9L0hVDvDISi4oZqAB.hwOhZpH9MdF6xD0d/X5gjLt/nYanpSzbbi"},On={firebase:ZM,JSONBin:ej};var tj="firebase",nj="10.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(tj,nj,"app");function sC(t,e){return function(){return t.apply(e,arguments)}}const{toString:rj}=Object.prototype,{getPrototypeOf:Cg}=Object,pd=(t=>e=>{const n=rj.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=t=>(t=t.toLowerCase(),e=>pd(e)===t),md=t=>e=>typeof e===t,{isArray:ro}=Array,ja=md("undefined");function ij(t){return t!==null&&!ja(t)&&t.constructor!==null&&!ja(t.constructor)&&hn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oC=Gn("ArrayBuffer");function sj(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&oC(t.buffer),e}const oj=md("string"),hn=md("function"),aC=md("number"),gd=t=>t!==null&&typeof t=="object",aj=t=>t===!0||t===!1,gc=t=>{if(pd(t)!=="object")return!1;const e=Cg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},lj=Gn("Date"),cj=Gn("File"),uj=Gn("Blob"),dj=Gn("FileList"),hj=t=>gd(t)&&hn(t.pipe),fj=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||hn(t.append)&&((e=pd(t))==="formdata"||e==="object"&&hn(t.toString)&&t.toString()==="[object FormData]"))},pj=Gn("URLSearchParams"),mj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ul(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),ro(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function lC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const cC=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),uC=t=>!ja(t)&&t!==cC;function lp(){const{caseless:t}=uC(this)&&this||{},e={},n=(r,i)=>{const s=t&&lC(e,i)||i;gc(e[s])&&gc(r)?e[s]=lp(e[s],r):gc(r)?e[s]=lp({},r):ro(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ul(arguments[r],n);return e}const gj=(t,e,n,{allOwnKeys:r}={})=>(ul(e,(i,s)=>{n&&hn(i)?t[s]=sC(i,n):t[s]=i},{allOwnKeys:r}),t),yj=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vj=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},_j=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Cg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Ej=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Sj=t=>{if(!t)return null;if(ro(t))return t;let e=t.length;if(!aC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Tj=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cg(Uint8Array)),wj=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Cj=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Pj=Gn("HTMLFormElement"),Rj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Bv=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Ij=Gn("RegExp"),dC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ul(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},kj=t=>{dC(t,(e,n)=>{if(hn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(hn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Aj=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ro(t)?r(t):r(String(t).split(e)),n},bj=()=>{},xj=(t,e)=>(t=+t,Number.isFinite(t)?t:e),mh="abcdefghijklmnopqrstuvwxyz",zv="0123456789",hC={DIGIT:zv,ALPHA:mh,ALPHA_DIGIT:mh+mh.toUpperCase()+zv},Nj=(t=16,e=hC.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Oj(t){return!!(t&&hn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Dj=t=>{const e=new Array(10),n=(r,i)=>{if(gd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=ro(r)?[]:{};return ul(r,(o,l)=>{const a=n(o,i+1);!ja(a)&&(s[l]=a)}),e[i]=void 0,s}}return r};return n(t,0)},Mj=Gn("AsyncFunction"),jj=t=>t&&(gd(t)||hn(t))&&hn(t.then)&&hn(t.catch),k={isArray:ro,isArrayBuffer:oC,isBuffer:ij,isFormData:fj,isArrayBufferView:sj,isString:oj,isNumber:aC,isBoolean:aj,isObject:gd,isPlainObject:gc,isUndefined:ja,isDate:lj,isFile:cj,isBlob:uj,isRegExp:Ij,isFunction:hn,isStream:hj,isURLSearchParams:pj,isTypedArray:Tj,isFileList:dj,forEach:ul,merge:lp,extend:gj,trim:mj,stripBOM:yj,inherits:vj,toFlatObject:_j,kindOf:pd,kindOfTest:Gn,endsWith:Ej,toArray:Sj,forEachEntry:wj,matchAll:Cj,isHTMLForm:Pj,hasOwnProperty:Bv,hasOwnProp:Bv,reduceDescriptors:dC,freezeMethods:kj,toObjectSet:Aj,toCamelCase:Rj,noop:bj,toFiniteNumber:xj,findKey:lC,global:cC,isContextDefined:uC,ALPHABET:hC,generateString:Nj,isSpecCompliantForm:Oj,toJSONObject:Dj,isAsyncFn:Mj,isThenable:jj};function he(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}k.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fC=he.prototype,pC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pC[t]={value:t}});Object.defineProperties(he,pC);Object.defineProperty(fC,"isAxiosError",{value:!0});he.from=(t,e,n,r,i,s)=>{const o=Object.create(fC);return k.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),he.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Lj=null;function cp(t){return k.isPlainObject(t)||k.isArray(t)}function mC(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function qv(t,e,n){return t?t.concat(e).map(function(i,s){return i=mC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Vj(t){return k.isArray(t)&&!t.some(cp)}const Fj=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function yd(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,T){return!k.isUndefined(T[_])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!a&&k.isBlob(g))throw new he("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?a&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,_,T){let v=g;if(g&&!T&&typeof g=="object"){if(k.endsWith(_,"{}"))_=r?_:_.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&Vj(g)||(k.isFileList(g)||k.endsWith(_,"[]"))&&(v=k.toArray(g)))return _=mC(_),v.forEach(function(E,S){!(k.isUndefined(E)||E===null)&&e.append(o===!0?qv([_],S,s):o===null?_:_+"[]",c(E))}),!1}return cp(g)?!0:(e.append(qv(T,_,s),c(g)),!1)}const d=[],f=Object.assign(Fj,{defaultVisitor:u,convertValue:c,isVisitable:cp});function y(g,_){if(!k.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(g),k.forEach(g,function(v,p){(!(k.isUndefined(v)||v===null)&&i.call(e,v,k.isString(p)?p.trim():p,_,f))===!0&&y(v,_?_.concat(p):[p])}),d.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return y(t),e}function Hv(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Pg(t,e){this._pairs=[],t&&yd(t,this,e)}const gC=Pg.prototype;gC.append=function(e,n){this._pairs.push([e,n])};gC.toString=function(e){const n=e?function(r){return e.call(this,r,Hv)}:Hv;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Uj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yC(t,e,n){if(!e)return t;const r=n&&n.encode||Uj,i=n&&n.serialize;let s;if(i?s=i(e,n):s=k.isURLSearchParams(e)?e.toString():new Pg(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class $j{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Wv=$j,vC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bj=typeof URLSearchParams<"u"?URLSearchParams:Pg,zj=typeof FormData<"u"?FormData:null,qj=typeof Blob<"u"?Blob:null,Hj=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Wj=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Vn={isBrowser:!0,classes:{URLSearchParams:Bj,FormData:zj,Blob:qj},isStandardBrowserEnv:Hj,isStandardBrowserWebWorkerEnv:Wj,protocols:["http","https","file","blob","url","data"]};function Gj(t,e){return yd(t,new Vn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Vn.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Kj(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Jj(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function _C(t){function e(n,r,i,s){let o=n[s++];const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&k.isArray(i)?i.length:o,a?(k.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&k.isArray(i[o])&&(i[o]=Jj(i[o])),!l)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,i)=>{e(Kj(r),i,n,0)}),n}return null}const Qj={"Content-Type":void 0};function Yj(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const vd={transitional:vC,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=k.isObject(e);if(s&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return i&&i?JSON.stringify(_C(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Gj(e,this.formSerializer).toString();if((l=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return yd(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Yj(e)):e}],transformResponse:[function(e){const n=this.transitional||vd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?he.from(l,he.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vn.classes.FormData,Blob:Vn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(e){vd.headers[e]={}});k.forEach(["post","put","patch"],function(e){vd.headers[e]=k.merge(Qj)});const Rg=vd,Xj=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zj=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Xj[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Gv=Symbol("internals");function To(t){return t&&String(t).trim().toLowerCase()}function yc(t){return t===!1||t==null?t:k.isArray(t)?t.map(yc):String(t)}function e5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const t5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function gh(t,e,n,r,i){if(k.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function n5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function r5(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class _d{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,a,c){const u=To(a);if(!u)throw new Error("header name must be a non-empty string");const d=k.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||a]=yc(l))}const o=(l,a)=>k.forEach(l,(c,u)=>s(c,u,a));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!t5(e)?o(Zj(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=To(e),e){const r=k.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return e5(i);if(k.isFunction(n))return n.call(this,i,r);if(k.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=To(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||gh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=To(o),o){const l=k.findKey(r,o);l&&(!n||gh(r,r[l],l,n))&&(delete r[l],i=!0)}}return k.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||gh(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return k.forEach(this,(i,s)=>{const o=k.findKey(r,s);if(o){n[o]=yc(i),delete n[s];return}const l=e?n5(s):String(s).trim();l!==s&&delete n[s],n[l]=yc(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Gv]=this[Gv]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=To(o);r[l]||(r5(i,o),r[l]=!0)}return k.isArray(e)?e.forEach(s):s(e),this}}_d.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.freezeMethods(_d.prototype);k.freezeMethods(_d);const ar=_d;function yh(t,e){const n=this||Rg,r=e||n,i=ar.from(r.headers);let s=r.data;return k.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function EC(t){return!!(t&&t.__CANCEL__)}function dl(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(dl,he,{__CANCEL__:!0});function i5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const s5=Vn.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,l){const a=[];a.push(n+"="+encodeURIComponent(r)),k.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),k.isString(s)&&a.push("path="+s),k.isString(o)&&a.push("domain="+o),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function o5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function a5(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function SC(t,e){return t&&!o5(e)?a5(t,e):e}const l5=Vn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const l=k.isString(o)?i(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function c5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function u5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const y=u&&c-u;return y?Math.round(f*1e3/y):void 0}}function Kv(t,e){let n=0;const r=u5(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,l=s-n,a=r(l),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:a||void 0,estimated:a&&o&&c?(o-s)/a:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const d5=typeof XMLHttpRequest<"u",h5=d5&&function(t){return new Promise(function(n,r){let i=t.data;const s=ar.from(t.headers).normalize(),o=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}k.isFormData(i)&&(Vn.isStandardBrowserEnv||Vn.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+g))}const u=SC(t.baseURL,t.url);c.open(t.method.toUpperCase(),yC(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const y=ar.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:y,config:t,request:c};i5(function(v){n(v),a()},function(v){r(v),a()},_),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new he("Request aborted",he.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||vC;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new he(g,_.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,c)),c=null},Vn.isStandardBrowserEnv){const y=(t.withCredentials||l5(u))&&t.xsrfCookieName&&s5.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&k.forEach(s.toJSON(),function(g,_){c.setRequestHeader(_,g)}),k.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",Kv(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Kv(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=y=>{c&&(r(!y||y.type?new dl(null,t,c):y),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const f=c5(u);if(f&&Vn.protocols.indexOf(f)===-1){r(new he("Unsupported protocol "+f+":",he.ERR_BAD_REQUEST,t));return}c.send(i||null)})},vc={http:Lj,xhr:h5};k.forEach(vc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const f5={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=k.isString(n)?vc[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new he(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(k.hasOwnProp(vc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!k.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:vc};function vh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new dl(null,t)}function Jv(t){return vh(t),t.headers=ar.from(t.headers),t.data=yh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),f5.getAdapter(t.adapter||Rg.adapter)(t).then(function(r){return vh(t),r.data=yh.call(t,t.transformResponse,r),r.headers=ar.from(r.headers),r},function(r){return EC(r)||(vh(t),r&&r.response&&(r.response.data=yh.call(t,t.transformResponse,r.response),r.response.headers=ar.from(r.response.headers))),Promise.reject(r)})}const Qv=t=>t instanceof ar?t.toJSON():t;function qs(t,e){e=e||{};const n={};function r(c,u,d){return k.isPlainObject(c)&&k.isPlainObject(u)?k.merge.call({caseless:d},c,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function i(c,u,d){if(k.isUndefined(u)){if(!k.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!k.isUndefined(u))return r(void 0,u)}function o(c,u){if(k.isUndefined(u)){if(!k.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u)=>i(Qv(c),Qv(u),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=a[u]||i,f=d(t[u],e[u],u);k.isUndefined(f)&&d!==l||(n[u]=f)}),n}const TC="1.4.0",Ig={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ig[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Yv={};Ig.transitional=function(e,n,r){function i(s,o){return"[Axios v"+TC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new he(i(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!Yv[o]&&(Yv[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};function p5(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new he("option "+s+" must be "+a,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+s,he.ERR_BAD_OPTION)}}const up={assertOptions:p5,validators:Ig},kr=up.validators;class _u{constructor(e){this.defaults=e,this.interceptors={request:new Wv,response:new Wv}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=qs(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&up.assertOptions(r,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),i!=null&&(k.isFunction(i)?n.paramsSerializer={serialize:i}:up.assertOptions(i,{encode:kr.function,serialize:kr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&k.merge(s.common,s[n.method]),o&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=ar.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(a=a&&_.synchronous,l.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,d=0,f;if(!a){const g=[Jv.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,c),f=g.length,u=Promise.resolve(n);d<f;)u=u.then(g[d++],g[d++]);return u}f=l.length;let y=n;for(d=0;d<f;){const g=l[d++],_=l[d++];try{y=g(y)}catch(T){_.call(this,T);break}}try{u=Jv.call(this,y)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=qs(this.defaults,e);const n=SC(e.baseURL,e.url);return yC(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){_u.prototype[e]=function(n,r){return this.request(qs(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(qs(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}_u.prototype[e]=n(),_u.prototype[e+"Form"]=n(!0)});const _c=_u;class kg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new dl(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new kg(function(i){e=i}),cancel:e}}}const m5=kg;function g5(t){return function(n){return t.apply(null,n)}}function y5(t){return k.isObject(t)&&t.isAxiosError===!0}const dp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dp).forEach(([t,e])=>{dp[e]=t});const v5=dp;function wC(t){const e=new _c(t),n=sC(_c.prototype.request,e);return k.extend(n,_c.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return wC(qs(t,i))},n}const rt=wC(Rg);rt.Axios=_c;rt.CanceledError=dl;rt.CancelToken=m5;rt.isCancel=EC;rt.VERSION=TC;rt.toFormData=yd;rt.AxiosError=he;rt.Cancel=rt.CanceledError;rt.all=function(e){return Promise.all(e)};rt.spread=g5;rt.isAxiosError=y5;rt.mergeConfig=qs;rt.AxiosHeaders=ar;rt.formToJSON=t=>_C(k.isHTMLForm(t)?new FormData(t):t);rt.HttpStatusCode=v5;rt.default=rt;const Xv=rt;class _5{constructor(e,n,r){ve(this,"id");ve(this,"username");ve(this,"icon");ve(this,"position");ve(this,"balance");ve(this,"properties");ve(this,"isInJail");ve(this,"jailTurnsRemaining");ve(this,"getoutCards");this.id=e,this.username=n,this.icon=r,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0}to_json(){return{id:this.id,username:this.username,icon:this.icon,position:this.position,balance:this.balance,properties:this.properties,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,getoutCards:this.getoutCards}}from_json(e){this.id==e.id&&(this.position=e.position,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards)}}async function E5(t,e){const n=()=>{async function f(){try{return(await Xv.get(`${On.JSONBin.url}/latest`,{headers:{"X-Master-Key":On.JSONBin.masterKey,"X-Access-Key":On.JSONBin.accessKey}})).data.record}catch(v){console.error("Error reading data:",v)}}async function y(v){try{await Xv.put(`${On.JSONBin.url}`,v,{headers:{"Content-Type":"application/json","X-Master-Key":On.JSONBin.masterKey,"X-Access-Key":On.JSONBin.accessKey}})}catch(p){console.error("Error writing data:",p)}}async function g(v){const p=await f();Object.keys(p).includes(v)&&delete p[v],await y(p)}async function _(){await y({clear:new Date().toISOString()})}async function T(v){function p(I){const A="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let m="";for(let R=0;R<I;R++){const w=Math.floor(Math.random()*A.length);m+=A[w]}return m}var E=p(6);const S=await f();for(;Object.keys(S).includes(E);)E=p(6);const P=v;if(Object.values(S).includes(P))for(const I of Object.entries(S))I[1]===P&&delete S[I[0]];return S[E]=P,await y(S),E}return{Write:y,Read:f,Delete:g,Generate:T,Clear:_}},r=t>0?Math.min(t,6):6;console.log(`Max Players is ${r}...
`);const i=new Map,s=[];let o="",l=!1,a=0;function c(){const f=new Date,y=String(f.getHours()).padStart(2,"0"),g=String(f.getMinutes()).padStart(2,"0");return`${y}:${g}`}function u(f,y){for(const g of Array.from(i.values()))g.socket.emit(f,y)}function d(f,y,g){for(const _ of Array.from(i.entries()))_[0]!=f&&_[1].socket.emit(y,g)}new Kk(async(f,y)=>{var g=await n().Generate(f);return e==null||e(g,y),async()=>{await n().Delete(g)}},(f,y)=>{const g=l?1:i.size>=r?2:0;f.emit("state",g),g===0?(f.on("name",_=>{try{const T=new _5(f.id,_,Array.from(i.keys()).length);(o===""||!Array.from(i.keys()).includes(o))&&(o=f.id),i.set(f.id,{player:T,socket:f,ready:!1,positions:{x:0,y:0}}),y.logFunction(`{${c()}} [${f.id}] Player "${T.username}" has connected.`),s.push(`{${c()}} [${f.id}] Player "${T.username}" has connected.`);const v=[];for(const p of Array.from(i.values()))v.push(p.player.to_json());f.emit("initials",{turn_id:o,other_players:v}),d(f.id,"new-player",T.to_json()),f.on("unjail",p=>{try{u("unjail",{to:T.id,option:p})}catch(E){y.logFunction(E)}}),f.on("roll_dice",()=>{try{const E=Math.floor(Math.random()*6)+1,S=Math.floor(Math.random()*6)+1,P=`{${c()}} [${f.id}] Player "${T.username}" rolled a [${E},${S}].`;s.push(P),y.logFunction(P);const I=E+S;var p=(T.position+I)%40;u("dice_roll_result",{listOfNums:[E,S,p],turnId:o})}catch(E){y.logFunction(E)}}),f.on("chorch_roll",p=>{try{const E=p.is_chance?sr.chance:sr.communitychest,S=E[Math.floor(Math.random()*E.length)];u("chorch_result",{element:S,is_chance:p.is_chance,rolls:p.rolls,turnId:o})}catch(E){y.logFunction(E)}}),f.on("player_update",p=>{const E=i.get(p.playerId);E!==void 0&&(E.player.from_json(p.pJson),d(p.playerId,"player_update",p))}),f.on("finish-turn",p=>{try{if(T.from_json(p),o!=f.id)return;const S=Array.from(i.values()).filter(P=>P.player.balance>0).map(P=>P.player.id);var E=S.indexOf(f.id);E=(E+1)%S.length,o=S[E],u("turn-finished",{from:f.id,turnId:o,pJson:T.to_json()})}catch(S){y.logFunction(S)}}),f.on("message",p=>{var E;try{y.logFunction(`{${c()}} [${f.id}] Player "${(E=i.get(f.id))==null?void 0:E.player.username}" has messaged "${p}".`),u("message",{from:T.username,message:p})}catch(S){y.logFunction(S)}}),f.on("pay",p=>{var E,S;try{const P=(E=i.get(p.to))==null?void 0:E.player,I=(S=i.get(p.from))==null?void 0:S.player;if(P===void 0||(P.balance+=p.balance,I===void 0))return;I.balance-=p.balance,u("member_updating",{playerId:p.to,animation:"recieveMoney",additional_props:[p.from],pJson:[P.to_json(),I.to_json()]})}catch(P){y.logFunction(P)}}),f.on("mouse",p=>{const E=i.get(f.id);E!==void 0&&(E.positions=p,i.set(f.id,E),d(f.id,"mouse",{id:f.id,x:p.x,y:p.y}))})}catch(T){y.logFunction(T)}}),f.on("ready",_=>{try{const T=i.get(f.id);if(T===void 0)return;_.ready!==void 0&&(T.ready=_.ready),_.mode!==void 0&&(a=_.mode),i.set(f.id,T);const v=Array.from(i.values()).map(p=>p.ready);u("ready",{id:f.id,state:T.ready,selectedMode:a}),v.includes(!1)||(y.logFunction("Game has Started, No more Players can join the Server"),l=!0,y.whenCloseF(),u("start-game",{}))}catch(T){y.logFunction(T)}})):f.disconnect(),f.on("disconnect",()=>{var T,v;try{if(i.has(f.id)&&(y.logFunction(`{${c()}} [${f.id}] Player "${(T=i.get(f.id))==null?void 0:T.player.username}" has disconnected.`),s.push(`{${c()}} [${f.id}] Player "${(v=i.get(f.id))==null?void 0:v.player.username}" has disconnected.`)),i.delete(f.id),o===f.id){const p=Array.from(i.values()).filter(E=>E.player.balance>0).map(E=>E.player.id);var _=p.indexOf(f.id);_=(_+1)%p.length,o=p[_]}u("disconnected-player",{id:f.id,turn:o}),Array.from(i.keys()).length===0&&(l&&y.logFunction("Game has Ended. Server is currently Open to new Players"),l=!1)}catch(p){y.logFunction(p)}})})}function _h(){var t;try{t=JSON.parse(document.cookie)}catch{t={login:{remember:!1,id:""}},document.cookie=JSON.stringify(t)}const e=C.useRef(null),[n,r]=C.useState(),[i,s]=C.useState(""),[o,l]=C.useState(""),[a,c]=C.useState(),[u,d]=C.useState(t.login.remember),[f,y]=C.useState(),[g,_]=C.useState(!1),[T,v]=C.useState(!1),[p,E]=C.useState(0),[S,P]=C.useState(void 0),[I,A]=C.useState(6);C.useEffect(()=>{document.title="Monopoly";const R=uS(On.firebase);c(R);var w;try{if(w=JSON.parse(document.cookie),w.login.remember&&w.login.id.length>0){const W=ap(R);iC(op(W,`Users/${w.login.id}`)).then(se=>{const ce=se.data();y(ce),s(ce.name)})}}catch{}},[]);const m=async()=>{var se,ce;async function R(){return(await(await fetch(`${On.JSONBin.url}/latest`,{method:"GET",headers:{"X-Master-Key":On.JSONBin.masterKey,"X-Access-Key":On.JSONBin.accessKey}})).json()).record}if(i.replace(" ","").length===0){(se=e.current)==null||se.message("please add your name before joining","info",2);return}try{const G=JSON.parse(document.cookie);if(f===void 0)throw Error("undefined");console.log(JSON.stringify(f)),G.login={id:f.id,remember:u},document.cookie=JSON.stringify(G)}catch{const G={login:{id:"",remember:!1}};document.cookie=JSON.stringify(G)}_(!0);const w=await R();if(!Object.keys(w).includes(o)){(ce=e.current)==null||ce.message("code isnt available on systems","info",2);return}const H=w[o];console.log(H);var W;W=await Gk(H),W.on("state",G=>{var Ce,Ie,x;switch(G){case 0:r(W),v(!0),_(!1);break;case 1:(Ce=e.current)==null||Ce.message("the game has already begun","error",2,()=>{_(!1)}),W.disconnect();break;case 2:(Ie=e.current)==null||Ie.message("too many players on the server","error",2,()=>{_(!1)}),W.disconnect();break;default:(x=e.current)==null||x.message("unkown error","error",2),W.disconnect(),_(!1);break}}),W.on("connect_error",()=>{var G;(G=e.current)==null||G.message("the server does not exist or is unreachable","error",2,()=>{_(!1)}),W.disconnect()}),W.on("connect_timeout",()=>{var G;(G=e.current)==null||G.message("the server took too long to respond","error",2,()=>{_(!1)}),W.disconnect()})};return C.useEffect(()=>{const R=new URLSearchParams(document.location.search);R.has("ip")&&l(R.get("ip")??"")},[]),n!==void 0&&T===!0?h.jsx(hk,{socket:n,name:i,server:S}):h.jsxs(h.Fragment,{children:[h.jsx(pE,{ref:e}),h.jsxs("div",{className:"entry",children:[h.jsxs("nav",{children:[h.jsx("button",{"data-select":p===0,onClick:()=>{E(0)},"data-tooltip-hover":"play",children:h.jsx("img",{src:"./icon.png",alt:""})}),h.jsx("button",{"data-select":p===1,onClick:()=>{E(1)},"data-tooltip-hover":"server",children:h.jsx("img",{src:"./server.png",alt:""})}),h.jsx("button",{"data-select":p===2,onClick:()=>{E(2)},"data-tooltip-hover":"account",children:h.jsx("img",{src:"./human.png",alt:""})}),h.jsx("br",{}),h.jsx("button",{"data-select":p===3,onClick:()=>{E(3)},"data-tooltip-hover":"credits",children:h.jsx("img",{src:"./credits.png",alt:""})}),h.jsx("button",{"data-select":p===4,onClick:()=>{E(4)},"data-tooltip-hover":"settings",children:h.jsx("img",{src:"./settings.png",alt:""})})]}),h.jsx("main",{children:p===4?h.jsx(fE,{}):p===3?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"This Project was made by Itay Layzerovich"}),h.jsxs("div",{style:{color:"white"},children:[h.jsx("p",{children:" As the developer of this Monopoly game project, it is essential to clarify the following legal aspects: "}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("i",{children:"Game Mechanics and Rules:"})," The game mechanics and rules of Monopoly have been widely known and played for many years. This project aims to offer a digital rendition of the classic Monopoly experience, utilizing original concepts that have become common knowledge."]}),h.jsxs("li",{children:[" ",h.jsx("i",{children:"Original Monopoly Intellectual Property:"}),"The Monopoly board game is a registered trademark and copyrighted property of Hasbro Inc. and its respective licensors. This project is not an official representation or product of Hasbro Inc., and no direct affiliation or endorsement is implied."]}),h.jsxs("li",{children:[h.jsx("i",{children:"License and Usage:"})," This Monopoly game project is developed with the intent of being an educational and personal project. It is offered as a free-to-use, open-source initiative for learning purposes, and no commercial use or distribution is intended."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Fair Use and Transformative Work:"}),'This project may fall under the category of "fair use" as it is a transformative work that provides a unique digital experience based on the original Monopoly game. It is not intended to compete with or harm the commercial interests of the original trademark owner.']}),h.jsxs("li",{children:[h.jsx("i",{children:"No Warranty or Liability:"})," While efforts have been made to create an enjoyable and bug-free experience, this project is provided as-is without any warranty. The developer shall not be liable for any issues or damages arising from the use of this software."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Attribution:"})," This project may include third-party libraries or assets that are appropriately credited and licensed under their respective terms. Any attributions and licenses should be preserved as required by the respective authors."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Personal Responsibility:"})," As the developer, you are responsible for complying with all applicable laws, including intellectual property laws, and ensuring that your usage of this project is within legal boundaries."]})]})]})]}):p===2?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"Account"}),h.jsx("h3",{children:"Login"})]}),h.jsx(JM,{admin:a,currentUser:f,onLogout:()=>{d(!1),y(void 0),s("")},onLogin:(R,w)=>{if(E(0),d(w),y(R),s(R.name),!!w)try{var H=JSON.parse(document.cookie);H.login={remember:!0,id:R.id},document.cookie=JSON.stringify(H)}catch{var H={login:{remember:!0,id:R.id}};document.cookie=JSON.stringify(H)}}})]}):p===1?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"peerjs hosting"}),h.jsx("h3",{children:"Run A Server"})]}),S!==void 0?h.jsx(h.Fragment,{children:h.jsxs("p",{children:["server is already running, check the console.",h.jsxs("center",{children:[" ",h.jsx("button",{style:{backgroundColor:"red"},onClick:()=>{S.stop(),P(void 0)},children:"Kill Server"})]})]})}):h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"all the servers logs will can be seen in the console"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"PlayersCount"}),h.jsx("td",{children:h.jsx(Yi,{onChange:R=>{A(parseInt(R.currentTarget.value))},max:6,min:1,defaultValue:I,step:1})})]})}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:R=>{R.currentTarget.disabled=!0,R.currentTarget.innerHTML="Starting Server",E5(I,(w,H)=>{E(0),l(w),P(H)})},children:"Run Server"})]})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:9},children:"25.8.23 - Gallery"}),"Welcome to the ",h.jsx("h3",{children:"MONOPOLY"})," Game"]}),h.jsx(XM,{disabled:g,fbUser:f,joinBots:()=>{},joinViaCode:()=>{m()},SetAddress:l,SetName:s,addr:o,name:i})]})})]})]})}function S5(){return C.useEffect(()=>{setTimeout(()=>{document.location.href="/"},3e3)},[]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:"Error - This Site Doesnt Exists!"}),h.jsx("p",{children:"redirecting you to the home page"})]})}function T5(){return h.jsx(BI,{children:h.jsxs(UI,{children:[h.jsx(Qi,{path:"/",element:h.jsx(_h,{})}),h.jsx(Qi,{path:"/gallery",element:h.jsx(zI,{})}),h.jsx(Qi,{path:"/home",element:h.jsx(_h,{})}),h.jsx(Qi,{path:"/play",element:h.jsx(_h,{})}),h.jsx(Qi,{path:"*",element:h.jsx(S5,{})})," "]})})}document.title="Monopoly";Eh.createRoot(document.getElementById("root")).render(h.jsx(T5,{}));
