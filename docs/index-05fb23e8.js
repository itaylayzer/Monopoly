var AP=Object.defineProperty;var kP=(t,e,n)=>e in t?AP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(kP(t,typeof e!="symbol"?e+"":e,n),n);function xP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Yu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U_={exports:{}},Xu={},$_={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),NP=Symbol.for("react.portal"),OP=Symbol.for("react.fragment"),DP=Symbol.for("react.strict_mode"),jP=Symbol.for("react.profiler"),MP=Symbol.for("react.provider"),LP=Symbol.for("react.context"),FP=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),UP=Symbol.for("react.memo"),$P=Symbol.for("react.lazy"),dy=Symbol.iterator;function BP(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var B_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z_=Object.assign,q_={};function Po(t,e,n){this.props=t,this.context=e,this.refs=q_,this.updater=n||B_}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function H_(){}H_.prototype=Po.prototype;function Wp(t,e,n){this.props=t,this.context=e,this.refs=q_,this.updater=n||B_}var Gp=Wp.prototype=new H_;Gp.constructor=Wp;z_(Gp,Po.prototype);Gp.isPureReactComponent=!0;var hy=Array.isArray,W_=Object.prototype.hasOwnProperty,Kp={current:null},G_={key:!0,ref:!0,__self:!0,__source:!0};function K_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)W_.call(e,r)&&!G_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:yl,type:t,key:s,ref:o,props:i,_owner:Kp.current}}function zP(t,e){return{$$typeof:yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===yl}function qP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fy=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qP(""+t.key):e.toString(36)}function Ic(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yl:case NP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Zd(o,0):r,hy(i)?(n="",t!=null&&(n=t.replace(fy,"$&/")+"/"),Ic(i,e,n,"",function(c){return c})):i!=null&&(Jp(i)&&(i=zP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hy(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Zd(s,l);o+=Ic(s,e,n,a,i)}else if(a=BP(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Zd(s,l++),o+=Ic(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ql(t,e,n){if(t==null)return t;var r=[],i=0;return Ic(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},bc={transition:null},WP={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:bc,ReactCurrentOwner:Kp};Pe.Children={map:Ql,forEach:function(t,e,n){Ql(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ql(t,function(){e++}),e},toArray:function(t){return Ql(t,function(e){return e})||[]},only:function(t){if(!Jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Po;Pe.Fragment=OP;Pe.Profiler=jP;Pe.PureComponent=Wp;Pe.StrictMode=DP;Pe.Suspense=VP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=z_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Kp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)W_.call(e,a)&&!G_.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:yl,type:t.type,key:i,ref:s,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:LP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MP,_context:t},t.Consumer=t};Pe.createElement=K_;Pe.createFactory=function(t){var e=K_.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:FP,render:t}};Pe.isValidElement=Jp;Pe.lazy=function(t){return{$$typeof:$P,_payload:{_status:-1,_result:t},_init:HP}};Pe.memo=function(t,e){return{$$typeof:UP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=bc.transition;bc.transition={};try{t()}finally{bc.transition=e}};Pe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pe.useCallback=function(t,e){return vn.current.useCallback(t,e)};Pe.useContext=function(t){return vn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return vn.current.useEffect(t,e)};Pe.useId=function(){return vn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return vn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return vn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return vn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return vn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return vn.current.useReducer(t,e,n)};Pe.useRef=function(t){return vn.current.useRef(t)};Pe.useState=function(t){return vn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return vn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return vn.current.useTransition()};Pe.version="18.2.0";$_.exports=Pe;var I=$_.exports;const GP=Yu(I),KP=xP({__proto__:null,default:GP},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP=I,QP=Symbol.for("react.element"),YP=Symbol.for("react.fragment"),XP=Object.prototype.hasOwnProperty,ZP=JP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eR={key:!0,ref:!0,__self:!0,__source:!0};function J_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XP.call(e,r)&&!eR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QP,type:t,key:s,ref:o,props:i,_owner:ZP.current}}Xu.Fragment=YP;Xu.jsx=J_;Xu.jsxs=J_;U_.exports=Xu;var d=U_.exports,ef={},Q_={exports:{}},Dn={},Y_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,z){var Z=N.length;N.push(z);e:for(;0<Z;){var G=Z-1>>>1,le=N[G];if(0<i(le,z))N[G]=z,N[Z]=le,Z=G;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var z=N[0],Z=N.pop();if(Z!==z){N[0]=Z;e:for(var G=0,le=N.length,Ge=le>>>1;G<Ge;){var ue=2*(G+1)-1,Ee=N[ue],Oe=ue+1,lt=N[Oe];if(0>i(Ee,Z))Oe<le&&0>i(lt,Ee)?(N[G]=lt,N[Oe]=Z,G=Oe):(N[G]=Ee,N[ue]=Z,G=ue);else if(Oe<le&&0>i(lt,Z))N[G]=lt,N[Oe]=Z,G=Oe;else break e}}return z}function i(N,z){var Z=N.sortIndex-z.sortIndex;return Z!==0?Z:N.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,h=null,f=3,g=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(N){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=N)r(c),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(c)}}function _(N){if(y=!1,E(N),!m)if(n(a)!==null)m=!0,X(C);else{var z=n(c);z!==null&&te(_,z.startTime-N)}}function C(N,z){m=!1,y&&(y=!1,v(D),D=-1),g=!0;var Z=f;try{for(E(z),h=n(a);h!==null&&(!(h.expirationTime>z)||N&&!M());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var le=G(h.expirationTime<=z);z=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(a)&&r(a),E(z)}else r(a);h=n(a)}if(h!==null)var Ge=!0;else{var ue=n(c);ue!==null&&te(_,ue.startTime-z),Ge=!1}return Ge}finally{h=null,f=Z,g=!1}}var k=!1,A=null,D=-1,$=5,S=-1;function M(){return!(t.unstable_now()-S<$)}function P(){if(A!==null){var N=t.unstable_now();S=N;var z=!0;try{z=A(!0,N)}finally{z?oe():(k=!1,A=null)}}else k=!1}var oe;if(typeof p=="function")oe=function(){p(P)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,ce=T.port2;T.port1.onmessage=P,oe=function(){ce.postMessage(null)}}else oe=function(){w(P,0)};function X(N){A=N,k||(k=!0,oe())}function te(N,z){D=w(function(){N(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,X(C))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Z=f;f=z;try{return N()}finally{f=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,z){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Z=f;f=N;try{return z()}finally{f=Z}},t.unstable_scheduleCallback=function(N,z,Z){var G=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?G+Z:G):Z=G,N){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Z+le,N={id:u++,callback:z,priorityLevel:N,startTime:Z,expirationTime:le,sortIndex:-1},Z>G?(N.sortIndex=Z,e(c,N),n(a)===null&&N===n(c)&&(y?(v(D),D=-1):y=!0,te(_,Z-G))):(N.sortIndex=le,e(a,N),m||g||(m=!0,X(C))),N},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(N){var z=f;return function(){var Z=f;f=z;try{return N.apply(this,arguments)}finally{f=Z}}}})(X_);Y_.exports=X_;var tR=Y_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_=I,Nn=tR;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e1=new Set,Na={};function vs(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(Na[t]=e,t=0;t<e.length;t++)e1.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tf=Object.prototype.hasOwnProperty,nR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,py={},my={};function rR(t){return tf.call(my,t)?!0:tf.call(py,t)?!1:nR.test(t)?my[t]=!0:(py[t]=!0,!1)}function iR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sR(t,e,n,r){if(e===null||typeof e>"u"||iR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qp=/[\-:]([a-z])/g;function Yp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qp,Yp);Wt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qp,Yp);Wt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qp,Yp);Wt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xp(t,e,n,r){var i=Wt.hasOwnProperty(e)?Wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sR(e,n,i,r)&&(n=null),r||i===null?rR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=Z_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),ks=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),nf=Symbol.for("react.profiler"),t1=Symbol.for("react.provider"),n1=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),rf=Symbol.for("react.suspense"),sf=Symbol.for("react.suspense_list"),tm=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),r1=Symbol.for("react.offscreen"),gy=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,eh;function ta(t){if(eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function nh(t,e){if(!t||th)return"";th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ta(t):""}function oR(t){switch(t.tag){case 5:return ta(t.type);case 16:return ta("Lazy");case 13:return ta("Suspense");case 19:return ta("SuspenseList");case 0:case 2:case 15:return t=nh(t.type,!1),t;case 11:return t=nh(t.type.render,!1),t;case 1:return t=nh(t.type,!0),t;default:return""}}function of(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ks:return"Portal";case nf:return"Profiler";case Zp:return"StrictMode";case rf:return"Suspense";case sf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n1:return(t.displayName||"Context")+".Consumer";case t1:return(t._context.displayName||"Context")+".Provider";case em:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tm:return e=t.displayName||null,e!==null?e:of(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return of(t(e))}catch{}}return null}function aR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return of(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lR(t){var e=i1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xl(t){t._valueTracker||(t._valueTracker=lR(t))}function s1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function af(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o1(t,e){e=e.checked,e!=null&&Xp(t,"checked",e,!1)}function lf(t,e){o1(t,e);var n=Ai(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cf(t,e.type,n):e.hasOwnProperty("defaultValue")&&cf(t,e.type,Ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cf(t,e,n){(e!=="number"||eu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var na=Array.isArray;function Ws(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ai(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(na(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ai(n)}}function a1(t,e){var n=Ai(e.value),r=Ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ey(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function l1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?l1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zl,c1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cR=["Webkit","ms","Moz","O"];Object.keys(pa).forEach(function(t){cR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pa[e]=pa[t]})});function u1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pa.hasOwnProperty(t)&&pa[t]?(""+e).trim():e+"px"}function d1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=u1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uR=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hf(t,e){if(e){if(uR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function ff(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pf=null;function nm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mf=null,Gs=null,Ks=null;function Sy(t){if(t=El(t)){if(typeof mf!="function")throw Error(F(280));var e=t.stateNode;e&&(e=rd(e),mf(t.stateNode,t.type,e))}}function h1(t){Gs?Ks?Ks.push(t):Ks=[t]:Gs=t}function f1(){if(Gs){var t=Gs,e=Ks;if(Ks=Gs=null,Sy(t),e)for(t=0;t<e.length;t++)Sy(e[t])}}function p1(t,e){return t(e)}function m1(){}var rh=!1;function g1(t,e,n){if(rh)return t(e,n);rh=!0;try{return p1(t,e,n)}finally{rh=!1,(Gs!==null||Ks!==null)&&(m1(),f1())}}function Da(t,e){var n=t.stateNode;if(n===null)return null;var r=rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var gf=!1;if(Br)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){gf=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{gf=!1}function dR(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ma=!1,tu=null,nu=!1,yf=null,hR={onError:function(t){ma=!0,tu=t}};function fR(t,e,n,r,i,s,o,l,a){ma=!1,tu=null,dR.apply(hR,arguments)}function pR(t,e,n,r,i,s,o,l,a){if(fR.apply(this,arguments),ma){if(ma){var c=tu;ma=!1,tu=null}else throw Error(F(198));nu||(nu=!0,yf=c)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function y1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if(_s(t)!==t)throw Error(F(188))}function mR(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ty(i),t;if(s===r)return Ty(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function v1(t){return t=mR(t),t!==null?_1(t):null}function _1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_1(t);if(e!==null)return e;t=t.sibling}return null}var E1=Nn.unstable_scheduleCallback,wy=Nn.unstable_cancelCallback,gR=Nn.unstable_shouldYield,yR=Nn.unstable_requestPaint,yt=Nn.unstable_now,vR=Nn.unstable_getCurrentPriorityLevel,rm=Nn.unstable_ImmediatePriority,S1=Nn.unstable_UserBlockingPriority,ru=Nn.unstable_NormalPriority,_R=Nn.unstable_LowPriority,T1=Nn.unstable_IdlePriority,Zu=null,Er=null;function ER(t){if(Er&&typeof Er.onCommitFiberRoot=="function")try{Er.onCommitFiberRoot(Zu,t,void 0,(t.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:wR,SR=Math.log,TR=Math.LN2;function wR(t){return t>>>=0,t===0?32:31-(SR(t)/TR|0)|0}var ec=64,tc=4194304;function ra(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ra(l):(s&=o,s!==0&&(r=ra(s)))}else o=n&~i,o!==0?r=ra(o):s!==0&&(r=ra(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sr(e),i=1<<n,r|=t[n],e&=~i;return r}function CR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sr(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=CR(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function vf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w1(){var t=ec;return ec<<=1,!(ec&4194240)&&(ec=64),t}function ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sr(e),t[e]=n}function RR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-sr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var $e=0;function C1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P1,sm,R1,I1,b1,_f=!1,nc=[],yi=null,vi=null,_i=null,ja=new Map,Ma=new Map,ai=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cy(t,e){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(e.pointerId)}}function Uo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=El(e),e!==null&&sm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bR(t,e,n,r,i){switch(e){case"focusin":return yi=Uo(yi,t,e,n,r,i),!0;case"dragenter":return vi=Uo(vi,t,e,n,r,i),!0;case"mouseover":return _i=Uo(_i,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ja.set(s,Uo(ja.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ma.set(s,Uo(Ma.get(s)||null,t,e,n,r,i)),!0}return!1}function A1(t){var e=Ki(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=y1(n),e!==null){t.blockedOn=e,b1(t.priority,function(){R1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pf=r,n.target.dispatchEvent(r),pf=null}else return e=El(n),e!==null&&sm(e),t.blockedOn=n,!1;e.shift()}return!0}function Py(t,e,n){Ac(t)&&n.delete(e)}function AR(){_f=!1,yi!==null&&Ac(yi)&&(yi=null),vi!==null&&Ac(vi)&&(vi=null),_i!==null&&Ac(_i)&&(_i=null),ja.forEach(Py),Ma.forEach(Py)}function $o(t,e){t.blockedOn===e&&(t.blockedOn=null,_f||(_f=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,AR)))}function La(t){function e(i){return $o(i,t)}if(0<nc.length){$o(nc[0],t);for(var n=1;n<nc.length;n++){var r=nc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yi!==null&&$o(yi,t),vi!==null&&$o(vi,t),_i!==null&&$o(_i,t),ja.forEach(e),Ma.forEach(e),n=0;n<ai.length;n++)r=ai[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ai.length&&(n=ai[0],n.blockedOn===null);)A1(n),n.blockedOn===null&&ai.shift()}var Js=Yr.ReactCurrentBatchConfig,su=!0;function kR(t,e,n,r){var i=$e,s=Js.transition;Js.transition=null;try{$e=1,om(t,e,n,r)}finally{$e=i,Js.transition=s}}function xR(t,e,n,r){var i=$e,s=Js.transition;Js.transition=null;try{$e=4,om(t,e,n,r)}finally{$e=i,Js.transition=s}}function om(t,e,n,r){if(su){var i=Ef(t,e,n,r);if(i===null)ph(t,e,r,ou,n),Cy(t,r);else if(bR(i,t,e,n,r))r.stopPropagation();else if(Cy(t,r),e&4&&-1<IR.indexOf(t)){for(;i!==null;){var s=El(i);if(s!==null&&P1(s),s=Ef(t,e,n,r),s===null&&ph(t,e,r,ou,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ph(t,e,r,null,n)}}var ou=null;function Ef(t,e,n,r){if(ou=null,t=nm(r),t=Ki(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=y1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ou=t,null}function k1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vR()){case rm:return 1;case S1:return 4;case ru:case _R:return 16;case T1:return 536870912;default:return 16}default:return 16}}var fi=null,am=null,kc=null;function x1(){if(kc)return kc;var t,e=am,n=e.length,r,i="value"in fi?fi.value:fi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return kc=i.slice(t,1<r?1-r:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rc(){return!0}function Ry(){return!1}function jn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rc:Ry,this.isPropagationStopped=Ry,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rc)},persist:function(){},isPersistent:rc}),e}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=jn(Ro),_l=ot({},Ro,{view:0,detail:0}),NR=jn(_l),sh,oh,Bo,ed=ot({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(sh=t.screenX-Bo.screenX,oh=t.screenY-Bo.screenY):oh=sh=0,Bo=t),sh)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),Iy=jn(ed),OR=ot({},ed,{dataTransfer:0}),DR=jn(OR),jR=ot({},_l,{relatedTarget:0}),ah=jn(jR),MR=ot({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),LR=jn(MR),FR=ot({},Ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VR=jn(FR),UR=ot({},Ro,{data:0}),by=jn(UR),$R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zR[t])?!!e[t]:!1}function cm(){return qR}var HR=ot({},_l,{key:function(t){if(t.key){var e=$R[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WR=jn(HR),GR=ot({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ay=jn(GR),KR=ot({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),JR=jn(KR),QR=ot({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),YR=jn(QR),XR=ot({},ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZR=jn(XR),eI=[9,13,27,32],um=Br&&"CompositionEvent"in window,ga=null;Br&&"documentMode"in document&&(ga=document.documentMode);var tI=Br&&"TextEvent"in window&&!ga,N1=Br&&(!um||ga&&8<ga&&11>=ga),ky=String.fromCharCode(32),xy=!1;function O1(t,e){switch(t){case"keyup":return eI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function D1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ns=!1;function nI(t,e){switch(t){case"compositionend":return D1(e);case"keypress":return e.which!==32?null:(xy=!0,ky);case"textInput":return t=e.data,t===ky&&xy?null:t;default:return null}}function rI(t,e){if(Ns)return t==="compositionend"||!um&&O1(t,e)?(t=x1(),kc=am=fi=null,Ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return N1&&e.locale!=="ko"?null:e.data;default:return null}}var iI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iI[t.type]:e==="textarea"}function j1(t,e,n,r){h1(r),e=au(e,"onChange"),0<e.length&&(n=new lm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ya=null,Fa=null;function sI(t){W1(t,0)}function td(t){var e=js(t);if(s1(e))return t}function oI(t,e){if(t==="change")return e}var M1=!1;if(Br){var lh;if(Br){var ch="oninput"in document;if(!ch){var Oy=document.createElement("div");Oy.setAttribute("oninput","return;"),ch=typeof Oy.oninput=="function"}lh=ch}else lh=!1;M1=lh&&(!document.documentMode||9<document.documentMode)}function Dy(){ya&&(ya.detachEvent("onpropertychange",L1),Fa=ya=null)}function L1(t){if(t.propertyName==="value"&&td(Fa)){var e=[];j1(e,Fa,t,nm(t)),g1(sI,e)}}function aI(t,e,n){t==="focusin"?(Dy(),ya=e,Fa=n,ya.attachEvent("onpropertychange",L1)):t==="focusout"&&Dy()}function lI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return td(Fa)}function cI(t,e){if(t==="click")return td(e)}function uI(t,e){if(t==="input"||t==="change")return td(e)}function dI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:dI;function Va(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tf.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function My(t,e){var n=jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jy(n)}}function F1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function V1(){for(var t=window,e=eu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eu(t.document)}return e}function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hI(t){var e=V1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F1(n.ownerDocument.documentElement,n)){if(r!==null&&dm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=My(n,s);var o=My(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fI=Br&&"documentMode"in document&&11>=document.documentMode,Os=null,Sf=null,va=null,Tf=!1;function Ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tf||Os==null||Os!==eu(r)||(r=Os,"selectionStart"in r&&dm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),va&&Va(va,r)||(va=r,r=au(Sf,"onSelect"),0<r.length&&(e=new lm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Os)))}function ic(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:ic("Animation","AnimationEnd"),animationiteration:ic("Animation","AnimationIteration"),animationstart:ic("Animation","AnimationStart"),transitionend:ic("Transition","TransitionEnd")},uh={},U1={};Br&&(U1=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function nd(t){if(uh[t])return uh[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in U1)return uh[t]=e[n];return t}var $1=nd("animationend"),B1=nd("animationiteration"),z1=nd("animationstart"),q1=nd("transitionend"),H1=new Map,Fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(t,e){H1.set(t,e),vs(e,[t])}for(var dh=0;dh<Fy.length;dh++){var hh=Fy[dh],pI=hh.toLowerCase(),mI=hh[0].toUpperCase()+hh.slice(1);Di(pI,"on"+mI)}Di($1,"onAnimationEnd");Di(B1,"onAnimationIteration");Di(z1,"onAnimationStart");Di("dblclick","onDoubleClick");Di("focusin","onFocus");Di("focusout","onBlur");Di(q1,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function Vy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pR(r,e,void 0,t),t.currentTarget=null}function W1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Vy(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Vy(i,l,c),s=a}}}if(nu)throw t=yf,nu=!1,yf=null,t}function Qe(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var r=t+"__bubble";n.has(r)||(G1(e,t,2,!1),n.add(r))}function fh(t,e,n){var r=0;e&&(r|=4),G1(n,t,r,e)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Ua(t){if(!t[sc]){t[sc]=!0,e1.forEach(function(n){n!=="selectionchange"&&(gI.has(n)||fh(n,!1,t),fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sc]||(e[sc]=!0,fh("selectionchange",!1,e))}}function G1(t,e,n,r){switch(k1(e)){case 1:var i=kR;break;case 4:i=xR;break;default:i=om}n=i.bind(null,e,n,t),i=void 0,!gf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ph(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ki(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}g1(function(){var c=s,u=nm(n),h=[];e:{var f=H1.get(t);if(f!==void 0){var g=lm,m=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":g=WR;break;case"focusin":m="focus",g=ah;break;case"focusout":m="blur",g=ah;break;case"beforeblur":case"afterblur":g=ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=DR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JR;break;case $1:case B1:case z1:g=LR;break;case q1:g=YR;break;case"scroll":g=NR;break;case"wheel":g=ZR;break;case"copy":case"cut":case"paste":g=VR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ay}var y=(e&4)!==0,w=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var p=c,E;p!==null;){E=p;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,v!==null&&(_=Da(p,v),_!=null&&y.push($a(p,_,E)))),w)break;p=p.return}0<y.length&&(f=new g(f,m,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==pf&&(m=n.relatedTarget||n.fromElement)&&(Ki(m)||m[zr]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=c,m=m?Ki(m):null,m!==null&&(w=_s(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(y=Iy,_="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Ay,_="onPointerLeave",v="onPointerEnter",p="pointer"),w=g==null?f:js(g),E=m==null?f:js(m),f=new y(_,p+"leave",g,n,u),f.target=w,f.relatedTarget=E,_=null,Ki(u)===c&&(y=new y(v,p+"enter",m,n,u),y.target=E,y.relatedTarget=w,_=y),w=_,g&&m)t:{for(y=g,v=m,p=0,E=y;E;E=Ps(E))p++;for(E=0,_=v;_;_=Ps(_))E++;for(;0<p-E;)y=Ps(y),p--;for(;0<E-p;)v=Ps(v),E--;for(;p--;){if(y===v||v!==null&&y===v.alternate)break t;y=Ps(y),v=Ps(v)}y=null}else y=null;g!==null&&Uy(h,f,g,y,!1),m!==null&&w!==null&&Uy(h,w,m,y,!0)}}e:{if(f=c?js(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var C=oI;else if(Ny(f))if(M1)C=uI;else{C=lI;var k=aI}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=cI);if(C&&(C=C(t,c))){j1(h,C,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&cf(f,"number",f.value)}switch(k=c?js(c):window,t){case"focusin":(Ny(k)||k.contentEditable==="true")&&(Os=k,Sf=c,va=null);break;case"focusout":va=Sf=Os=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,Ly(h,n,u);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Ly(h,n,u)}var A;if(um)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ns?O1(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(N1&&n.locale!=="ko"&&(Ns||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ns&&(A=x1()):(fi=u,am="value"in fi?fi.value:fi.textContent,Ns=!0)),k=au(c,D),0<k.length&&(D=new by(D,t,null,n,u),h.push({event:D,listeners:k}),A?D.data=A:(A=D1(n),A!==null&&(D.data=A)))),(A=tI?nI(t,n):rI(t,n))&&(c=au(c,"onBeforeInput"),0<c.length&&(u=new by("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=A))}W1(h,e)})}function $a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function au(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Da(t,n),s!=null&&r.unshift($a(t,s,i)),s=Da(t,e),s!=null&&r.push($a(t,s,i))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Da(n,s),a!=null&&o.unshift($a(n,a,l))):i||(a=Da(n,s),a!=null&&o.push($a(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yI=/\r\n?/g,vI=/\u0000|\uFFFD/g;function $y(t){return(typeof t=="string"?t:""+t).replace(yI,`
`).replace(vI,"")}function oc(t,e,n){if(e=$y(e),$y(t)!==e&&n)throw Error(F(425))}function lu(){}var wf=null,Cf=null;function Pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rf=typeof setTimeout=="function"?setTimeout:void 0,_I=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,EI=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(SI)}:Rf;function SI(t){setTimeout(function(){throw t})}function mh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);La(e)}function Ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Io=Math.random().toString(36).slice(2),pr="__reactFiber$"+Io,Ba="__reactProps$"+Io,zr="__reactContainer$"+Io,If="__reactEvents$"+Io,TI="__reactListeners$"+Io,wI="__reactHandles$"+Io;function Ki(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zy(t);t!==null;){if(n=t[pr])return n;t=zy(t)}return e}t=n,n=t.parentNode}return null}function El(t){return t=t[pr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function rd(t){return t[Ba]||null}var bf=[],Ms=-1;function ji(t){return{current:t}}function Xe(t){0>Ms||(t.current=bf[Ms],bf[Ms]=null,Ms--)}function Je(t,e){Ms++,bf[Ms]=t.current,t.current=e}var ki={},an=ji(ki),wn=ji(!1),os=ki;function oo(t,e){var n=t.type.contextTypes;if(!n)return ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cn(t){return t=t.childContextTypes,t!=null}function cu(){Xe(wn),Xe(an)}function qy(t,e,n){if(an.current!==ki)throw Error(F(168));Je(an,e),Je(wn,n)}function K1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,aR(t)||"Unknown",i));return ot({},n,r)}function uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,os=an.current,Je(an,t),Je(wn,wn.current),!0}function Hy(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=K1(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,Xe(wn),Xe(an),Je(an,t)):Xe(wn),Je(wn,n)}var Nr=null,id=!1,gh=!1;function J1(t){Nr===null?Nr=[t]:Nr.push(t)}function CI(t){id=!0,J1(t)}function Mi(){if(!gh&&Nr!==null){gh=!0;var t=0,e=$e;try{var n=Nr;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,id=!1}catch(i){throw Nr!==null&&(Nr=Nr.slice(t+1)),E1(rm,Mi),i}finally{$e=e,gh=!1}}return null}var Ls=[],Fs=0,du=null,hu=0,Fn=[],Vn=0,as=null,Or=1,Dr="";function Bi(t,e){Ls[Fs++]=hu,Ls[Fs++]=du,du=t,hu=e}function Q1(t,e,n){Fn[Vn++]=Or,Fn[Vn++]=Dr,Fn[Vn++]=as,as=t;var r=Or;t=Dr;var i=32-sr(r)-1;r&=~(1<<i),n+=1;var s=32-sr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Or=1<<32-sr(e)+i|n<<i|r,Dr=s+t}else Or=1<<s|n<<i|r,Dr=t}function hm(t){t.return!==null&&(Bi(t,1),Q1(t,1,0))}function fm(t){for(;t===du;)du=Ls[--Fs],Ls[Fs]=null,hu=Ls[--Fs],Ls[Fs]=null;for(;t===as;)as=Fn[--Vn],Fn[Vn]=null,Dr=Fn[--Vn],Fn[Vn]=null,Or=Fn[--Vn],Fn[Vn]=null}var xn=null,kn=null,rt=!1,nr=null;function Y1(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,kn=Ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:Or,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,kn=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kf(t){if(rt){var e=kn;if(e){var n=e;if(!Wy(t,e)){if(Af(t))throw Error(F(418));e=Ei(n.nextSibling);var r=xn;e&&Wy(t,e)?Y1(r,n):(t.flags=t.flags&-4097|2,rt=!1,xn=t)}}else{if(Af(t))throw Error(F(418));t.flags=t.flags&-4097|2,rt=!1,xn=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function ac(t){if(t!==xn)return!1;if(!rt)return Gy(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pf(t.type,t.memoizedProps)),e&&(e=kn)){if(Af(t))throw X1(),Error(F(418));for(;e;)Y1(t,e),e=Ei(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=Ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=xn?Ei(t.stateNode.nextSibling):null;return!0}function X1(){for(var t=kn;t;)t=Ei(t.nextSibling)}function ao(){kn=xn=null,rt=!1}function pm(t){nr===null?nr=[t]:nr.push(t)}var PI=Yr.ReactCurrentBatchConfig;function Zn(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var fu=ji(null),pu=null,Vs=null,mm=null;function gm(){mm=Vs=pu=null}function ym(t){var e=fu.current;Xe(fu),t._currentValue=e}function xf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){pu=t,mm=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(mm!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(pu===null)throw Error(F(308));Vs=t,pu.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Ji=null;function vm(t){Ji===null?Ji=[t]:Ji.push(t)}function Z1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vm(e)):(n.next=i.next,i.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oi=!1;function _m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qr(t,n)}return i=r.interleaved,i===null?(e.next=e,vm(r)):(e.next=i.next,i.next=e),r.interleaved=e,qr(t,n)}function Nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}function Ky(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mu(t,e,n,r){var i=t.updateQueue;oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,g=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,y=l;switch(f=e,g=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(g,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,h,f):m,f==null)break e;h=ot({},h,f);break e;case 2:oi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=g,a=h):u=u.next=g,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(a=h),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);cs|=o,t.lanes=o,t.memoizedState=h}}function Jy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var tE=new Z_.Component().refs;function Nf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sd={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gn(),i=wi(t),s=Vr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(or(e,t,i,r),Nc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gn(),i=wi(t),s=Vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Si(t,s,i),e!==null&&(or(e,t,i,r),Nc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gn(),r=wi(t),i=Vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Si(t,i,r),e!==null&&(or(e,t,r,n),Nc(e,t,r))}};function Qy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Va(n,r)||!Va(i,s):!0}function nE(t,e,n){var r=!1,i=ki,s=e.contextType;return typeof s=="object"&&s!==null?s=Wn(s):(i=Cn(e)?os:an.current,r=e.contextTypes,s=(r=r!=null)?oo(t,i):ki),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Yy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sd.enqueueReplaceState(e,e.state,null)}function Of(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=tE,_m(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wn(s):(s=Cn(e)?os:an.current,i.context=oo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sd.enqueueReplaceState(i,i.state,null),mu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===tE&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function lc(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xy(t){var e=t._init;return e(t._payload)}function rE(t){function e(v,p){if(t){var E=v.deletions;E===null?(v.deletions=[p],v.flags|=16):E.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function r(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function i(v,p){return v=Ci(v,p),v.index=0,v.sibling=null,v}function s(v,p,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<p?(v.flags|=2,p):E):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,p,E,_){return p===null||p.tag!==6?(p=wh(E,v.mode,_),p.return=v,p):(p=i(p,E),p.return=v,p)}function a(v,p,E,_){var C=E.type;return C===xs?u(v,p,E.props.children,_,E.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&Xy(C)===p.type)?(_=i(p,E.props),_.ref=zo(v,p,E),_.return=v,_):(_=Fc(E.type,E.key,E.props,null,v.mode,_),_.ref=zo(v,p,E),_.return=v,_)}function c(v,p,E,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==E.containerInfo||p.stateNode.implementation!==E.implementation?(p=Ch(E,v.mode,_),p.return=v,p):(p=i(p,E.children||[]),p.return=v,p)}function u(v,p,E,_,C){return p===null||p.tag!==7?(p=ns(E,v.mode,_,C),p.return=v,p):(p=i(p,E),p.return=v,p)}function h(v,p,E){if(typeof p=="string"&&p!==""||typeof p=="number")return p=wh(""+p,v.mode,E),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Yl:return E=Fc(p.type,p.key,p.props,null,v.mode,E),E.ref=zo(v,null,p),E.return=v,E;case ks:return p=Ch(p,v.mode,E),p.return=v,p;case si:var _=p._init;return h(v,_(p._payload),E)}if(na(p)||Fo(p))return p=ns(p,v.mode,E,null),p.return=v,p;lc(v,p)}return null}function f(v,p,E,_){var C=p!==null?p.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:l(v,p,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yl:return E.key===C?a(v,p,E,_):null;case ks:return E.key===C?c(v,p,E,_):null;case si:return C=E._init,f(v,p,C(E._payload),_)}if(na(E)||Fo(E))return C!==null?null:u(v,p,E,_,null);lc(v,E)}return null}function g(v,p,E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(E)||null,l(p,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yl:return v=v.get(_.key===null?E:_.key)||null,a(p,v,_,C);case ks:return v=v.get(_.key===null?E:_.key)||null,c(p,v,_,C);case si:var k=_._init;return g(v,p,E,k(_._payload),C)}if(na(_)||Fo(_))return v=v.get(E)||null,u(p,v,_,C,null);lc(p,_)}return null}function m(v,p,E,_){for(var C=null,k=null,A=p,D=p=0,$=null;A!==null&&D<E.length;D++){A.index>D?($=A,A=null):$=A.sibling;var S=f(v,A,E[D],_);if(S===null){A===null&&(A=$);break}t&&A&&S.alternate===null&&e(v,A),p=s(S,p,D),k===null?C=S:k.sibling=S,k=S,A=$}if(D===E.length)return n(v,A),rt&&Bi(v,D),C;if(A===null){for(;D<E.length;D++)A=h(v,E[D],_),A!==null&&(p=s(A,p,D),k===null?C=A:k.sibling=A,k=A);return rt&&Bi(v,D),C}for(A=r(v,A);D<E.length;D++)$=g(A,v,D,E[D],_),$!==null&&(t&&$.alternate!==null&&A.delete($.key===null?D:$.key),p=s($,p,D),k===null?C=$:k.sibling=$,k=$);return t&&A.forEach(function(M){return e(v,M)}),rt&&Bi(v,D),C}function y(v,p,E,_){var C=Fo(E);if(typeof C!="function")throw Error(F(150));if(E=C.call(E),E==null)throw Error(F(151));for(var k=C=null,A=p,D=p=0,$=null,S=E.next();A!==null&&!S.done;D++,S=E.next()){A.index>D?($=A,A=null):$=A.sibling;var M=f(v,A,S.value,_);if(M===null){A===null&&(A=$);break}t&&A&&M.alternate===null&&e(v,A),p=s(M,p,D),k===null?C=M:k.sibling=M,k=M,A=$}if(S.done)return n(v,A),rt&&Bi(v,D),C;if(A===null){for(;!S.done;D++,S=E.next())S=h(v,S.value,_),S!==null&&(p=s(S,p,D),k===null?C=S:k.sibling=S,k=S);return rt&&Bi(v,D),C}for(A=r(v,A);!S.done;D++,S=E.next())S=g(A,v,D,S.value,_),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?D:S.key),p=s(S,p,D),k===null?C=S:k.sibling=S,k=S);return t&&A.forEach(function(P){return e(v,P)}),rt&&Bi(v,D),C}function w(v,p,E,_){if(typeof E=="object"&&E!==null&&E.type===xs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Yl:e:{for(var C=E.key,k=p;k!==null;){if(k.key===C){if(C=E.type,C===xs){if(k.tag===7){n(v,k.sibling),p=i(k,E.props.children),p.return=v,v=p;break e}}else if(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===si&&Xy(C)===k.type){n(v,k.sibling),p=i(k,E.props),p.ref=zo(v,k,E),p.return=v,v=p;break e}n(v,k);break}else e(v,k);k=k.sibling}E.type===xs?(p=ns(E.props.children,v.mode,_,E.key),p.return=v,v=p):(_=Fc(E.type,E.key,E.props,null,v.mode,_),_.ref=zo(v,p,E),_.return=v,v=_)}return o(v);case ks:e:{for(k=E.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===E.containerInfo&&p.stateNode.implementation===E.implementation){n(v,p.sibling),p=i(p,E.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=Ch(E,v.mode,_),p.return=v,v=p}return o(v);case si:return k=E._init,w(v,p,k(E._payload),_)}if(na(E))return m(v,p,E,_);if(Fo(E))return y(v,p,E,_);lc(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,p!==null&&p.tag===6?(n(v,p.sibling),p=i(p,E),p.return=v,v=p):(n(v,p),p=wh(E,v.mode,_),p.return=v,v=p),o(v)):n(v,p)}return w}var lo=rE(!0),iE=rE(!1),Sl={},Sr=ji(Sl),za=ji(Sl),qa=ji(Sl);function Qi(t){if(t===Sl)throw Error(F(174));return t}function Em(t,e){switch(Je(qa,e),Je(za,t),Je(Sr,Sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=df(e,t)}Xe(Sr),Je(Sr,e)}function co(){Xe(Sr),Xe(za),Xe(qa)}function sE(t){Qi(qa.current);var e=Qi(Sr.current),n=df(e,t.type);e!==n&&(Je(za,t),Je(Sr,n))}function Sm(t){za.current===t&&(Xe(Sr),Xe(za))}var it=ji(0);function gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function Tm(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var Oc=Yr.ReactCurrentDispatcher,vh=Yr.ReactCurrentBatchConfig,ls=0,st=null,Rt=null,jt=null,yu=!1,_a=!1,Ha=0,RI=0;function Jt(){throw Error(F(321))}function wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function Cm(t,e,n,r,i,s){if(ls=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oc.current=t===null||t.memoizedState===null?kI:xI,t=n(r,i),_a){s=0;do{if(_a=!1,Ha=0,25<=s)throw Error(F(301));s+=1,jt=Rt=null,e.updateQueue=null,Oc.current=NI,t=n(r,i)}while(_a)}if(Oc.current=vu,e=Rt!==null&&Rt.next!==null,ls=0,jt=Rt=st=null,yu=!1,e)throw Error(F(300));return t}function Pm(){var t=Ha!==0;return Ha=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?st.memoizedState=jt=t:jt=jt.next=t,jt}function Gn(){if(Rt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=jt===null?st.memoizedState:jt.next;if(e!==null)jt=e,Rt=t;else{if(t===null)throw Error(F(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},jt===null?st.memoizedState=jt=t:jt=jt.next=t}return jt}function Wa(t,e){return typeof e=="function"?e(t):e}function _h(t){var e=Gn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Rt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((ls&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,st.lanes|=u,cs|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,ar(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,cs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Eh(t){var e=Gn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ar(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function oE(){}function aE(t,e){var n=st,r=Gn(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,Rm(uE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Ga(9,cE.bind(null,n,r,i,e),void 0,null),Mt===null)throw Error(F(349));ls&30||lE(n,e,i)}return i}function lE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cE(t,e,n,r){e.value=n,e.getSnapshot=r,dE(e)&&hE(t)}function uE(t,e,n){return n(function(){dE(e)&&hE(t)})}function dE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function hE(t){var e=qr(t,1);e!==null&&or(e,t,1,-1)}function Zy(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=AI.bind(null,st,t),[e.memoizedState,t]}function Ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fE(){return Gn().memoizedState}function Dc(t,e,n,r){var i=hr();st.flags|=t,i.memoizedState=Ga(1|e,n,void 0,r===void 0?null:r)}function od(t,e,n,r){var i=Gn();r=r===void 0?null:r;var s=void 0;if(Rt!==null){var o=Rt.memoizedState;if(s=o.destroy,r!==null&&wm(r,o.deps)){i.memoizedState=Ga(e,n,s,r);return}}st.flags|=t,i.memoizedState=Ga(1|e,n,s,r)}function ev(t,e){return Dc(8390656,8,t,e)}function Rm(t,e){return od(2048,8,t,e)}function pE(t,e){return od(4,2,t,e)}function mE(t,e){return od(4,4,t,e)}function gE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yE(t,e,n){return n=n!=null?n.concat([t]):null,od(4,4,gE.bind(null,e,t),n)}function Im(){}function vE(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _E(t,e){var n=Gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function EE(t,e,n){return ls&21?(ar(n,e)||(n=w1(),st.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function II(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=vh.transition;vh.transition={};try{t(!1),e()}finally{$e=n,vh.transition=r}}function SE(){return Gn().memoizedState}function bI(t,e,n){var r=wi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TE(t))wE(e,n);else if(n=Z1(t,e,n,r),n!==null){var i=gn();or(n,t,r,i),CE(n,e,r)}}function AI(t,e,n){var r=wi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TE(t))wE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,ar(l,o)){var a=e.interleaved;a===null?(i.next=i,vm(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Z1(t,e,i,r),n!==null&&(i=gn(),or(n,t,r,i),CE(n,e,r))}}function TE(t){var e=t.alternate;return t===st||e!==null&&e===st}function wE(t,e){_a=yu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}var vu={readContext:Wn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},kI={readContext:Wn,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:ev,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4194308,4,gE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dc(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bI.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:Zy,useDebugValue:Im,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=Zy(!1),e=t[0];return t=II.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=hr();if(rt){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Mt===null)throw Error(F(349));ls&30||lE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ev(uE.bind(null,r,s,t),[t]),r.flags|=2048,Ga(9,cE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=hr(),e=Mt.identifierPrefix;if(rt){var n=Dr,r=Or;n=(r&~(1<<32-sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xI={readContext:Wn,useCallback:vE,useContext:Wn,useEffect:Rm,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:_E,useReducer:_h,useRef:fE,useState:function(){return _h(Wa)},useDebugValue:Im,useDeferredValue:function(t){var e=Gn();return EE(e,Rt.memoizedState,t)},useTransition:function(){var t=_h(Wa)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:SE,unstable_isNewReconciler:!1},NI={readContext:Wn,useCallback:vE,useContext:Wn,useEffect:Rm,useImperativeHandle:yE,useInsertionEffect:pE,useLayoutEffect:mE,useMemo:_E,useReducer:Eh,useRef:fE,useState:function(){return Eh(Wa)},useDebugValue:Im,useDeferredValue:function(t){var e=Gn();return Rt===null?e.memoizedState=t:EE(e,Rt.memoizedState,t)},useTransition:function(){var t=Eh(Wa)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:oE,useSyncExternalStore:aE,useId:SE,unstable_isNewReconciler:!1};function uo(t,e){try{var n="",r=e;do n+=oR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Df(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OI=typeof WeakMap=="function"?WeakMap:Map;function PE(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Eu||(Eu=!0,qf=r),Df(t,e)},n}function RE(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Df(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Df(t,e),typeof r!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GI.bind(null,t,e,n),e.then(t,t))}function nv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Si(n,e,1))),n.lanes|=1),t)}var DI=Yr.ReactCurrentOwner,Tn=!1;function pn(t,e,n,r){e.child=t===null?iE(e,null,n,r):lo(e,t.child,n,r)}function iv(t,e,n,r,i){n=n.render;var s=e.ref;return Qs(e,i),r=Cm(t,e,n,r,s,i),n=Pm(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(rt&&n&&hm(e),e.flags|=1,pn(t,e,r,i),e.child)}function sv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,IE(t,e,s,r,i)):(t=Fc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Va,n(o,r)&&t.ref===e.ref)return Hr(t,e,i)}return e.flags|=1,t=Ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function IE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Va(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Hr(t,e,i)}return jf(t,e,n,r,i)}function bE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je($s,An),An|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je($s,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Je($s,An),An|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Je($s,An),An|=r;return pn(t,e,i,n),e.child}function AE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jf(t,e,n,r,i){var s=Cn(n)?os:an.current;return s=oo(e,s),Qs(e,i),n=Cm(t,e,n,r,s,i),r=Pm(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(rt&&r&&hm(e),e.flags|=1,pn(t,e,n,i),e.child)}function ov(t,e,n,r,i){if(Cn(n)){var s=!0;uu(e)}else s=!1;if(Qs(e,i),e.stateNode===null)jc(t,e),nE(e,n,r),Of(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wn(c):(c=Cn(n)?os:an.current,c=oo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Yy(e,o,r,c),oi=!1;var f=e.memoizedState;o.state=f,mu(e,r,o,i),a=e.memoizedState,l!==r||f!==a||wn.current||oi?(typeof u=="function"&&(Nf(e,n,u,r),a=e.memoizedState),(l=oi||Qy(e,n,l,r,f,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eE(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Zn(e.type,l),o.props=c,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Wn(a):(a=Cn(n)?os:an.current,a=oo(e,a));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Yy(e,o,r,a),oi=!1,f=e.memoizedState,o.state=f,mu(e,r,o,i);var m=e.memoizedState;l!==h||f!==m||wn.current||oi?(typeof g=="function"&&(Nf(e,n,g,r),m=e.memoizedState),(c=oi||Qy(e,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Mf(t,e,n,r,s,i)}function Mf(t,e,n,r,i,s){AE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Hy(e,n,!1),Hr(t,e,s);r=e.stateNode,DI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lo(e,t.child,null,s),e.child=lo(e,null,l,s)):pn(t,e,l,s),e.memoizedState=r.state,i&&Hy(e,n,!0),e.child}function kE(t){var e=t.stateNode;e.pendingContext?qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(t,e.context,!1),Em(t,e.containerInfo)}function av(t,e,n,r,i){return ao(),pm(i),e.flags|=256,pn(t,e,n,r),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(it,i&1),t===null)return kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cd(o,r,0,null),t=ns(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ff(n),e.memoizedState=Lf,t):bm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return jI(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Ci(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ci(l,s):(s=ns(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Lf,r}return s=t.child,t=s.sibling,r=Ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bm(t,e){return e=cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,r){return r!==null&&pm(r),lo(e,t.child,null,n),t=bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sh(Error(F(422))),cc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cd({mode:"visible",children:r.children},i,0,null),s=ns(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&lo(e,t.child,null,o),e.child.memoizedState=Ff(o),e.memoizedState=Lf,s);if(!(e.mode&1))return cc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(F(419)),r=Sh(s,r,void 0),cc(t,e,o,r)}if(l=(o&t.childLanes)!==0,Tn||l){if(r=Mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qr(t,i),or(r,t,i,-1))}return Dm(),r=Sh(Error(F(421))),cc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=KI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,kn=Ei(i.nextSibling),xn=e,rt=!0,nr=null,t!==null&&(Fn[Vn++]=Or,Fn[Vn++]=Dr,Fn[Vn++]=as,Or=t.id,Dr=t.overflow,as=e),e=bm(e,r.children),e.flags|=4096,e)}function lv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xf(t.return,e,n)}function Th(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function NE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(pn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lv(t,n,e);else if(t.tag===19)lv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Th(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Th(e,!0,n,null,s);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MI(t,e,n){switch(e.tag){case 3:kE(e),ao();break;case 5:sE(e);break;case 1:Cn(e.type)&&uu(e);break;case 4:Em(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Je(fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?xE(t,e,n):(Je(it,it.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);Je(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return NE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,bE(t,e,n)}return Hr(t,e,n)}var OE,Vf,DE,jE;OE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vf=function(){};DE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qi(Sr.current);var s=null;switch(n){case"input":i=af(t,i),r=af(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=uf(t,i),r=uf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lu)}hf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Na.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Na.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Qe("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};jE=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LI(t,e,n){var r=e.pendingProps;switch(fm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Cn(e.type)&&cu(),Qt(e),null;case 3:return r=e.stateNode,co(),Xe(wn),Xe(an),Tm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ac(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nr!==null&&(Gf(nr),nr=null))),Vf(t,e),Qt(e),null;case 5:Sm(e);var i=Qi(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)DE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Qt(e),null}if(t=Qi(Sr.current),ac(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pr]=e,r[Ba]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<ia.length;i++)Qe(ia[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":yy(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":_y(r,s),Qe("invalid",r)}hf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&oc(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&oc(r.textContent,l,t),i=["children",""+l]):Na.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":Xl(r),vy(r,s,!0);break;case"textarea":Xl(r),Ey(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=l1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pr]=e,t[Ba]=r,OE(t,e,!1,!1),e.stateNode=t;e:{switch(o=ff(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ia.length;i++)Qe(ia[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":yy(t,r),i=af(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":_y(t,r),i=uf(t,r),Qe("invalid",t);break;default:i=r}hf(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?d1(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&c1(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Oa(t,a):typeof a=="number"&&Oa(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Na.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Qe("scroll",t):a!=null&&Xp(t,s,a,o))}switch(n){case"input":Xl(t),vy(t,r,!1);break;case"textarea":Xl(t),Ey(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ai(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ws(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)jE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Qi(qa.current),Qi(Sr.current),ac(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(s=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:oc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Qt(e),null;case 13:if(Xe(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&kn!==null&&e.mode&1&&!(e.flags&128))X1(),ao(),e.flags|=98560,s=!1;else if(s=ac(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[pr]=e}else ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else nr!==null&&(Gf(nr),nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?bt===0&&(bt=3):Dm())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return co(),Vf(t,e),t===null&&Ua(e.stateNode.containerInfo),Qt(e),null;case 10:return ym(e.type._context),Qt(e),null;case 17:return Cn(e.type)&&cu(),Qt(e),null;case 19:if(Xe(it),s=e.memoizedState,s===null)return Qt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qo(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gu(t),o!==null){for(e.flags|=128,qo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&yt()>ho&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304)}else{if(!r)if(t=gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!rt)return Qt(e),null}else 2*yt()-s.renderingStartTime>ho&&n!==1073741824&&(e.flags|=128,r=!0,qo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yt(),e.sibling=null,n=it.current,Je(it,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Om(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function FI(t,e){switch(fm(e),e.tag){case 1:return Cn(e.type)&&cu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return co(),Xe(wn),Xe(an),Tm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sm(e),null;case 13:if(Xe(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(it),null;case 4:return co(),null;case 10:return ym(e.type._context),null;case 22:case 23:return Om(),null;case 24:return null;default:return null}}var uc=!1,en=!1,VI=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function Uf(t,e,n){try{n()}catch(r){dt(t,e,r)}}var cv=!1;function UI(t,e){if(wf=su,t=V1(),dm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==s||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cf={focusedElem:t,selectionRange:n},su=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Zn(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){dt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return m=cv,cv=!1,m}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uf(e,n,s)}i=i.next}while(i!==r)}}function ad(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $f(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ME(t){var e=t.alternate;e!==null&&(t.alternate=null,ME(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[Ba],delete e[If],delete e[TI],delete e[wI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LE(t){return t.tag===5||t.tag===3||t.tag===4}function uv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lu));else if(r!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}function zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zf(t,e,n),t=t.sibling;t!==null;)zf(t,e,n),t=t.sibling}var Ut=null,er=!1;function ni(t,e,n){for(n=n.child;n!==null;)FE(t,e,n),n=n.sibling}function FE(t,e,n){if(Er&&typeof Er.onCommitFiberUnmount=="function")try{Er.onCommitFiberUnmount(Zu,n)}catch{}switch(n.tag){case 5:en||Us(n,e);case 6:var r=Ut,i=er;Ut=null,ni(t,e,n),Ut=r,er=i,Ut!==null&&(er?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(er?(t=Ut,n=n.stateNode,t.nodeType===8?mh(t.parentNode,n):t.nodeType===1&&mh(t,n),La(t)):mh(Ut,n.stateNode));break;case 4:r=Ut,i=er,Ut=n.stateNode.containerInfo,er=!0,ni(t,e,n),Ut=r,er=i;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uf(n,e,o),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!en&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){dt(n,e,l)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,ni(t,e,n),en=r):ni(t,e,n);break;default:ni(t,e,n)}}function dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VI),e.forEach(function(r){var i=JI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,er=!1;break e;case 3:Ut=l.stateNode.containerInfo,er=!0;break e;case 4:Ut=l.stateNode.containerInfo,er=!0;break e}l=l.return}if(Ut===null)throw Error(F(160));FE(s,o,i),Ut=null,er=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VE(e,t),e=e.sibling}function VE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),dr(t),r&4){try{Ea(3,t,t.return),ad(3,t)}catch(y){dt(t,t.return,y)}try{Ea(5,t,t.return)}catch(y){dt(t,t.return,y)}}break;case 1:Xn(e,t),dr(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(Xn(e,t),dr(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var i=t.stateNode;try{Oa(i,"")}catch(y){dt(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&o1(i,s),ff(l,o);var c=ff(l,s);for(o=0;o<a.length;o+=2){var u=a[o],h=a[o+1];u==="style"?d1(i,h):u==="dangerouslySetInnerHTML"?c1(i,h):u==="children"?Oa(i,h):Xp(i,u,h,c)}switch(l){case"input":lf(i,s);break;case"textarea":a1(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ws(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ws(i,!!s.multiple,s.defaultValue,!0):Ws(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ba]=s}catch(y){dt(t,t.return,y)}}break;case 6:if(Xn(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){dt(t,t.return,y)}}break;case 3:if(Xn(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(y){dt(t,t.return,y)}break;case 4:Xn(e,t),dr(t);break;case 13:Xn(e,t),dr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xm=yt())),r&4&&dv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(en=(c=en)||u,Xn(e,t),en=c):Xn(e,t),dr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ee=t,u=t.child;u!==null;){for(h=ee=u;ee!==null;){switch(f=ee,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ea(4,f,f.return);break;case 1:Us(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){dt(r,n,y)}}break;case 5:Us(f,f.return);break;case 22:if(f.memoizedState!==null){fv(h);continue}}g!==null?(g.return=f,ee=g):fv(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=u1("display",o))}catch(y){dt(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){dt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xn(e,t),dr(t),r&4&&dv(t);break;case 21:break;default:Xn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Oa(i,""),r.flags&=-33);var s=uv(t);zf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=uv(t);Bf(t,l,o);break;default:throw Error(F(161))}}catch(a){dt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $I(t,e,n){ee=t,UE(t)}function UE(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uc;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||en;l=uc;var c=en;if(uc=o,(en=a)&&!c)for(ee=i;ee!==null;)o=ee,a=o.child,o.tag===22&&o.memoizedState!==null?pv(i):a!==null?(a.return=o,ee=a):pv(i);for(;s!==null;)ee=s,UE(s),s=s.sibling;ee=i,uc=l,en=c}hv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):hv(t)}}function hv(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||ad(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Jy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&La(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}en||e.flags&512&&$f(e)}catch(f){dt(e,e.return,f)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function fv(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function pv(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ad(4,e)}catch(a){dt(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){dt(e,i,a)}}var s=e.return;try{$f(e)}catch(a){dt(e,s,a)}break;case 5:var o=e.return;try{$f(e)}catch(a){dt(e,o,a)}}}catch(a){dt(e,e.return,a)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var BI=Math.ceil,_u=Yr.ReactCurrentDispatcher,Am=Yr.ReactCurrentOwner,zn=Yr.ReactCurrentBatchConfig,xe=0,Mt=null,Ct=null,qt=0,An=0,$s=ji(0),bt=0,Ka=null,cs=0,ld=0,km=0,Sa=null,Sn=null,xm=0,ho=1/0,kr=null,Eu=!1,qf=null,Ti=null,dc=!1,pi=null,Su=0,Ta=0,Hf=null,Mc=-1,Lc=0;function gn(){return xe&6?yt():Mc!==-1?Mc:Mc=yt()}function wi(t){return t.mode&1?xe&2&&qt!==0?qt&-qt:PI.transition!==null?(Lc===0&&(Lc=w1()),Lc):(t=$e,t!==0||(t=window.event,t=t===void 0?16:k1(t.type)),t):1}function or(t,e,n,r){if(50<Ta)throw Ta=0,Hf=null,Error(F(185));vl(t,n,r),(!(xe&2)||t!==Mt)&&(t===Mt&&(!(xe&2)&&(ld|=n),bt===4&&li(t,qt)),Pn(t,r),n===1&&xe===0&&!(e.mode&1)&&(ho=yt()+500,id&&Mi()))}function Pn(t,e){var n=t.callbackNode;PR(t,e);var r=iu(t,t===Mt?qt:0);if(r===0)n!==null&&wy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wy(n),e===1)t.tag===0?CI(mv.bind(null,t)):J1(mv.bind(null,t)),EI(function(){!(xe&6)&&Mi()}),n=null;else{switch(C1(r)){case 1:n=rm;break;case 4:n=S1;break;case 16:n=ru;break;case 536870912:n=T1;break;default:n=ru}n=KE(n,$E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $E(t,e){if(Mc=-1,Lc=0,xe&6)throw Error(F(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=iu(t,t===Mt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Tu(t,r);else{e=r;var i=xe;xe|=2;var s=zE();(Mt!==t||qt!==e)&&(kr=null,ho=yt()+500,ts(t,e));do try{HI();break}catch(l){BE(t,l)}while(1);gm(),_u.current=s,xe=i,Ct!==null?e=0:(Mt=null,qt=0,e=bt)}if(e!==0){if(e===2&&(i=vf(t),i!==0&&(r=i,e=Wf(t,i))),e===1)throw n=Ka,ts(t,0),li(t,r),Pn(t,yt()),n;if(e===6)li(t,r);else{if(i=t.current.alternate,!(r&30)&&!zI(i)&&(e=Tu(t,r),e===2&&(s=vf(t),s!==0&&(r=s,e=Wf(t,s))),e===1))throw n=Ka,ts(t,0),li(t,r),Pn(t,yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:zi(t,Sn,kr);break;case 3:if(li(t,r),(r&130023424)===r&&(e=xm+500-yt(),10<e)){if(iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){gn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rf(zi.bind(null,t,Sn,kr),e);break}zi(t,Sn,kr);break;case 4:if(li(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-sr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BI(r/1960))-r,10<r){t.timeoutHandle=Rf(zi.bind(null,t,Sn,kr),r);break}zi(t,Sn,kr);break;case 5:zi(t,Sn,kr);break;default:throw Error(F(329))}}}return Pn(t,yt()),t.callbackNode===n?$E.bind(null,t):null}function Wf(t,e){var n=Sa;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=Tu(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&Gf(e)),t}function Gf(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function zI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function li(t,e){for(e&=~km,e&=~ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sr(e),r=1<<n;t[n]=-1,e&=~r}}function mv(t){if(xe&6)throw Error(F(327));Ys();var e=iu(t,0);if(!(e&1))return Pn(t,yt()),null;var n=Tu(t,e);if(t.tag!==0&&n===2){var r=vf(t);r!==0&&(e=r,n=Wf(t,r))}if(n===1)throw n=Ka,ts(t,0),li(t,e),Pn(t,yt()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Sn,kr),Pn(t,yt()),null}function Nm(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(ho=yt()+500,id&&Mi())}}function us(t){pi!==null&&pi.tag===0&&!(xe&6)&&Ys();var e=xe;xe|=1;var n=zn.transition,r=$e;try{if(zn.transition=null,$e=1,t)return t()}finally{$e=r,zn.transition=n,xe=e,!(xe&6)&&Mi()}}function Om(){An=$s.current,Xe($s)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_I(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(fm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cu();break;case 3:co(),Xe(wn),Xe(an),Tm();break;case 5:Sm(r);break;case 4:co();break;case 13:Xe(it);break;case 19:Xe(it);break;case 10:ym(r.type._context);break;case 22:case 23:Om()}n=n.return}if(Mt=t,Ct=t=Ci(t.current,null),qt=An=e,bt=0,Ka=null,km=ld=cs=0,Sn=Sa=null,Ji!==null){for(e=0;e<Ji.length;e++)if(n=Ji[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ji=null}return t}function BE(t,e){do{var n=Ct;try{if(gm(),Oc.current=vu,yu){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yu=!1}if(ls=0,jt=Rt=st=null,_a=!1,Ha=0,Am.current=null,n===null||n.return===null){bt=1,Ka=e,Ct=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=qt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=nv(o);if(g!==null){g.flags&=-257,rv(g,o,l,s,e),g.mode&1&&tv(s,c,e),e=g,a=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){tv(s,c,e),Dm();break e}a=Error(F(426))}}else if(rt&&l.mode&1){var w=nv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),rv(w,o,l,s,e),pm(uo(a,l));break e}}s=a=uo(a,l),bt!==4&&(bt=2),Sa===null?Sa=[s]:Sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=PE(s,a,e);Ky(s,v);break e;case 1:l=a;var p=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ti===null||!Ti.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=RE(s,l,e);Ky(s,_);break e}}s=s.return}while(s!==null)}HE(n)}catch(C){e=C,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(1)}function zE(){var t=_u.current;return _u.current=vu,t===null?vu:t}function Dm(){(bt===0||bt===3||bt===2)&&(bt=4),Mt===null||!(cs&268435455)&&!(ld&268435455)||li(Mt,qt)}function Tu(t,e){var n=xe;xe|=2;var r=zE();(Mt!==t||qt!==e)&&(kr=null,ts(t,e));do try{qI();break}catch(i){BE(t,i)}while(1);if(gm(),xe=n,_u.current=r,Ct!==null)throw Error(F(261));return Mt=null,qt=0,bt}function qI(){for(;Ct!==null;)qE(Ct)}function HI(){for(;Ct!==null&&!gR();)qE(Ct)}function qE(t){var e=GE(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?HE(t):Ct=e,Am.current=null}function HE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FI(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,Ct=null;return}}else if(n=LI(n,e,An),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);bt===0&&(bt=5)}function zi(t,e,n){var r=$e,i=zn.transition;try{zn.transition=null,$e=1,WI(t,e,n,r)}finally{zn.transition=i,$e=r}return null}function WI(t,e,n,r){do Ys();while(pi!==null);if(xe&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(RR(t,s),t===Mt&&(Ct=Mt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dc||(dc=!0,KE(ru,function(){return Ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zn.transition,zn.transition=null;var o=$e;$e=1;var l=xe;xe|=4,Am.current=null,UI(t,n),VE(n,t),hI(Cf),su=!!wf,Cf=wf=null,t.current=n,$I(n),yR(),xe=l,$e=o,zn.transition=s}else t.current=n;if(dc&&(dc=!1,pi=t,Su=i),s=t.pendingLanes,s===0&&(Ti=null),ER(n.stateNode),Pn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Eu)throw Eu=!1,t=qf,qf=null,t;return Su&1&&t.tag!==0&&Ys(),s=t.pendingLanes,s&1?t===Hf?Ta++:(Ta=0,Hf=t):Ta=0,Mi(),null}function Ys(){if(pi!==null){var t=C1(Su),e=zn.transition,n=$e;try{if(zn.transition=null,$e=16>t?16:t,pi===null)var r=!1;else{if(t=pi,pi=null,Su=0,xe&6)throw Error(F(331));var i=xe;for(xe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(ee=c;ee!==null;){var u=ee;switch(u.tag){case 0:case 11:case 15:Ea(8,u,s)}var h=u.child;if(h!==null)h.return=u,ee=h;else for(;ee!==null;){u=ee;var f=u.sibling,g=u.return;if(ME(u),u===c){ee=null;break}if(f!==null){f.return=g,ee=f;break}ee=g}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ee=v;break e}ee=s.return}}var p=t.current;for(ee=p;ee!==null;){o=ee;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ee=E;else e:for(o=p;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ad(9,l)}}catch(C){dt(l,l.return,C)}if(l===o){ee=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ee=_;break e}ee=l.return}}if(xe=i,Mi(),Er&&typeof Er.onPostCommitFiberRoot=="function")try{Er.onPostCommitFiberRoot(Zu,t)}catch{}r=!0}return r}finally{$e=n,zn.transition=e}}return!1}function gv(t,e,n){e=uo(n,e),e=PE(t,e,1),t=Si(t,e,1),e=gn(),t!==null&&(vl(t,1,e),Pn(t,e))}function dt(t,e,n){if(t.tag===3)gv(t,t,n);else for(;e!==null;){if(e.tag===3){gv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ti===null||!Ti.has(r))){t=uo(n,t),t=RE(e,t,1),e=Si(e,t,1),t=gn(),e!==null&&(vl(e,1,t),Pn(e,t));break}}e=e.return}}function GI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gn(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(qt&n)===n&&(bt===4||bt===3&&(qt&130023424)===qt&&500>yt()-xm?ts(t,0):km|=n),Pn(t,e)}function WE(t,e){e===0&&(t.mode&1?(e=tc,tc<<=1,!(tc&130023424)&&(tc=4194304)):e=1);var n=gn();t=qr(t,e),t!==null&&(vl(t,e,n),Pn(t,n))}function KI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WE(t,n)}function JI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),WE(t,n)}var GE;GE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,MI(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,rt&&e.flags&1048576&&Q1(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jc(t,e),t=e.pendingProps;var i=oo(e,an.current);Qs(e,n),i=Cm(null,e,r,t,i,n);var s=Pm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(r)?(s=!0,uu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_m(e),i.updater=sd,e.stateNode=i,i._reactInternals=e,Of(e,r,t,n),e=Mf(null,e,r,!0,s,n)):(e.tag=0,rt&&s&&hm(e),pn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YI(r),t=Zn(r,t),i){case 0:e=jf(null,e,r,t,n);break e;case 1:e=ov(null,e,r,t,n);break e;case 11:e=iv(null,e,r,t,n);break e;case 14:e=sv(null,e,r,Zn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),jf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),ov(t,e,r,i,n);case 3:e:{if(kE(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eE(t,e),mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=uo(Error(F(423)),e),e=av(t,e,r,n,i);break e}else if(r!==i){i=uo(Error(F(424)),e),e=av(t,e,r,n,i);break e}else for(kn=Ei(e.stateNode.containerInfo.firstChild),xn=e,rt=!0,nr=null,n=iE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ao(),r===i){e=Hr(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return sE(e),t===null&&kf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pf(r,i)?o=null:s!==null&&Pf(r,s)&&(e.flags|=32),AE(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&kf(e),null;case 13:return xE(t,e,n);case 4:return Em(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lo(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),iv(t,e,r,i,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Je(fu,r._currentValue),r._currentValue=o,s!==null)if(ar(s.value,o)){if(s.children===i.children&&!wn.current){e=Hr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Vr(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),xf(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),xf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}pn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qs(e,n),i=Wn(i),r=r(i),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),sv(t,e,r,i,n);case 15:return IE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),jc(t,e),e.tag=1,Cn(r)?(t=!0,uu(e)):t=!1,Qs(e,n),nE(e,r,i),Of(e,r,i,n),Mf(null,e,r,!0,t,n);case 19:return NE(t,e,n);case 22:return bE(t,e,n)}throw Error(F(156,e.tag))};function KE(t,e){return E1(t,e)}function QI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new QI(t,e,n,r)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YI(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===em)return 11;if(t===tm)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return ns(n.children,i,s,e);case Zp:o=8,i|=8;break;case nf:return t=Bn(12,n,e,i|2),t.elementType=nf,t.lanes=s,t;case rf:return t=Bn(13,n,e,i),t.elementType=rf,t.lanes=s,t;case sf:return t=Bn(19,n,e,i),t.elementType=sf,t.lanes=s,t;case r1:return cd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t1:o=10;break e;case n1:o=9;break e;case em:o=11;break e;case tm:o=14;break e;case si:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ns(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function cd(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=r1,t.lanes=n,t.stateNode={isHidden:!1},t}function wh(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Ch(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mm(t,e,n,r,i,s,o,l,a){return t=new XI(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(s),t}function ZI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function JE(t){if(!t)return ki;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Cn(n))return K1(t,n,e)}return e}function QE(t,e,n,r,i,s,o,l,a){return t=Mm(n,r,!0,t,i,s,o,l,a),t.context=JE(null),n=t.current,r=gn(),i=wi(n),s=Vr(r,i),s.callback=e??null,Si(n,s,i),t.current.lanes=i,vl(t,i,r),Pn(t,r),t}function ud(t,e,n,r){var i=e.current,s=gn(),o=wi(i);return n=JE(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Si(i,e,o),t!==null&&(or(t,i,o,s),Nc(t,i,o)),o}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lm(t,e){yv(t,e),(t=t.alternate)&&yv(t,e)}function eb(){return null}var YE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fm(t){this._internalRoot=t}dd.prototype.render=Fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ud(t,e,null,null)};dd.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){ud(null,t,null,null)}),e[zr]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=I1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ai.length&&e!==0&&e<ai[n].priority;n++);ai.splice(n,0,t),n===0&&A1(t)}};function Vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vv(){}function tb(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=wu(o);s.call(c)}}var o=QE(e,r,t,0,null,!1,!1,"",vv);return t._reactRootContainer=o,t[zr]=o.current,Ua(t.nodeType===8?t.parentNode:t),us(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=wu(a);l.call(c)}}var a=Mm(t,0,!1,null,null,!1,!1,"",vv);return t._reactRootContainer=a,t[zr]=a.current,Ua(t.nodeType===8?t.parentNode:t),us(function(){ud(e,a,n,r)}),a}function fd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=wu(o);l.call(a)}}ud(e,o,t,i)}else o=tb(n,e,t,i,r);return wu(o)}P1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ra(e.pendingLanes);n!==0&&(im(e,n|1),Pn(e,yt()),!(xe&6)&&(ho=yt()+500,Mi()))}break;case 13:us(function(){var r=qr(t,1);if(r!==null){var i=gn();or(r,t,1,i)}}),Lm(t,1)}};sm=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=gn();or(e,t,134217728,n)}Lm(t,134217728)}};R1=function(t){if(t.tag===13){var e=wi(t),n=qr(t,e);if(n!==null){var r=gn();or(n,t,e,r)}Lm(t,e)}};I1=function(){return $e};b1=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};mf=function(t,e,n){switch(e){case"input":if(lf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rd(r);if(!i)throw Error(F(90));s1(r),lf(r,i)}}}break;case"textarea":a1(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};p1=Nm;m1=us;var nb={usingClientEntryPoint:!1,Events:[El,js,rd,h1,f1,Nm]},Ho={findFiberByHostInstance:Ki,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rb={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=v1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||eb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Zu=hc.inject(rb),Er=hc}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nb;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(e))throw Error(F(200));return ZI(t,e,null,n)};Dn.createRoot=function(t,e){if(!Vm(t))throw Error(F(299));var n=!1,r="",i=YE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mm(t,1,!1,null,null,n,!1,r,i),t[zr]=e.current,Ua(t.nodeType===8?t.parentNode:t),new Fm(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=v1(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return us(t)};Dn.hydrate=function(t,e,n){if(!hd(e))throw Error(F(200));return fd(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Vm(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=YE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=QE(e,null,t,1,n??null,i,!1,s,o),t[zr]=e.current,Ua(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dd(e)};Dn.render=function(t,e,n){if(!hd(e))throw Error(F(200));return fd(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!hd(t))throw Error(F(40));return t._reactRootContainer?(us(function(){fd(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};Dn.unstable_batchedUpdates=Nm;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hd(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return fd(t,e,n,!1,r)};Dn.version="18.2.0-next-9e3b772b8-20220608";function XE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XE)}catch(t){console.error(t)}}XE(),Q_.exports=Dn;var ib=Q_.exports,_v=ib;ef.createRoot=_v.createRoot,ef.hydrateRoot=_v.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nt.apply(this,arguments)}var Tt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Tt||(Tt={}));const Ev="popstate";function sb(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Ja("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Tl(i)}return ab(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ob(){return Math.random().toString(36).substr(2,8)}function Sv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ja(t,e,n,r){return n===void 0&&(n=null),nt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xr(e):e,{state:n,key:e&&e.key||r||ob()})}function Tl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ab(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Tt.Pop,a=null,c=u();c==null&&(c=0,o.replaceState(nt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Tt.Pop;let w=u(),v=w==null?null:w-c;c=w,a&&a({action:l,location:y.location,delta:v})}function f(w,v){l=Tt.Push;let p=Ja(y.location,w,v);n&&n(p,w),c=u()+1;let E=Sv(p,c),_=y.createHref(p);try{o.pushState(E,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(_)}s&&a&&a({action:l,location:y.location,delta:1})}function g(w,v){l=Tt.Replace;let p=Ja(y.location,w,v);n&&n(p,w),c=u();let E=Sv(p,c),_=y.createHref(p);o.replaceState(E,"",_),s&&a&&a({action:l,location:y.location,delta:0})}function m(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof w=="string"?w:Tl(w);return Ae(v,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,v)}let y={get action(){return l},get location(){return t(i,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Ev,h),a=w,()=>{i.removeEventListener(Ev,h),a=null}},createHref(w){return e(i,w)},createURL:m,encodeLocation(w){let v=m(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(w){return o.go(w)}};return y}var gt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gt||(gt={}));const lb=new Set(["lazy","caseSensitive","path","id","index","children"]);function cb(t){return t.index===!0}function Kf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],l=typeof i.id=="string"?i.id:o.join("-");if(Ae(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ae(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),cb(i)){let a=nt({},i,e(i),{id:l});return r[l]=a,a}else{let a=nt({},i,e(i),{id:l,children:void 0});return r[l]=a,i.children&&(a.children=Kf(i.children,e,o,r)),a}})}function Bs(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xr(e):e,i=wl(r.pathname||"/",n);if(i==null)return null;let s=ZE(t);ub(s);let o=null;for(let l=0;o==null&&l<s.length;++l)o=_b(s[l],Tb(i));return o}function ZE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(Ae(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=rs([r,a.relativePath]),u=n.concat(a);s.children&&s.children.length>0&&(Ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZE(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:yb(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of eS(s.path))i(s,o,a)}),e}function eS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=eS(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function ub(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const db=/^:\w+$/,hb=3,fb=2,pb=1,mb=10,gb=-2,Tv=t=>t==="*";function yb(t,e){let n=t.split("/"),r=n.length;return n.some(Tv)&&(r+=gb),e&&(r+=fb),n.filter(i=>!Tv(i)).reduce((i,s)=>i+(db.test(s)?hb:s===""?pb:mb),r)}function vb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _b(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],a=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=Eb({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},c);if(!u)return null;Object.assign(r,u.params);let h=l.route;s.push({params:r,pathname:rs([i,u.pathname]),pathnameBase:Ib(rs([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=rs([i,u.pathnameBase]))}return s}function Eb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Sb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,u,h)=>{if(u==="*"){let f=l[h]||"";o=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return c[u]=wb(l[h]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Sb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,l)=>(r.push(l),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Tb(t){try{return decodeURI(t)}catch(e){return fo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wb(t,e){try{return decodeURIComponent(t)}catch(n){return fo(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function wl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Cb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xr(t):t;return{pathname:n?n.startsWith("/")?n:Pb(n,e):e,search:bb(r),hash:Ab(i)}}function Pb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xr(t):(i=nt({},t),Ae(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(r||o==null)l=n;else{let h=e.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=Cb(i,l),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const rs=t=>t.join("/").replace(/\/\/+/g,"/"),Ib=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ab=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Um{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function nS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rS=["post","put","patch","delete"],kb=new Set(rS),xb=["get",...rS],Nb=new Set(xb),Ob=new Set([301,302,303,307,308]),Db=new Set([307,308]),Rh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},jb={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},iS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mb=t=>({hasErrorBoundary:!!t.hasErrorBoundary});function Lb(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ae(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let R=t.detectErrorBoundary;i=b=>({hasErrorBoundary:R(b)})}else i=Mb;let s={},o=Kf(t.routes,i,void 0,s),l,a=t.basename||"/",c=nt({v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),u=null,h=new Set,f=null,g=null,m=null,y=t.hydrationData!=null,w=Bs(o,t.history.location,a),v=null;if(w==null){let R=Ln(404,{pathname:t.history.location.pathname}),{matches:b,route:j}=kv(o);w=b,v={[j.id]:R}}let p=!w.some(R=>R.route.lazy)&&(!w.some(R=>R.route.loader)||t.hydrationData!=null),E,_={historyAction:t.history.action,location:t.history.location,matches:w,initialized:p,navigation:Rh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||v,fetchers:new Map,blockers:new Map},C=Tt.Pop,k=!1,A,D=!1,$=!1,S=[],M=[],P=new Map,oe=0,T=-1,ce=new Map,X=new Set,te=new Map,N=new Map,z=new Map,Z=!1;function G(){return u=t.history.listen(R=>{let{action:b,location:j,delta:J}=R;if(Z){Z=!1;return}fo(z.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let B=dn({currentLocation:_.location,nextLocation:j,historyAction:b});if(B&&J!=null){Z=!0,t.history.go(J*-1),Nt(B,{state:"blocked",location:j,proceed(){Nt(B,{state:"proceeding",proceed:void 0,reset:void 0,location:j}),t.history.go(J)},reset(){let H=new Map(_.blockers);H.set(B,Wo),ue({blockers:H})}});return}return ct(b,j)}),_.initialized||ct(Tt.Pop,_.location),E}function le(){u&&u(),h.clear(),A&&A.abort(),_.fetchers.forEach((R,b)=>q(b)),_.blockers.forEach((R,b)=>xt(b))}function Ge(R){return h.add(R),()=>h.delete(R)}function ue(R){_=nt({},_,R),h.forEach(b=>b(_))}function Ee(R,b){var j,J;let B=_.actionData!=null&&_.navigation.formMethod!=null&&tr(_.navigation.formMethod)&&_.navigation.state==="loading"&&((j=R.state)==null?void 0:j._isRedirect)!==!0,H;b.actionData?Object.keys(b.actionData).length>0?H=b.actionData:H=null:B?H=_.actionData:H=null;let K=b.loaderData?Av(_.loaderData,b.loaderData,b.matches||[],b.errors):_.loaderData,ie=_.blockers;ie.size>0&&(ie=new Map(ie),ie.forEach((Se,De)=>ie.set(De,Wo)));let re=k===!0||_.navigation.formMethod!=null&&tr(_.navigation.formMethod)&&((J=R.state)==null?void 0:J._isRedirect)!==!0;l&&(o=l,l=void 0),D||C===Tt.Pop||(C===Tt.Push?t.history.push(R,R.state):C===Tt.Replace&&t.history.replace(R,R.state)),ue(nt({},b,{actionData:H,loaderData:K,historyAction:C,location:R,initialized:!0,navigation:Rh,revalidation:"idle",restoreScrollPosition:qe(R,b.matches||_.matches),preventScrollReset:re,blockers:ie})),C=Tt.Pop,k=!1,D=!1,$=!1,S=[],M=[]}async function Oe(R,b){if(typeof R=="number"){t.history.go(R);return}let j=Jf(_.location,_.matches,a,c.v7_prependBasename,R,b==null?void 0:b.fromRouteId,b==null?void 0:b.relative),{path:J,submission:B,error:H}=wv(c.v7_normalizeFormMethod,!1,j,b),K=_.location,ie=Ja(_.location,J,b&&b.state);ie=nt({},ie,t.history.encodeLocation(ie));let re=b&&b.replace!=null?b.replace:void 0,Se=Tt.Push;re===!0?Se=Tt.Replace:re===!1||B!=null&&tr(B.formMethod)&&B.formAction===_.location.pathname+_.location.search&&(Se=Tt.Replace);let De=b&&"preventScrollReset"in b?b.preventScrollReset===!0:void 0,Re=dn({currentLocation:K,nextLocation:ie,historyAction:Se});if(Re){Nt(Re,{state:"blocked",location:ie,proceed(){Nt(Re,{state:"proceeding",proceed:void 0,reset:void 0,location:ie}),Oe(R,b)},reset(){let We=new Map(_.blockers);We.set(Re,Wo),ue({blockers:We})}});return}return await ct(Se,ie,{submission:B,pendingError:H,preventScrollReset:De,replace:b&&b.replace})}function lt(){if(ae(),ue({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){ct(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}ct(C||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation})}}async function ct(R,b,j){A&&A.abort(),A=null,C=R,D=(j&&j.startUninterruptedRevalidation)===!0,et(_.location,_.matches),k=(j&&j.preventScrollReset)===!0;let J=l||o,B=j&&j.overrideNavigation,H=Bs(J,b,a);if(!H){let We=Ln(404,{pathname:b.pathname}),{matches:tt,route:Rn}=kv(J);fe(),Ee(b,{matches:tt,loaderData:{},errors:{[Rn.id]:We}});return}if(_.initialized&&!$&&Bb(_.location,b)&&!(j&&j.submission&&tr(j.submission.formMethod))){Ee(b,{matches:H});return}A=new AbortController;let K=Ko(t.history,b,A.signal,j&&j.submission),ie,re;if(j&&j.pendingError)re={[zs(H).route.id]:j.pendingError};else if(j&&j.submission&&tr(j.submission.formMethod)){let We=await we(K,b,j.submission,H,{replace:j.replace});if(We.shortCircuited)return;ie=We.pendingActionData,re=We.pendingActionError,B=fc(b,j.submission),K=new Request(K.url,{signal:K.signal})}let{shortCircuited:Se,loaderData:De,errors:Re}=await ut(K,b,H,B,j&&j.submission,j&&j.fetcherSubmission,j&&j.replace,ie,re);Se||(A=null,Ee(b,nt({matches:H},ie?{actionData:ie}:{},{loaderData:De,errors:Re})))}async function we(R,b,j,J,B){B===void 0&&(B={}),ae();let H=Gb(b,j);ue({navigation:H});let K,ie=Yf(J,b);if(!ie.route.action&&!ie.route.lazy)K={type:gt.error,error:Ln(405,{method:R.method,pathname:b.pathname,routeId:ie.route.id})};else if(K=await Go("action",R,ie,J,s,i,a),R.signal.aborted)return{shortCircuited:!0};if(Xs(K)){let re;return B&&B.replace!=null?re=B.replace:re=K.location===_.location.pathname+_.location.search,await O(_,K,{submission:j,replace:re}),{shortCircuited:!0}}if(wa(K)){let re=zs(J,ie.route.id);return(B&&B.replace)!==!0&&(C=Tt.Push),{pendingActionData:{},pendingActionError:{[re.route.id]:K.error}}}if(Yi(K))throw Ln(400,{type:"defer-action"});return{pendingActionData:{[ie.route.id]:K.data}}}async function ut(R,b,j,J,B,H,K,ie,re){let Se=J||fc(b,B),De=B||H||Ov(Se),Re=l||o,[We,tt]=Cv(t.history,_,j,De,b,$,S,M,te,X,Re,a,ie,re);if(fe(Ie=>!(j&&j.some(_t=>_t.route.id===Ie))||We&&We.some(_t=>_t.route.id===Ie)),T=++oe,We.length===0&&tt.length===0){let Ie=Y();return Ee(b,nt({matches:j,loaderData:{},errors:re||null},ie?{actionData:ie}:{},Ie?{fetchers:new Map(_.fetchers)}:{})),{shortCircuited:!0}}if(!D){tt.forEach(_t=>{let Qn=_.fetchers.get(_t.key),fn=Jo(void 0,Qn?Qn.data:void 0);_.fetchers.set(_t.key,fn)});let Ie=ie||_.actionData;ue(nt({navigation:Se},Ie?Object.keys(Ie).length===0?{actionData:null}:{actionData:Ie}:{},tt.length>0?{fetchers:new Map(_.fetchers)}:{}))}tt.forEach(Ie=>{P.has(Ie.key)&&ze(Ie.key),Ie.controller&&P.set(Ie.key,Ie.controller)});let Rn=()=>tt.forEach(Ie=>ze(Ie.key));A&&A.signal.addEventListener("abort",Rn);let{results:In,loaderResults:Jn,fetcherResults:Ar}=await U(_.matches,j,We,tt,R);if(R.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",Rn),tt.forEach(Ie=>P.delete(Ie.key));let hn=xv(In);if(hn){if(hn.idx>=We.length){let Ie=tt[hn.idx-We.length].key;X.add(Ie)}return await O(_,hn.result,{replace:K}),{shortCircuited:!0}}let{loaderData:Pt,errors:vt}=bv(_,j,We,Jn,re,tt,Ar,N);N.forEach((Ie,_t)=>{Ie.subscribe(Qn=>{(Qn||Ie.done)&&N.delete(_t)})});let Fe=Y(),bn=pt(T),Mn=Fe||bn||tt.length>0;return nt({loaderData:Pt,errors:vt},Mn?{fetchers:new Map(_.fetchers)}:{})}function ur(R){return _.fetchers.get(R)||jb}function Yd(R,b,j,J){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");P.has(R)&&ze(R);let B=l||o,H=Jf(_.location,_.matches,a,c.v7_prependBasename,j,b,J==null?void 0:J.relative),K=Bs(B,H,a);if(!K){Q(R,b,Ln(404,{pathname:H}));return}let{path:ie,submission:re,error:Se}=wv(c.v7_normalizeFormMethod,!0,H,J);if(Se){Q(R,b,Se);return}let De=Yf(K,ie);if(k=(J&&J.preventScrollReset)===!0,re&&tr(re.formMethod)){Xd(R,b,ie,De,K,re);return}te.set(R,{routeId:b,path:ie}),Kl(R,b,ie,De,K,re)}async function Xd(R,b,j,J,B,H){if(ae(),te.delete(R),!J.route.action&&!J.route.lazy){let je=Ln(405,{method:H.formMethod,pathname:j,routeId:b});Q(R,b,je);return}let K=_.fetchers.get(R),ie=Kb(H,K);_.fetchers.set(R,ie),ue({fetchers:new Map(_.fetchers)});let re=new AbortController,Se=Ko(t.history,j,re.signal,H);P.set(R,re);let De=oe,Re=await Go("action",Se,J,B,s,i,a);if(Se.signal.aborted){P.get(R)===re&&P.delete(R);return}if(Xs(Re))if(P.delete(R),T>De){let je=Is(void 0);_.fetchers.set(R,je),ue({fetchers:new Map(_.fetchers)});return}else{X.add(R);let je=Jo(H);return _.fetchers.set(R,je),ue({fetchers:new Map(_.fetchers)}),O(_,Re,{submission:H,isFetchActionRedirect:!0})}if(wa(Re)){Q(R,b,Re.error);return}if(Yi(Re))throw Ln(400,{type:"defer-action"});let We=_.navigation.location||_.location,tt=Ko(t.history,We,re.signal),Rn=l||o,In=_.navigation.state!=="idle"?Bs(Rn,_.navigation.location,a):_.matches;Ae(In,"Didn't find any matches after fetcher action");let Jn=++oe;ce.set(R,Jn);let Ar=Jo(H,Re.data);_.fetchers.set(R,Ar);let[hn,Pt]=Cv(t.history,_,In,H,We,$,S,M,te,X,Rn,a,{[J.route.id]:Re.data},void 0);Pt.filter(je=>je.key!==R).forEach(je=>{let Ot=je.key,Yn=_.fetchers.get(Ot),ei=Jo(void 0,Yn?Yn.data:void 0);_.fetchers.set(Ot,ei),P.has(Ot)&&ze(Ot),je.controller&&P.set(Ot,je.controller)}),ue({fetchers:new Map(_.fetchers)});let vt=()=>Pt.forEach(je=>ze(je.key));re.signal.addEventListener("abort",vt);let{results:Fe,loaderResults:bn,fetcherResults:Mn}=await U(_.matches,In,hn,Pt,tt);if(re.signal.aborted)return;re.signal.removeEventListener("abort",vt),ce.delete(R),P.delete(R),Pt.forEach(je=>P.delete(je.key));let Ie=xv(Fe);if(Ie){if(Ie.idx>=hn.length){let je=Pt[Ie.idx-hn.length].key;X.add(je)}return O(_,Ie.result)}let{loaderData:_t,errors:Qn}=bv(_,_.matches,hn,bn,void 0,Pt,Mn,N);if(_.fetchers.has(R)){let je=Is(Re.data);_.fetchers.set(R,je)}let fn=pt(Jn);_.navigation.state==="loading"&&Jn>T?(Ae(C,"Expected pending action"),A&&A.abort(),Ee(_.navigation.location,{matches:In,loaderData:_t,errors:Qn,fetchers:new Map(_.fetchers)})):(ue(nt({errors:Qn,loaderData:Av(_.loaderData,_t,In,Qn)},fn||Pt.length>0?{fetchers:new Map(_.fetchers)}:{})),$=!1)}async function Kl(R,b,j,J,B,H){let K=_.fetchers.get(R),ie=Jo(H,K?K.data:void 0);_.fetchers.set(R,ie),ue({fetchers:new Map(_.fetchers)});let re=new AbortController,Se=Ko(t.history,j,re.signal);P.set(R,re);let De=oe,Re=await Go("loader",Se,J,B,s,i,a);if(Yi(Re)&&(Re=await aS(Re,Se.signal,!0)||Re),P.get(R)===re&&P.delete(R),Se.signal.aborted)return;if(Xs(Re))if(T>De){let tt=Is(void 0);_.fetchers.set(R,tt),ue({fetchers:new Map(_.fetchers)});return}else{X.add(R),await O(_,Re);return}if(wa(Re)){let tt=zs(_.matches,b);_.fetchers.delete(R),ue({fetchers:new Map(_.fetchers),errors:{[tt.route.id]:Re.error}});return}Ae(!Yi(Re),"Unhandled fetcher deferred data");let We=Is(Re.data);_.fetchers.set(R,We),ue({fetchers:new Map(_.fetchers)})}async function O(R,b,j){let{submission:J,replace:B,isFetchActionRedirect:H}=j===void 0?{}:j;b.revalidate&&($=!0);let K=Ja(R.location,b.location,nt({_isRedirect:!0},H?{_isFetchActionRedirect:!0}:{}));if(Ae(K,"Expected a location on the redirect navigation"),n){let Se=!1;if(b.reloadDocument)Se=!0;else if(iS.test(b.location)){const De=t.history.createURL(b.location);Se=De.origin!==e.location.origin||wl(De.pathname,a)==null}if(Se){B?e.location.replace(b.location):e.location.assign(b.location);return}}A=null;let ie=B===!0?Tt.Replace:Tt.Push,re=J||Ov(R.navigation);if(Db.has(b.status)&&re&&tr(re.formMethod))await ct(ie,K,{submission:nt({},re,{formAction:b.location}),preventScrollReset:k});else if(H)await ct(ie,K,{overrideNavigation:fc(K),fetcherSubmission:re,preventScrollReset:k});else{let Se=fc(K,re);await ct(ie,K,{overrideNavigation:Se,preventScrollReset:k})}}async function U(R,b,j,J,B){let H=await Promise.all([...j.map(re=>Go("loader",B,re,b,s,i,a)),...J.map(re=>re.matches&&re.match&&re.controller?Go("loader",Ko(t.history,re.path,re.controller.signal),re.match,re.matches,s,i,a):{type:gt.error,error:Ln(404,{pathname:re.path})})]),K=H.slice(0,j.length),ie=H.slice(j.length);return await Promise.all([Nv(R,j,K,K.map(()=>B.signal),!1,_.loaderData),Nv(R,J.map(re=>re.match),ie,J.map(re=>re.controller?re.controller.signal:null),!0)]),{results:H,loaderResults:K,fetcherResults:ie}}function ae(){$=!0,S.push(...fe()),te.forEach((R,b)=>{P.has(b)&&(M.push(b),ze(b))})}function Q(R,b,j){let J=zs(_.matches,b);q(R),ue({errors:{[J.route.id]:j},fetchers:new Map(_.fetchers)})}function q(R){let b=_.fetchers.get(R);P.has(R)&&!(b&&b.state==="loading"&&ce.has(R))&&ze(R),te.delete(R),ce.delete(R),X.delete(R),_.fetchers.delete(R)}function ze(R){let b=P.get(R);Ae(b,"Expected fetch controller: "+R),b.abort(),P.delete(R)}function Ke(R){for(let b of R){let j=ur(b),J=Is(j.data);_.fetchers.set(b,J)}}function Y(){let R=[],b=!1;for(let j of X){let J=_.fetchers.get(j);Ae(J,"Expected fetcher: "+j),J.state==="loading"&&(X.delete(j),R.push(j),b=!0)}return Ke(R),b}function pt(R){let b=[];for(let[j,J]of ce)if(J<R){let B=_.fetchers.get(j);Ae(B,"Expected fetcher: "+j),B.state==="loading"&&(ze(j),ce.delete(j),b.push(j))}return Ke(b),b.length>0}function Vt(R,b){let j=_.blockers.get(R)||Wo;return z.get(R)!==b&&z.set(R,b),j}function xt(R){_.blockers.delete(R),z.delete(R)}function Nt(R,b){let j=_.blockers.get(R)||Wo;Ae(j.state==="unblocked"&&b.state==="blocked"||j.state==="blocked"&&b.state==="blocked"||j.state==="blocked"&&b.state==="proceeding"||j.state==="blocked"&&b.state==="unblocked"||j.state==="proceeding"&&b.state==="unblocked","Invalid blocker state transition: "+j.state+" -> "+b.state);let J=new Map(_.blockers);J.set(R,b),ue({blockers:J})}function dn(R){let{currentLocation:b,nextLocation:j,historyAction:J}=R;if(z.size===0)return;z.size>1&&fo(!1,"A router only supports one blocker at a time");let B=Array.from(z.entries()),[H,K]=B[B.length-1],ie=_.blockers.get(H);if(!(ie&&ie.state==="proceeding")&&K({currentLocation:b,nextLocation:j,historyAction:J}))return H}function fe(R){let b=[];return N.forEach((j,J)=>{(!R||R(J))&&(j.cancel(),b.push(J),N.delete(J))}),b}function ve(R,b,j){if(f=R,m=b,g=j||null,!y&&_.navigation===Rh){y=!0;let J=qe(_.location,_.matches);J!=null&&ue({restoreScrollPosition:J})}return()=>{f=null,m=null,g=null}}function Le(R,b){return g&&g(R,b.map(J=>Wb(J,_.loaderData)))||R.key}function et(R,b){if(f&&m){let j=Le(R,b);f[j]=m()}}function qe(R,b){if(f){let j=Le(R,b),J=f[j];if(typeof J=="number")return J}return null}function He(R){s={},l=Kf(R,i,void 0,s)}return E={get basename(){return a},get state(){return _},get routes(){return o},initialize:G,subscribe:Ge,enableScrollRestoration:ve,navigate:Oe,fetch:Yd,revalidate:lt,createHref:R=>t.history.createHref(R),encodeLocation:R=>t.history.encodeLocation(R),getFetcher:ur,deleteFetcher:q,dispose:le,getBlocker:Vt,deleteBlocker:xt,_internalFetchControllers:P,_internalActiveDeferreds:N,_internalSetRoutes:He},E}function Fb(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Jf(t,e,n,r,i,s,o){let l,a;if(s!=null&&o!=="path"){l=[];for(let u of e)if(l.push(u),u.route.id===s){a=u;break}}else l=e,a=e[e.length-1];let c=Rb(i||".",tS(l).map(u=>u.pathnameBase),wl(t.pathname,n)||t.pathname,o==="path");return i==null&&(c.search=t.search,c.hash=t.hash),(i==null||i===""||i===".")&&a&&a.route.index&&!$m(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:rs([n,c.pathname])),Tl(c)}function wv(t,e,n,r){if(!r||!Fb(r))return{path:n};if(r.formMethod&&!Hb(r.formMethod))return{path:n,error:Ln(405,{method:r.formMethod})};let i=()=>({path:n,error:Ln(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=oS(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!tr(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,m)=>{let[y,w]=m;return""+g+y+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!tr(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Ae(typeof FormData=="function","FormData is not available in this environment");let a,c;if(r.formData)a=Qf(r.formData),c=r.formData;else if(r.body instanceof FormData)a=Qf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)a=r.body,c=Iv(a);else if(r.body==null)a=new URLSearchParams,c=new FormData;else try{a=new URLSearchParams(r.body),c=Iv(a)}catch{return i()}let u={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(tr(u.formMethod))return{path:n,submission:u};let h=Xr(n);return e&&h.search&&$m(h.search)&&a.append("index",""),h.search="?"+a,{path:Tl(h),submission:u}}function Vb(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Cv(t,e,n,r,i,s,o,l,a,c,u,h,f,g){let m=g?Object.values(g)[0]:f?Object.values(f)[0]:void 0,y=t.createURL(e.location),w=t.createURL(i),v=g?Object.keys(g)[0]:void 0,E=Vb(n,v).filter((C,k)=>{if(C.route.lazy)return!0;if(C.route.loader==null)return!1;if(Ub(e.loaderData,e.matches[k],C)||o.some($=>$===C.route.id))return!0;let A=e.matches[k],D=C;return Pv(C,nt({currentUrl:y,currentParams:A.params,nextUrl:w,nextParams:D.params},r,{actionResult:m,defaultShouldRevalidate:s||y.pathname+y.search===w.pathname+w.search||y.search!==w.search||sS(A,D)}))}),_=[];return a.forEach((C,k)=>{if(!n.some(M=>M.route.id===C.routeId))return;let A=Bs(u,C.path,h);if(!A){_.push({key:k,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(k),$=Yf(A,C.path),S=!1;c.has(k)?S=!1:l.includes(k)?S=!0:D&&D.state!=="idle"&&D.data===void 0?S=s:S=Pv($,nt({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:m,defaultShouldRevalidate:s})),S&&_.push({key:k,routeId:C.routeId,path:C.path,matches:A,match:$,controller:new AbortController})}),[E,_]}function Ub(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function sS(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Pv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Rv(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ae(i,"No route found in manifest");let s={};for(let o in r){let a=i[o]!==void 0&&o!=="hasErrorBoundary";fo(!a,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!a&&!lb.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,nt({},e(i),{lazy:void 0}))}async function Go(t,e,n,r,i,s,o,l){l===void 0&&(l={});let a,c,u,h=m=>{let y,w=new Promise((v,p)=>y=p);return u=()=>y(),e.signal.addEventListener("abort",u),Promise.race([m({request:e,params:n.params,context:l.requestContext}),w])};try{let m=n.route[t];if(n.route.lazy)if(m)c=(await Promise.all([h(m),Rv(n.route,s,i)]))[0];else if(await Rv(n.route,s,i),m=n.route[t],m)c=await h(m);else if(t==="action"){let y=new URL(e.url),w=y.pathname+y.search;throw Ln(405,{method:e.method,pathname:w,routeId:n.route.id})}else return{type:gt.data,data:void 0};else if(m)c=await h(m);else{let y=new URL(e.url),w=y.pathname+y.search;throw Ln(404,{pathname:w})}Ae(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){a=gt.error,c=m}finally{u&&e.signal.removeEventListener("abort",u)}if(qb(c)){let m=c.status;if(Ob.has(m)){let v=c.headers.get("Location");if(Ae(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!iS.test(v))v=Jf(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,v);else if(!l.isStaticRequest){let p=new URL(e.url),E=v.startsWith("//")?new URL(p.protocol+v):new URL(v),_=wl(E.pathname,o)!=null;E.origin===p.origin&&_&&(v=E.pathname+E.search+E.hash)}if(l.isStaticRequest)throw c.headers.set("Location",v),c;return{type:gt.redirect,status:m,location:v,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:a===gt.error?gt.error:gt.data,response:c};let y,w=c.headers.get("Content-Type");return w&&/\bapplication\/json\b/.test(w)?y=await c.json():y=await c.text(),a===gt.error?{type:a,error:new Um(m,c.statusText,y),headers:c.headers}:{type:gt.data,data:y,statusCode:c.status,headers:c.headers}}if(a===gt.error)return{type:a,error:c};if(zb(c)){var f,g;return{type:gt.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:gt.data,data:c}}function Ko(t,e,n,r){let i=t.createURL(oS(e)).toString(),s={signal:n};if(r&&tr(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=Qf(r.formData):s.body=r.formData}return new Request(i,s)}function Qf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Iv(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function $b(t,e,n,r,i){let s={},o=null,l,a=!1,c={};return n.forEach((u,h)=>{let f=e[h].route.id;if(Ae(!Xs(u),"Cannot handle redirect results in processLoaderData"),wa(u)){let g=zs(t,f),m=u.error;r&&(m=Object.values(r)[0],r=void 0),o=o||{},o[g.route.id]==null&&(o[g.route.id]=m),s[f]=void 0,a||(a=!0,l=nS(u.error)?u.error.status:500),u.headers&&(c[f]=u.headers)}else Yi(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!a&&(l=u.statusCode),u.headers&&(c[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function bv(t,e,n,r,i,s,o,l){let{loaderData:a,errors:c}=$b(e,n,r,i,l);for(let u=0;u<s.length;u++){let{key:h,match:f,controller:g}=s[u];Ae(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let m=o[u];if(!(g&&g.signal.aborted))if(wa(m)){let y=zs(t.matches,f==null?void 0:f.route.id);c&&c[y.route.id]||(c=nt({},c,{[y.route.id]:m.error})),t.fetchers.delete(h)}else if(Xs(m))Ae(!1,"Unhandled fetcher revalidation redirect");else if(Yi(m))Ae(!1,"Unhandled fetcher deferred data");else{let y=Is(m.data);t.fetchers.set(h,y)}}return{loaderData:a,errors:c}}function Av(t,e,n,r){let i=nt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function zs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function kv(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ln(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",l='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Um(t||500,o,new Error(l),!0)}function xv(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Xs(n))return{result:n,idx:e}}}function oS(t){let e=typeof t=="string"?Xr(t):t;return Tl(nt({},e,{hash:""}))}function Bb(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Yi(t){return t.type===gt.deferred}function wa(t){return t.type===gt.error}function Xs(t){return(t&&t.type)===gt.redirect}function zb(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function qb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Hb(t){return Nb.has(t.toLowerCase())}function tr(t){return kb.has(t.toLowerCase())}async function Nv(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let l=n[o],a=e[o];if(!a)continue;let c=t.find(h=>h.route.id===a.route.id),u=c!=null&&!sS(c,a)&&(s&&s[a.route.id])!==void 0;if(Yi(l)&&(i||u)){let h=r[o];Ae(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await aS(l,h,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function aS(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:gt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:gt.error,error:i}}return{type:gt.data,data:t.deferredData.data}}}function $m(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Wb(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Yf(t,e){let n=typeof e=="string"?Xr(e).search:e.search;if(t[t.length-1].route.index&&$m(n||""))return t[t.length-1];let r=tS(t);return r[r.length-1]}function Ov(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function fc(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Gb(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Jo(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}function Kb(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0," _hasFetcherDoneAnything ":!0}}function Is(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xf.apply(this,arguments)}const lS=I.createContext(null),cS=I.createContext(null),uS=I.createContext(null),pd=I.createContext(null),md=I.createContext({outlet:null,matches:[],isDataRoute:!1}),dS=I.createContext(null);function Bm(){return I.useContext(pd)!=null}function Jb(){return Bm()||Ae(!1),I.useContext(pd).location}function Qb(t,e,n){Bm()||Ae(!1);let{navigator:r}=I.useContext(uS),{matches:i}=I.useContext(md),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let a=Jb(),c;if(e){var u;let y=typeof e=="string"?Xr(e):e;l==="/"||(u=y.pathname)!=null&&u.startsWith(l)||Ae(!1),c=y}else c=a;let h=c.pathname||"/",f=l==="/"?h:h.slice(l.length)||"/",g=Bs(t,{pathname:f}),m=tA(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:rs([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:rs([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n);return e&&m?I.createElement(pd.Provider,{value:{location:Xf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Tt.Pop}},m):m}function Yb(){let t=sA(),e=nS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,s)}const Xb=I.createElement(Yb,null);class Zb extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?I.createElement(md.Provider,{value:this.props.routeContext},I.createElement(dS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eA(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(lS);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(md.Provider,{value:e},r)}function tA(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=s.findIndex(a=>a.route.id&&(o==null?void 0:o[a.route.id]));l>=0||Ae(!1),s=s.slice(0,Math.min(s.length,l+1))}return s.reduceRight((l,a,c)=>{let u=a.route.id?o==null?void 0:o[a.route.id]:null,h=null;n&&(h=a.route.errorElement||Xb);let f=e.concat(s.slice(0,c+1)),g=()=>{let m;return u?m=h:a.route.Component?m=I.createElement(a.route.Component,null):a.route.element?m=a.route.element:m=l,I.createElement(eA,{match:a,routeContext:{outlet:l,matches:f,isDataRoute:n!=null},children:m})};return n&&(a.route.ErrorBoundary||a.route.errorElement||c===0)?I.createElement(Zb,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var Zf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zf||{});function nA(t){let e=I.useContext(cS);return e||Ae(!1),e}function rA(t){let e=I.useContext(md);return e||Ae(!1),e}function iA(t){let e=rA(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function sA(){var t;let e=I.useContext(dS),n=nA(Zf.UseRouteError),r=iA(Zf.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}const oA="startTransition",Dv=KP[oA];function aA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=I.useState(n.state),{v7_startTransition:o}=r||{},l=I.useCallback(h=>{o&&Dv?Dv(()=>s(h)):s(h)},[s,o]);I.useLayoutEffect(()=>n.subscribe(l),[n,l]);let a=I.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:h=>n.navigate(h),push:(h,f,g)=>n.navigate(h,{state:f,preventScrollReset:g==null?void 0:g.preventScrollReset}),replace:(h,f,g)=>n.navigate(h,{replace:!0,state:f,preventScrollReset:g==null?void 0:g.preventScrollReset})}),[n]),c=n.basename||"/",u=I.useMemo(()=>({router:n,navigator:a,static:!1,basename:c}),[n,a,c]);return I.createElement(I.Fragment,null,I.createElement(lS.Provider,{value:u},I.createElement(cS.Provider,{value:i},I.createElement(cA,{basename:c,location:i.location,navigationType:i.historyAction,navigator:a},i.initialized?I.createElement(lA,{routes:n.routes,state:i}):e))),null)}function lA(t){let{routes:e,state:n}=t;return Qb(e,void 0,n)}function cA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Tt.Pop,navigator:s,static:o=!1}=t;Bm()&&Ae(!1);let l=e.replace(/^\/*/,"/"),a=I.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof r=="string"&&(r=Xr(r));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:g="default"}=r,m=I.useMemo(()=>{let y=wl(c,l);return y==null?null:{location:{pathname:y,search:u,hash:h,state:f,key:g},navigationType:i}},[l,c,u,h,f,g,i]);return m==null?null:I.createElement(uS.Provider,{value:a},I.createElement(pd.Provider,{children:n,value:m}))}new Promise(()=>{});function uA(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:I.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:I.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cu.apply(this,arguments)}function dA(t,e){return Lb({basename:e==null?void 0:e.basename,future:Cu({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:sb({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||hA(),routes:t,mapRouteProperties:uA}).initialize()}function hA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Cu({},e,{errors:fA(e.errors)})),e}function fA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Um(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}var jv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(jv||(jv={}));var Mv;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mv||(Mv={}));function pA(){I.useEffect(()=>{document.title="Monopoly Gallery"},[]);const t="/Monopoly/gallery/";return d.jsx("main",{children:d.jsx("div",{className:"gallery-main",children:["1.PNG","2.PNG","3.PNG","4.PNG","5.PNG","6.PNG","7.PNG","8.PNG"].map(e=>d.jsx("img",{src:t+e,onClick:()=>{document.location.href=t+e}},e))})})}let Lv=class{constructor(e,n){Ve(this,"id");Ve(this,"username");Ve(this,"icon");Ve(this,"position");Ve(this,"balance");Ve(this,"properties");Ve(this,"isInJail");Ve(this,"jailTurnsRemaining");Ve(this,"getoutCards");Ve(this,"ready");Ve(this,"positions");this.id=e,this.username=n,this.icon=-1,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0,this.ready=!1,this.positions={x:0,y:0}}recieveJson(e){return this.username=e.username,this.position=e.position,this.icon=e.icon,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards,this}toJson(){return{balance:this.balance,icon:this.icon,id:this.id,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,position:this.position,properties:this.properties,username:this.username,getoutCards:this.getoutCards}}get color(){switch(this.icon){case 0:return"#E0115F";case 1:return"#4169e1";case 2:return"#50C878";case 3:return"#FFC000";case 5:return"#FF7F50";case 4:default:return""}}};const mA="/Monopoly/assets/players-69e481c3.png",Fv="/Monopoly/assets/chat-98a8e3f3.png",gA="/Monopoly/assets/chat_new-733d0bcc.png",yA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAjpQTFRFAAAA509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P/m/HAgAAAL50Uk5TABmAwNbYyZApXvX//H8BhTam5vvli0I8oud1DYTvgxQd+p4n/qwzukHITwLUXATfagnoeA/whhb3lB+hKq+9RMpRXwXhbQrqexDyiRj4liGkLLI5R81VA9liBuPrsdAONO0Hcodh/flD9OQg2xfDtZVxUPM1JKXs2s/CtIFvQKgM1x5GVxxokbniKEVWaX6Tp7gLEziInWQVVBIjIt6CWL96dO5OSUtmu7yrbhE9t5cajXfp0U0uJZySfGdSzLBMfx0AAATRSURBVHic7d35fxNFGAbwFxoK9AloFQtigUYDWCqI9aBYMAKCWiwoVpCzgEoFTzwIh1qqiOCJijfgfVRRvG//N7eNNWn2SrKTnbzv531+ntl5v712dnYmJdJoNKVkzNi6xDh7qR8/wYxjYgMsJzlpsgmHbcZQzovuGGP9+zGc8yNDxtom5NIYGVJnm5DLBZEhCduEXC6MDBlnm5BLUiEKqU4UEgCZclHT1FgyrcoQ4OLpl0S+bglprjoEmDFzloFKQxIHBGgY3xK91ODEAwFSl15moNqAxAUB0rPnGKjXN/FBnMy93MQzj3dihQCt89oMFO2VmCHAFfMXGCjbndghwJULrzJQeHEsQID2q68xUProWIEA1163yEDxhbEEAToWX2+g/HysQZwH0s4lBgAjsQhxsjT6ws1I7EKAGzKG7pG2IcCNy4zcI+1DgMTyFTIgwE0rV8mAADffcqsMCNC1+jYZEKB7zVoZEKeC2++QAXGy7k4hEKCup5J7ZA1CgLvWb5ABAe7euEkGBNgsBQKFKEQhCvHK9IKuWzhDphZ03coZ0rYt37XHp01vyXMfixDa3jHSs9OvSaaZA4QyO/5z7PRtgXs4QGjRvYnuLVv9fq6GIbiPAyQ0DmTXMiEQ9N0vBILdpSzTcoBgRwlr5ywg2POAEAgefEgIBNvCljW5QPBwyFozGwgeCX4BwAeCxsC3MowgeDRoKswJgplSINgrBYLlUiDJx4RA0NckBILHn7ALebK5ouxzj5L1PpIVF8T9pa04ezz39jCEYL/XVJgjBAc8dsGxhOCgeyrME4JDrqkwUwj2FU+FuUKwuGgqzBaCp6RA8LQUCCZKgSTnCYGg+xkhEHRtFwLBaiGQ/vyeJNaQuQUbkjhD6g8XDMAYMjDqrCRfyOZnRw3AFlL86M4V4nqvyBSSeq54AJ6Q9BHXADwhC90DsIRM8hiAI6T4KZcrpN/zFVxckOePVpQX3KMc897xzW41ftQEizFkwO/DKJhBjrf4teQFyb7o25IVJGjjFidI6qWAlowg6ZeDWjKCvBLYkg/k1eCWbCCvhWwu5wI5EXbynAnk9dAjdTwgrW+EtmQBSbwZ3pIDxH+CxQsSMMFiBdntsx2otiAn3+p/+53eIEgqU9qVrELePTTcL/uePyS9vsRr2YS8PzDS0/fUTiZ4glUjkPyusu4PfJr4Hr6qJcipgq5ryuxbU5CjBV1Pc4acKeia4gwRc+hYIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhZSdD8vL0pqFRIhCFFKlKOT/DIQPEkc6IkM+sk3IpT4y5GPbhFw+iQyZ9altw1DaA3Y6lZrPdtlWOL/qAZ/4W3o+b7ftyH5hwkF0+MvGrwbzOTCj0oIGK8rX35w143Dn2+8qg1SrngiZMzstA0K0ZFpSBoTo1Lk+GRCi739okAFxbpdnyvkTZrvawPT++JMMCNGqlcdlQIg2bdwvA0K04cjPMiBEk39plQFxKE2DMiBOTq4TAiH69UTA44vt4srLb7+nZECIWv7okAEZ+o80XTIgRGf/zMqAOA/Ie6fIgBDt/Ou0DAjRgvkJGRCitr//kQFxZi49B2VAKL98ZLsOA8ktH9muwkgmdCZlQIjWnrNdgUaj8c6/sjbbOODJyXwAAAAASUVORK5CYII=",vA="/Monopoly/assets/proprety-ed9394e1.png",_A="/Monopoly/assets/settings-ec1fd821.png",EA="/Monopoly/assets/icon-96ad3b33.png",Hi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYCAMAAADS+I/aAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGxQTFRFAAAAoM6mW7BnVK1hdLp+1enX7fbuRqdUL6BCOKJJNKFGHpw1qdOu6PPqPaRNI5054vDkKp8/KJ48mMqf0OfTvt3CkMeXuNq9isSSrdSyf7+IeryDbbd3YbJtMaFE3+/iyePNSapYrdWyxuHJWHk5egAAACR0Uk5TAP//////IP///////3D//9D/////////////////////////OqkGVgAABKFJREFUeJzt3dFW4jAUheGiAm3RFCqIjgIq7/+Og+OoUJImTXLaHdn/tXblW+iyx5SQZUy00dX1zXjoRfTRZJoXRTm7HXod8t2pQn1UjYZeiXTz8lP6+63jxZdUqfp+6NVItqzVUb/ZuqrUSfVDl+9WDkmtvGvrWXNl9WOHb0+I+lSdL23RwZoOdaSRHqx/nC+QDPWh1i/O3ZoK9c/CtLr8xvESiVCfc/PyXK1pUF9apM7WJKibbfsC8xeXq6RAvS5tK3SyJkCdWqVKbTf268BTJ9PCvkKlSrsVnXq3dZK6vK7g1J2r9PC6XlmuhU0d185SuxWa+qq97TVbr1uvhkxdGW57Pa3A1Kez8dRufWu5Hi511PU1tVlhqfc+UqWKqfGKqNRHP+nBalwuKNU8njpYJ/prYlJvWoc2m7XQWyGptqHNar3TXRWReuUwyrRbS50VkGofTx2s8wSoE5fx1MuKRr0rOtzgt1kXO3Dq3H1os1nzphWLerynGFzdeIgAirr0vUXStzi1IlE7D2226iUodd1tEHepOrbiUN/jSw+v6ysgVb+nGNxsD0e9l5Eefoa/rSBU7/HUwbqCogaMp+5WCGrQeOpgXcNQA8dTe7M1CPVKWnp4XZ8gqG8xhjZb1fvwVMc9xeCq26GpscZTe9XI5avkpLuyL+nB6vJFYtJx3p/ULSnpsvv+k3RC0ujjaYRkpOePvAIkIr2VGmWCkpB67ilKJyA1PfI6dPGlokNbSNGlwkNbQLGl7Y+8DlpkaQ9Dm3dxpRH2FOWKKo2ypyhWROjX+xRRiyeNt6coVDRp1D1FkWJJl6g3Dj9Fku4hb/BPiyMV2FOMXxSp7n2KeMWQCu0pxi6CFHVoaxYuhR3amgVLcYe2ZqFS4KGtWaA0+EHQHguTQg9tzYKk2ENbswDoBHxoa+Yvnfe2pxgpb+kOfmhr5isdp/NH5itP6Svi/pMlP2nzGJ0k8pKmMbQ1W9phZ2HuKVo7fqjWMdA9RXtVV6vgg6DS/TxU61Qy46mu74dqXUpnPNX2/0FTlxIaT/U5W5H3FB3796CpvaTGU1NO1rTGU2MfD9W219+DoNJVlpNq5z0+CCpd++mt+HuKXapbrAnsKXbKfHprCnuK3TJZk9hT7Jj+pFqR9ykOnu6k2kT2FDt3fqJpKnuK3WtaEx5PreXPx9LnX/ZX5rTjE02TH9os/VjF36c4eF8nmqa0e+rb9uVSpJ9WxLcFSVSvsseLeFGVKm4uh7rJ1r/6T+pP5eHGv6c3FQ9dtcuyuaq35pL6B0xhbvb5H4n9vbmHt1R+wPN8+mbs5VU/o5+2SuOuMXffvDC3T+F1reJ8QNkG//e1jPRxRyP8caA+OwjQr1t86sJw9iyppJKKFamkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJJKKlikkkoqqWCRSiqppIJFKqmkkgoWqaSSSipYpJJKKqlgkUoqqaSCRSqppJIKFqmkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJL6QcU/dTQWNYFDR8s40iyDp27PPvPDt32FfcDqdhpLmmXjTZG3HA09cErzmTWX3V/etxxj46OriAAAAABJRU5ErkJggg==",Wi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYBAMAAAAXCGLbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAA9QTFRFAAAAswAAswAAswAAswAAZtGxUwAAAAV0Uk5TAP8gcNCNz+2CAAACfklEQVR4nO3di1HDQAyEYQwUEAUKgA5IB9B/U+QJse8hXbx7B5lVAfrmzxjM+Aw8PPyzmcz6o49mtumu7vZq99jnA9o91k7TF53Oat9Ys2qsJYNAp59t+ViO6q2jqNPVumwsRXX3MdRpti8Xy1D9hQR1WizMxBLUwEa8ukzNxeLVdGO6Eq6+Z9QkFq0+ZdB0J1rNokksWE0vpexSsFpAl7FYtZS63IpVi+giFqqWUxdroWoFncci1VrqfC9SraK25aj1VLM3iuqg9sJQvVSzD4LqovaKV3N3uOV8otX8Ha60G6V+hdTLtwqQ6l9Ks+UgNYheYjFqNPWyHaOG0XMsRI2nntdD1Ab0FItQW1JP+xFqE3qMBahtqUcAoDaih9j1amvqQVivNqP72NVqe+qeWKs+3oDaZq26u0XNTBN6y+e7XkWhTSostUmFoS0qLrVFxaENKjC1QQWicRWZGleRaFiFpoZVKBpVsalRFYsG1d0I9RmMxlQ0GlLBl1JQhaMRFZ8aUfFoQCWkBlQC6quMVF9loK5KSXVVCuqpnFRP5aCOGnkgC1fhd7iQykKrKulSclQaWlN5qTWVh1ZehCKmVmKZaDGWmlqM5aKFWHJq+K0v8ORi6anBF6Hgk8Z2SE1jY0eOa2cZGztyXD0DPl/z3yAhzYjUeWw39Dq2X+p1bEf0N7Znau3AnzojUstn4OQZkVo6FqbPiNT8SWmHkUpXR1xNxnskUJnNkC+d5AfUQQ8RGZdX4FeHxjwHvxd166NSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKl/UA39hfo7USMo/CPu/88dCvMNgwpEBhudalAAAAAASUVORK5CYII=",SA="/Monopoly/assets/rails-b5a8f288.png",TA="/Monopoly/assets/elects-0ca4f3b8.png",wA="/Monopoly/assets/water-7bf83b59.png";function mi(t){try{switch(t.toLowerCase()){case"red":return"#ED1B24";case"darkgreen":return"#1FB25A";case"darkblue":return"#0072BB";case"yellow":return"#FEF200";case"purple":return"#955436";case"lightgreen":return"#AAE0FA";case"orange":return"#F7941D";case"violet":return"#D93A96";default:return t.toLowerCase()}}catch{return t}}function Zs({street:t,utility:e,railroad:n}){return t!==void 0?d.jsx(CA,{args:t}):e!==void 0?d.jsx(RA,{args:e}):n!==void 0?d.jsx(PA,{args:n}):d.jsx(d.Fragment,{})}function CA({args:t}){const e=mi(t.group);return d.jsxs("div",{className:"street-card",children:[d.jsxs("div",{style:{backgroundColor:e},children:[d.jsx("p",{children:"title dreed"}),d.jsx("h3",{children:t.title})]}),d.jsxs("div",{children:[d.jsxs("ol",{children:[d.jsxs("li",{children:[d.jsx("p",{children:"Rent"}),d.jsxs("p",{children:[t.rent,"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with color set"}),d.jsxs("p",{children:[t.rentWithColorSet,"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with 1 house"}),d.jsxs("p",{children:[t.multpliedrent[0],"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with 2 houses"}),d.jsxs("p",{children:[t.multpliedrent[1],"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with 3 houses"}),d.jsxs("p",{children:[t.multpliedrent[2],"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with 4 houses"}),d.jsxs("p",{children:[t.multpliedrent[3],"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rent with hotel"}),d.jsxs("p",{children:[t.multpliedrent[4],"M"]})]})]}),d.jsx("hr",{}),d.jsxs("ol",{children:[d.jsxs("li",{children:[d.jsx("p",{children:"House cost"}),d.jsxs("p",{children:[t.housesCost,"M each"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Hotels cost"}),d.jsxs("label",{children:[t.hotelsCost,"M each",d.jsx("br",{}),d.jsx("p",{style:{fontSize:12},children:"(plus 4 houses)"})]})]})]}),d.jsx("br",{}),d.jsx("hr",{}),d.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function PA({args:t}){return d.jsxs("div",{className:"street-card",children:[d.jsxs("div",{"data-clear":!0,children:[d.jsx("img",{"data-type":"rail",src:SA.replace("/public",""),alt:""}),d.jsx("h3",{children:t.title})]}),d.jsxs("div",{children:[d.jsxs("ol",{children:[d.jsxs("li",{children:[d.jsx("p",{children:"Rent"}),d.jsxs("p",{children:[25,"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"If 2 stations are owned"}),d.jsxs("p",{children:[50,"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"If 3 stations are owned"}),d.jsxs("p",{children:[100,"M"]})]}),d.jsxs("li",{children:[d.jsx("p",{children:"If 4 stations are owned"}),d.jsxs("p",{children:[200,"M"]})]})]}),d.jsx("h4",{children:"mortgage Value 100M"}),d.jsx("hr",{}),d.jsx("br",{}),d.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function RA({args:t}){return d.jsxs("div",{className:"street-card",children:[d.jsxs("div",{"data-clear":!0,children:[d.jsx("center",{children:d.jsx("img",{"data-type":t.type,src:t.type==="electricity"?TA.replace("/public",""):wA.replace("/public",""),alt:""})}),d.jsx("h3",{children:t.title})]}),d.jsxs("div",{children:[d.jsxs("p",{style:{lineHeight:1,paddingInline:10},children:["If one Utility is owned, rent is 4 times amount shown on dice.",d.jsx("br",{}),d.jsx("br",{}),"If both Utilities are owned, rent is 10 times amount shown on dice"]}),d.jsx("hr",{}),d.jsx("br",{}),d.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}const IA=[{name:"Mediterranean Avenue",id:"mediterraneanave",posistion:1,price:60,rent:2,multpliedrent:[10,30,90,160,250],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1314,rel:{Square:"Mediterranean Avenue","Probability % (Jail Short)":2.1314,Rank:36,"Probability % (Jail Long)":2.0073},ohousecost:50,oprice:60,averageProbability:2.06935},{name:"Baltic Avenue",id:"balticave",posistion:3,price:60,rent:4,multpliedrent:[20,60,180,320,450],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1624,rel:{Square:"Baltic Avenue","Probability % (Jail Short)":2.1624,Rank:35,"Probability % (Jail Long)":2.0369},ohousecost:50,oprice:60,averageProbability:2.09965},{name:"Oriental Avenue",id:"orientalave",posistion:6,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Oriental Avenue","Probability % (Jail Short)":2.2621,Rank:32,"Probability % (Jail Long)":2.1317},ohousecost:50,oprice:100,averageProbability:2.1969000000000003},{name:"Vermont Avenue",id:"vermontave",posistion:8,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Vermont Avenue","Probability % (Jail Short)":2.321,Rank:28,"Probability % (Jail Long)":2.1874},ohousecost:50,oprice:100,averageProbability:2.2542},{name:"Connecticut Avenue",id:"connecticutave",posistion:9,price:120,rent:8,multpliedrent:[40,100,300,450,600],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Connecticut Avenue","Probability % (Jail Short)":2.3003,Rank:30,"Probability % (Jail Long)":2.168},ohousecost:50,oprice:120,averageProbability:2.23415},{name:"St. Charles Place",id:"stcharlesplace",posistion:11,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. Charles Place","Probability % (Jail Short)":2.7017,Rank:15,"Probability % (Jail Long)":2.556},ohousecost:100,oprice:140,averageProbability:2.62885},{name:"States Avenue",id:"statesave",posistion:13,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"States Avenue","Probability % (Jail Short)":2.3721,Rank:29,"Probability % (Jail Long)":2.1741},ohousecost:100,oprice:140,averageProbability:2.2731000000000003},{name:"Virginia Avenue",id:"virginiaave",posistion:14,price:160,rent:12,multpliedrent:[60,180,500,700,900],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Virginia Avenue","Probability % (Jail Short)":2.4649,Rank:22,"Probability % (Jail Long)":2.4255},ohousecost:100,oprice:160,averageProbability:2.4452},{name:"St. James Place",id:"stjamesplace",posistion:16,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. James Place","Probability % (Jail Short)":2.7924,Rank:9,"Probability % (Jail Long)":2.6802},ohousecost:100,oprice:180,averageProbability:2.7363},{name:"Tennessee Avenue",id:"tennesseeave",posistion:18,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Tennessee Avenue","Probability % (Jail Short)":2.9356,Rank:6,"Probability % (Jail Long)":2.821},ohousecost:100,oprice:180,averageProbability:2.8783000000000003},{name:"New York Avenue",id:"newyorkave",posistion:19,price:200,rent:16,multpliedrent:[80,220,600,800,1e3],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"New York Avenue","Probability % (Jail Short)":3.0852,Rank:7,"Probability % (Jail Long)":2.8118},ohousecost:100,oprice:200,averageProbability:2.9485},{name:"Kentucky Avenue",id:"kentuckyave",posistion:21,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Kentucky Avenue","Probability % (Jail Short)":2.8358,Rank:12,"Probability % (Jail Long)":2.6143},ohousecost:150,oprice:220,averageProbability:2.72505},{name:"Indiana Avenue",id:"indianaave",posistion:23,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Indiana Avenue","Probability % (Jail Short)":2.7357,Rank:14,"Probability % (Jail Long)":2.5671},ohousecost:150,oprice:220,averageProbability:2.6513999999999998},{name:"Illinois Avenue",id:"illinoisave",posistion:24,price:240,rent:20,multpliedrent:[100,300,750,925,1100],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Illinois Avenue","Probability % (Jail Short)":3.1858,Rank:2,"Probability % (Jail Long)":2.9929},ohousecost:150,oprice:240,averageProbability:3.08935},{name:"Atlantic Avenue",id:"atlanticave",posistion:26,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Atlantic Avenue","Probability % (Jail Short)":2.7072,Rank:16,"Probability % (Jail Long)":2.537},ohousecost:150,oprice:260,averageProbability:2.6220999999999997},{name:"Ventnor Avenue",id:"ventnorave",posistion:27,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Ventnor Avenue","Probability % (Jail Short)":2.6789,Rank:18,"Probability % (Jail Long)":2.5191},ohousecost:150,oprice:260,averageProbability:2.599},{name:"Marvin Gardens",id:"marvingardens",posistion:29,price:280,rent:22,multpliedrent:[120,360,850,1025,1200],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Marvin Gardens","Probability % (Jail Short)":2.5861,Rank:21,"Probability % (Jail Long)":2.4381},ohousecost:150,oprice:280,averageProbability:2.5121},{name:"Pacific Avenue",id:"pacificave",posistion:31,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pacific Avenue","Probability % (Jail Short)":2.6774,Rank:17,"Probability % (Jail Long)":2.5236},ohousecost:200,oprice:300,averageProbability:2.6005000000000003},{name:"North Carolina Avenue",id:"northcarolinaave",posistion:32,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"North Carolina Avenue","Probability % (Jail Short)":2.6252,Rank:20,"Probability % (Jail Long)":2.4721},ohousecost:200,oprice:300,averageProbability:2.5486500000000003},{name:"Pennsylvania Avenue",id:"pennsylvaniaave",posistion:34,price:320,rent:28,multpliedrent:[150,450,1e3,1200,1400],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pennsylvania Avenue","Probability % (Jail Short)":2.5006,Rank:23,"Probability % (Jail Long)":2.3531},ohousecost:200,oprice:320,averageProbability:2.42685},{name:"Park Place",id:"parkplace",posistion:37,price:350,rent:35,multpliedrent:[175,500,1100,1300,1500],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Park Place","Probability % (Jail Short)":2.1864,Rank:33,"Probability % (Jail Long)":2.0595},ohousecost:200,oprice:350,averageProbability:2.12295},{name:"Boardwalk",id:"boardwalk",posistion:39,price:400,rent:50,multpliedrent:[200,600,1400,1700,2e3],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Boardwalk","Probability % (Jail Short)":2.626,Rank:19,"Probability % (Jail Long)":2.4832},ohousecost:200,oprice:400,averageProbability:2.5545999999999998},{name:"Electric Company",id:"electriccompany",posistion:12,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Electric Company","Probability % (Jail Short)":2.604,Rank:13,"Probability % (Jail Long)":2.614},oprice:150,averageProbability:2.609},{name:"Water Works",id:"waterworks",posistion:28,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Water Works","Probability % (Jail Short)":2.8074,Rank:10,"Probability % (Jail Long)":2.6507},oprice:150,averageProbability:2.72905},{name:"Reading Railroad",id:"readingrailroad",posistion:5,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,probability:2.1314,rel:{Square:"Reading Railroad","Probability % (Jail Short)":2.9631,Rank:8,"Probability % (Jail Long)":2.801},oprice:200,averageProbability:2.88205},{name:"Pennsylvania Railroad",id:"pennsylvaniarailroad",posistion:15,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,rel:{Square:"Pennsylvania Railroad","Probability % (Jail Short)":2.92,Rank:11,"Probability % (Jail Long)":2.6354},oprice:200,averageProbability:2.7777000000000003},{name:"B. & O. Railroad",id:"borailroad",posistion:25,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.975},{name:"Short Line Railroad",id:"shortlinerailroad",posistion:35,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.3609500000000003},{name:"Go",id:"go",posistion:0,group:"Special",rel:{Square:"Go","Probability % (Jail Short)":3.0961,Rank:3,"Probability % (Jail Long)":2.9143},averageProbability:3.0052},{name:"Income Tax",id:"incometax",group:"Special",posistion:4,rel:{Square:"Income Tax","Probability % (Jail Short)":2.3285,Rank:27,"Probability % (Jail Long)":2.1934},averageProbability:2.2609500000000002},{name:"Jail / Just Visiting",id:"jail",posistion:10,group:"Special",averageProbability:8.897},{name:"Chance",id:"chance",group:"Special",posistion:36,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:7,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:22,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Free Parking",id:"freeparking",group:"Special",posistion:20,rel:{Square:"Free Parking","Probability % (Jail Short)":2.8836,Rank:5,"Probability % (Jail Long)":2.8253},averageProbability:2.85445},{name:"Community Chest",id:"communitychest",group:"Special",posistion:2,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:33,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:17,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Go To Jail",id:"gotojail",group:"Special",posistion:30,rel:{Square:"Go To Jail","Probability % (Jail Short)":0,Rank:41,"Probability % (Jail Long)":0},averageProbability:0},{name:"Luxury Tax",id:"luxerytax",group:"Special",posistion:38,averageProbability:2.116}],bA=[{id:"go"},{id:"mediterraneanave"},{id:"communitychest"},{id:"balticave"},{id:"incometax"},{id:"readingrailroad"},{id:"orientalave"},{id:"chance"},{id:"vermontave"},{id:"connecticutave"},{id:"jail"},{id:"stcharlesplace"},{id:"electriccompany"},{id:"statesave"},{id:"virginiaave"},{id:"pennsylvaniarailroad"},{id:"stjamesplace"},{id:"communitychest"},{id:"tennesseeave"},{id:"newyorkave"},{id:"freeparking"},{id:"kentuckyave"},{id:"chance"},{id:"indianaave"},{id:"illinoisave"},{id:"borailroad"},{id:"atlanticave"},{id:"ventnorave"},{id:"waterworks"},{id:"marvingardens"},{id:"gotojail"},{id:"pacificave"},{id:"northcarolinaave"},{id:"communitychest"},{id:"pennsylvaniaave"},{id:"shortlinerailroad"},{id:"chance"},{id:"parkplace"},{id:"luxerytax"},{id:"boardwalk"}],AA=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Advance to Illinois Avenue - If you pass Go, collect $200",action:"move",tileid:"illinoisave"},{title:"Advance to St. Charles Place - If you pass Go, collect $200",action:"move",tileid:"stcharlesplace"},{title:"Advance token to nearest Utility. If unowned, you may buy it from the Bank. If owned, throw dice and pay owner a total ten times the amount thrown.",action:"movenearest",groupid:"utility",rentmultiplier:10},{title:"Advance token to the nearest Railroad and pay owner twice the rental to which he/she is otherwise entitled. If Railroad is unowned, you may buy it from the Bank.",action:"movenearest",groupid:"railroad",rentmultiplier:2},{title:"Bank pays you dividend of $50",action:"addfunds",amount:50},{title:"Get out of Jail Free - This card may be kept until needed, or traded/sold",action:"jail",subaction:"getout"},{title:"Go Back 3 Spaces",action:"move",count:-3},{title:"Go to Jail - Go directly to Jail - Do not pass Go, do not collect $200",action:"jail",subaction:"goto"},{title:"Make general repairs on all your property - For each house pay $25 - For each hotel $100",action:"propertycharges",buildings:25,hotels:100},{title:"Pay poor tax of $15",action:"removefunds",amount:15},{title:"Take a trip to Reading Railroad - If you pass Go, collect $200",action:"move",tileid:"readingrailroad"},{title:"Take a walk on the Boardwalk - Advance token to Boardwalk",action:"move",tileid:"boardwalk"},{title:"You have been elected Chairman of the Board - Pay each player $50",action:"removefundstoplayers",amount:50},{title:"Your building loan matures - Collect $150",action:"addfunds",amount:50}],kA=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Bank error in your favor - Collect $200 ",action:"addfunds",amount:200},{title:"Doctor fee - Pay $50",action:"removefunds",amount:50},{title:"From sale of stock you get $50",action:"addfunds",amount:50},{title:"Get Out of Jail Free",action:"jail",subaction:"getout"},{title:"Go to Jail - Go directly to jail - Do not pass Go - Do not collect $200",action:"jail",subaction:"goto"},{title:"Grand Opera Night - Collect $50 from every player for opening night seats",action:"addfundsfromplayers",amount:50},{title:"Holiday Fund matures - Receive $100",action:"addfunds",amount:100},{title:"Income tax refund - Collect $20",action:"addfunds",amount:20},{title:"Life insurance matures - Collect $100",action:"addfunds",amount:100},{title:"Pay hospital fees of $100",action:"removefunds",amount:100},{title:"Pay school fees of $150",action:"removefunds",amount:150},{title:"Receive $25 consultancy fee",action:"addfunds",amount:25},{title:"You are assessed for street repairs - $40 per house - $115 per hotel",action:"propertycharges",buildings:40,hotels:115},{title:"You have won second prize in a beauty contest - Collect $10",action:"addfunds",amount:10},{title:"You inherit $100",action:"addfunds",amount:100}],gr={properties:IA,tiles:bA,chance:AA,communitychest:kA};function Vv(t){const e=new Map(gr.properties.map(s=>[s.posistion??0,s]));let n={},r="Utilities";const i=e.get(t.posistion);if(i)return i.group==="Special"?d.jsx(d.Fragment,{}):(i.group==="Utilities"?(r="Utilities",n={cardCost:i.price??-1,title:i.name??"error",type:i.id.includes("water")?"water":"electricity"}):i.group==="Railroad"?(r="Railroad",n={cardCost:i.price??-1,title:i.name??"error"}):(r="Street",n={cardCost:i.price??-1,hotelsCost:i.ohousecost??-1,housesCost:i.housecost??-1,rent:i.rent??-1,multpliedrent:i.multpliedrent?[i.multpliedrent[0]??-1,i.multpliedrent[1]??-1,i.multpliedrent[2]??-1,i.multpliedrent[3]??-1,i.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:i.rent?i.rent*2:-1,title:i.name??"error",group:i.group}),d.jsx("div",{style:t.style,onClick:t.OnClick,children:r==="Railroad"?d.jsx(Zs,{railroad:n}):r==="Utilities"?d.jsx(Zs,{utility:n}):d.jsx(Zs,{street:n})}))}const xA=I.forwardRef((t,e)=>{const n=new Map(gr.properties.map(m=>[m.posistion??0,m])),r={isRailroad:m=>{const y=n.get(m),w=t.players.filter(v=>v.id===t.socket.id)[0];return y!==void 0&&y.group==="Railroad"&&w.properties.filter(v=>v.group==="Railroad"&&v.posistion===m).length>0},isMortaged:m=>{const w=t.players.filter(v=>v.id===t.socket.id)[0].properties.filter(v=>v.group==="Railroad"&&v.posistion===m)[0];return w.morgage!==void 0&&w.morgage===!0},buttons:{cancel:()=>{var v;const m=s,y=t.players.filter(p=>p.id===t.socket.id)[0],w=y.properties.filter(p=>p.group==="Railroad"&&p.posistion===m)[0];w.morgage=!1,t.Morgage.onCanc(10,((v=n.get(w.posistion))==null?void 0:v.name)??""),o(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:y.toJson()})},pay:()=>{var v;const m=s,y=t.players.filter(p=>p.id===t.socket.id)[0],w=y.properties.filter(p=>p.group==="Railroad"&&p.posistion===m)[0];w.morgage=!0,t.Morgage.onMort(100,((v=n.get(w.posistion))==null?void 0:v.name)??""),o(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:y.toJson()})}}},i=t.players.filter(m=>m.id===t.socket.id)[0];if(i===void 0)return d.jsx(d.Fragment,{children:"Could not read local player!"});I.useImperativeHandle(e,()=>({clickedOnBoard(m){f(-1),a(""),u([]),o(m)}}));const[s,o]=I.useState(-1),[l,a]=I.useState(""),[c,u]=I.useState([]),[h,f]=I.useState(-1);function g(){f(-1),o(-1);const m=Array.from(n.values()).filter(p=>p.group!="Special"),y=m.map(p=>[p.name,p.posistion]),w=m.map(p=>p.posistion.toString()),v=[];for(const p of w)p.includes(l)&&v.push(parseInt(p));for(const p of y)p[0].toLowerCase().includes(l.toLowerCase())&&v.push(p[1]);u(v)}return I.useEffect(g,[l]),d.jsxs(d.Fragment,{children:[d.jsx("h3",{style:{textAlign:"center"},children:"Propreties"}),d.jsx("input",{type:"text",onChange:m=>a(m.currentTarget.value),placeholder:"Search for global cards..."}),d.jsx("div",{className:"propertyList",style:{overflowY:"auto",position:"relative",flexGrow:1,cursor:"pointer"},children:l.length>0?c.map((m,y)=>{var w,v;return d.jsx(d.Fragment,{children:h===m?d.jsx("center",{children:d.jsx(Vv,{style:{cursor:"pointer",marginBottom:25,marginTop:10},posistion:m,OnClick:()=>{f(-1)}},y)}):d.jsxs("div",{onClick:()=>f(m),className:"proprety-nav",children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(((w=n.get(m))==null?void 0:w.group)??"")}}),d.jsx("h3",{children:((v=n.get(m))==null?void 0:v.name)??""})]},y)})}):s===-1?i.properties.map((m,y)=>{var w;return d.jsxs("div",{onClick:()=>{o(m.posistion)},className:"proprety-nav",children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(m.group)}}),d.jsx("h3",{style:m.morgage!==void 0&&m.morgage===!0?{textDecoration:"line-through white"}:{},children:((w=n.get(m.posistion))==null?void 0:w.name)??""}),d.jsx("div",{children:m.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof m.count=="number"&&m.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:m.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},y)}):d.jsx("div",{children:d.jsxs("center",{style:{transform:"scale(1) translateY(-50%) translateX(-50%)",position:"absolute",top:"50%",left:"50%"},children:[d.jsx(Vv,{style:{filter:"drop-shadow(5px 5px 0px rgba(255,255,255,20%))"},posistion:s,OnClick:()=>{o(-1)}}),r.isRailroad(s)&&t.allowMortgage?d.jsxs(d.Fragment,{children:[" ",d.jsx("h2",{children:"Actions"}),r.isMortaged(s)?d.jsx("button",{className:"railroads-actions",onClick:r.buttons.cancel,children:"Cancel Mortgage [Pay 10M]"}):d.jsxs("button",{className:"railroads-actions",onClick:r.buttons.pay,children:[" ","Mortgage [Pay 100M]"]})]}):d.jsx(d.Fragment,{})]})})})]})}),hS="/Monopoly/assets/roll-893dc331.png",NA=I.forwardRef((t,e)=>{var c;const n=t.players.filter(u=>u.id===t.socket.id)[0],r=new Map(gr.properties.map(u=>[u.posistion??0,u])),[i,s]=I.useState(),[o,l]=I.useState();I.useEffect(()=>{l(JSON.parse(document.cookie).settings)},[document.cookie]),I.useImperativeHandle(e,()=>({clickdOnPlayer(u){for(const h of t.players)h.id===u&&s(h)}}));function a(u){var h=0;for(const f of u)h+=f;return h}return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:n!==void 0?"container-top":"",style:n===void 0?{height:"100%"}:{},children:[d.jsx("h3",{"data-clickable":i!==void 0,style:{textAlign:"center"},onClick:()=>{i!==void 0&&s(void 0)},children:"Players"}),i!==void 0?d.jsxs(d.Fragment,{children:[d.jsxs("table",{children:[d.jsxs("tr",{children:[d.jsx("td",{children:"balance"}),d.jsx("td",{children:i.balance})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"position"}),d.jsxs("td",{children:[(c=r.get(i.position))==null?void 0:c.name," [",i.position,"]"]})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"properties counts"}),d.jsx("td",{children:i.properties.length})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"houses counts"}),d.jsx("td",{children:a(i.properties.filter(u=>typeof u.count=="number").map(u=>u.count))})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"hotel counts"}),d.jsx("td",{children:i.properties.filter(u=>u.count==="h").length})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"get-out cards"}),d.jsx("td",{children:i.getoutCards})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"is in jail"}),d.jsx("td",{children:i.isInJail.toString()})]})]}),i.properties.length===0?d.jsx("p",{}):d.jsx(d.Fragment,{children:i.properties.map((u,h)=>{var f;return d.jsxs("div",{onClick:()=>{s(void 0),t.clickedOnPlayer(u.posistion)},className:"proprety-nav",children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(u.group)}}),d.jsx("h3",{style:u.morgage!==void 0&&u.morgage===!0?{textDecoration:"line-through white"}:{},children:((f=r.get(u.posistion))==null?void 0:f.name)??""}),d.jsx("div",{children:u.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof u.count=="number"&&u.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:u.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},h)})})]}):d.jsx("div",{className:"playersInfos",children:t.players.map((u,h)=>d.jsx(d.Fragment,{children:d.jsxs("div",{className:"playerInfo",style:o!==void 0&&o.accessibility[4]===!0?{backgroundColor:u.color}:{},onClick:()=>{const f=document.querySelector(`div.player[player-id="${u.id}"]`);f.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{f.style.animation=""},1*1e3)},onDoubleClick:()=>{s(u)},children:[d.jsxs("p",{children:[o!=null&&o.accessibility[2]?`[${u.id}]`:""," ",u.username]},60),u.id===t.currentTurn?d.jsx("img",{src:hS.replace("public/","")}):d.jsx(d.Fragment,{}),u.getoutCards>0?d.jsx("p",{className:"orange",children:u.getoutCards},61):d.jsx(d.Fragment,{}),d.jsx("p",{children:u.balance},62),d.jsx("p",{children:u.properties.length},63)]},`playersInfos[${h}]`)}))})]}),n!==void 0?d.jsx(d.Fragment,{children:d.jsx("div",{className:"container-bottom",style:{},children:d.jsxs("p",{style:{margin:0,marginTop:5},children:[" ",n.balance," M"]})})}):d.jsx(d.Fragment,{})]})});function Gi(t){const[e,n]=I.useState(t.defaultValue??0);return d.jsxs("div",{className:"slider-component",children:[d.jsx("input",{type:"range",onChange:r=>{var i;(i=t.onChange)==null||i.call(t,r),n(parseFloat(r.currentTarget.value))},defaultValue:t.defaultValue??50,step:t.step??1,max:t.max??100,min:t.min??0}),e.toFixed(t.fixedNum??0),t.suffix]})}function fS(){const t=JSON.parse(document.cookie),e={gameEngine:I.useState("2d"),numbers:[I.useState(t.settings?t.settings.accessibility[0]:45),I.useState(t.settings?t.settings.accessibility[1]:5),I.useState(t.settings?t.settings.audio[0]:100),I.useState(t.settings?t.settings.audio[1]:100),I.useState(t.settings?t.settings.audio[2]:25)],booleans:[I.useState(t.settings?t.settings.accessibility[2]:!1),I.useState(t.settings?t.settings.accessibility[3]:!1),I.useState(t.settings?t.settings.accessibility[4]:!1),I.useState(t.settings?t.settings.notifications:!1)]};return I.useEffect(()=>{const n=JSON.parse(document.cookie),r={gameEngine:e.gameEngine[0],accessibility:[e.numbers[0][0],e.numbers[1][0],e.booleans[0][0],e.booleans[1][0],e.booleans[2][0]],audio:[e.numbers[2][0],e.numbers[3][0],e.numbers[4][0]],notifications:e.booleans[3][0]};document.cookie=JSON.stringify({login:n.login,settings:r})},[e.gameEngine[0],...e.numbers.map(n=>n[0]),,...e.booleans.map(n=>n[0])]),d.jsxs(d.Fragment,{children:[d.jsx("h3",{style:{textAlign:"center"},children:"Settings"}),d.jsxs("div",{className:"scroll",children:[d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Game Engine "}),d.jsx("div",{children:d.jsxs("select",{name:"",id:"",children:[d.jsx("option",{children:"2D"}),d.jsx("option",{children:"3D"})]})})]}),d.jsxs("p",{style:{marginBlock:0,marginInline:10,fontSize:12,opacity:.5},children:["3d isnt developed yet"," "]}),d.jsx("br",{}),d.jsx("hr",{}),d.jsx("h2",{children:"Accessibility"}),d.jsxs("div",{children:[d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Rotation Speed "}),d.jsx(Gi,{step:90/8,min:0,max:180,defaultValue:e.numbers[0][0],onChange:n=>{e.numbers[0][1](parseFloat(n.currentTarget.value))},fixedNum:2,suffix:" deg"})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Scale Speed "}),d.jsx(Gi,{step:1,min:1,max:10,defaultValue:e.numbers[1][0],onChange:n=>{e.numbers[1][1](parseFloat(n.currentTarget.value))},fixedNum:0})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Show Users Id "}),d.jsx("div",{children:d.jsx("input",{defaultChecked:e.booleans[0][0],type:"checkbox",onChange:n=>{e.booleans[0][1](n.currentTarget.checked)}})})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Show Users Mouse "}),d.jsx("div",{children:d.jsx("input",{defaultChecked:e.booleans[1][0],type:"checkbox",onChange:n=>{e.booleans[1][1](n.currentTarget.checked)}})})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Add Colors to Users "}),d.jsx("div",{children:d.jsx("input",{defaultChecked:e.booleans[2][0],type:"checkbox",onChange:n=>{e.booleans[2][1](n.currentTarget.checked)}})})]}),d.jsx("br",{}),d.jsx("hr",{})]}),d.jsx("h2",{children:"Audio"}),d.jsxs("div",{children:[d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Master Audio "}),d.jsx(Gi,{step:1,min:0,max:100,defaultValue:e.numbers[2][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[2][1](parseFloat(n.currentTarget.value))}})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"SFX Audio "}),d.jsx(Gi,{step:1,min:0,max:100,defaultValue:e.numbers[3][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[3][1](parseFloat(n.currentTarget.value))}})]}),d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Music Audio "}),d.jsx(Gi,{step:1,min:0,max:100,defaultValue:e.numbers[4][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[4][1](parseFloat(n.currentTarget.value))}})]}),d.jsx("br",{}),d.jsx("hr",{})]}),d.jsx("h2",{children:"Notifications"}),d.jsx("div",{children:d.jsxs("div",{className:"settingsItem",children:[d.jsx("p",{children:"Notify Balance Movements "}),d.jsx("div",{children:d.jsx("input",{defaultChecked:e.booleans[3][0],type:"checkbox",onChange:n=>{e.booleans[3][1](n.currentTarget.checked)}})})]})})]})]})}const OA=I.forwardRef((t,e)=>{const[n,r]=I.useState(0),[i,s]=I.useState([]),[o,l]=I.useState(new Date);function a(){f(t.players)}I.useEffect(()=>{const y=setInterval(()=>{l(new Date)},1e3);return()=>{clearInterval(y)}},[t.time]);function c(y){const w=new Date(y),v=w.getHours().toString().padStart(2,"0"),p=w.getMinutes().toString().padStart(2,"0");return`${v}:${p}`}function u(y,w){const v=y.getTime(),E=w.getTime()-v,_=Math.floor(E/36e5),C=Math.floor(E%36e5/6e4),k=Math.floor(E%6e4/1e3),A=_.toString().padStart(2,"0"),D=C.toString().padStart(2,"0"),$=k.toString().padStart(2,"0");return _===0?`${D}:${$}`:`${A}:${D}:${$}`}const[h,f]=I.useState(t.players);I.useImperativeHandle(e,()=>({addMessage(y){if(s(w=>[...w,y]),n!==2){const w=document.getElementById("chatIconChange"),v=w.querySelector("img");v.style.animation="spin3 2s cubic-bezier(.68,.05,.49,.95) infinite",v.src=gA.replace("/public",""),w.onclick=()=>{v.src=Fv.replace("/public",""),v.style.animation="",r(2),w.onclick=()=>{r(2)}}}},reRenderPlayerList:a,clickedOnBoard:y=>{r(1),requestAnimationFrame(()=>{var w;(w=g.current)==null||w.clickedOnBoard(y)})}}));const g=I.useRef(null),m=I.useRef(null);return I.useEffect(a,[t.players.map(y=>y.properties),t.players.map(y=>y.balance)]),I.useEffect(()=>{const y=w=>{const v=parseInt(w.key);if(!isNaN(v)){const p=document.activeElement;(p===null||p.tagName!=="INPUT")&&r(v-1)}};return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[]),d.jsxs("nav",{className:"main",children:[d.jsxs("nav",{className:"header",children:[d.jsx("img",{style:{marginTop:75},className:"header",src:EA.replace("public/","")}),d.jsxs("div",{className:"upper",children:[d.jsx("div",{"data-selected":n==0,onClick:()=>r(0),"data-tooltip-hover":"players",className:"button",children:d.jsx("img",{src:mA.replace("public/",""),alt:""})},"ingame-nav-header-0"),d.jsx("div",{"data-selected":n==1,onClick:()=>r(1),"data-tooltip-hover":"propreties",className:"button",children:d.jsx("img",{src:vA.replace("public/",""),alt:""})},"ingame-nav-header-1"),d.jsx("div",{"data-selected":n==2,onClick:()=>r(2),"data-tooltip-hover":"chat",className:"button",id:"chatIconChange",children:d.jsx("img",{src:Fv.replace("public/",""),alt:""})},"ingame-nav-header-2"),d.jsx("div",{"data-selected":n===3,onClick:()=>{r(3)},"data-tooltip-hover":"history",className:"button",children:d.jsx("img",{src:"history.png",alt:""})},"ingame-nav-header-3")]}),d.jsxs("div",{className:"lower",children:[t.server!==void 0?d.jsx("div",{"data-selected":!1,onClick:()=>t.callServer(),"data-tooltip-hover":"server",className:"button",children:d.jsx("img",{src:"server.png",alt:""})},"ingame-nav-header-server"):d.jsx(d.Fragment,{}),d.jsx("div",{"data-selected":n==4,onClick:()=>r(4),"data-tooltip-hover":"settings",className:"button",children:d.jsx("img",{src:_A.replace("public/",""),alt:""})},"ingame-nav-header-4"),d.jsx("div",{"data-tooltip":"leave",className:"button color","data-tooltip-hover":"leave",onClick:()=>{document.location.reload()},children:d.jsx("img",{src:yA.replace("public/",""),alt:""})},"ingame-nav-header-7")]})]}),d.jsx("nav",{className:"content","data-index":n>4||n<0?0:n,children:n==1?d.jsx(xA,{ref:g,players:h,socket:t.socket,Morgage:t.Morgage,allowMortgage:t.selectedMode.mortageAllowed}):n==2?d.jsxs(d.Fragment,{children:[d.jsx("h3",{style:{textAlign:"center"},children:"Chat"}),d.jsxs("div",{className:"main-chat",children:[d.jsx("div",{className:"messages",children:i.map((y,w)=>d.jsxs("div",{className:"message",children:[d.jsxs("p",{children:[y.from,":"]}),d.jsx("p",{children:y.message})]},w))}),d.jsx("input",{placeholder:"Type Message Here...",type:"text",onKeyDown:y=>{if(y.which===13&&y.currentTarget.value.length>0){const w=y.currentTarget.value;t.socket.emit("message",w),y.currentTarget.value=""}}})]})]}):n==3?d.jsxs(d.Fragment,{children:[d.jsxs("h3",{style:{textAlign:"center"},children:["History ",d.jsx("h2",{children:u(t.time,o)})]}),d.jsx("div",{style:{overflowY:"auto",display:"block",position:"relative"},children:t.history.sort((y,w)=>new Date(y.time).getTime()-new Date(w.time).getTime()).map(y=>d.jsxs("div",{className:"history-action",children:[d.jsx("p",{children:c(y.time)}),d.jsx("p",{children:y.action})]}))})]}):n==4?d.jsx(fS,{}):d.jsx(NA,{ref:m,clickedOnPlayer:y=>{r(1),requestAnimationFrame(()=>{var w;(w=g.current)==null||w.clickedOnBoard(y)})},players:h,socket:t.socket,currentTurn:t.currentTurn})})]})});function Uv({chance:t,chest:e}){return t!==void 0?d.jsx(DA,{args:t}):e!==void 0?d.jsx(jA,{args:e}):d.jsx(d.Fragment,{})}function DA({args:t}){return d.jsxs("div",{"data-b-image":"chance",className:"chance-card",children:[d.jsx("div",{}),d.jsx("div",{children:d.jsx("h3",{children:t.title})}),d.jsx("div",{})]})}function jA({args:t}){return d.jsxs("div",{"data-b-image":"chest",className:"chance-card",children:[d.jsx("div",{}),d.jsx("div",{children:d.jsx("h3",{children:t.title})}),d.jsx("div",{})]})}const MA=I.forwardRef((t,e)=>{const n=new Map(gr.properties.map(S=>[S.posistion??0,S])),[r,i]=I.useState(!1),[s,o]=I.useState(!1),[l,a]=I.useState(!1),[c,u]=I.useState(!1),[h,f]=I.useState(0),[g,m]=I.useState(1),[y,w]=I.useState(),[v,p]=I.useState(0);I.useEffect(()=>{const S=setInterval(()=>{w(JSON.parse(document.cookie).settings)},200);return()=>{clearInterval(S)}},[document.cookie]);const[E,_]=I.useState({cardCost:-1,hotelsCost:-1,housesCost:-1,multpliedrent:[-1,-1,-1,-1,-1],rent:-1,rentWithColorSet:-1,title:"deafult",type:"electricity"}),[C,k]=I.useState("Street");function A(S,M){const P=document.getElementById("dice-panel");var oe=!0;function T(){var X="./c";const te=Math.floor(Math.random()*6)+1,N=Math.floor(Math.random()*6)+1;P.innerHTML=`
                <img src="${X}${te}.png" />
                <img src="${X}${N}.png" />
                
                `}function ce(){if(oe)T(),requestAnimationFrame(ce);else{var X="./c";P.innerHTML=`
                <img src="${X}${S}.png" />
                <img src="${X}${M}.png" />
                `}}setTimeout(()=>{oe=!1},1e3),requestAnimationFrame(ce)}function D(S){const M=document.querySelector("img#moneyAnimations");if(M===null)return;const P=M;P.setAttribute("data-anim","0"),requestAnimationFrame(()=>{P.setAttribute("data-anim",S.toString()),setTimeout(()=>{P.setAttribute("data-anim","0")},1e3)})}function $(){const S=JSON.parse(document.cookie).settings;let M=new Audio("./card.mp3");M.volume=((S==null?void 0:S.audio[1])??100)/100*(((S==null?void 0:S.audio[0])??100)/100),M.loop=!1,M.play()}return I.useImperativeHandle(e,()=>({diceResults:S=>{A(...S.l),i(!0),setTimeout(()=>{i(!1),S.onDone()},S.time)},freeDice:()=>{const S=document.getElementById("dice-panel");S.innerHTML="",o(!1)},setStreet:S=>{const M=t.players.filter(X=>X.id===t.socket.id)[0],P=n.get(S.location);if(P&&S.location!==-1&&S.location<40&&S.location>=0){let X=function(te,N,z){function Z(){const le=JSON.parse(document.cookie).settings;let Ge=new Audio("./click.mp3");Ge.volume=((le==null?void 0:le.audio[1])??100)/100*(((le==null?void 0:le.audio[0])??100)/100),Ge.loop=!1,Ge.play()}function G(){if(te){const le=document.querySelector("div#advanced-responses");if(le){let Ge=function(we){switch(we){case"h":return 5;default:return we}};const ue=n.get(N);if(!ue)return;const Ee=le;for(;Ee.firstChild;)Ee.removeChild(Ee.firstChild);const Oe=Array.from(new Map(M.properties.map((we,ut)=>[ut,we])).entries()).filter(we=>we[1].posistion===S.location)[0][0],lt=Ge(M.properties[Oe].count);for(let we=lt+1;we<6;we++){const ut=document.createElement("button");we===5?(ut.innerHTML="buy hotel",ut.disabled=we!==lt+1||(ue.ohousecost??0)>(t.players.filter(ur=>ur.id===t.socket.id)[0].balance??0),ut.onclick=()=>{S.onResponse("advance-buy",{state:we,money:1}),a(!1)}):(ut.innerHTML=`buy ${we} house${we>1?"s":""}`,ut.onclick=()=>{S.onResponse("advance-buy",{state:we,money:we-lt}),a(!1)},ut.disabled=(we-lt)*(ue.housecost??0)>(t.players.filter(ur=>ur.id===t.socket.id)[0].balance??0)),Ee.appendChild(ut)}const ct=document.createElement("button");ct.innerHTML="CONTINUE",ct.onclick=()=>{Z(),S.onResponse("nothing",{}),a(!1)},Ee.appendChild(ct)}else requestAnimationFrame(G)}else{const le=document.querySelector("button#card-response-yes");le?(le.onclick=()=>{z!==void 0?S.onResponse("special_action",{rolls:z.rolls}):S.onResponse("buy",{}),a(!1)},document.querySelector("button#card-response-no").onclick=()=>{Z(),S.onResponse("nothing",{}),a(!1)}):requestAnimationFrame(G)}}return G};var oe=!1,T=!1,ce=0;for(const te of M.properties)!oe&&te.posistion===S.location&&(oe=!0,ce=te.count);for(const te of t.players)for(const N of te.properties)N.posistion===S.location&&te.id!=M.id&&(T=!0);if(P.group==="Special")S.onResponse("nothing",{}),a(!1);else if(P.group==="Utilities")if(oe)S.onResponse("nothing",{});else if(T){S.onResponse("someones",{}),a(!1);return}else if(M.balance-((P==null?void 0:P.price)??0)<0){a(!1),S.onResponse("nothing",{});return}else{k("Utilities");const te={cardCost:P.price??-1,title:P.name??"error",type:P.id.includes("water")?"water":"electricity"};_(te),u(!1),$(),a(!0),requestAnimationFrame(X(!1,S.location,{rolls:S.rolls}))}else if(P.group==="Railroad")if(oe)S.onResponse("nothing",{});else if(T){S.onResponse("someones",{}),a(!1);return}else if(M.balance-((P==null?void 0:P.price)??0)<0){a(!1),S.onResponse("nothing",{});return}else{k("Railroad");const te={cardCost:P.price??-1,title:P.name??"error"};_(te),$(),a(!0),requestAnimationFrame(X(!1,S.location))}else{if(!oe&&M.balance-((P==null?void 0:P.price)??0)<0){a(!1),S.onResponse("nothing",{});return}if(!oe){if(T){S.onResponse("someones",{}),a(!1);return}}if(oe&&ce==="h"){a(!1),S.onResponse("nothing",{});return}k("Street");const te={cardCost:P.price??-1,hotelsCost:P.ohousecost??-1,housesCost:P.housecost??-1,rent:P.rent??-1,multpliedrent:P.multpliedrent?[P.multpliedrent[0]??-1,P.multpliedrent[1]??-1,P.multpliedrent[2]??-1,P.multpliedrent[3]??-1,P.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:P.rent?P.rent*2:-1,title:P.name??"error",group:P.group};_(te),u(!!oe),$(),a(!0),requestAnimationFrame(X(oe,S.location))}}else S.onResponse("nothing",{}),a(!1)},chorch(S,M,P){k(M?"Chance":"CommunityChest"),_({title:S.title}),$(),a(!0),setTimeout(()=>{a(!1)},P)},applyAnimation(S){D(S)},showJailsButtons:S=>{const M=document.querySelector('button[data-button-type="pay"]'),P=document.querySelector('button[data-button-type="card"]'),oe=document.querySelector('button[data-button-type="roll"]');function T(){oe.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("roll after return to normal"),p(0)},p(0),o(!0),P.onclick=()=>{},P.setAttribute("aria-disabled","true"),setTimeout(()=>{P.setAttribute("aria-disabled","true")},300),M.style.translate="0px 0px",M.onclick=()=>{},M.setAttribute("aria-disabled","true"),setTimeout(()=>{M.setAttribute("aria-disabled","true")},300)}if(M.setAttribute("aria-disabled","false"),M.onclick=()=>{D(1),t.socket.emit("unjail","pay"),t.socket.emit("roll_dice"),console.warn("pay"),T()},S){const ce=P;ce.setAttribute("aria-disabled","false"),ce.onclick=()=>{t.socket.emit("unjail","card"),t.socket.emit("roll_dice"),console.warn("card"),T()}}oe.onclick=()=>{t.socket.emit("roll_dice"),console.warn("roll when in jail"),T(),o(!0),p(0)}}})),I.useEffect(()=>{document.getElementById("locations").onwheel=M=>{M.shiftKey?m(P=>P+M.deltaY*(y!==void 0?y.accessibility[1]:5)/5e3):f(P=>P+M.deltaY*(y!==void 0?y.accessibility[0]:45)/100)};const S=Array.from(n.values()).filter(M=>M.group!="Special");for(const M of S){const P=document.getElementById("locations").querySelector(`div.street[data-position="${M.posistion}"]`);P.onclick=()=>{t.clickedOnBoard(M.posistion)},P.onmousemove=()=>{P.style.cursor="pointer",P.style.backgroundColor="rgba(0,0,0,15%)"},P.onmouseleave=()=>{P.style.cursor="unset",P.style.scale="1",P.style.backgroundColor="rgba(0,0,0,0%)"}}},[y]),I.useEffect(()=>{var S=!0,M=()=>{var oe,T,ce,X;for(const te of t.players.filter(N=>N.balance>=0)){const N=te.position,z=te.icon+1,Z=te.isInJail,G=document.querySelector(`div.player[player-id="${te.id}"]`);if(G!==null){const le=G.querySelector("div");le.style.rotate=`${-h}deg`,le.style.aspectRatio="1",y!==void 0&&y.accessibility[4]===!0?le.setAttribute("data-tooltip-color",te.color):le.hasAttribute("data-tooltip-color")&&(le.querySelector("img").style.filter="",le.removeAttribute("data-tooltip-color"));const Ge=(oe=G.parentElement)==null?void 0:oe.getAttribute("data-position");if(parseInt(Ge)!==te.position&&((T=G.parentElement)==null||T.removeChild(G),(ce=document.querySelector(`div.street[data-position="${N}"]`))==null||ce.appendChild(G)),!Z&&G.querySelector("img.jailIcon")!=null){const ue=G.querySelector("img.jailIcon");G.removeChild(ue)}if(Z&&G.querySelector("img.jailIcon")==null){for(;G.firstChild;)G.removeChild(G.firstChild);const ue=document.createElement("div");ue.setAttribute("data-tooltip-hover",te.username);const Ee=document.createElement("img");Ee.src=`./p${z}.png`,ue.appendChild(Ee);const Oe=document.createElement("img");Oe.src="./jail.png",Oe.className="jailIcon",ue.appendChild(Oe),G.appendChild(ue)}}else{const le=document.createElement("div");le.className="player",le.setAttribute("player-id",te.id),le.setAttribute("player-position",te.position.toString());const Ge=document.createElement("div");Ge.setAttribute("data-tooltip-hover",te.username);const ue=document.createElement("img");if(ue.src=`./p${z}.png`,Ge.appendChild(ue),le.appendChild(Ge),Z){const Ee=document.createElement("img");Ee.src="./jail.png",Ee.className="jailIcon",le.appendChild(Ee)}(X=document.querySelector(`div.street[data-position="${N}"]`))==null||X.appendChild(le)}}function P(){const te=document.getElementById("display-houses"),N=Array.from(te.querySelectorAll("div.street-houses"));for(const Z of N){const G=Z;for(;G.firstChild;)G.removeChild(G.firstChild);G.onclick=()=>{},G.style.cursor="unset",G.style.backgroundColor="rgba(0,0,0,0%)",G.style.padding="0px",G.innerHTML="",G.setAttribute("data-tooltip-hover",""),G.style.zIndex="unset",G.style.boxShadow=""}for(const Z of t.players)for(const G of Z.properties){const le=G.posistion,Ge=G.count,ue=te.querySelector(`div.street-houses[data-position="${le}"`);if(ue!=null){const Ee=ue;switch(Ee.setAttribute("data-tooltip-hover",Z.username),Ee.onclick=()=>{const Oe=document.querySelector(`div.player[player-id="${Z.id}"]`);Oe.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{Oe.style.animation=""},1*1e3)},Ee.style.cursor="pointer",Ee.style.zIndex="5",Ge){case 0:Ee.style.backgroundColor="rgba(0,0,0,25%)",y!==void 0&&(y!=null&&y.accessibility[4])&&(Ee.style.backgroundColor=Z.color,Ee.style.boxShadow="0px 0px 5px black");var z=0;if(G.group==="Railroad"){const lt=Z.properties.filter(ut=>ut.group==="Railroad").filter(ut=>ut.morgage===void 0||ut.morgage!==void 0&&ut.morgage===!1).length;var z=[0,25,50,100,200][lt]}else if(G.group==="Utilities"&&G.rent){const lt=Z.properties.filter(ct=>ct.group==="Utilities").length===2?10:4;z=G.rent*lt}z!==0&&(Ee.innerHTML=`<p>${z}M</p>`,Ee.style.backgroundColor="rgba(0,0,0,75%)",y!==void 0&&(y!=null&&y.accessibility[4])&&(Ee.style.backgroundColor=`${Z.color}`,Ee.style.boxShadow="0px 0px 5px black"));break;case 1:case 2:case 3:case 4:for(let lt=0;lt<Ge;lt++){const ct=document.createElement("img");ct.src=Hi.replace("public/",""),Ee.appendChild(ct)}break;case"h":const Oe=document.createElement("img");Oe.src=Wi.replace("public/",""),Ee.appendChild(Oe);break}}}}P(),S&&requestAnimationFrame(M)};return requestAnimationFrame(M),()=>{S=!1}},[t.players,h]),I.useEffect(()=>{const S=document.querySelector('button[data-button-type="roll"]');S.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("first roll"),p(0)}},[]),I.useEffect(()=>{if(t.myTurn&&!s){var S=void 0;if(t.selectedMode.turnTimer!==void 0&&t.selectedMode.turnTimer>0){var M=0;S=setInterval(()=>{M+=1,p(M),t.selectedMode.turnTimer!==void 0&&t.selectedMode.turnTimer>0&&M>=t.selectedMode.turnTimer&&t.myTurn&&!s&&(document.querySelector('button[data-button-type="roll"]').click(),p(0),clearInterval(S))},1e3)}}return()=>{clearInterval(S),p(0),console.log("stopped")}},[t.myTurn,s,t.selectedMode]),d.jsx(d.Fragment,{children:d.jsxs("div",{className:"game",style:t.tradeObj!==void 0?{translate:"0px -100%"}:{},children:[d.jsxs("div",{style:{overflowY:"hidden"},children:[d.jsx("div",{id:"dice-panel","data-show":r}),d.jsxs("div",{className:"board",style:{transform:`translateX(-50%) translateY(-50%) rotate(${h}deg) scale(${g})`},id:"locations",children:[d.jsxs("div",{id:"display-houses",children:[d.jsx("div",{"data-position":"39","data-rotate":"4",className:"street-houses",style:{top:"83%",left:"93.5%"}}),d.jsx("div",{"data-position":"37","data-rotate":"4",className:"street-houses",style:{top:"66.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"35","data-rotate":"4",className:"street-houses",style:{top:"50%",left:"93.5%"}}),d.jsx("div",{"data-position":"34","data-rotate":"4",className:"street-houses",style:{top:"41.75%",left:"93.5%"}}),d.jsx("div",{"data-position":"32","data-rotate":"4",className:"street-houses",style:{top:"25.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"31","data-rotate":"4",className:"street-houses",style:{top:"17.25%",left:"93.5%"}}),d.jsx("div",{"data-position":"29","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"83%"}}),d.jsx("div",{"data-position":"28","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"74.75%"}}),d.jsx("div",{"data-position":"27","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"66.5%"}}),d.jsx("div",{"data-position":"26","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"58.25%"}}),d.jsx("div",{"data-position":"25","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"50%"}}),d.jsx("div",{"data-position":"24","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"41.75%"}}),d.jsx("div",{"data-position":"23","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"33.5%"}}),d.jsx("div",{"data-position":"21","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"17.25%"}}),d.jsx("div",{"data-position":"19","data-rotate":"2",className:"street-houses",style:{top:"17.25%",left:"6.5%"}}),d.jsx("div",{"data-position":"18","data-rotate":"2",className:"street-houses",style:{top:"25.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"16","data-rotate":"2",className:"street-houses",style:{top:"41.75%",left:"6.5%"}}),d.jsx("div",{"data-position":"15","data-rotate":"2",className:"street-houses",style:{top:"50%",left:"6.5%"}}),d.jsx("div",{"data-position":"14","data-rotate":"2",className:"street-houses",style:{top:"58.25%",left:"6.5%"}}),d.jsx("div",{"data-position":"13","data-rotate":"2",className:"street-houses",style:{top:"66.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"12","data-rotate":"2",className:"street-houses",style:{top:"74.75%",left:"6.5%"}}),d.jsx("div",{"data-position":"11","data-rotate":"2",className:"street-houses",style:{top:"83%",left:"6.5%"}}),d.jsx("div",{"data-position":"9","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"17.25%"}}),d.jsx("div",{"data-position":"8","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"25.5%"}}),d.jsx("div",{"data-position":"6","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"41.75%"}}),d.jsx("div",{"data-position":"5","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"50%"}}),d.jsx("div",{"data-position":"3","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"66.5%"}}),d.jsx("div",{"data-position":"1","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"83%"}})]}),d.jsxs("div",{id:"display-streets",children:[d.jsx("div",{"data-position":"39",className:"street",style:{width:120,height:75,top:"83%",left:"93.5%"}}),d.jsx("div",{"data-position":"38",className:"street",style:{width:120,height:75,top:"74.25%",left:"93.5%"}}),d.jsx("div",{"data-position":"37",className:"street",style:{width:120,height:75,top:"66.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"36",className:"street",style:{width:120,height:75,top:"58.25%",left:"93.5%"}}),d.jsx("div",{"data-position":"35",className:"street",style:{width:120,height:75,top:"50%",left:"93.5%"}}),d.jsx("div",{"data-position":"34",className:"street",style:{width:120,height:75,top:"41.75%",left:"93.5%"}}),d.jsx("div",{"data-position":"33",className:"street",style:{width:120,height:75,top:"33.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"32",className:"street",style:{width:120,height:75,top:"25.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"31",className:"street",style:{width:120,height:75,top:"17.25%",left:"93.5%"}}),d.jsx("div",{"data-position":"30",className:"street",style:{width:120,height:120,top:"6.5%",left:"93.5%"}}),d.jsx("div",{"data-position":"29",className:"street",style:{width:75,height:120,top:"6.5%",left:"83%"}}),d.jsx("div",{"data-position":"28",className:"street",style:{width:75,height:120,top:"6.5%",left:"74.75%"}}),d.jsx("div",{"data-position":"27",className:"street",style:{width:75,height:120,top:"6.5%",left:"66.5%"}}),d.jsx("div",{"data-position":"26",className:"street",style:{width:75,height:120,top:"6.5%",left:"58.25%"}}),d.jsx("div",{"data-position":"25",className:"street",style:{width:75,height:120,top:"6.5%",left:"50%"}}),d.jsx("div",{"data-position":"24",className:"street",style:{width:75,height:120,top:"6.5%",left:"41.75%"}}),d.jsx("div",{"data-position":"23",className:"street",style:{width:75,height:120,top:"6.5%",left:"33.5%"}}),d.jsx("div",{"data-position":"22",className:"street",style:{width:75,height:120,top:"6.5%",left:"25.5%"}}),d.jsx("div",{"data-position":"21",className:"street",style:{width:75,height:120,top:"6.5%",left:"17.25%"}}),d.jsx("div",{"data-position":"20",className:"street",style:{width:120,height:120,top:"6.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"19",className:"street",style:{width:120,height:75,top:"17.25%",left:"6.5%"}}),d.jsx("div",{"data-position":"18",className:"street",style:{width:120,height:75,top:"25.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"17",className:"street",style:{width:120,height:75,top:"33.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"16",className:"street",style:{width:120,height:75,top:"41.75%",left:"6.5%"}}),d.jsx("div",{"data-position":"15",className:"street",style:{width:120,height:75,top:"50%",left:"6.5%"}}),d.jsx("div",{"data-position":"14",className:"street",style:{width:120,height:75,top:"58.25%",left:"6.5%"}}),d.jsx("div",{"data-position":"13",className:"street",style:{width:120,height:75,top:"66.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"12",className:"street",style:{width:120,height:75,top:"74.75%",left:"6.5%"}}),d.jsx("div",{"data-position":"11",className:"street",style:{width:120,height:75,top:"83%",left:"6.5%"}}),d.jsx("div",{className:"street","data-position":"10",style:{width:120,height:120,top:"93.5%",left:"6.5%"}}),d.jsx("div",{"data-position":"9",className:"street",style:{width:75,height:120,top:"93.5%",left:"17.25%"}}),d.jsx("div",{"data-position":"8",className:"street",style:{width:75,height:120,top:"93.5%",left:"25.5%"}}),d.jsx("div",{"data-position":"7",className:"street",style:{width:75,height:120,top:"93.5%",left:"33.5%"}}),d.jsx("div",{"data-position":"6",className:"street",style:{width:75,height:120,top:"93.5%",left:"41.75%"}}),d.jsx("div",{"data-position":"5",className:"street",style:{width:75,height:120,top:"93.5%",left:"50%"}}),d.jsx("div",{"data-position":"4",className:"street",style:{width:75,height:120,top:"93.5%",left:"58.25%"}}),d.jsx("div",{"data-position":"3",className:"street",style:{width:75,height:120,top:"93.5%",left:"66.5%"}}),d.jsx("div",{"data-position":"2",className:"street",style:{width:75,height:120,top:"93.5%",left:"74.75%"}}),d.jsx("div",{"data-position":"1",className:"street",style:{width:75,height:120,top:"93.5%",left:"83%"}}),d.jsx("div",{"data-position":"0",className:"street",style:{width:120,height:120,top:"93.5%",left:"93.5%"}})]})]}),d.jsxs("div",{className:"action-bar",style:t.myTurn&&!s?{}:{translate:"-50% 20vh"},children:[t.selectedMode.turnTimer!==void 0&&t.selectedMode.turnTimer>0?d.jsxs(d.Fragment,{children:[d.jsxs("p",{style:{display:"inline-block",opacity:1,color:"rgb(0, 114, 187)",marginRight:5},children:[t.selectedMode.turnTimer-v," "]}),d.jsx("hr",{style:{display:"inline",opacity:.5}})]}):d.jsx(d.Fragment,{}),d.jsxs("button",{"data-button-type":"roll","aria-disabled":!1,children:[d.jsx("p",{children:"ROLL THE "}),d.jsx("img",{style:{marginLeft:10},src:hS.replace("public/","")})]}),d.jsx("button",{"data-button-type":"pay","data-tooltip-hover":"pay","aria-disabled":!0,children:d.jsx("img",{src:"pay1.png"})}),d.jsx("button",{"data-button-type":"card","data-tooltip-hover":"card","aria-disabled":!0,children:d.jsx("img",{src:"golden-card.png"})}),t.selectedMode.AllowDeals?d.jsx("button",{"data-button-type":"trade","data-tooltip-hover":"trade","aria-disabled":!1,onClick:()=>{o(!0),t.socket.emit("trade")},children:d.jsx("img",{src:"morgage.png"})}):d.jsx(d.Fragment,{})]}),d.jsx("div",{className:C==="Chance"||C==="CommunityChest"?"chance-display-actions":"card-display-actions",style:l?{}:{transform:"translateY(-50%) translateX(-70vw)"},children:C==="Chance"||C==="CommunityChest"?d.jsx(d.Fragment,{children:C==="Chance"?d.jsx(Uv,{chance:E}):C==="CommunityChest"?d.jsx(Uv,{chance:E}):d.jsx(d.Fragment,{})}):d.jsxs(d.Fragment,{children:[d.jsx("h3",{children:c?"would you like to buy this card?":"you can buy houses and hotels"}),C==="Railroad"?d.jsx(Zs,{railroad:E}):C==="Utilities"?d.jsx(Zs,{utility:E}):d.jsx(Zs,{street:E}),d.jsx("div",{children:d.jsx("center",{children:c?d.jsx("div",{id:"advanced-responses"}):d.jsxs(d.Fragment,{children:[d.jsx("button",{id:"card-response-yes",children:"YES"}),d.jsx("button",{id:"card-response-no",children:"NO"})]})})})]})}),d.jsx("img",{"data-anim":"0",id:"moneyAnimations",alt:""})]}),d.jsx("div",{className:"trade-table",children:d.jsxs("div",{className:"middle",children:[d.jsx("h3",{children:"Trade"}),typeof t.tradeObj!="object"?d.jsxs(d.Fragment,{children:[d.jsx("h2",{children:"Select your opponent"}),d.jsx("center",{children:d.jsxs("div",{className:"select-players",children:[t.players.filter(S=>S.id!==t.socket.id).map((S,M)=>d.jsx("button",{style:{animation:"tradepopout .3s cubic-bezier(0.21, 1.57, 0.55, 1)"},"data-selectable":t.myTurn,onClick:()=>{t.myTurn&&t.tradeApi.onSelectPlayer(S.id)},children:S.username},M)),d.jsxs("button",{"data-selectable":t.myTurn,onClick:()=>{t.myTurn&&(t.socket.emit("cancel-trade"),o(!1))},children:[" ","CANCEL TRADE"]})]})})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"trade-mission",children:[d.jsx("div",{className:"flexchild",children:t.socket.id===t.tradeObj.againstPlayer.id||t.socket.id===t.tradeObj.turnPlayer.id?d.jsxs("div",{className:"trade-craft",children:[d.jsxs("p",{children:[" ",t.socket.id===t.tradeObj.againstPlayer.id?"You are the Opponent":"You are the Current Player"]}),d.jsx(Gi,{max:t.socket.id===t.tradeObj.againstPlayer.id?t.players.filter(S=>S.id===t.tradeObj.againstPlayer.id)[0].balance:t.players.filter(S=>S.id===t.tradeObj.turnPlayer.id)[0].balance,min:0,step:25,onChange:S=>{const M=parseInt(S.currentTarget.value),P=JSON.parse(JSON.stringify(t.tradeObj));t.socket.id===t.tradeObj.againstPlayer.id?P.againstPlayer.balance=M:P.turnPlayer.balance=M,t.socket.emit("trade-update",P)},suffix:" M"}),d.jsx("br",{}),t.socket.id===t.tradeObj.againstPlayer.id?t.players.filter(S=>S.id===t.tradeObj.againstPlayer.id)[0].properties.filter(S=>!t.tradeObj.againstPlayer.prop.map(M=>JSON.stringify(M)).includes(JSON.stringify(S))).filter(S=>S.morgage===void 0||S.morgage!==void 0&&S.morgage===!1).map((S,M)=>{var P;return d.jsxs("div",{className:"proprety-nav",onClick:()=>{const oe=JSON.parse(JSON.stringify(t.tradeObj));oe.againstPlayer.prop.push(S),t.socket.emit("trade-update",oe)},children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(S.group)}}),d.jsx("h3",{style:S.morgage!==void 0&&S.morgage===!0?{textDecoration:"line-through white"}:{},children:((P=n.get(S.posistion))==null?void 0:P.name)??""}),d.jsx("div",{children:S.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof S.count=="number"&&S.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:S.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},M)}):t.socket.id===t.tradeObj.turnPlayer.id?t.players.filter(S=>S.id===t.tradeObj.turnPlayer.id)[0].properties.filter(S=>!t.tradeObj.turnPlayer.prop.map(M=>JSON.stringify(M)).includes(JSON.stringify(S))).filter(S=>S.morgage===void 0||S.morgage!==void 0&&S.morgage===!1).map((S,M)=>{var P;return d.jsxs("div",{className:"proprety-nav",onClick:()=>{const oe=JSON.parse(JSON.stringify(t.tradeObj));oe.turnPlayer.prop.push(S),t.socket.emit("trade-update",oe)},children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(S.group)}}),d.jsx("h3",{style:S.morgage!==void 0&&S.morgage===!0?{textDecoration:"line-through white"}:{},children:((P=n.get(S.posistion))==null?void 0:P.name)??""}),d.jsx("div",{children:S.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof S.count=="number"&&S.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:S.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},M)}):d.jsx(d.Fragment,{})]}):d.jsx(d.Fragment,{})}),d.jsxs("div",{className:"flexchild",children:[d.jsxs("div",{className:"player",children:[d.jsxs("h5",{children:["current player"," ",d.jsx("h2",{children:t.players.filter(S=>S.id===t.tradeObj.turnPlayer.id)[0].username})]}),d.jsxs("table",{children:[d.jsxs("tr",{children:[d.jsx("td",{children:"Balance"}),d.jsxs("td",{children:[t.tradeObj.turnPlayer.balance," M"]})]}),t.tradeObj.turnPlayer.prop.length>0?d.jsxs("tr",{children:[d.jsx("td",{children:"Propreties"}),d.jsx("td",{children:t.tradeObj.turnPlayer.prop.map((S,M)=>{var P;return d.jsxs("div",{className:"proprety-nav","data-actionable":t.socket.id===t.tradeObj.turnPlayer.id,onClick:()=>{if(t.socket.id===t.tradeObj.turnPlayer.id){const oe=JSON.parse(JSON.stringify(t.tradeObj));oe.turnPlayer.prop.splice(M,1),t.socket.emit("trade-update",oe)}},children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(S.group)}}),d.jsx("h3",{style:S.morgage!==void 0&&S.morgage===!0?{textDecoration:"line-through white"}:{},children:((P=n.get(S.posistion))==null?void 0:P.name)??""}),d.jsx("div",{children:S.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof S.count=="number"&&S.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:S.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},M)})})]}):d.jsx(d.Fragment,{})]})]}),d.jsxs("div",{className:"player",children:[d.jsxs("h5",{children:["opponent player",d.jsx("h2",{children:t.players.filter(S=>S.id===t.tradeObj.againstPlayer.id)[0].username})]}),d.jsxs("table",{children:[d.jsxs("tr",{children:[d.jsx("td",{children:"Balance"}),d.jsxs("td",{children:[t.tradeObj.againstPlayer.balance," M"]})]}),t.tradeObj.againstPlayer.prop.length>0?d.jsxs("tr",{children:[d.jsx("td",{children:"Propreties"}),d.jsx("td",{children:t.tradeObj.againstPlayer.prop.map((S,M)=>{var P;return d.jsxs("div",{"data-actionable":t.socket.id===t.tradeObj.againstPlayer.id,className:"proprety-nav",onClick:()=>{if(t.socket.id===t.tradeObj.againstPlayer.id){const oe=JSON.parse(JSON.stringify(t.tradeObj));oe.againstPlayer.prop.splice(M,1),t.socket.emit("trade-update",oe)}},children:[d.jsx("i",{className:"box",style:{backgroundColor:mi(S.group)}}),d.jsx("h3",{style:S.morgage!==void 0&&S.morgage===!0?{textDecoration:"line-through white"}:{},children:((P=n.get(S.posistion))==null?void 0:P.name)??""}),d.jsx("div",{children:S.count=="h"?d.jsx("img",{src:Wi.replace("public/",""),alt:""}):typeof S.count=="number"&&S.count>0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:S.count}),d.jsx("img",{src:Hi.replace("public/",""),alt:""})]}):d.jsx(d.Fragment,{})})]},M)})})]}):d.jsx(d.Fragment,{})]})]})]}),d.jsx("div",{className:"flexchild"})]}),t.myTurn?d.jsx("center",{children:d.jsxs("div",{className:"trade-craft-buttons",children:[d.jsxs("button",{"data-selectable":t.myTurn,onClick:()=>{t.myTurn&&(t.socket.emit("cancel-trade"),o(!1))},children:[" ","CANCEL"]}),d.jsxs("button",{"data-selectable":t.myTurn,onClick:()=>{t.myTurn&&t.socket.emit("trade")},children:[" ","BACK"]}),d.jsxs("button",{"data-selectable":t.myTurn,onClick:()=>{t.myTurn&&(t.socket.emit("submit-trade",t.tradeObj),o(!1))},children:[" ","SUBMIT"]})]})}):t.tradeObj.againstPlayer.id===t.socket.id?d.jsx("center",{children:d.jsx("div",{className:"trade-craft-buttons",children:d.jsxs("button",{"data-selectable":t.myTurn,onClick:()=>{t.socket.emit("trade")},children:[" ","CANCEL"]})})}):d.jsx(d.Fragment,{})]})]})})]})})}),pS=I.forwardRef((t,e)=>(I.useImperativeHandle(e,()=>({message(n,r,i,s,o){const l=document.querySelector("div.notify"),a=document.createElement("div");a.className="notification",a.innerHTML=n,a.setAttribute("data-notif-type",r??"info"),l.appendChild(a);var c=!1,u="popoff .7s cubic-bezier(.62,.25,1,-0.73)";if(a.onclick=()=>{c=!0,a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700)},setTimeout(()=>{c||(a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700))},(i??2)*1e3),o===void 0||o!==void 0&&o===!0){const h=JSON.parse(document.cookie).settings;let f=new Audio("./notifications.mp3");f.volume=((h==null?void 0:h.audio[1])??100)/100*(((h==null?void 0:h.audio[0])??100)/100),f.play()}},dialog(n,r){const i=document.querySelector("div.dialog-screen"),s=document.querySelector("div.dialog-box"),o=s.querySelector("div.texts"),l=s.querySelector("div.buttons"),a=n(()=>{i.setAttribute("data-show","false"),s.setAttribute("data-show","false"),s.style.animation="dialogout 1s cubic-bezier(.5,0,1,.5)",setTimeout(()=>{s.style.animation="",o.innerHTML="",l.innerHTML=""},1e3)},(h,f)=>{const g=document.createElement("button");return g.onclick=f,g.innerHTML=h,g});s.setAttribute("data-show","true"),i.setAttribute("data-show","true"),o.innerHTML=a.innerHTML;for(const h of a.buttons)l.appendChild(h);const c=JSON.parse(document.cookie).settings;switch(r){case"loosing":var u=new Audio("./dying.mp3");u.volume=.16*(((c==null?void 0:c.audio[1])??100)/100)*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break;case"winning":var u=new Audio("./winning.mp3");u.volume=((c==null?void 0:c.audio[1])??100)/100*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break}}})),d.jsxs(d.Fragment,{children:[" ",d.jsx("div",{className:"notify"}),d.jsx("div",{className:"dialog-screen","data-show":!1}),d.jsxs("div",{className:"dialog-box","data-show":!1,children:[d.jsx("div",{className:"texts"}),d.jsx("div",{className:"buttons"})]})]}))),ep=[{AllowDeals:!0,WinningMode:"last-standing",Name:"Classic",startingCash:1500,mortageAllowed:!0,turnTimer:void 0},{AllowDeals:!1,WinningMode:"monopols & trains",Name:"Monopol",startingCash:1500,mortageAllowed:!1,turnTimer:void 0},{AllowDeals:!1,WinningMode:"last-standing",Name:"Run-Down",startingCash:1500,mortageAllowed:!1,turnTimer:30}];function Et(t){const e=new Date().toJSON();return{action:t,time:e}}function LA({socket:t,name:e,server:n}){const[r,i]=I.useState(new Map),s=Array.from(r.values()),[o,l]=I.useState(""),[a,c]=I.useState(!1),[u,h]=I.useState(!1),[f,g]=I.useState(!1),[m,y]=I.useState(ep[0]),[w,v]=I.useState(),[p,E]=I.useState(new Audio("./main-theme.mp3")),[_,C]=I.useState(new Date),[k,A]=I.useState([]),[D,$]=I.useState(void 0);I.useEffect(()=>{u&&(p.loop=!0,p.play(),p.volume=.25,w!==void 0&&(p.volume=w.audio[0]/100*(w.audio[2]/100)),E(p),C(new Date))},[u]),I.useEffect(()=>{const T=setInterval(()=>{const ce=JSON.parse(document.cookie).settings;v(ce)},1e3);return()=>{clearInterval(T)}},[document.cookie]),I.useEffect(()=>{w!==void 0&&(p.volume=w.audio[0]/100*(w.audio[2]/100))},[w]);const S=I.useRef(null),M=I.useRef(null),P=I.useRef(null),oe=new Map(gr.properties.map(T=>[T.posistion??0,T]));return n!==void 0&&n.RenderLogs(T=>{try{const ce=document.body.querySelector("#server main div.middle");ce.innerHTML="";for(const X of T)ce.innerHTML+=`<p> ${X.join("	")} </p>`}catch{}}),I.useEffect(()=>{let T;const ce=setInterval(()=>{T=JSON.parse(document.cookie).settings},1e3);function X(O){const U={x:O.clientX,y:O.clientY},ae=r.get(t.id);t.emit("mouse",U),ae&&(ae.positions=U)}function te(O){function U(){r.delete(O),i(new Map(r)),requestAnimationFrame(()=>{r.has(O)&&requestAnimationFrame(U)})}U();function ae(){const Q=document.querySelector(`div.player[player-id="${O}"]`);Q!==null&&(Q.parentElement&&Q.parentElement.removeChild(Q),Q.remove(),requestAnimationFrame(()=>{document.querySelector(`div.player[player-id="${O}"]`)!==null&&requestAnimationFrame(ae)}))}ae()}function N(O,U,ae=!0,Q,q=!0){var ze=(O-U.position)%40;(O<U.position||ze<0)&&q&&(ze=40-U.position+O),q||(ze=U.position-O,ze<0&&(ze+=40));const Ke=.35*1e3*ze;console.log(`${new Date().toTimeString()} generator ${Math.random()} target ${O} time ${Ke} current ${U.position}`);function Y(){var pt=0,Vt=!1,xt=0;const Nt=document.querySelector(`div.player[player-id="${U.id}"]`);pt=U.position,U.position+=1;var dn=new Audio("./step2.mp3");dn.volume=.1*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),dn.loop=!1,dn.play(),Nt.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)";const fe=()=>{var Le,et,qe,He;if(xt<ze){xt+=1;var ve=new Audio("./step2.mp3");if(ve.volume=1*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),ve.loop=!1,ve.play(),U.position=(U.position+(q?1:-1))%40,U.position==0&&ae){U.balance+=200;var ve=new Audio("./moneyplus.mp3");ve.volume=1*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),ve.loop=!1,ve.play(),U.id===t.id&&(T!==void 0&&T.notifications===!0&&((Le=P.current)==null||Le.message("200 of money is added to the account","info",2,()=>{},!1)),(et=S.current)==null||et.applyAnimation(2)),Vt=!0,i(new Map(r.set(U.id,U)))}if(xt==ze-1){if(U.position=O,Nt.style.animation="part 0.9s cubic-bezier(0,.7,.57,1)",setTimeout(()=>{Nt.style.animation=""},900),!Vt&&pt>U.position&&ae){var ve=new Audio("./moneyplus.mp3");ve.volume=1*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),ve.loop=!1,ve.play(),U.balance+=200,U.id===t.id&&(T!==void 0&&T.notifications===!0&&((qe=P.current)==null||qe.message("200 of money is added to the account","info",2,()=>{},!1)),(He=S.current)==null||He.applyAnimation(2)),Vt=!0,i(new Map(r.set(U.id,U)))}Q&&Q()}else Nt.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)",setTimeout(fe,.35*1e3)}};setTimeout(fe,.35*1e3)}return{func:Y,time:Ke}}const z=O=>{l(O.turn_id.toString());for(const U of O.other_players)i(r.set(U.id,new Lv(U.id,U.username).recieveJson(U)));y(O.selectedMode)},Z=O=>{i(new Map(r.set(O.id,new Lv(O.id,O.username).recieveJson(O))))},G=O=>{const U=r.get(O.id);U!==void 0&&(U.ready=O.state,i(new Map(r.set(U.id,U))),y(O.selectedMode))},le=()=>{c(!0);function O(U){const ae=document.querySelector("p#floating-clock");ae.innerHTML=`${U}`,ae.className="clocking"}O(3),setTimeout(()=>{O(2),setTimeout(()=>{O(1),setTimeout(()=>{h(!0)},1e3)},1e3)},1e3)},Ge=O=>{var U,ae,Q;if(l(O.turn),r.size>2){const q=((U=r.get(O.id))==null?void 0:U.username)??"player";(ae=P.current)==null||ae.message(`${q} disconected`,"error")}else p.pause(),(Q=P.current)==null||Q.dialog((q,ze)=>{var Ke;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((Ke=r.get(t.id))==null?void 0:Ke.balance)??0} </p>`,buttons:[ze("PLAY ANOTHER GAME",()=>{q(),document.location.reload()})]}},"winning");te(O.id)},ue=O=>{var Q,q,ze,Ke,Y,pt,Vt,xt,Nt,dn;const U=r.get(O.from);if(U!==void 0&&JSON.stringify(U.properties)!=JSON.stringify(O.pJson.properties)){var ae=new Audio("./buying1.mp3");ae.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),ae.loop=!1,ae.play()}if(O.from!==t.id&&U&&(U.recieveJson(O.pJson),i(new Map(r.set(O.from,U)))),O.pJson.balance<0){if(O.pJson.id!==t.id)if(r.size>2){const fe=O.pJson.username;(Q=P.current)==null||Q.message(`${fe} lost`,"info")}else if(r.has(t.id))p.pause(),(q=P.current)==null||q.dialog((fe,ve)=>{var Le;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((Le=r.get(t.id))==null?void 0:Le.balance)??0} </p>`,buttons:[ve("PLAY ANOTHER GAME",()=>{fe(),document.location.reload()})]}},"winning");else{const ve=Array.from(r.values()).filter(Le=>Le.id!==O.pJson.id)[0].username??0;p.pause(),(ze=P.current)==null||ze.dialog((Le,et)=>{var qe;return{innerHTML:`<h3> ${ve} WON! </h3> <p> ${ve} won with the balance of ${((qe=r.get(t.id))==null?void 0:qe.balance)??0} </p>`,buttons:[et("PLAY ANOTHER GAME",()=>{Le(),document.location.reload()})]}},"winning")}else p.pause(),(Ke=P.current)==null||Ke.dialog((fe,ve)=>{var Le;return{innerHTML:`<h3> YOU LOST! </h3> <p> you lost your money and lost the monopol with a wanted balance of ${-(((Le=r.get(t.id))==null?void 0:Le.balance)??0)} </p>`,buttons:[ve("CONTINUE WATCHING",()=>{fe()}),ve("PLAY ANOTHER GAME",()=>{fe(),document.location.reload()})]}},"loosing");te(O.pJson.id)}if(O.WinningMode==="monopols"||O.WinningMode==="monopols & trains"){let fe=function(ve){const Le=[];return ve.filter(function(et){return Le.includes(et)||Le.push(et),!1}),Le};for(const ve of Array.from(r.values())){const Le=[];for(const qe of ve.properties)["Special","Railroad","Utilities"].includes(qe.group)||Le.push(qe.group);let et=0;for(const qe of fe(Le)){const He=Le.filter(b=>b===qe).length,R=gr.properties.filter(b=>b.group===qe).length;He===R&&(et+=1)}if(et===3){p.pause(),ve.id===t.id?(Y=P.current)==null||Y.dialog((qe,He)=>({innerHTML:"<h3> YOU WON! </h3> <p> you have 3 sets! </p>",buttons:[He("PLAY ANOTHER GAME",()=>{qe(),document.location.reload()})]}),"winning"):(pt=P.current)==null||pt.dialog((qe,He)=>({innerHTML:`<h3> ${ve.username} WON! </h3> <p> got 3 sets! </p>`,buttons:[He("PLAY ANOTHER GAME",()=>{qe(),document.location.reload()})]}),"winning");return}}if(O.WinningMode==="monopols & trains"){for(const ve of Array.from(r.values()))if(ve.properties.filter(et=>et.group==="Railroad").length===4){p.pause(),ve.id===t.id?(Vt=P.current)==null||Vt.dialog((et,qe)=>({innerHTML:"<h3> YOU WON! </h3> <p> you have 4 railroads! </p>",buttons:[qe("PLAY ANOTHER GAME",()=>{et(),document.location.reload()})]}),"winning"):(xt=P.current)==null||xt.dialog((et,qe)=>({innerHTML:`<h3> ${ve.username} WON! </h3> <p> got 4 railroads! </p>`,buttons:[qe("PLAY ANOTHER GAME",()=>{et(),document.location.reload()})]}),"winning");return}}}if(l(O.turnId),O.turnId===t.id){const fe=r.get(O.turnId);fe&&fe.isInJail&&((Nt=S.current)==null||Nt.showJailsButtons(((fe==null?void 0:fe.getoutCards)??-1)>0))}(dn=M.current)==null||dn.reRenderPlayerList()},Ee=O=>{var U;(U=M.current)==null||U.addMessage(O)},Oe=O=>{var ze;A(Ke=>{var Y,pt;return[...Ke,Et(`${((Y=r.get(O.turnId))==null?void 0:Y.username)??"unknown player"} rolled [${O.listOfNums[0]}, ${O.listOfNums[1]}] moving to "${((pt=oe.get(O.listOfNums[2]))==null?void 0:pt.name)??""}"`)]});var U=new Audio("./rolling.mp3");U.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),U.loop=!1,U.play();const ae=r.get(t.id),Q=r.get(O.turnId),q=N(O.listOfNums[2],Q,!0,()=>{O.turnId!=t.id&&O.listOfNums[2]===30&&setTimeout(()=>{A(Y=>{var pt;return[...Y,Et(`${((pt=r.get(O.turnId))==null?void 0:pt.username)??"unknown player"} goes to jail`)]}),N(10,Q,!1,()=>{Q.position=10,Q.isInJail=!0;var Y=new Audio("./jail.mp3");Y.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),Y.loop=!1,Y.play(),Q.jailTurnsRemaining=3}).func()},800)});(ze=S.current)==null||ze.diceResults({l:[O.listOfNums[0],O.listOfNums[1]],time:ae.isInJail?2e3:q.time+2e3+800,onDone:()=>{var pt,Vt;if(t.id!==O.turnId)return;const Ke=((pt=r.get(t.id))==null?void 0:pt.position)??-1,Y=oe.get(Ke);Y!=null&&(Y.id==="communitychest"||Y.id==="chance"?t.emit("chorch_roll",{is_chance:Y.id==="chance",rolls:O.listOfNums[0]+O.listOfNums[1]}):(Vt=S.current)==null||Vt.setStreet({location:Ke,rolls:O.listOfNums[1]+O.listOfNums[0],onResponse:(xt,Nt)=>{var Le,et,qe,He,R,b,j,J,B,H,K,ie,re,Se,De,Re,We,tt,Rn,In,Jn,Ar,hn;var dn=0;if(xt==="buy"){T!==void 0&&T.notifications===!0&&((Le=P.current)==null||Le.message(`${((Y==null?void 0:Y.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),ae.balance-=((Y==null?void 0:Y.price)??0)*1,(et=S.current)==null||et.applyAnimation(1),ae.properties.push({posistion:ae.position,count:0,group:((qe=oe.get(ae.position))==null?void 0:qe.group)??""});var fe=new Audio("./buying1.mp3");fe.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play(),t.emit("history",Et(`${((He=r.get(t.id))==null?void 0:He.username)??"unknown player"} bought ${Y.name}`))}else if(xt==="advance-buy"){var fe=new Audio("./buying1.mp3");fe.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play();const vt=Array.from(new Map(ae.properties.map((bn,Mn)=>[Mn,bn])).entries()).filter(bn=>bn[1].posistion===Ke)[0][0],Fe=Nt;ae.properties[vt].count=Fe.state===5?"h":Fe.state,Fe.state===5?(T!==void 0&&T.notifications===!0&&((R=P.current)==null||R.message(`${Y.ohousecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),ae.balance-=Y.ohousecost??0,(b=S.current)==null||b.applyAnimation(1)):(T!==void 0&&T.notifications===!0&&((j=P.current)==null||j.message(`${Y.housecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),ae.balance-=(Y.housecost??0)*Fe.money,(J=S.current)==null||J.applyAnimation(1)),t.emit("history",Et(`${((B=r.get(t.id))==null?void 0:B.username)??"unknown player"} advanced ${Y.name}`))}else if(xt==="someones"){const Pt=Array.from(r.values());for(const vt of Pt)for(const Fe of vt.properties)if(Fe.posistion===Ke){var ve=0;if(Y.group==="Utilities"&&Fe.rent){const Mn=vt.properties.filter(Ie=>Ie.group==="Utilities").length===2?10:4;ve=Fe.rent*Mn}else if(Y.group==="Railroad"){const Mn=vt.properties.filter(_t=>_t.group==="Railroad").filter(_t=>_t.morgage===void 0||_t.morgage!==void 0&&_t.morgage===!1).length;ve=[0,25,50,100,200][Mn]}else Fe.count===0?ve=(Y==null?void 0:Y.rent)??0:typeof Fe.count=="number"&&Fe.count>0?ve=((Y==null?void 0:Y.multpliedrent)??[0,0,0,0])[Fe.count-1]??0:Fe.count==="h"&&(ve=((Y==null?void 0:Y.multpliedrent)??[0,0,0,0,0])[4]??0);T!==void 0&&T.notifications===!0&&((H=P.current)==null||H.message(`${ve} of money is deducted from the account`,"info",2,()=>{},!1));var fe=new Audio("./moneyminus.mp3");fe.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play(),(Fe.morgage===void 0||Fe.morgage!==void 0&&Fe.morgage===!1)&&(ae.balance-=ve),(K=S.current)==null||K.applyAnimation(1),t.emit("pay",{balance:ve,from:t.id,to:vt.id}),(ie=S.current)==null||ie.applyAnimation(1),t.emit("history",Et(`
                                                    ${((re=r.get(t.id))==null?void 0:re.username)??"unknown user"} pay ${ve} to ${((Se=r.get(vt.id))==null?void 0:Se.username)??"unknown user"}
                                                    `))}}else if(xt==="nothing"){if(((Y==null?void 0:Y.id)??"")=="gotojail"){const Pt=N(10,Q,!1,()=>{Q.position=10,Q.isInJail=!0,Q.jailTurnsRemaining=3});dn=Pt.time,Pt.func()}if((Y==null?void 0:Y.id)==="incometax"){ae.balance-=200,T!==void 0&&T.notifications===!0&&((De=P.current)==null||De.message("200 of money is deducted from the account","info",2,()=>{},!1));var fe=new Audio("./moneyminus.mp3");fe.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play(),(Re=S.current)==null||Re.applyAnimation(1),t.emit("history",Et(`${((We=r.get(t.id))==null?void 0:We.username)??"unknown player"} payed income taxes`))}if((Y==null?void 0:Y.id)==="luxerytax"){ae.balance-=100,T!==void 0&&T.notifications===!0&&((tt=P.current)==null||tt.message("100 of money is deducted from the account","info",2,()=>{},!1));var fe=new Audio("./moneyminus.mp3");fe.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play(),(Rn=S.current)==null||Rn.applyAnimation(1),t.emit("history",Et(`${((In=r.get(t.id))==null?void 0:In.username)??"unknown player"} payed luxery taxes`))}}else if(xt==="special_action"){T!==void 0&&T.notifications===!0&&((Jn=P.current)==null||Jn.message(`${((Y==null?void 0:Y.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1));var fe=new Audio("./buying1.mp3");fe.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),fe.loop=!1,fe.play(),ae.balance-=((Y==null?void 0:Y.price)??0)*1,(Ar=S.current)==null||Ar.applyAnimation(1);const vt=Nt,Fe=oe.get(ae.position),bn=vt.rolls;ae.properties.push({posistion:ae.position,count:0,rent:bn,group:(Fe==null?void 0:Fe.group)??""}),t.emit("history",Et(`${((hn=r.get(t.id))==null?void 0:hn.username)??"unknown player"} bought ${(Fe==null?void 0:Fe.name)??"unkown place"} with rent of ${bn}`))}setTimeout(()=>{var vt;i(new Map(r.set(t.id,ae))),(vt=S.current)==null||vt.freeDice();const Pt=r.get(t.id).toJson();t.emit("finish-turn",Pt)},dn)}}))}}),Q.isInJail?setTimeout(()=>{O.listOfNums[0]==O.listOfNums[1]?(Q.isInJail=!1,setTimeout(()=>{q.func()},2e3)):Q.jailTurnsRemaining>0&&(Q.jailTurnsRemaining-=1,Q.jailTurnsRemaining===0&&(Q.isInJail=!1)),i(new Map(r.set(O.turnId,Q)))},1500):setTimeout(()=>{q.func()},2e3)},lt=O=>{var Q;const U=r.get(O.to);if(U){if(O.option==="card")U.getoutCards-=1;else{U.balance-=50,U.id===t.id&&T!==void 0&&T.notifications===!0&&((Q=P.current)==null||Q.message("50 of money is deducted from the account","info",2,()=>{},!1));var ae=new Audio("./moneyminus.mp3");ae.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),ae.loop=!1,ae.play()}U.isInJail=!1,U.jailTurnsRemaining=0,i(new Map(r.set(O.to,U)))}},ct=O=>{var U;for(const ae of O.pJson){const Q=r.get(ae.id);ae.position=(Q==null?void 0:Q.position)??ae.position,Q==null||Q.recieveJson(ae)}t.id===O.playerId&&((U=S.current)==null||U.applyAnimation(2))},we=O=>{var ae;A(Q=>{var q;return[...Q,Et(`${((q=r.get(O.turnId))==null?void 0:q.username)??"unknown player"} got ${O.is_chance?"chance":"community chest "} card that said "${O.element.title}"`)]});const U=3e3;(ae=S.current)==null||ae.chorch(O.element,O.is_chance,U),setTimeout(()=>{var xt,Nt,dn,fe,ve,Le,et,qe;const Q=O.element,q=r.get(O.turnId);if(q===void 0)return;function ze(He){var j,J,B;if(q===void 0)return 0;const R=Array.from(r.values()).filter(H=>H.id!==q.id);q.id===t.id&&(He>0?t.emit("history",Et(`${q.username??"unknown user"} gave ${He} money to [${R.map(H=>H.username).join(", ")}]`)):t.emit("history",Et(`${q.username??"unknown user"} recieve ${-He} money from [${R.map(H=>H.username).join(", ")}]`)));for(const H of R){if(H.balance+=He,H.id===t.id&&T!==void 0&&T.notifications===!0){(j=P.current)==null||j.message(`${He} of money is added to the account`,"info",2,()=>{},!1);var b=new Audio("./moneyplus.mp3");b.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),b.loop=!1,b.play()}i(new Map(r.set(H.id,H))),q.id===t.id&&(He>0?t.emit("pay",{balance:He,from:t.id,to:H.id}):(t.emit("pay",{balance:He,from:H.id,to:t.id}),t.emit("history",Et(`
                                ${((J=r.get(t.id))==null?void 0:J.username)??"unknown user"} pay ${Vt} to ${((B=r.get(q.id))==null?void 0:B.username)??"unknown user"}
                                `))))}return R.length}var Ke=0;switch(Q.action){case"move":if(Q.tileid){const H=(xt=new Map(gr.properties.map(ie=>[ie.id,ie])).get(Q.tileid))==null?void 0:xt.posistion;if(H===void 0)break;const K=N(H,q);Ke=K.time,K.func()}else if(Q.count){const B=N((q.position+Q.count)%40,q,!0,()=>{},Q.count>=0);Ke=B.time,B.func()}break;case"addfunds":if(q.balance+=Q.amount??0,q.id===t.id){T!==void 0&&T.notifications===!0&&((Nt=P.current)==null||Nt.message(`${Q.amount??0} of money is added to the account`,"info",2,()=>{},!1));var Y=new Audio("./moneyplus.mp3");Y.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),Y.loop=!1,Y.play(),(dn=S.current)==null||dn.applyAnimation(2)}break;case"jail":if(Q.subaction!==void 0){switch(Q.subaction){case"getout":q.getoutCards+=1;break;case"goto":const B=N(10,q,!1,()=>{q.position=10,q.isInJail=!0;var H=new Audio("./jail.mp3");H.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),H.loop=!1,H.play(),q.jailTurnsRemaining=3});Ke=B.time,B.func();break}i(new Map(r.set(q.id,q)))}break;case"removefunds":if(q.balance-=Q.amount??0,q.id===t.id){(fe=S.current)==null||fe.applyAnimation(1),T!==void 0&&T.notifications===!0&&((ve=P.current)==null||ve.message(`${Q.amount??0} of money is deducted from the account`,"info",2,()=>{},!1));var Y=new Audio("./moneyminus.mp3");Y.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),Y.loop=!1,Y.play()}break;case"removefundstoplayers":ze(Q.amount??0),q.id===t.id&&((Le=S.current)==null||Le.applyAnimation(1));break;case"addfundsfromplayers":ze(-(Q.amount??0));break;case"movenearest":let He=function(B,H){B.sort((K,ie)=>K-ie);for(let K=0;K<B.length;K++)if(B[K]>H)return B[K];return B[0]};if(!Q.groupid)return;var pt="";Q.groupid==="utility"?pt="Utilities":pt="Railroad";const R=gr.properties.filter(B=>B.group===pt).map(B=>B.posistion),b=He(R,q.position),j=N(b,q);Ke=-1,j.func(),setTimeout(()=>{var B;if(q.id===t.id){const H=(q==null?void 0:q.position)??-1,K=oe.get(H);K!==void 0&&((B=S.current)==null||B.setStreet({location:H,rolls:O.rolls,onResponse:(ie,re)=>{var Re,We,tt,Rn,In,Jn,Ar,hn,Pt,vt,Fe,bn,Mn,Ie,_t,Qn;if(ie==="buy"){T!==void 0&&T.notifications===!0&&((Re=P.current)==null||Re.message(`${((K==null?void 0:K.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),q.balance-=((K==null?void 0:K.price)??0)*1,(We=S.current)==null||We.applyAnimation(1);const fn=oe.get(q.position);q.properties.push({posistion:q.position,count:0,group:(fn==null?void 0:fn.group)??""});var Se=new Audio("./buying1.mp3");Se.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),Se.loop=!1,Se.play(),i(new Map(r.set(t.id,q))),(tt=S.current)==null||tt.freeDice();const je=r.get(t.id).toJson();t.emit("finish-turn",je),t.emit("history",Et(`${((Rn=r.get(t.id))==null?void 0:Rn.username)??"unknown player"} bought ${(fn==null?void 0:fn.name)??"unkown place"}`))}else if(ie==="special_action"){console.log(re),T!==void 0&&T.notifications===!0&&((In=P.current)==null||In.message(`${((K==null?void 0:K.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),q.balance-=((K==null?void 0:K.price)??0)*1;const je=re.rolls;(Jn=S.current)==null||Jn.applyAnimation(1);const Ot=oe.get(q.position);q.properties.push({posistion:q.position,count:0,rent:je,group:(Ot==null?void 0:Ot.group)??""});var Se=new Audio("./buying1.mp3");Se.volume=.5*(((T==null?void 0:T.audio[1])??100)/100)*(((T==null?void 0:T.audio[0])??100)/100),Se.loop=!1,Se.play(),i(new Map(r.set(t.id,q))),(Ar=S.current)==null||Ar.freeDice();const ei=r.get(t.id).toJson();t.emit("finish-turn",ei),t.emit("history",Et(`${((hn=r.get(t.id))==null?void 0:hn.username)??"unknown player"} bought ${(Ot==null?void 0:Ot.name)??"unkown place"} with rent of ${je}`))}else if(ie==="someones"){const fn=Array.from(r.values());for(const je of fn)for(const Ot of je.properties)if(Ot.posistion===H){var De=0;if(K.group==="Utilities"&&Ot.rent){const Yn=[Math.floor(Math.random()*6)+1,Math.floor(Math.random()*6)+1];t.emit("history",Et(`${((Pt=r.get(t.id))==null?void 0:Pt.username)??"unknown player"} rolled [${Yn[0]}, ${Yn[1]}]`)),(vt=S.current)==null||vt.diceResults({l:[Yn[0],Yn[1]],time:2e3,onDone:()=>{var Jl,ti,ly,cy,uy;De=(Yn[0]+Yn[1])*(Q.rentmultiplier??1),T!==void 0&&T.notifications===!0&&((Jl=P.current)==null||Jl.message(`${De} of money is deducted from the account`,"info",2,()=>{},!1));var ei=new Audio("./moneyminus.mp3");ei.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),ei.loop=!1,ei.play(),q.balance-=De,(ti=S.current)==null||ti.applyAnimation(1),t.emit("pay",{balance:De,from:t.id,to:je.id}),t.emit("history",Et(`${((ly=r.get(t.id))==null?void 0:ly.username)??"unknown player"} pay ${De} to ${((cy=r.get(je.id))==null?void 0:cy.username)??"unknown player"}`)),i(new Map(r.set(t.id,q))),(uy=S.current)==null||uy.freeDice();const bP=r.get(t.id).toJson();t.emit("finish-turn",bP)}})}else if(K.group==="Railroad"){const Yn=je.properties.filter(ti=>ti.group==="Railroad").filter(ti=>ti.morgage===void 0||ti.morgage!==void 0&&ti.morgage===!1).length;De=[0,25,50,100,200][Yn]*(Q.rentmultiplier??1),T!==void 0&&T.notifications===!0&&((Fe=P.current)==null||Fe.message(`${De} of money is deducted from the account`,"info",2,()=>{},!1));var Se=new Audio("./moneyminus.mp3");Se.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),Se.loop=!1,Se.play(),(Ot.morgage===void 0||Ot.morgage!==void 0&&Ot.morgage===!1)&&(q.balance-=De),(bn=S.current)==null||bn.applyAnimation(1),t.emit("pay",{balance:De,from:t.id,to:je.id}),t.emit("history",Et(`${((Mn=r.get(t.id))==null?void 0:Mn.username)??"unknown player"} pay ${De} to ${((Ie=r.get(je.id))==null?void 0:Ie.username)??"unknown player"}`)),i(new Map(r.set(t.id,q))),(_t=S.current)==null||_t.freeDice();const Jl=r.get(t.id).toJson();t.emit("finish-turn",Jl)}}}else{(Qn=S.current)==null||Qn.freeDice();const fn=r.get(t.id).toJson();t.emit("finish-turn",fn)}}}))}},j.time);break;case"propertycharges":let J=function(B){for(const H of B);return 1};var Vt=(Q.buildings??1)*J(q.properties.filter(B=>typeof B.count=="number").map(B=>B.count))+(Q.hotels??1)*q.properties.filter(B=>B.count==="h").length;if(console.log(`
${(Q.buildings??1)*J(q.properties.filter(B=>typeof B.count=="number").map(B=>B.count))} + 
${(Q.hotels??1)*q.properties.filter(B=>B.count==="h").length} 
which is ${Vt}
                        `),q.id===t.id&&Vt>0){T!==void 0&&T.notifications===!0&&((et=P.current)==null||et.message(`${Vt} of money is deducted from the account`,"info",2,()=>{},!1));var Y=new Audio("./moneyminus.mp3");Y.volume=((T==null?void 0:T.audio[1])??100)/100*(((T==null?void 0:T.audio[0])??100)/100),Y.loop=!1,Y.play(),(qe=S.current)==null||qe.applyAnimation(1)}q.balance-=Vt,i(new Map(r.set(q.id,q)));break}Ke>=0&&setTimeout(()=>{var He;i(new Map(r.set(q.id,q))),q.id===t.id&&((He=S.current)==null||He.freeDice(),t.emit("finish-turn",r.get(t.id).toJson()))},Ke)},U)};function ut(O){const U=r.get(O.id);U!==void 0&&(U.positions={x:O.x,y:O.y},r.set(O.id,U))}function ur(){var O;p.pause(),(O=P.current)==null||O.dialog((U,ae)=>({innerHTML:"<h3> LOST CONNECTION </h3> <p> you were disconnected from the game </p>",buttons:[ae("PLAY ANOTHER GAME",()=>{U(),document.location.reload()})]}),"loosing")}function Yd(O){A(U=>[...U,O])}function Xd(O){const U=r.get(O.playerId);U!==void 0&&U.recieveJson(O.pJson)}document.addEventListener("mousemove",X),t.on("initials",z),t.on("new-player",Z),t.on("ready",G),t.on("start-game",le),t.on("disconnected-player",Ge),t.on("turn-finished",ue),t.on("message",Ee),t.on("dice_roll_result",Oe),t.on("unjail",lt),t.on("member_updating",ct),t.on("chorch_result",we),t.on("mouse",ut),t.on("disconnect",ur),t.on("player_update",Xd),t.on("history",Yd),t.on("trade",()=>{m.AllowDeals&&$(!0)}),t.on("cancel-trade",()=>{m.AllowDeals&&$(void 0)}),t.on("trade-update",O=>{m.AllowDeals&&$(O)}),t.on("submit-trade",O=>{if(m.AllowDeals){$(void 0);for(const U of O.pJsons){const ae=r.get(U.id);ae!==void 0&&ae.recieveJson(U)}A(U=>[...U,Et(O.action)])}});var Kl=!0;return Kl&&t.emit("name",e),()=>{Kl=!1,clearInterval(ce),document.removeEventListener("mousemove",X)}},[]),I.useEffect(()=>{var T;(T=M.current)==null||T.reRenderPlayerList()},[r]),u?d.jsxs(d.Fragment,{children:[w!==void 0&&w.accessibility[3]?d.jsx("div",{className:"cursors",children:Array.from(r.values()).filter(T=>T.id!==t.id).map((T,ce)=>d.jsx("img",{src:"./cursor.png",style:{translate:`${T.positions.x}px ${T.positions.y}px`},className:"cursor"},ce))}):d.jsx(d.Fragment,{}),d.jsxs("main",{children:[d.jsx(OA,{currentTurn:o,ref:M,name:e,socket:t,players:s,server:n,Morgage:{onCanc:(T,ce)=>{var z,Z,G;var X=JSON.parse(document.cookie).settings;const te=r.get(t.id);if(te!==void 0){X!==void 0&&X.notifications===!0&&((z=P.current)==null||z.message(`${T} of money is deducted from the account for canceling mortgage`,"info",2,()=>{},!1)),te.balance-=T,(Z=S.current)==null||Z.applyAnimation(1);var N=new Audio("./buying1.mp3");N.volume=.5*(((X==null?void 0:X.audio[1])??100)/100)*(((X==null?void 0:X.audio[0])??100)/100),N.loop=!1,N.play(),t.emit("history",Et(`${((G=r.get(t.id))==null?void 0:G.username)??"unknown player"} cancel mortgage on ${ce}`)),i(new Map(r.set(t.id,te)))}},onMort:(T,ce)=>{var z,Z,G;var X=JSON.parse(document.cookie).settings;const te=r.get(t.id);if(te!==void 0){X!==void 0&&X.notifications===!0&&((z=P.current)==null||z.message(`${T} of money is deducted from the account for mortgage`,"info",2,()=>{},!1)),te.balance-=T,(Z=S.current)==null||Z.applyAnimation(1);var N=new Audio("./buying1.mp3");N.volume=.5*(((X==null?void 0:X.audio[1])??100)/100)*(((X==null?void 0:X.audio[0])??100)/100),N.loop=!1,N.play(),t.emit("history",Et(`${((G=r.get(t.id))==null?void 0:G.username)??"unknown player"} mortgaged ${ce}`)),i(new Map(r.set(t.id,te)))}}},callServer:()=>{const T=document.body.querySelector("#root");T.style.transform="translateX(100%)"},history:k,time:_,selectedMode:m}),d.jsx(MA,{clickedOnBoard:T=>{var ce;(ce=M.current)==null||ce.clickedOnBoard(T)},ref:S,socket:t,players:Array.from(r.values()),myTurn:o===t.id,tradeObj:D,tradeApi:{onSelectPlayer(T){const ce=r.get(T),X=r.get(t.id);if(ce===void 0||X===void 0)return;const te={turnPlayer:{id:X.id,balance:0,prop:[]},againstPlayer:{id:ce.id,balance:0,prop:[]}};t.emit("trade-update",te)}},selectedMode:m})]}),d.jsx(pS,{ref:P}),d.jsxs("div",{id:"server",children:[d.jsxs("main",{children:[d.jsx("div",{className:"upper",onClick:()=>{const T=document.body.querySelector("#root");T.style.transform=""},children:"Server.exe"}),d.jsx("div",{className:"middle"}),d.jsx("div",{className:"lower",children:d.jsx("input",{type:"text"})})]}),d.jsx("footer",{onClick:()=>{const T=document.body.querySelector("#root");T.style.transform=""},children:d.jsx("img",{src:"icon.png",alt:""})})]})]}):d.jsxs("div",{className:"lobby",children:[d.jsxs("main",{children:[d.jsx("section",{children:d.jsxs("div",{children:[d.jsxs("h3",{children:["Hello there ",e]}),"the players that are currently in the lobby are",d.jsxs("div",{children:[Array.from(r.values()).map((T,ce)=>d.jsx("p",{style:T.ready?{backgroundColor:"#32a852"}:{},className:"lobby-players",children:T.username},ce)),d.jsx("center",{children:d.jsx("button",{disabled:a,onClick:()=>{t.emit("ready",{ready:!f}),g(!f)},children:f?"Not Ready":"Ready"})})]}),d.jsx("br",{})]})}),d.jsxs("div",{children:[n===void 0?d.jsx(d.Fragment,{children:d.jsxs("p",{style:{opacity:.5,margin:0,textAlign:"center",fontWeight:"100"},children:["the server-admin is ",d.jsx("br",{})," choosing the gamemode"]})}):d.jsx(d.Fragment,{}),d.jsxs("div",{className:"modes",children:[d.jsxs("main",{children:[d.jsx("h3",{children:m.Name}),d.jsxs("table",{children:[d.jsxs("tr",{children:[d.jsx("td",{children:" Winning State:"})," ",d.jsx("td",{children:m.WinningMode.toUpperCase()})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"Trades: "}),d.jsx("td",{children:m.AllowDeals?"ALLOWED":"NOT-ALLOWED"})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"Mortgage: "}),d.jsx("td",{children:m.mortageAllowed?"ALLOWED":"NOT-ALLOWED"})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"Starting Cash: "}),d.jsxs("td",{children:[m.startingCash," M"]})]}),d.jsxs("tr",{children:[d.jsx("td",{children:"Turn Timer: "}),d.jsx("td",{children:m.turnTimer===void 0||typeof m.turnTimer=="number"&&m.turnTimer===0?"No Timer":JSON.stringify(m.turnTimer)+" Sec"})]})]})]}),d.jsxs("div",{className:"selecting-mde",children:[ep.map((T,ce)=>d.jsx("p",{"data-select":JSON.stringify(T)===JSON.stringify(m),onClick:()=>{n!==void 0&&t.emit("ready",{mode:T})},"data-disabled":n===void 0,children:T.Name},ce)),d.jsx("p",{"data-select":m.Name==="Custom Mode","data-disabled":n===void 0,onClick:()=>{const T=window.prompt(`Winning State
1=last-standing
2=monopols
3=monopols & trains`,"3"),ce=window.confirm("Allow Trades"),X=window.confirm("Allow Mortgage"),te=window.prompt("Starting Cash","1500"),N=window.prompt("Turn Timer","0"),z={AllowDeals:ce,WinningMode:T==="2"?"monopols":T==="3"?"monopols & trains":"last-standing",Name:"Custom Mode",mortageAllowed:X,startingCash:parseInt(te)??1500,turnTimer:parseInt(N)??0};n!==void 0&&t.emit("ready",{mode:z})},children:"Custom Mode"})]})]})]})]}),d.jsx("p",{id:"floating-clock"})]})}var mS={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,s=0,o=this._parts.length;s<o;s++)i.append(this._parts[s]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(mS);var gS=mS.exports,FA=gS.BufferBuilder,$v=gS.binaryFeatures,VA={unpack:function(t){var e=new Gt(t);return e.unpack()},pack:function(t){var e=new Kt;e.pack(t);var n=e.getBuffer();return n}},UA=VA;function Gt(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Gt.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Gt.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};Gt.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};Gt.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};Gt.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};Gt.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256};Gt.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536};Gt.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};Gt.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};Gt.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};Gt.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,s;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(s=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(s),n+=2):(s=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(s),n+=3);return this.index+=t,r};Gt.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};Gt.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};Gt.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};Gt.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,s=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*s};Gt.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function Kt(){this.bufferBuilder=new FA}Kt.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Kt.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)$v.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)$v.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Kt.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Kt.prototype.pack_string=function(t){var e=BA(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Kt.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};Kt.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};Kt.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),s=Math.pow(2,32),o=e<<31|n+1023<<20|i/s&1048575,l=i%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(l)};Kt.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};Kt.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};Kt.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};Kt.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Kt.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Kt.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};Kt.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};Kt.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};Kt.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function $A(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function BA(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,$A).length}const Bv=Yu(UA);let yS=!0,vS=!0;function sa(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function bo(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,l){if(o!==e)return i.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,a),i.apply(this,[o,a])};const s=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(l))return s.apply(this,arguments);const a=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function zA(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(yS=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function qA(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(vS=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function zm(){if(typeof window=="object"){if(yS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function gd(t,e){vS&&console.warn(t+" is deprecated, please use "+e+" instead.")}function HA(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=sa(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=sa(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=sa(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=sa(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function zv(t){return Object.prototype.toString.call(t)==="[object Object]"}function _S(t){return zv(t)?Object.keys(t).reduce(function(e,n){const r=zv(t[n]),i=r?_S(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function tp(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?tp(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{tp(t,t.get(i),n)})}))}function qv(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(l=>{l.type===r&&l.trackId===o.id&&tp(t,l,i)})}),i}const Hv=zm;function ES(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const h=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(u.ideal!==void 0){a.optional=a.optional||[];let f={};typeof u.ideal=="number"?(f[h("min",c)]=u.ideal,a.optional.push(f),f={},f[h("max",c)]=u.ideal,a.optional.push(f)):(f[h("",c)]=u.ideal,a.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[h("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[h(f,c)]=u[f])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(e.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,h,f){h in u&&!(f in u)&&(u[f]=u[h],delete u[h])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let h;if(c.exact==="environment"||c.ideal==="environment"?h=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(h=["front"]),h)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let g=f.find(m=>h.some(y=>m.label.toLowerCase().includes(y)));return!g&&f.length&&h.includes("back")&&(g=f[f.length-1]),g&&(l.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),l.video=r(l.video),Hv("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return Hv("chrome: "+JSON.stringify(l)),a(l)},s=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,a,c){i(l,u=>{n.webkitGetUserMedia(u,a,h=>{c&&c(s(h))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function WA(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),t.navigator.mediaDevices.getUserMedia(r)})}}}function SS(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function TS(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else bo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function wS(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const l=this._senders.find(a=>a.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function CS(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const o=function(a){const c={};return a.result().forEach(h=>{const f={id:h.id,timestamp:h.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[h.type]||h.type};h.names().forEach(g=>{f[g]=h.stat(g)}),c[f.id]=f}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(o(c)))};return e.apply(this,[a,r])}return new Promise((a,c)=>{e.apply(this,[function(u){a(l(o(u)))},c])}).then(i,s)}}function PS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>qv(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),bo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>qv(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(l=>{l.track===r&&(i?o=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(s?o=!0:s=l),l.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function RS(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(h=>h.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(o);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function IS(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return RS(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(h=>this._reverseStreams[h.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(h=>{if(this.getSenders().find(g=>g.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const h=new t.MediaStream(u.getTracks());this._streams[u.id]=h,this._reverseStreams[h.id]=u,u=h}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(y=>y===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[h.id];if(m)m.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new t.MediaStream([u]);this._streams[h.id]=y,this._reverseStreams[y.id]=h,this.addStream(y)}return this.getSenders().find(y=>y.track===u)};function s(c,u){let h=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const g=c._reverseStreams[f],m=c._streams[g.id];h=h.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:h})}function o(c,u){let h=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const g=c._reverseStreams[f],m=c._streams[g.id];h=h.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:u.type,sdp:h})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],h={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[m=>{const y=s(this,m);f[0].apply(null,[y])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):u.apply(this,arguments).then(m=>s(this,m))}};t.RTCPeerConnection.prototype[c]=h[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(y=>u.track===y)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function np(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function bS(t,e){bo(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Wv=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:bS,shimAddTrackRemoveTrack:IS,shimAddTrackRemoveTrackWithNative:RS,shimGetDisplayMedia:WA,shimGetSendersWithDtmf:wS,shimGetStats:CS,shimGetUserMedia:ES,shimMediaStream:SS,shimOnTrack:TS,shimPeerConnection:np,shimSenderReceiverGetStats:PS},Symbol.toStringTag,{value:"Module"}));function GA(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&gd("RTCIceServer.url","RTCIceServer.urls");const s=typeof i=="string";return s&&(i=[i]),i=i.filter(o=>{if(o.indexOf("stun:")===0)return!1;const l=o.startsWith("turn")&&!o.startsWith("turn:[")&&o.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}var AS={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,s){return(s>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]=r[s+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,s=n.substr(n.indexOf(" ")+1).split(";"),o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var s=[];Object.keys(n.parameters).forEach(function(o){n.parameters[o]?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(s){r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substr(r+1,s-r-1),i.value=n.substr(s+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(s){i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substr(12),password:s.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),s=i[0].split(" "),o=3;o<s.length;o++){var l=s[o],a=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=e.parseRtpMap(a),u=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=u.length?e.parseFmtp(u[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(h){r.headerExtensions.push(e.parseExtmap(h))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(o){return o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(o){i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});var s=0;return r.codecs.forEach(function(o){o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(o){i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,u=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){var g=f.substr(17).split(" ");return g.map(function(m){return parseInt(m,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),i.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var g={ssrc:a,codecPayloadType:parseInt(f.parameters.apt,10)};a&&c&&(g.rtx={ssrc:c}),r.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&a&&r.push({ssrc:a});var h=e.matchPrefix(n,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substr(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substr(5),10)*1e3*.95-50*40*8:h=void 0,r.forEach(function(f){f.maxBitrate=h})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;var o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var s=e.matchPrefix(n,"a=ssrc:").map(function(o){return e.parseSsrcMedia(o)}).filter(function(o){return o.attribute==="msid"});if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),s;i.length>0&&(s=parseInt(i[0].substr(19),10)),isNaN(s)&&(s=65536);var o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:s};var l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var s,o=r!==void 0?r:2;n?s=n:s=e.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,s){var o=e.writeRtpDescription(n.kind,r);if(o+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),o+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),o+="a=mid:"+n.mid+`\r
`,n.direction?o+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?o+=`a=sendrecv\r
`:n.rtpSender?o+=`a=sendonly\r
`:n.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,n.rtpSender){var l="msid:"+s.id+" "+n.rtpSender.track.id+`\r
`;o+="a="+l,o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),o},e.getDirection=function(n,r){for(var i=e.splitLines(n),s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(AS);var kS=AS.exports;const Vc=Yu(kS);var pe=kS;function KA(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function Gv(t,e,n,r,i){var s=pe.writeRtpDescription(t.kind,e);if(s+=pe.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=pe.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),s+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?s+=`a=sendrecv\r
`:t.rtpSender?s+=`a=sendonly\r
`:t.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var l="msid:"+(r?r.id:"-")+" "+o+`\r
`;s+="a="+l,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+pe.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+pe.localCName+`\r
`),s}function JA(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var s=typeof i=="string";return s&&(i=[i]),i=i.filter(function(o){var l=o.indexOf("turn:")===0&&o.indexOf("transport=udp")!==-1&&o.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):o.indexOf("stun:")===0&&e>=14393&&o.indexOf("?transport=udp")===-1}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}function pc(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(s,o){s=parseInt(s,10);for(var l=0;l<o.length;l++)if(o[l].payloadType===s||o[l].preferredPayloadType===s)return o[l]},i=function(s,o,l,a){var c=r(s.parameters.apt,l),u=r(o.parameters.apt,a);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return t.codecs.forEach(function(s){for(var o=0;o<e.codecs.length;o++){var l=e.codecs[o];if(s.name.toLowerCase()===l.name.toLowerCase()&&s.clockRate===l.clockRate){if(s.name.toLowerCase()==="rtx"&&s.parameters&&l.parameters.apt&&!i(s,l,t.codecs,e.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(s.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<s.rtcpFeedback.length;c++)if(s.rtcpFeedback[c].type===a.type&&s.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(s){for(var o=0;o<e.headerExtensions.length;o++){var l=e.headerExtensions[o];if(s.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function Kv(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function Ih(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function Yt(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var QA=function(t,e){function n(a,c){c.addTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,u,h){var f=new Event("track");f.track=c,f.receiver=u,f.transceiver={receiver:u},f.streams=h,t.setTimeout(function(){a._dispatchEvent("track",f)})}var s=function(a){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){c[f]=u[f].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw Yt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=JA(a.iceServers||[],e),this._iceGatherers=[],a.iceCandidatePoolSize)for(var h=a.iceCandidatePoolSize;h>0;h--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=pe.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},s.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(a,c){var u=this.transceivers.length>0,h={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)h.iceTransport=this.transceivers[0].iceTransport,h.dtlsTransport=this.transceivers[0].dtlsTransport;else{var f=this._createIceAndDtlsTransports();h.iceTransport=f.iceTransport,h.dtlsTransport=f.dtlsTransport}return c||this.transceivers.push(h),h},s.prototype.addTrack=function(a,c){if(this._isClosed)throw Yt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(g){return g.track===a});if(u)throw Yt("InvalidAccessError","Track already exists.");for(var h,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===a.kind&&(h=this.transceivers[f]);return h||(h=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),h.track=a,h.stream=c,h.rtpSender=new t.RTCRtpSender(a,h.dtlsTransport),h.rtpSender},s.prototype.addStream=function(a){var c=this;if(e>=15025)a.getTracks().forEach(function(h){c.addTrack(h,a)});else{var u=a.clone();a.getTracks().forEach(function(h,f){var g=u.getTracks()[f];h.addEventListener("enabled",function(m){g.enabled=m.enabled})}),u.getTracks().forEach(function(h){c.addTrack(h,u)})}},s.prototype.removeTrack=function(a){if(this._isClosed)throw Yt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(f){return f.rtpSender===a});if(!c)throw Yt("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var h=this.transceivers.map(function(f){return f.stream});h.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(u){var h=c.getSenders().find(function(f){return f.track===u});h&&c.removeTrack(h)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},s.prototype._createIceGatherer=function(a,c){var u=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var h=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(h,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(f){var g=!f.candidate||Object.keys(f.candidate).length===0;h.state=g?"completed":"gathering",u.transceivers[a].bufferedCandidateEvents!==null&&u.transceivers[a].bufferedCandidateEvents.push(f)},h.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),h},s.prototype._gather=function(a,c){var u=this,h=this.transceivers[c].iceGatherer;if(!h.onlocalcandidate){var f=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,h.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),h.onlocalcandidate=function(g){if(!(u.usingBundle&&c>0)){var m=new Event("icecandidate");m.candidate={sdpMid:a,sdpMLineIndex:c};var y=g.candidate,w=!y||Object.keys(y).length===0;if(w)(h.state==="new"||h.state==="gathering")&&(h.state="completed");else{h.state==="new"&&(h.state="gathering"),y.component=1,y.ufrag=h.getLocalParameters().usernameFragment;var v=pe.writeCandidate(y);m.candidate=Object.assign(m.candidate,pe.parseCandidate(v)),m.candidate.candidate=v,m.candidate.toJSON=function(){return{candidate:m.candidate.candidate,sdpMid:m.candidate.sdpMid,sdpMLineIndex:m.candidate.sdpMLineIndex,usernameFragment:m.candidate.usernameFragment}}}var p=pe.getMediaSections(u._localDescription.sdp);w?p[m.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:p[m.candidate.sdpMLineIndex]+="a="+m.candidate.candidate+`\r
`,u._localDescription.sdp=pe.getDescription(u._localDescription.sdp)+p.join("");var E=u.transceivers.every(function(_){return _.iceGatherer&&_.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),w||u._dispatchEvent("icecandidate",m),E&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},t.setTimeout(function(){f.forEach(function(g){h.onlocalcandidate(g)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var a=this,c=new t.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var u=new t.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){a._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},s.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var u=this.transceivers[a].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[a].iceTransport);var h=this.transceivers[a].dtlsTransport;h&&(delete h.ondtlsstatechange,delete h.onerror,delete this.transceivers[a].dtlsTransport)},s.prototype._transceive=function(a,c,u){var h=pc(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(h.encodings=a.sendEncodingParameters,h.rtcp={cname:pe.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(h.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(h)),u&&a.rtpReceiver&&h.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&e<15019&&a.recvEncodingParameters.forEach(function(f){delete f.rtx}),a.recvEncodingParameters.length?h.encodings=a.recvEncodingParameters:h.encodings=[{}],h.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(h.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(h.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(h))},s.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Yt("TypeError",'Unsupported type "'+a.type+'"'));if(!Kv("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Yt("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var u,h;if(a.type==="offer")u=pe.splitSections(a.sdp),h=u.shift(),u.forEach(function(g,m){var y=pe.parseRtpParameters(g);c.transceivers[m].localCapabilities=y}),c.transceivers.forEach(function(g,m){c._gather(g.mid,m)});else if(a.type==="answer"){u=pe.splitSections(c._remoteDescription.sdp),h=u.shift();var f=pe.matchPrefix(h,"a=ice-lite").length>0;u.forEach(function(g,m){var y=c.transceivers[m],w=y.iceGatherer,v=y.iceTransport,p=y.dtlsTransport,E=y.localCapabilities,_=y.remoteCapabilities,C=pe.isRejected(g)&&pe.matchPrefix(g,"a=bundle-only").length===0;if(!C&&!y.rejected){var k=pe.getIceParameters(g,h),A=pe.getDtlsParameters(g,h);f&&(A.role="server"),(!c.usingBundle||m===0)&&(c._gather(y.mid,m),v.state==="new"&&v.start(w,k,f?"controlling":"controlled"),p.state==="new"&&p.start(A));var D=pc(E,_);c._transceive(y,D.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Yt("TypeError",'Unsupported type "'+a.type+'"'));if(!Kv("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Yt("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(v){u[v.id]=v});var h=[],f=pe.splitSections(a.sdp),g=f.shift(),m=pe.matchPrefix(g,"a=ice-lite").length>0,y=pe.matchPrefix(g,"a=group:BUNDLE ").length>0;c.usingBundle=y;var w=pe.matchPrefix(g,"a=ice-options:")[0];return w?c.canTrickleIceCandidates=w.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,f.forEach(function(v,p){var E=pe.splitLines(v),_=pe.getKind(v),C=pe.isRejected(v)&&pe.matchPrefix(v,"a=bundle-only").length===0,k=E[0].substr(2).split(" ")[2],A=pe.getDirection(v,g),D=pe.parseMsid(v),$=pe.getMid(v)||pe.generateIdentifier();if(C||_==="application"&&(k==="DTLS/SCTP"||k==="UDP/DTLS/SCTP")){c.transceivers[p]={mid:$,kind:_,protocol:k,rejected:!0};return}!C&&c.transceivers[p]&&c.transceivers[p].rejected&&(c.transceivers[p]=c._createTransceiver(_,!0));var S,M,P,oe,T,ce,X,te,N,z=pe.parseRtpParameters(v),Z,G;C||(Z=pe.getIceParameters(v,g),G=pe.getDtlsParameters(v,g),G.role="client"),X=pe.parseRtpEncodingParameters(v);var le=pe.parseRtcpParameters(v),Ge=pe.matchPrefix(v,"a=end-of-candidates",g).length>0,ue=pe.matchPrefix(v,"a=candidate:").map(function(we){return pe.parseCandidate(we)}).filter(function(we){return we.component===1});if((a.type==="offer"||a.type==="answer")&&!C&&y&&p>0&&c.transceivers[p]&&(c._disposeIceAndDtlsTransports(p),c.transceivers[p].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[p].iceTransport=c.transceivers[0].iceTransport,c.transceivers[p].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[p].rtpSender&&c.transceivers[p].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[p].rtpReceiver&&c.transceivers[p].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!C){S=c.transceivers[p]||c._createTransceiver(_),S.mid=$,S.iceGatherer||(S.iceGatherer=c._createIceGatherer(p,y)),ue.length&&S.iceTransport.state==="new"&&(Ge&&(!y||p===0)?S.iceTransport.setRemoteCandidates(ue):ue.forEach(function(we){Ih(S.iceTransport,we)})),te=t.RTCRtpReceiver.getCapabilities(_),e<15019&&(te.codecs=te.codecs.filter(function(we){return we.name!=="rtx"})),ce=S.sendEncodingParameters||[{ssrc:(2*p+2)*1001}];var Ee=!1;if(A==="sendrecv"||A==="sendonly"){if(Ee=!S.rtpReceiver,T=S.rtpReceiver||new t.RTCRtpReceiver(S.dtlsTransport,_),Ee){var Oe;N=T.track,D&&D.stream==="-"||(D?(u[D.stream]||(u[D.stream]=new t.MediaStream,Object.defineProperty(u[D.stream],"id",{get:function(){return D.stream}})),Object.defineProperty(N,"id",{get:function(){return D.track}}),Oe=u[D.stream]):(u.default||(u.default=new t.MediaStream),Oe=u.default)),Oe&&(n(N,Oe),S.associatedRemoteMediaStreams.push(Oe)),h.push([N,T,Oe])}}else S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach(function(we){var ut=we.getTracks().find(function(ur){return ur.id===S.rtpReceiver.track.id});ut&&r(ut,we)}),S.associatedRemoteMediaStreams=[]);S.localCapabilities=te,S.remoteCapabilities=z,S.rtpReceiver=T,S.rtcpParameters=le,S.sendEncodingParameters=ce,S.recvEncodingParameters=X,c._transceive(c.transceivers[p],!1,Ee)}else if(a.type==="answer"&&!C){S=c.transceivers[p],M=S.iceGatherer,P=S.iceTransport,oe=S.dtlsTransport,T=S.rtpReceiver,ce=S.sendEncodingParameters,te=S.localCapabilities,c.transceivers[p].recvEncodingParameters=X,c.transceivers[p].remoteCapabilities=z,c.transceivers[p].rtcpParameters=le,ue.length&&P.state==="new"&&((m||Ge)&&(!y||p===0)?P.setRemoteCandidates(ue):ue.forEach(function(we){Ih(S.iceTransport,we)})),(!y||p===0)&&(P.state==="new"&&P.start(M,Z,"controlling"),oe.state==="new"&&oe.start(G));var lt=pc(S.localCapabilities,S.remoteCapabilities),ct=lt.codecs.filter(function(we){return we.name.toLowerCase()==="rtx"}).length;!ct&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,c._transceive(S,A==="sendrecv"||A==="recvonly",A==="sendrecv"||A==="sendonly"),T&&(A==="sendrecv"||A==="sendonly")?(N=T.track,D?(u[D.stream]||(u[D.stream]=new t.MediaStream),n(N,u[D.stream]),h.push([N,T,u[D.stream]])):(u.default||(u.default=new t.MediaStream),n(N,u.default),h.push([N,T,u.default]))):delete S.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(v){var p=u[v];if(p.getTracks().length){if(c.remoteStreams.indexOf(p)===-1){c.remoteStreams.push(p);var E=new Event("addstream");E.stream=p,t.setTimeout(function(){c._dispatchEvent("addstream",E)})}h.forEach(function(_){var C=_[0],k=_[1];p.id===_[2].id&&i(c,C,k,[p])})}}),h.forEach(function(v){v[2]||i(c,v[0],v[1],[])}),t.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.state==="new"&&v.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),v.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},s.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},s.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(h){h.iceTransport&&!h.rejected&&c[h.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},s.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(h){h.iceTransport&&h.dtlsTransport&&!h.rejected&&(c[h.iceTransport.state]++,c[h.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},s.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(Yt("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(m){return m.kind==="audio"}).length,u=a.transceivers.filter(function(m){return m.kind==="video"}).length,h=arguments[0];if(h){if(h.mandatory||h.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");h.offerToReceiveAudio!==void 0&&(h.offerToReceiveAudio===!0?c=1:h.offerToReceiveAudio===!1?c=0:c=h.offerToReceiveAudio),h.offerToReceiveVideo!==void 0&&(h.offerToReceiveVideo===!0?u=1:h.offerToReceiveVideo===!1?u=0:u=h.offerToReceiveVideo)}for(a.transceivers.forEach(function(m){m.kind==="audio"?(c--,c<0&&(m.wantReceive=!1)):m.kind==="video"&&(u--,u<0&&(m.wantReceive=!1))});c>0||u>0;)c>0&&(a._createTransceiver("audio"),c--),u>0&&(a._createTransceiver("video"),u--);var f=pe.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(m,y){var w=m.track,v=m.kind,p=m.mid||pe.generateIdentifier();m.mid=p,m.iceGatherer||(m.iceGatherer=a._createIceGatherer(y,a.usingBundle));var E=t.RTCRtpSender.getCapabilities(v);e<15019&&(E.codecs=E.codecs.filter(function(C){return C.name!=="rtx"})),E.codecs.forEach(function(C){C.name==="H264"&&C.parameters["level-asymmetry-allowed"]===void 0&&(C.parameters["level-asymmetry-allowed"]="1"),m.remoteCapabilities&&m.remoteCapabilities.codecs&&m.remoteCapabilities.codecs.forEach(function(k){C.name.toLowerCase()===k.name.toLowerCase()&&C.clockRate===k.clockRate&&(C.preferredPayloadType=k.payloadType)})}),E.headerExtensions.forEach(function(C){var k=m.remoteCapabilities&&m.remoteCapabilities.headerExtensions||[];k.forEach(function(A){C.uri===A.uri&&(C.id=A.id)})});var _=m.sendEncodingParameters||[{ssrc:(2*y+1)*1001}];w&&e>=15019&&v==="video"&&!_[0].rtx&&(_[0].rtx={ssrc:_[0].ssrc+1}),m.wantReceive&&(m.rtpReceiver=new t.RTCRtpReceiver(m.dtlsTransport,v)),m.localCapabilities=E,m.sendEncodingParameters=_}),a._config.bundlePolicy!=="max-compat"&&(f+="a=group:BUNDLE "+a.transceivers.map(function(m){return m.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(m,y){f+=Gv(m,m.localCapabilities,"offer",m.stream,a._dtlsRole),f+=`a=rtcp-rsize\r
`,m.iceGatherer&&a.iceGatheringState!=="new"&&(y===0||!a.usingBundle)&&(m.iceGatherer.getLocalCandidates().forEach(function(w){w.component=1,f+="a="+pe.writeCandidate(w)+`\r
`}),m.iceGatherer.state==="completed"&&(f+=`a=end-of-candidates\r
`))});var g=new t.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(g)},s.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(Yt("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(Yt("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=pe.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=pe.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(f,g){if(!(g+1>u)){if(f.rejected){f.kind==="application"?f.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+f.protocol+` webrtc-datachannel\r
`:f.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:f.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+f.mid+`\r
`;return}if(f.stream){var m;f.kind==="audio"?m=f.stream.getAudioTracks()[0]:f.kind==="video"&&(m=f.stream.getVideoTracks()[0]),m&&e>=15019&&f.kind==="video"&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1})}var y=pc(f.localCapabilities,f.remoteCapabilities),w=y.codecs.filter(function(v){return v.name.toLowerCase()==="rtx"}).length;!w&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,c+=Gv(f,y,"answer",f.stream,a._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var h=new t.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(h)},s.prototype.addIceCandidate=function(a){var c=this,u;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(h,f){if(c._remoteDescription)if(!a||a.candidate==="")for(var g=0;g<c.transceivers.length&&!(!c.transceivers[g].rejected&&(c.transceivers[g].iceTransport.addRemoteCandidate({}),u=pe.getMediaSections(c._remoteDescription.sdp),u[g]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=pe.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));g++);else{var m=a.sdpMLineIndex;if(a.sdpMid){for(var y=0;y<c.transceivers.length;y++)if(c.transceivers[y].mid===a.sdpMid){m=y;break}}var w=c.transceivers[m];if(w){if(w.rejected)return h();var v=Object.keys(a.candidate).length>0?pe.parseCandidate(a.candidate):{};if(v.protocol==="tcp"&&(v.port===0||v.port===9)||v.component&&v.component!==1)return h();if((m===0||m>0&&w.iceTransport!==c.transceivers[0].iceTransport)&&!Ih(w.iceTransport,v))return f(Yt("OperationError","Can not add ICE candidate"));var p=a.candidate.trim();p.indexOf("a=")===0&&(p=p.substr(2)),u=pe.getMediaSections(c._remoteDescription.sdp),u[m]+="a="+(v.type?p:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=pe.getDescription(c._remoteDescription.sdp)+u.join("")}else return f(Yt("OperationError","Can not add ICE candidate"))}else return f(Yt("InvalidStateError","Can not add ICE candidate without a remote description"));h()})},s.prototype.getStats=function(a){if(a&&a instanceof t.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(h){h.rtpSender&&h.rtpSender.track===a?c=h.rtpSender:h.rtpReceiver&&h.rtpReceiver.track===a&&(c=h.rtpReceiver)}),!c)throw Yt("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(h){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(f){h[f]&&u.push(h[f].getStats())})}),Promise.all(u).then(function(h){var f=new Map;return h.forEach(function(g){g.forEach(function(m){f.set(m.id,m)})}),f})};var o=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];o.forEach(function(a){var c=t[a];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(h){var f=new Map;return Object.keys(h).forEach(function(g){h[g].type=KA(h[g]),f.set(g,h[g])}),f})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(h){typeof u[0]=="function"&&u[0].apply(null,[h])},function(h){typeof u[1]=="function"&&u[1].apply(null,[h])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(h){typeof u[2]=="function"&&u[2].apply(null,[h])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),s};const YA=Yu(QA);function xS(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(s=>Promise.reject(n(s)))}}function NS(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function rp(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const s=new Event("enabled");s.enabled=i,this.dispatchEvent(s)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=YA(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=GA(i.iceServers,e.version),zm("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function OS(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const Jv=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:NS,shimGetUserMedia:xS,shimPeerConnection:rp,shimReplaceTrack:OS},Symbol.toStringTag,{value:"Module"}));function DS(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){gd("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,l,a){l in o&&!(a in o)&&(o[a]=o[l],delete o[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function XA(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function jS(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ip(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,l]=arguments;return r.apply(this,[s||null]).then(a=>{if(e.version<53&&!o)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,h)=>{a.set(h,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(o,l)}}function MS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function LS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),bo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function FS(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){gd("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function VS(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function US(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,o.sendEncodings=r.sendEncodings,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function $S(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function BS(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function zS(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Qv=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:US,shimCreateAnswer:zS,shimCreateOffer:BS,shimGetDisplayMedia:XA,shimGetParameters:$S,shimGetUserMedia:DS,shimOnTrack:jS,shimPeerConnection:ip,shimRTCDataChannel:VS,shimReceiverGetStats:LS,shimRemoveStream:FS,shimSenderGetStats:MS},Symbol.toStringTag,{value:"Module"}));function qS(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function HS(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function WS(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const h=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[h]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const h=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[h]);return u?(f.then(c,u),Promise.resolve()):f};let l=function(a,c,u){const h=i.apply(this,[a]);return u?(h.then(c,u),Promise.resolve()):h};e.setLocalDescription=l,l=function(a,c,u){const h=s.apply(this,[a]);return u?(h.then(c,u),Promise.resolve()):h},e.setRemoteDescription=l,l=function(a,c,u){const h=o.apply(this,[a]);return u?(h.then(c,u),Promise.resolve()):h},e.addIceCandidate=l}function GS(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(KS(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function KS(t){return t&&t.video!==void 0?Object.assign({},t,{video:_S(t.video)}):t}function JS(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(gd("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function QS(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function YS(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video")}return e.apply(this,arguments)}}function XS(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Yv=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:XS,shimCallbacksAPI:WS,shimConstraints:KS,shimCreateOfferLegacy:YS,shimGetUserMedia:GS,shimLocalStreamsAPI:qS,shimRTCIceServerUrls:JS,shimRemoteStreamsAPI:HS,shimTrackEventTransceiver:QS},Symbol.toStringTag,{value:"Module"}));function Uc(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Vc.parseCandidate(r.candidate),o=Object.assign(i,s);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,bo(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function oa(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=Vc.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=Vc.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return e.browser==="firefox"&&(e.version<57?l===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},s=function(l,a){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=Vc.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),u=s(arguments[0],a);let h;c===0&&u===0?h=Number.POSITIVE_INFINITY:c===0||u===0?h=Math.max(c,u):h=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return h}}),this._sctp=f}return o.apply(this,arguments)}}function aa(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},bo(t,"datachannel",r=>(e(r.channel,r.target),r))}function sp(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function op(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function $c(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const ZA=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:op,shimAddIceCandidateNullOrEmpty:$c,shimConnectionState:sp,shimMaxMessageSize:oa,shimRTCIceCandidate:Uc,shimSendThrowTypeError:aa},Symbol.toStringTag,{value:"Module"}));function ek({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=zm,r=HA(t),i={browserDetails:r,commonShim:ZA,extractVersion:sa,disableLog:zA,disableWarnings:qA};switch(r.browser){case"chrome":if(!Wv||!np||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Wv,$c(t,r),ES(t,r),SS(t),np(t,r),TS(t),IS(t,r),wS(t),CS(t),PS(t),bS(t,r),Uc(t),sp(t),oa(t,r),aa(t),op(t,r);break;case"firefox":if(!Qv||!ip||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Qv,$c(t,r),DS(t,r),ip(t,r),jS(t),FS(t),MS(t),LS(t),VS(t),US(t),$S(t),BS(t),zS(t),Uc(t),sp(t),oa(t,r),aa(t);break;case"edge":if(!Jv||!rp||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=Jv,xS(t),NS(t),rp(t,r),OS(t),oa(t,r),aa(t);break;case"safari":if(!Yv||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Yv,$c(t,r),JS(t),YS(t),WS(t),qS(t),HS(t),QS(t),GS(t),XS(t),Uc(t),oa(t,r),aa(t),op(t,r);break;default:n("Unsupported browser!");break}return i}const Xv=ek({window:typeof window>"u"?void 0:window});function Ir(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var bh=Xv.default||Xv,Qo=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return bh.browserDetails.browser},t.prototype.getVersion=function(){return bh.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=bh.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),Zv={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},tk=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Zv,this.browser=Qo.getBrowser(),this.browserVersion=Qo.getVersion(),this.supports=function(){var e={browser:Qo.isBrowserSupported(),webRTC:Qo.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(Zv),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!Qo.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=Bv.pack,this.unpack=Bv.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/Ue.chunkedMTU),s=0,o=0;o<r;){var l=Math.min(r,o+Ue.chunkedMTU),a=e.slice(o,l),c={__peerData:this._dataCount,n:s,data:a,total:i};n.push(c),o=l,s++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),Ue=new tk,ZS={};Ir(ZS,"Peer",()=>u0,t=>u0=t);var Cl={},nk=Object.prototype.hasOwnProperty,yn="~";function Qa(){}Object.create&&(Qa.prototype=Object.create(null),new Qa().__proto__||(yn=!1));function rk(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function eT(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new rk(n,r||t,i),o=yn?yn+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Bc(t,e){--t._eventsCount===0?t._events=new Qa:delete t._events[e]}function ln(){this._events=new Qa,this._eventsCount=0}ln.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)nk.call(n,r)&&e.push(yn?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};ln.prototype.listeners=function(e){var n=yn?yn+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};ln.prototype.listenerCount=function(e){var n=yn?yn+e:e,r=this._events[n];return r?r.fn?1:r.length:0};ln.prototype.emit=function(e,n,r,i,s,o){var l=yn?yn+e:e;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,h;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,s),!0;case 6:return a.fn.call(a.context,n,r,i,s,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];a.fn.apply(a.context,u)}else{var f=a.length,g;for(h=0;h<f;h++)switch(a[h].once&&this.removeListener(e,a[h].fn,void 0,!0),c){case 1:a[h].fn.call(a[h].context);break;case 2:a[h].fn.call(a[h].context,n);break;case 3:a[h].fn.call(a[h].context,n,r);break;case 4:a[h].fn.call(a[h].context,n,r,i);break;default:if(!u)for(g=1,u=new Array(c-1);g<c;g++)u[g-1]=arguments[g];a[h].fn.apply(a[h].context,u)}}return!0};ln.prototype.on=function(e,n,r){return eT(this,e,n,r,!1)};ln.prototype.once=function(e,n,r){return eT(this,e,n,r,!0)};ln.prototype.removeListener=function(e,n,r,i){var s=yn?yn+e:e;if(!this._events[s])return this;if(!n)return Bc(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&Bc(this,s);else{for(var l=0,a=[],c=o.length;l<c;l++)(o[l].fn!==n||i&&!o[l].once||r&&o[l].context!==r)&&a.push(o[l]);a.length?this._events[s]=a.length===1?a[0]:a:Bc(this,s)}return this};ln.prototype.removeAllListeners=function(e){var n;return e?(n=yn?yn+e:e,this._events[n]&&Bc(this,n)):(this._events=new Qa,this._eventsCount=0),this};ln.prototype.off=ln.prototype.removeListener;ln.prototype.addListener=ln.prototype.on;ln.prefixed=yn;ln.EventEmitter=ln;Cl=ln;var ne={};Ir(ne,"LogLevel",()=>En,t=>En=t);Ir(ne,"default",()=>e0,t=>e0=t);var Ui=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},$i=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},ik="PeerJS: ",En;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(En||(En={}));var sk=function(){function t(){this._logLevel=En.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=En.All&&this._print.apply(this,$i([En.All],Ui(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=En.Warnings&&this._print.apply(this,$i([En.Warnings],Ui(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=En.Errors&&this._print.apply(this,$i([En.Errors],Ui(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=$i([ik],Ui(n),!1);for(var s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);e>=En.All?console.log.apply(console,$i([],Ui(i),!1)):e>=En.Warnings?console.warn.apply(console,$i(["WARNING"],Ui(i),!1)):e>=En.Errors&&console.error.apply(console,$i(["ERROR"],Ui(i),!1))},t}(),e0=new sk,tT={};Ir(tT,"Socket",()=>t0,t=>t0=t);var rr;(function(t){t.Data="data",t.Media="media"})(rr||(rr={}));var mt;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(mt||(mt={}));var xr;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(xr||(xr={}));var jr;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(jr||(jr={}));var Bt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Bt||(Bt={}));var qm={};qm=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var ok=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ak=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},lk=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},ck=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t0=function(t){ok(e,t);function e(n,r,i,s,o,l){l===void 0&&(l=5e3);var a=t.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+s+"peerjs?key="+o,a}return e.prototype.start=function(n,r){var i=this;this._id=n;var s="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+qm.version),this._disconnected=!1,this._socket.onmessage=function(o){var l;try{l=JSON.parse(o.data),ne.default.log("Server message received:",l)}catch{ne.default.log("Invalid server message",o.data);return}i.emit(jr.Message,l)},this._socket.onclose=function(o){i._disconnected||(ne.default.log("Socket closed.",o),i._cleanup(),i._disconnected=!0,i.emit(jr.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),ne.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){ne.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:Bt.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=lk([],ak(this._messagesQueue),!1);this._messagesQueue=[];try{for(var s=ck(i),o=s.next();!o.done;o=s.next()){var l=o.value;this.send(l)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(jr.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(Cl.EventEmitter),ap={};Ir(ap,"MediaConnection",()=>i0,t=>i0=t);var Hm={};Ir(Hm,"Negotiator",()=>n0,t=>n0=t);var Pu=function(){return Pu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pu.apply(this,arguments)},mc=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},gc=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},n0=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===rr.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===rr.Data){var r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r.initialize(s)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){ne.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,s=this.connection.type,o=this.connection.provider;ne.default.log("Listening for ICE candidates."),e.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(ne.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),o.socket.send({type:Bt.Candidate,payload:{candidate:l.candidate,type:s,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":ne.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":ne.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":ne.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=Ue.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},ne.default.log("Listening for data channel"),e.ondatachannel=function(l){ne.default.log("Received data channel");var a=l.channel,c=o.getConnection(r,i);c.initialize(a)},ne.default.log("Listening for remote stream"),e.ontrack=function(l){ne.default.log("Received remote stream");var a=l.streams[0],c=o.getConnection(r,i);if(c.type===rr.Media){var u=c;n._addStreamToMediaConnection(a,u)}}},t.prototype.cleanup=function(){ne.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===rr.Data){var i=this.connection,s=i.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return mc(this,void 0,Promise,function(){var e,n,r,i,s,o,l;return gc(this,function(a){switch(a.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),ne.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),ne.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Ue.browser},this.connection.type===rr.Data&&(s=this.connection,i=Pu(Pu({},i),{label:s.label,reliable:s.reliable,serialization:s.serialization})),n.socket.send({type:Bt.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return o=a.sent(),o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(mt.WebRTC,o),ne.default.log("Failed to setLocalDescription, ",o)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError(mt.WebRTC,l),ne.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return mc(this,void 0,Promise,function(){var e,n,r,i,s;return gc(this,function(o){switch(o.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=o.sent(),ne.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),ne.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Bt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:Ue.browser},dst:this.connection.peer}),[3,6];case 5:return i=o.sent(),n.emitError(mt.WebRTC,i),ne.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return s=o.sent(),n.emitError(mt.WebRTC,s),ne.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return mc(this,void 0,Promise,function(){var r,i,s,o;return gc(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,ne.default.log("Setting remote description",n),s=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),ne.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,s._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return o=l.sent(),i.emitError(mt.WebRTC,o),ne.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return mc(this,void 0,Promise,function(){var n,r,i,s,o,l;return gc(this,function(a){switch(a.label){case 0:ne.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,s=this.connection.peerConnection,o=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),ne.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),o.emitError(mt.WebRTC,l),ne.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if(ne.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return ne.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){ne.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),Wm={};Ir(Wm,"BaseConnection",()=>r0,t=>r0=t);var uk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r0=function(t){uk(e,t);function e(n,r,i){var s=t.call(this)||this;return s.peer=n,s.provider=r,s.options=i,s._open=!1,s.metadata=i.metadata,s}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(Cl.EventEmitter),dk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ru=function(){return Ru=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ru.apply(this,arguments)},hk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i0=function(t){dk(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||e.ID_PREFIX+Ue.randomToken(),s._negotiator=new Hm.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return rr.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){ne.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Bt.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Bt.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:ne.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,s;if(r===void 0&&(r={}),this._localStream){ne.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Ru(Ru({},this.options._payload),{_stream:n}));var o=this.provider._getMessages(this.connectionId);try{for(var l=hk(o),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(Wm.BaseConnection),lp={};Ir(lp,"DataConnection",()=>o0,t=>o0=t);var nT={};Ir(nT,"EncodingQueue",()=>s0,t=>s0=t);var fk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),s0=function(t){fk(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){ne.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(Cl.EventEmitter),pk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o0=function(t){pk(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new nT.EncodingQueue,s.connectionId=s.options.connectionId||e.ID_PREFIX+Ue.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||xr.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(o){s._bufferedSend(o)}),s._encodingQueue.on("error",function(){ne.default.error("DC#".concat(s.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),s.close()}),s._negotiator=new Hm.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return rr.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!Ue.supports.binaryBlob||Ue.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){ne.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){ne.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){ne.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,s=i.constructor,o=this.serialization===xr.Binary||this.serialization===xr.BinaryUTF8,l=i;if(o){if(s===Blob){Ue.blobToArrayBuffer(i,function(c){var u=Ue.unpack(c);r.emit("data",u)});return}else if(s===ArrayBuffer)l=Ue.unpack(i);else if(s===String){var a=Ue.binaryStringToArrayBuffer(i);l=Ue.unpack(a)}}else this.serialization===xr.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}t.prototype.emit.call(this,"data",l)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var s=new Blob(i.data);this._handleDataMessage({data:s})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===xr.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===xr.Binary||this.serialization===xr.BinaryUTF8){var i=Ue.pack(n);if(!r&&i.size>Ue.chunkedMTU){this._sendChunks(i);return}Ue.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return ne.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,s=Ue.chunk(n);ne.default.log("DC#".concat(this.connectionId," Try to send ").concat(s.length," chunks..."));try{for(var o=mk(s),l=o.next();!l.done;l=o.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Bt.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Bt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:ne.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(Wm.BaseConnection),rT={};Ir(rT,"API",()=>c0,t=>c0=t);var a0=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(h){o(h)}}function a(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},l0=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},c0=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,s=r.port,o=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(s).concat(o).concat(l,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",qm.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return a0(this,void 0,Promise,function(){var e,n,r;return l0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),ne.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==Ue.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return a0(this,void 0,Promise,function(){var e,n,r;return l0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===Ue.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),ne.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),gk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ca=function(){return Ca=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ca.apply(this,arguments)},Yo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yk=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},u0=function(t){gk(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var s;return n&&n.constructor==Object?r=n:n&&(s=n.toString()),r=Ca({debug:0,host:Ue.CLOUD_HOST,port:Ue.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:Ue.randomToken(),config:Ue.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==Ue.CLOUD_HOST?i._options.secure=Ue.isSecure():i._options.host==Ue.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&ne.default.setLogFunction(i._options.logFunction),ne.default.logLevel=i._options.debug||0,i._api=new rT.API(r),i._socket=i._createServerConnection(),!Ue.supports.audioVideo&&!Ue.supports.data?(i._delayedAbort(mt.BrowserIncompatible,"The current browser does not support WebRTC"),i):s&&!Ue.validateId(s)?(i._delayedAbort(mt.InvalidID,'ID "'.concat(s,'" is invalid')),i):(s?i._initialize(s):i._api.retrieveId().then(function(o){return i._initialize(o)}).catch(function(o){return i._abort(mt.ServerError,o)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var s=Yo(this._connections),o=s.next();!o.done;o=s.next()){var l=yk(o.value,2),a=l[0],c=l[1];i[a]=c}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new tT.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(jr.Message,function(i){n._handleMessage(i)}),r.on(jr.Error,function(i){n._abort(mt.SocketError,i)}),r.on(jr.Disconnected,function(){n.disconnected||(n.emitError(mt.Network,"Lost connection to server."),n.disconnect())}),r.on(jr.Close,function(){n.disconnected||n._abort(mt.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,s=n.type,o=n.payload,l=n.src;switch(s){case Bt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Bt.Error:this._abort(mt.ServerError,o.msg);break;case Bt.IdTaken:this._abort(mt.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Bt.InvalidKey:this._abort(mt.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Bt.Leave:ne.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case Bt.Expire:this.emitError(mt.PeerUnavailable,"Could not connect to peer ".concat(l));break;case Bt.Offer:var m=o.connectionId,y=this.getConnection(l,m);if(y&&(y.close(),ne.default.warn("Offer received for existing Connection ID:".concat(m))),o.type===rr.Media){var a=new ap.MediaConnection(l,this,{connectionId:m,_payload:o,metadata:o.metadata});y=a,this._addConnection(l,y),this.emit("call",a)}else if(o.type===rr.Data){var c=new lp.DataConnection(l,this,{connectionId:m,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});y=c,this._addConnection(l,y),this.emit("connection",c)}else{ne.default.warn("Received malformed connection type:".concat(o.type));return}var u=this._getMessages(m);try{for(var h=Yo(u),f=h.next();!f.done;f=h.next()){var g=f.value;y.handleMessage(g)}}catch(w){r={error:w}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}break;default:if(!o){ne.default.warn("You received a malformed message from ".concat(l," of type ").concat(s));return}var m=o.connectionId,y=this.getConnection(l,m);y&&y.peerConnection?y.handleMessage(n):m?this._storeMessage(m,n):ne.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){ne.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(mt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new lp.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){ne.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(mt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){ne.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var s=new ap.MediaConnection(n,this,Ca(Ca({},i),{_stream:r}));return this._addConnection(n,s),s},e.prototype._addConnection=function(n,r){ne.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,s,o=this._connections.get(n);if(!o)return null;try{for(var l=Yo(o),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){ne.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){ne.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||(ne.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=Yo(this._connections.keys()),s=i.next();!s.done;s=i.next()){var o=s.value;this._cleanupPeer(o),this._connections.delete(o)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,s=this._connections.get(n);if(s)try{for(var o=Yo(s),l=o.next();!l.done;l=o.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;ne.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)ne.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)ne.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(mt.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(Cl.EventEmitter),iT=ZS.Peer;function vk(t){return new Promise((e,n)=>{const r=new iT({debug:0,secure:!1});r.on("open",i=>{const s=r.connect(t,{reliable:!0});setTimeout(()=>{n("the server took too long to respond")},5e3),s.on("open",()=>{const o=new sT(s);o.id=i,e(o)}),s.on("error",o=>{n(o.message)})}),r.on("error",i=>{console.error("PeerJS error:",i),n(i)})})}class sT{constructor(e){Ve(this,"client");Ve(this,"events");Ve(this,"id");this.id="",this.client=e,this.events=new Map,this.client.on("data",n=>{try{const r=JSON.parse(n),i=this.events.get(r.event);i!==void 0&&i(r.args)}catch{}}),this.client.on("error",n=>{console.error("Data connection error:",n)}),this.client.on("close",()=>{try{const n=this.events.get("disconnect");n!==void 0&&n("")}catch{}})}on(e,n){this.events.set(e,n),this.client.on("data",()=>{})}emit(e,n){this.client.send(JSON.stringify({event:e,args:n??void 0}))}disconnect(){this.emit("disconnect"),this.client.close()}}class _k{constructor(e,n){Ve(this,"socket");Ve(this,"logFunction");Ve(this,"renderFunction");Ve(this,"logs",[]);Ve(this,"code");Ve(this,"whenCloseF");this.socket=new iT({debug:0}),this.code="",this.logFunction=(...r)=>{this.logs.push(r),this.renderFunction(this.logs)},this.whenCloseF=()=>{},this.renderFunction=()=>{},this.socket.on("open",async r=>{const i=await(e==null?void 0:e(r,this));i&&(this.whenCloseF=i)}),this.socket.on("connection",r=>{r.on("open",()=>{const i=new sT(r);i.id=r.peer,n==null||n(i,this)})})}set OnLogs(e){this.logFunction=e}RenderLogs(e){this.renderFunction=e,e(this.logs)}stop(){this.socket.destroy(),this.whenCloseF()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ek=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},aT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=s>>2,h=(s&3)<<4|l>>4;let f=(l&15)<<2|c>>6,g=c&63;a||(g=64,o||(f=64)),r.push(n[u],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ek(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||h==null)throw new Sk;const f=s<<2|l>>4;if(r.push(f),c!==64){const g=l<<4&240|c>>2;if(r.push(g),h!==64){const m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Sk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tk=function(t){const e=oT(t);return aT.encodeByteArray(e,!0)},Iu=function(t){return Tk(t).replace(/\./g,"")},lT=function(t){try{return aT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=()=>wk().__FIREBASE_DEFAULTS__,Pk=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lT(t[1]);return e&&JSON.parse(e)},Gm=()=>{try{return Ck()||Pk()||Rk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cT=t=>{var e,n;return(n=(e=Gm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ik=t=>{const e=cT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uT=()=>{var t;return(t=Gm())===null||t===void 0?void 0:t.config},dT=t=>{var e;return(e=Gm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Iu(JSON.stringify(n)),Iu(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function xk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ok(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="FirebaseError";class Zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mk,Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Lk(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Zr(i,l,r)}}function Lk(t,e){return t.replace(Fk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Fk=/\{\$([^}]+)}/g;function Vk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(d0(s)&&d0(o)){if(!bu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function d0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Uk(t,e){const n=new $k(t,e);return n.subscribe.bind(n)}class $k{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Bk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ah),i.error===void 0&&(i.error=Ah),i.complete===void 0&&(i.complete=Ah);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ah(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qk(t){return t===qi?void 0:t}function Hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const Gk={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},Kk=Ne.INFO,Jk={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},Qk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Jk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=Kk,this._logHandler=Qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const Yk=(t,e)=>e.some(n=>t instanceof n);let h0,f0;function Xk(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zk(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,cp=new WeakMap,fT=new WeakMap,kh=new WeakMap,Jm=new WeakMap;function ex(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Pi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hT.set(n,t)}).catch(()=>{}),Jm.set(e,t),e}function tx(t){if(cp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cp.set(t,e)}let up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nx(t){up=t(up)}function rx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xh(this),e,...n);return fT.set(r,e.sort?e.sort():[e]),Pi(r)}:Zk().includes(t)?function(...e){return t.apply(xh(this),e),Pi(hT.get(this))}:function(...e){return Pi(t.apply(xh(this),e))}}function ix(t){return typeof t=="function"?rx(t):(t instanceof IDBTransaction&&tx(t),Yk(t,Xk())?new Proxy(t,up):t)}function Pi(t){if(t instanceof IDBRequest)return ex(t);if(kh.has(t))return kh.get(t);const e=ix(t);return e!==t&&(kh.set(t,e),Jm.set(e,t)),e}const xh=t=>Jm.get(t);function sx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Pi(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Pi(o.result),a.oldVersion,a.newVersion,Pi(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const ox=["get","getKey","getAll","getAllKeys","count"],ax=["put","add","delete","clear"],Nh=new Map;function p0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ax.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ox.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return Nh.set(e,s),s}nx(t=>({...t,get:(e,n,r)=>p0(e,n)||t.get(e,n,r),has:(e,n)=>!!p0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",m0="0.9.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Km("@firebase/app"),ux="@firebase/app-compat",dx="@firebase/analytics-compat",hx="@firebase/analytics",fx="@firebase/app-check-compat",px="@firebase/app-check",mx="@firebase/auth",gx="@firebase/auth-compat",yx="@firebase/database",vx="@firebase/database-compat",_x="@firebase/functions",Ex="@firebase/functions-compat",Sx="@firebase/installations",Tx="@firebase/installations-compat",wx="@firebase/messaging",Cx="@firebase/messaging-compat",Px="@firebase/performance",Rx="@firebase/performance-compat",Ix="@firebase/remote-config",bx="@firebase/remote-config-compat",Ax="@firebase/storage",kx="@firebase/storage-compat",xx="@firebase/firestore",Nx="@firebase/firestore-compat",Ox="firebase",Dx="10.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]",jx={[dp]:"fire-core",[ux]:"fire-core-compat",[hx]:"fire-analytics",[dx]:"fire-analytics-compat",[px]:"fire-app-check",[fx]:"fire-app-check-compat",[mx]:"fire-auth",[gx]:"fire-auth-compat",[yx]:"fire-rtdb",[vx]:"fire-rtdb-compat",[_x]:"fire-fn",[Ex]:"fire-fn-compat",[Sx]:"fire-iid",[Tx]:"fire-iid-compat",[wx]:"fire-fcm",[Cx]:"fire-fcm-compat",[Px]:"fire-perf",[Rx]:"fire-perf-compat",[Ix]:"fire-rc",[bx]:"fire-rc-compat",[Ax]:"fire-gcs",[kx]:"fire-gcs-compat",[xx]:"fire-fst",[Nx]:"fire-fst-compat","fire-js":"fire-js",[Ox]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Map,fp=new Map;function Mx(t,e){try{t.container.addComponent(e)}catch(n){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function po(t){const e=t.name;if(fp.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of Au.values())Mx(n,t);return!0}function Qm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ri=new Pl("app","Firebase",Lx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=Dx;function pT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ri.create("bad-app-name",{appName:String(i)});if(n||(n=uT()),!n)throw Ri.create("no-options");const s=Au.get(i);if(s){if(bu(n,s.options)&&bu(r,s.config))return s;throw Ri.create("duplicate-app",{appName:i})}const o=new Wk(i);for(const a of fp.values())o.addComponent(a);const l=new Fx(n,r,o);return Au.set(i,l),l}function mT(t=hp){const e=Au.get(t);if(!e&&t===hp&&uT())return pT();if(!e)throw Ri.create("no-app",{appName:t});return e}function Ii(t,e,n){var r;let i=(r=jx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(l.join(" "));return}po(new ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firebase-heartbeat-database",Ux=1,Ya="firebase-heartbeat-store";let Oh=null;function gT(){return Oh||(Oh=sx(Vx,Ux,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ya)}}}).catch(t=>{throw Ri.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function $x(t){try{return await(await gT()).transaction(Ya).objectStore(Ya).get(yT(t))}catch(e){if(e instanceof Zr)hs.warn(e.message);else{const n=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(n.message)}}}async function g0(t,e){try{const r=(await gT()).transaction(Ya,"readwrite");await r.objectStore(Ya).put(e,yT(t)),await r.done}catch(n){if(n instanceof Zr)hs.warn(n.message);else{const r=Ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hs.warn(r.message)}}}function yT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=1024,zx=30*24*60*60*1e3;class qx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=y0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=zx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=y0(),{heartbeatsToSend:n,unsentEntries:r}=Hx(this._heartbeatsCache.heartbeats),i=Iu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function y0(){return new Date().toISOString().substring(0,10)}function Hx(t,e=Bx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),v0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),v0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Wx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?jk().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await $x(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v0(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){po(new ds("platform-logger",e=>new lx(e),"PRIVATE")),po(new ds("heartbeat",e=>new qx(e),"PRIVATE")),Ii(dp,m0,t),Ii(dp,m0,"esm2017"),Ii("fire-js","")}Gx("");function Ym(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _0(t){return t!==void 0&&t.enterprise!==void 0}class Kx{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function vT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jx=vT,_T=new Pl("auth","Firebase",vT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Km("@firebase/auth");function Qx(t,...e){ku.logLevel<=Ne.WARN&&ku.warn(`Auth (${Ao}): ${t}`,...e)}function zc(t,...e){ku.logLevel<=Ne.ERROR&&ku.error(`Auth (${Ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,...e){throw Xm(t,...e)}function Tr(t,...e){return Xm(t,...e)}function Yx(t,e,n){const r=Object.assign(Object.assign({},Jx()),{[e]:n});return new Pl("auth","Firebase",r).create(e,{appName:t.name})}function Xm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _T.create(t,...e)}function me(t,e,...n){if(!t)throw Xm(e,...n)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zc(e),new Error(e)}function Wr(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Xx(){return E0()==="http:"||E0()==="https:"}function E0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xx()||xk()||"connection"in navigator)?navigator.onLine:!0}function e2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=kk()||Nk()}get(){return Zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Il(3e4,6e4);function Es(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Li(t,e,n,r,i={}){return ST(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Rl(Object.assign({key:t.config.apiKey},o)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),ET.fetch()(TT(t,t.config.apiHost,n,l),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},s))})}async function ST(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},t2),e);try{const i=new r2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw yc(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw yc(t,"user-disabled",o);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Yx(t,u,c);lr(t,u)}}catch(i){if(i instanceof Zr)throw i;lr(t,"network-request-failed",{message:String(i)})}}async function bl(t,e,n,r,i={}){const s=await Li(t,e,n,r,i);return"mfaPendingCredential"in s&&lr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function TT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Zm(t.config,i):`${t.config.apiScheme}://${i}`}class r2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),n2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tr(t,e,r);return i.customData._tokenResponse=n,i}async function i2(t,e){return Li(t,"GET","/v2/recaptchaConfig",Es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e){return Li(t,"POST","/v1/accounts:delete",e)}async function o2(t,e){return Li(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a2(t,e=!1){const n=Kn(t),r=await n.getIdToken(e),i=eg(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pa(Dh(i.auth_time)),issuedAtTime:Pa(Dh(i.iat)),expirationTime:Pa(Dh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Dh(t){return Number(t)*1e3}function eg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const i=lT(n);return i?JSON.parse(i):(zc("Failed to decode base64 JWT payload"),null)}catch(i){return zc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function l2(t){const e=eg(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Zr&&c2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function c2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await mo(t,o2(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?f2(s.providerUserInfo):[],l=h2(t.providerData,o),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new wT(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function d2(t){const e=Kn(t);await xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function f2(t){return t.map(e=>{var{providerId:n}=e,r=Ym(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e){const n=await ST(t,{},async()=>{const r=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=TT(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ET.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return me(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await p2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new u2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mo(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a2(this,e)}reload(){return d2(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await mo(this,s2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,a,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,w=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,p=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:_,isAnonymous:C,providerData:k,stsTokenManager:A}=n;me(E&&A,e,"internal-error");const D=Xa.fromJSON(this.name,A);me(typeof E=="string",e,"internal-error"),ri(h,e.name),ri(f,e.name),me(typeof _=="boolean",e,"internal-error"),me(typeof C=="boolean",e,"internal-error"),ri(g,e.name),ri(m,e.name),ri(y,e.name),ri(w,e.name),ri(v,e.name),ri(p,e.name);const $=new is({uid:E,auth:e,email:f,emailVerified:_,displayName:h,isAnonymous:C,photoURL:m,phoneNumber:g,tenantId:y,stsTokenManager:D,createdAt:v,lastLoginAt:p});return k&&Array.isArray(k)&&($.providerData=k.map(S=>Object.assign({},S))),w&&($._redirectEventId=w),$}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xa;i.updateFromServerResponse(n);const s=new is({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function Lr(t){Wr(t instanceof Function,"Expected a class definition");let e=S0.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CT.type="NONE";const T0=CT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qc(this.userKey,i.apiKey,s),this.fullPersistenceKey=qc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eo(Lr(T0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Lr(T0);const o=qc(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const u=await c._get(o);if(u){const h=is._fromJSON(e,u);c!==s&&(l=h),s=c;break}}catch{}const a=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new eo(s,e,r):(s=a[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new eo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AT(e))return"Blackberry";if(kT(e))return"Webos";if(tg(e))return"Safari";if((e.includes("chrome/")||RT(e))&&!e.includes("edge/"))return"Chrome";if(bT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PT(t=cn()){return/firefox\//i.test(t)}function tg(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RT(t=cn()){return/crios\//i.test(t)}function IT(t=cn()){return/iemobile/i.test(t)}function bT(t=cn()){return/android/i.test(t)}function AT(t=cn()){return/blackberry/i.test(t)}function kT(t=cn()){return/webos/i.test(t)}function yd(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function m2(t=cn()){var e;return yd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function g2(){return Ok()&&document.documentMode===10}function xT(t=cn()){return yd(t)||bT(t)||kT(t)||AT(t)||/windows phone/i.test(t)||IT(t)}function y2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e=[]){let n;switch(t){case"Browser":n=w0(cn());break;case"Worker":n=`${w0(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const a=e(s);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e={}){return Li(t,"GET","/v2/passwordPolicy",Es(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=6;class S2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:E2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C0(this),this.idTokenSubscription=new C0(this),this.beforeStateQueue=new v2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Lr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Kn(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _2(this),n=new S2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Lr(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Qx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ss(t){return Kn(t)}class C0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uk(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function OT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Tr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",w2().appendChild(r)})}function C2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const P2="https://www.google.com/recaptcha/enterprise.js?render=",R2="recaptcha-enterprise",I2="NO_RECAPTCHA";class b2{constructor(e){this.type=R2,this.auth=Ss(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{i2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new Kx(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(a=>{l(a)})})}function i(s,o,l){const a=window.grecaptcha;_0(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(I2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&_0(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}OT(P2+l).then(()=>{i(l,s,o)}).catch(a=>{o(a)})}}).catch(l=>{o(l)})})}}async function Nu(t,e,n,r=!1){const i=new b2(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t,e){const n=Qm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bu(s,e??{}))return i;lr(i,"already-initialized")}return n.initialize({options:e})}function k2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function x2(t,e,n){const r=Ss(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=DT(e),{host:o,port:l}=N2(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||O2()}function DT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N2(t){const e=DT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:P0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:P0(o)}}}function P0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function D2(t,e){return Li(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(t,e){return bl(t,"POST","/v1/accounts:signInWithPassword",Es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){return bl(t,"POST","/v1/accounts:signInWithEmailLink",Es(t,e))}async function M2(t,e){return bl(t,"POST","/v1/accounts:signInWithEmailLink",Es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends ng{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Za(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Za(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Nu(e,r,"signInWithPassword");return jh(e,i)}else return jh(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Nu(e,r,"signInWithPassword");return jh(e,s)}else return Promise.reject(i)});case"emailLink":return j2(e,{email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return D2(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return M2(e,{idToken:n,email:this._email,oobCode:this._password});default:lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t,e){return bl(t,"POST","/v1/accounts:signInWithIdp",Es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="http://localhost";class fs extends ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ym(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,to(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:L2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function V2(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,r=la(ca(t)).deep_link_id;return(r?la(ca(r)).link:null)||r||n||e||t}class rg{constructor(e){var n,r,i,s,o,l;const a=la(ca(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,u=(r=a.oobCode)!==null&&r!==void 0?r:null,h=F2((i=a.mode)!==null&&i!==void 0?i:null);me(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=a.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=V2(e);try{return new rg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return Za._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rg.parseLink(n);return me(r,"argument-error"),Za._fromEmailAndCode(e,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends jT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Al{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ui.credential(n,r)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Al{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Al{constructor(){super("twitter.com")}static credential(e,n){return fs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hi.credential(n,r)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t,e){return bl(t,"POST","/v1/accounts:signUp",Es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await is._fromIdTokenResponse(e,r,i),o=R0(r);return new ps({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=R0(r);return new ps({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Zr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ou.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ou(e,n,r,i)}}function MT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ou._fromErrorAndOperation(t,s,e,r):s})}async function U2(t,e,n=!1){const r=await mo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await mo(t,MT(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=eg(s.idToken);me(o,r,"internal-error");const{sub:l}=o;return me(t.uid===l,r,"user-mismatch"),ps._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&lr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(t,e,n=!1){const r="signIn",i=await MT(t,r,e),s=await ps._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function B2(t,e){return LT(Ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t){const e=Ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z2(t,e,n){var r;const i=Ss(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await Nu(i,s,"signUpPassword");o=Mh(i,c)}else o=Mh(i,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Nu(i,s,"signUpPassword");return Mh(i,u)}throw c});const l=await o.catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FT(t),c}),a=await ps._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(a.user),a}function q2(t,e,n){return B2(Kn(t),ko.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(t,e){return Li(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Kn(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await mo(r,H2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function G2(t,e,n,r){return Kn(t).onIdTokenChanged(e,n,r)}function K2(t,e,n){return Kn(t).beforeAuthStateChanged(e,n)}const Du="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Du,"1"),this.storage.removeItem(Du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){const t=cn();return tg(t)||yd(t)}const Q2=1e3,Y2=10;class UT extends VT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=J2()&&y2(),this.fallbackToPolling=xT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);g2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Y2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UT.type="LOCAL";const X2=UT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends VT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$T.type="SESSION";const BT=$T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),a=await Z2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,a)=>{const c=ig("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function tN(t){wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function nN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iN(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="firebaseLocalStorageDb",sN=1,ju="firebaseLocalStorage",HT="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _d(t,e){return t.transaction([ju],e?"readwrite":"readonly").objectStore(ju)}function oN(){const t=indexedDB.deleteDatabase(qT);return new kl(t).toPromise()}function mp(){const t=indexedDB.open(qT,sN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ju,{keyPath:HT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ju)?e(r):(r.close(),await oN(),e(await mp()))})})}async function I0(t,e,n){const r=_d(t,!0).put({[HT]:e,value:n});return new kl(r).toPromise()}async function aN(t,e){const n=_d(t,!1).get(e),r=await new kl(n).toPromise();return r===void 0?null:r.value}function b0(t,e){const n=_d(t,!0).delete(e);return new kl(n).toPromise()}const lN=800,cN=3;class WT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vd._getInstance(iN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nN(),!this.activeServiceWorker)return;this.sender=new eN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mp();return await I0(e,Du,"1"),await b0(e,Du),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>I0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>b0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_d(i,!1).getAll();return new kl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WT.type="LOCAL";const uN=WT;new Il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return e?Lr(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hN(t){return LT(t.auth,new sg(t),t.bypassAuthState)}function fN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),$2(n,new sg(t),t.bypassAuthState)}async function pN(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),U2(n,new sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hN;case"linkViaPopup":case"linkViaRedirect":return pN;case"reauthViaPopup":case"reauthViaRedirect":return fN;default:lr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new Il(2e3,1e4);class qs extends GT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mN.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="pendingRedirect",Hc=new Map;class yN extends GT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const r=await vN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vN(t,e){const n=SN(e),r=EN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _N(t,e){Hc.set(t._key(),e)}function EN(t){return Lr(t._redirectPersistence)}function SN(t){return qc(gN,t.config.apiKey,t.name)}async function TN(t,e,n=!1){const r=Ss(t),i=dN(r,e),o=await new yN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=10*60*1e3;class CN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!KT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wN&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e={}){return Li(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bN=/^https?/;async function AN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RN(t);for(const n of e)try{if(kN(n))return}catch{}lr(t,"unauthorized-domain")}function kN(t){const e=pp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bN.test(n))return!1;if(IN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Il(3e4,6e4);function k0(){const t=wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NN(t){return new Promise((e,n)=>{var r,i,s;function o(){k0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k0(),n(Tr(t,"network-request-failed"))},timeout:xN.get()})}if(!((i=(r=wr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=wr().gapi)===null||s===void 0)&&s.load)o();else{const l=C2("iframefcb");return wr()[l]=()=>{gapi.load?o():n(Tr(t,"network-request-failed"))},OT(`https://apis.google.com/js/api.js?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function ON(t){return Wc=Wc||NN(t),Wc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Il(5e3,15e3),jN="__/auth/iframe",MN="emulator/auth/iframe",LN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Zm(e,MN):`https://${t.config.authDomain}/${jN}`,r={apiKey:e.apiKey,appName:t.name,v:Ao},i=FN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rl(r).slice(1)}`}async function UN(t){const e=await ON(t),n=wr().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:VN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Tr(t,"network-request-failed"),l=wr().setTimeout(()=>{s(o)},DN.get());function a(){wr().clearTimeout(l),i(r)}r.ping(a).then(a,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BN=500,zN=600,qN="_blank",HN="http://localhost";class x0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WN(t,e,n,r=BN,i=zN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},$N),{width:r.toString(),height:i.toString(),top:s,left:o}),c=cn().toLowerCase();n&&(l=RT(c)?qN:n),PT(c)&&(e=e||HN,a.scrollbars="yes");const u=Object.entries(a).reduce((f,[g,m])=>`${f}${g}=${m},`,"");if(m2(c)&&l!=="_self")return GN(e||"",l),new x0(null);const h=window.open(e||"",l,u);me(h,t,"popup-blocked");try{h.focus()}catch{}return new x0(h)}function GN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="__/auth/handler",JN="emulator/auth/handler",QN=encodeURIComponent("fac");async function N0(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ao,eventId:i};if(e instanceof jT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Vk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Al){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const a=await t._getAppCheckToken(),c=a?`#${QN}=${encodeURIComponent(a)}`:"";return`${YN(t)}?${Rl(l).slice(1)}${c}`}function YN({config:t}){return t.emulator?Zm(t,JN):`https://${t.authDomain}/${KN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="webStorageSupport";class XN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=TN,this._overrideRedirectResult=_N}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await N0(e,n,r,pp(),i);return WN(e,o,ig())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await N0(e,n,r,pp(),i);return tN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await UN(e),r=new CN(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lh,{type:Lh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Lh];o!==void 0&&n(!!o),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xT()||tg()||yd()}}const ZN=XN;var O0="@firebase/auth",D0="1.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function nO(t){po(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NT(t)},c=new T2(r,i,s,a);return k2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),po(new ds("auth-internal",e=>{const n=Ss(e.getProvider("auth").getImmediate());return(r=>new eO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(O0,D0,tO(t)),Ii(O0,D0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=5*60,iO=dT("authIdTokenMaxAge")||rO;let j0=null;const sO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iO)return;const i=n==null?void 0:n.token;j0!==i&&(j0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function oO(t=mT()){const e=Qm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=A2(t,{popupRedirectResolver:ZN,persistence:[uN,X2,BT]}),r=dT("authTokenSyncURL");if(r){const s=sO(r);K2(n,s,()=>s(n.currentUser)),G2(n,o=>s(o))}const i=cT("auth");return i&&x2(n,`http://${i}`),n}nO("Browser");var aO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W,og=og||{},ge=aO||self;function Ed(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function lO(t){return Object.prototype.hasOwnProperty.call(t,Fh)&&t[Fh]||(t[Fh]=++cO)}var Fh="closure_uid_"+(1e9*Math.random()>>>0),cO=0;function uO(t,e,n){return t.call.apply(t.bind,arguments)}function dO(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function rn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rn=uO:rn=dO,rn.apply(null,arguments)}function vc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ft(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(r,o)}}function Fi(){this.s=this.s,this.o=this.o}var hO=0;Fi.prototype.s=!1;Fi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),hO!=0)&&lO(this)};Fi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ag(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function M0(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ed(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}sn.prototype.h=function(){this.defaultPrevented=!0};var fO=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ge.addEventListener("test",()=>{},e),ge.removeEventListener("test",()=>{},e)}catch{}return t}();function el(t){return/^[\s\xa0]*$/.test(t)}function Sd(){var t=ge.navigator;return t&&(t=t.userAgent)?t:""}function mr(t){return Sd().indexOf(t)!=-1}function lg(t){return lg[" "](t),t}lg[" "]=function(){};function pO(t,e){var n=oD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var mO=mr("Opera"),go=mr("Trident")||mr("MSIE"),QT=mr("Edge"),gp=QT||go,YT=mr("Gecko")&&!(Sd().toLowerCase().indexOf("webkit")!=-1&&!mr("Edge"))&&!(mr("Trident")||mr("MSIE"))&&!mr("Edge"),gO=Sd().toLowerCase().indexOf("webkit")!=-1&&!mr("Edge");function XT(){var t=ge.document;return t?t.documentMode:void 0}var yp;e:{var Vh="",Uh=function(){var t=Sd();if(YT)return/rv:([^\);]+)(\)|;)/.exec(t);if(QT)return/Edge\/([\d\.]+)/.exec(t);if(go)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(gO)return/WebKit\/(\S+)/.exec(t);if(mO)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Uh&&(Vh=Uh?Uh[1]:""),go){var $h=XT();if($h!=null&&$h>parseFloat(Vh)){yp=String($h);break e}}yp=Vh}var vp;if(ge.document&&go){var L0=XT();vp=L0||parseInt(yp,10)||void 0}else vp=void 0;var yO=vp;function tl(t,e){if(sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(YT){e:{try{lg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:vO[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tl.$.h.call(this)}}Ft(tl,sn);var vO={2:"touch",3:"pen",4:"mouse"};tl.prototype.h=function(){tl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Nl="closure_listenable_"+(1e6*Math.random()|0),_O=0;function EO(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++_O,this.fa=this.ia=!1}function Td(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function cg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function SO(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ZT(t){const e={};for(const n in t)e[n]=t[n];return e}const F0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ew(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<F0.length;s++)n=F0[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wd(t){this.src=t,this.g={},this.h=0}wd.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Ep(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new EO(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function _p(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=JT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Td(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ep(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var ug="closure_lm_"+(1e6*Math.random()|0),Bh={};function tw(t,e,n,r,i){if(r&&r.once)return rw(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tw(t,e[s],n,r,i);return null}return n=fg(n),t&&t[Nl]?t.O(e,n,xl(r)?!!r.capture:!!r,i):nw(t,e,n,!1,r,i)}function nw(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=xl(i)?!!i.capture:!!i,l=hg(t);if(l||(t[ug]=l=new wd(t)),n=l.add(e,n,r,o,s),n.proxy)return n;if(r=TO(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fO||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sw(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function TO(){function t(n){return e.call(t.src,t.listener,n)}const e=wO;return t}function rw(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)rw(t,e[s],n,r,i);return null}return n=fg(n),t&&t[Nl]?t.P(e,n,xl(r)?!!r.capture:!!r,i):nw(t,e,n,!0,r,i)}function iw(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)iw(t,e[s],n,r,i);else r=xl(r)?!!r.capture:!!r,n=fg(n),t&&t[Nl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Ep(s,n,r,i),-1<n&&(Td(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=hg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ep(e,n,r,i)),(n=-1<t?e[t]:null)&&dg(n))}function dg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Nl])_p(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sw(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hg(e))?(_p(n,t),n.h==0&&(n.src=null,e[ug]=null)):Td(t)}}}function sw(t){return t in Bh?Bh[t]:Bh[t]="on"+t}function wO(t,e){if(t.fa)t=!0;else{e=new tl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&dg(t),t=n.call(r,e)}return t}function hg(t){return t=t[ug],t instanceof wd?t:null}var zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function fg(t){return typeof t=="function"?t:(t[zh]||(t[zh]=function(e){return t.handleEvent(e)}),t[zh])}function Lt(){Fi.call(this),this.i=new wd(this),this.S=this,this.J=null}Ft(Lt,Fi);Lt.prototype[Nl]=!0;Lt.prototype.removeEventListener=function(t,e,n,r){iw(this,t,e,n,r)};function Ht(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new sn(e,t);else if(e instanceof sn)e.target=e.target||t;else{var i=e;e=new sn(r,t),ew(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=_c(o,r,!0,e)&&i}if(o=e.g=t,i=_c(o,r,!0,e)&&i,i=_c(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=_c(o,r,!1,e)&&i}Lt.prototype.N=function(){if(Lt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Td(n[r]);delete t.g[e],t.h--}}this.J=null};Lt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Lt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function _c(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var l=o.listener,a=o.la||o.src;o.ia&&_p(t.i,o),i=l.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var pg=ge.JSON.stringify;class CO{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function PO(){var t=mg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class RO{constructor(){this.h=this.g=null}add(e,n){const r=ow.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ow=new CO(()=>new IO,t=>t.reset());class IO{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function bO(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function AO(t){ge.setTimeout(()=>{throw t},0)}let nl,rl=!1,mg=new RO,aw=()=>{const t=ge.Promise.resolve(void 0);nl=()=>{t.then(kO)}};var kO=()=>{for(var t;t=PO();){try{t.h.call(t.g)}catch(n){AO(n)}var e=ow;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rl=!1};function Cd(t,e){Lt.call(this),this.h=t||1,this.g=e||ge,this.j=rn(this.qb,this),this.l=Date.now()}Ft(Cd,Lt);W=Cd.prototype;W.ga=!1;W.T=null;W.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ht(this,"tick"),this.ga&&(gg(this),this.start()))}};W.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function gg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}W.N=function(){Cd.$.N.call(this),gg(this),delete this.g};function yg(t,e,n){if(typeof t=="function")n&&(t=rn(t,n));else if(t&&typeof t.handleEvent=="function")t=rn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ge.setTimeout(t,e||0)}function lw(t){t.g=yg(()=>{t.g=null,t.i&&(t.i=!1,lw(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class xO extends Fi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lw(this)}N(){super.N(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function il(t){Fi.call(this),this.h=t,this.g={}}Ft(il,Fi);var V0=[];function cw(t,e,n,r){Array.isArray(n)||(n&&(V0[0]=n.toString()),n=V0);for(var i=0;i<n.length;i++){var s=tw(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function uw(t){cg(t.g,function(e,n){this.g.hasOwnProperty(n)&&dg(e)},t),t.g={}}il.prototype.N=function(){il.$.N.call(this),uw(this)};il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Pd(){this.g=!0}Pd.prototype.Ea=function(){this.g=!1};function NO(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",l=s.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function OO(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Hs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+jO(t,n)+(r?" "+r:"")})}function DO(t,e){t.info(function(){return"TIMEOUT: "+e})}Pd.prototype.info=function(){};function jO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return pg(n)}catch{return e}}var Ts={},U0=null;function Rd(){return U0=U0||new Lt}Ts.Ta="serverreachability";function dw(t){sn.call(this,Ts.Ta,t)}Ft(dw,sn);function sl(t){const e=Rd();Ht(e,new dw(e))}Ts.STAT_EVENT="statevent";function hw(t,e){sn.call(this,Ts.STAT_EVENT,t),this.stat=e}Ft(hw,sn);function mn(t){const e=Rd();Ht(e,new hw(e,t))}Ts.Ua="timingevent";function fw(t,e){sn.call(this,Ts.Ua,t),this.size=e}Ft(fw,sn);function Ol(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){t()},e)}var Id={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vg(){}vg.prototype.h=null;function $0(t){return t.h||(t.h=t.i())}function mw(){}var Dl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _g(){sn.call(this,"d")}Ft(_g,sn);function Eg(){sn.call(this,"c")}Ft(Eg,sn);var Sp;function bd(){}Ft(bd,vg);bd.prototype.g=function(){return new XMLHttpRequest};bd.prototype.i=function(){return{}};Sp=new bd;function jl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new il(this),this.P=MO,t=gp?125:void 0,this.V=new Cd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gw}function gw(){this.i=null,this.g="",this.h=!1}var MO=45e3,Tp={},Mu={};W=jl.prototype;W.setTimeout=function(t){this.P=t};function wp(t,e,n){t.L=1,t.v=kd(Gr(e)),t.s=n,t.S=!0,yw(t,null)}function yw(t,e){t.G=Date.now(),Ml(t),t.A=Gr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),Pw(n.i,"t",r),t.C=0,n=t.l.J,t.h=new gw,t.g=Ww(t.l,n?e:null,!t.s),0<t.O&&(t.M=new xO(rn(t.Pa,t,t.g),t.O)),cw(t.U,t.g,"readystatechange",t.nb),e=t.I?ZT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),sl(),NO(t.j,t.u,t.A,t.m,t.W,t.s)}W.nb=function(t){t=t.target;const e=this.M;e&&yr(t)==3?e.l():this.Pa(t)};W.Pa=function(t){try{if(t==this.g)e:{const u=yr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||gp||this.g&&(this.h.h||this.g.ja()||H0(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?sl(3):sl(2)),Ad(this);var n=this.g.da();this.ca=n;t:if(vw(this)){var r=H0(this.g);t="";var i=r.length,s=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xi(this),Ra(this);var o="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,OO(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!el(l)){var c=l;break t}}c=null}if(n=c)Hs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cp(this,n);else{this.i=!1,this.o=3,mn(12),Xi(this),Ra(this);break e}}this.S?(_w(this,u,o),gp&&this.i&&u==3&&(cw(this.U,this.V,"tick",this.mb),this.V.start())):(Hs(this.j,this.m,o,null),Cp(this,o)),u==4&&Xi(this),this.i&&!this.J&&(u==4?Bw(this.l,this):(this.i=!1,Ml(this)))}else rD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,mn(12)):(this.o=0,mn(13)),Xi(this),Ra(this)}}}catch{}finally{}};function vw(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function _w(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=LO(t,n),i==Mu){e==4&&(t.o=4,mn(14),r=!1),Hs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Tp){t.o=4,mn(15),Hs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Hs(t.j,t.m,i,null),Cp(t,i);vw(t)&&i!=Mu&&i!=Tp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,mn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rg(e),e.M=!0,mn(11))):(Hs(t.j,t.m,n,"[Invalid Chunked Response]"),Xi(t),Ra(t))}W.mb=function(){if(this.g){var t=yr(this.g),e=this.g.ja();this.C<e.length&&(Ad(this),_w(this,t,e),this.i&&t!=4&&Ml(this))}};function LO(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Mu:(n=Number(e.substring(n,r)),isNaN(n)?Tp:(r+=1,r+n>e.length?Mu:(e=e.slice(r,r+n),t.C=r+n,e)))}W.cancel=function(){this.J=!0,Xi(this)};function Ml(t){t.Y=Date.now()+t.P,Ew(t,t.P)}function Ew(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ol(rn(t.lb,t),e)}function Ad(t){t.B&&(ge.clearTimeout(t.B),t.B=null)}W.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(DO(this.j,this.A),this.L!=2&&(sl(),mn(17)),Xi(this),this.o=2,Ra(this)):Ew(this,this.Y-t)};function Ra(t){t.l.H==0||t.J||Bw(t.l,t)}function Xi(t){Ad(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,gg(t.V),uw(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Cp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Pp(n.i,t))){if(!t.K&&Pp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Vu(n),Od(n);else break e;Pg(n),mn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ol(rn(n.ib,n),6e3));if(1>=bw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Zi(n,11)}else if((t.K||n.g==t)&&Vu(n),!el(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const m=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Sg(s,s.h),s.h=null))}if(r.F){const y=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ye(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Hw(r,r.J?r.pa:null,r.Y),o.K){Aw(r.i,o);var l=o,a=r.L;a&&l.setTimeout(a),l.B&&(Ad(l),Ml(l)),r.g=o}else Uw(r);0<n.j.length&&Dd(n)}else c[0]!="stop"&&c[0]!="close"||Zi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Zi(n,7):Cg(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}sl(4)}catch{}}function FO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ed(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function VO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ed(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Sw(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ed(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=VO(t),r=FO(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ss(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ss){this.h=t.h,Lu(this,t.j),this.s=t.s,this.g=t.g,Fu(this,t.m),this.l=t.l;var e=t.i,n=new ol;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),B0(this,n),this.o=t.o}else t&&(e=String(t).match(Tw))?(this.h=!1,Lu(this,e[1]||"",!0),this.s=ua(e[2]||""),this.g=ua(e[3]||"",!0),Fu(this,e[4]),this.l=ua(e[5]||"",!0),B0(this,e[6]||"",!0),this.o=ua(e[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}ss.prototype.toString=function(){var t=[],e=this.j;e&&t.push(da(e,z0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(da(e,z0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(da(n,n.charAt(0)=="/"?zO:BO,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",da(n,HO)),t.join("")};function Gr(t){return new ss(t)}function Lu(t,e,n){t.j=n?ua(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function B0(t,e,n){e instanceof ol?(t.i=e,WO(t.i,t.h)):(n||(e=da(e,qO)),t.i=new ol(e,t.h))}function Ye(t,e,n){t.i.set(e,n)}function kd(t){return Ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ua(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function da(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$O),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $O(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var z0=/[#\/\?@]/g,BO=/[#\?:]/g,zO=/[#\?]/g,qO=/[#\?@]/g,HO=/#/g;function ol(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vi(t){t.g||(t.g=new Map,t.h=0,t.i&&UO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}W=ol.prototype;W.add=function(t,e){Vi(this),this.i=null,t=xo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ww(t,e){Vi(t),e=xo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Cw(t,e){return Vi(t),e=xo(t,e),t.g.has(e)}W.forEach=function(t,e){Vi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};W.ta=function(){Vi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};W.Z=function(t){Vi(this);let e=[];if(typeof t=="string")Cw(this,t)&&(e=e.concat(this.g.get(xo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};W.set=function(t,e){return Vi(this),this.i=null,t=xo(this,t),Cw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};W.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Pw(t,e,n){ww(t,e),0<n.length&&(t.i=null,t.g.set(xo(t,e),ag(n)),t.h+=n.length)}W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function xo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function WO(t,e){e&&!t.j&&(Vi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ww(this,r),Pw(this,i,n))},t)),t.j=e}var GO=class{constructor(t,e){this.g=t,this.map=e}};function Rw(t){this.l=t||KO,ge.PerformanceNavigationTiming?(t=ge.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ge.g&&ge.g.Ka&&ge.g.Ka()&&ge.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var KO=10;function Iw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function bw(t){return t.h?1:t.g?t.g.size:0}function Pp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sg(t,e){t.g?t.g.add(e):t.h=e}function Aw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Rw.prototype.cancel=function(){if(this.i=kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kw(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ag(t.i)}var JO=class{stringify(t){return ge.JSON.stringify(t,void 0)}parse(t){return ge.JSON.parse(t,void 0)}};function QO(){this.g=new JO}function YO(t,e,n){const r=n||"";try{Sw(t,function(i,s){let o=i;xl(i)&&(o=pg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function XO(t,e){const n=new Pd;if(ge.Image){const r=new Image;r.onload=vc(Ec,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vc(Ec,n,r,"TestLoadImage: error",!1,e),r.onabort=vc(Ec,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vc(Ec,n,r,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ec(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ll(t){this.l=t.fc||null,this.j=t.ob||!1}Ft(Ll,vg);Ll.prototype.g=function(){return new xd(this.l,this.j)};Ll.prototype.i=function(t){return function(){return t}}({});function xd(t,e){Lt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Tg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ft(xd,Lt);var Tg=0;W=xd.prototype;W.open=function(t,e){if(this.readyState!=Tg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,al(this)};W.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ge).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fl(this)),this.readyState=Tg};W.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ge.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xw(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function xw(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}W.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fl(this):al(this),this.readyState==3&&xw(this)}};W.Za=function(t){this.g&&(this.response=this.responseText=t,Fl(this))};W.Ya=function(t){this.g&&(this.response=t,Fl(this))};W.ka=function(){this.g&&Fl(this)};function Fl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,al(t)}W.setRequestHeader=function(t,e){this.v.append(t,e)};W.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};W.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function al(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(xd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var ZO=ge.JSON.parse;function ft(t){Lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Nw,this.L=this.M=!1}Ft(ft,Lt);var Nw="",eD=/^https?$/i,tD=["POST","PUT"];W=ft.prototype;W.Oa=function(t){this.M=t};W.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Sp.g(),this.C=this.u?$0(this.u):$0(Sp),this.g.onreadystatechange=rn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){q0(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ge.FormData&&t instanceof ge.FormData,!(0<=JT(tD,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jw(this),0<this.B&&((this.L=nD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rn(this.ua,this)):this.A=yg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){q0(this,s)}};function nD(t){return go&&typeof t.timeout=="number"&&t.ontimeout!==void 0}W.ua=function(){typeof og<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function q0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ow(t),Nd(t)}function Ow(t){t.F||(t.F=!0,Ht(t,"complete"),Ht(t,"error"))}W.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ht(this,"complete"),Ht(this,"abort"),Nd(this))};W.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nd(this,!0)),ft.$.N.call(this)};W.La=function(){this.s||(this.G||this.v||this.l?Dw(this):this.kb())};W.kb=function(){Dw(this)};function Dw(t){if(t.h&&typeof og<"u"&&(!t.C[1]||yr(t)!=4||t.da()!=2)){if(t.v&&yr(t)==4)yg(t.La,0,t);else if(Ht(t,"readystatechange"),yr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Tw)[1]||null;!i&&ge.self&&ge.self.location&&(i=ge.self.location.protocol.slice(0,-1)),r=!eD.test(i?i.toLowerCase():"")}n=r}if(n)Ht(t,"complete"),Ht(t,"success");else{t.m=6;try{var s=2<yr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Ow(t)}}finally{Nd(t)}}}}function Nd(t,e){if(t.g){jw(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ht(t,"ready");try{n.onreadystatechange=r}catch{}}}function jw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ge.clearTimeout(t.A),t.A=null)}W.isActive=function(){return!!this.g};function yr(t){return t.g?t.g.readyState:0}W.da=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}};W.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};W.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),ZO(e)}};function H0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Nw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function rD(t){const e={};t=(t.g&&2<=yr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(el(t[r]))continue;var n=bO(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}SO(e,function(r){return r.join(", ")})}W.Ia=function(){return this.m};W.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Mw(t){let e="";return cg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function wg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ye(t,e,n))}function Xo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Lw(t){this.Ga=0,this.j=[],this.l=new Pd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xo("baseRetryDelayMs",5e3,t),this.hb=Xo("retryDelaySeedMs",1e4,t),this.eb=Xo("forwardChannelMaxRetries",2,t),this.xa=Xo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Rw(t&&t.concurrentRequestLimit),this.Ja=new QO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}W=Lw.prototype;W.ra=8;W.H=1;function Cg(t){if(Fw(t),t.H==3){var e=t.W++,n=Gr(t.I);if(Ye(n,"SID",t.K),Ye(n,"RID",e),Ye(n,"TYPE","terminate"),Vl(t,n),e=new jl(t,t.l,e),e.L=2,e.v=kd(Gr(n)),n=!1,ge.navigator&&ge.navigator.sendBeacon)try{n=ge.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ge.Image&&(new Image().src=e.v,n=!0),n||(e.g=Ww(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ml(e)}qw(t)}function Od(t){t.g&&(Rg(t),t.g.cancel(),t.g=null)}function Fw(t){Od(t),t.u&&(ge.clearTimeout(t.u),t.u=null),Vu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ge.clearTimeout(t.m),t.m=null)}function Dd(t){if(!Iw(t.i)&&!t.m){t.m=!0;var e=t.Na;nl||aw(),rl||(nl(),rl=!0),mg.add(e,t),t.C=0}}function iD(t,e){return bw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ol(rn(t.Na,t,e),zw(t,t.C)),t.C++,!0)}W.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new jl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ZT(s),ew(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Vw(this,i,e),n=Gr(this.I),Ye(n,"RID",t),Ye(n,"CVER",22),this.F&&Ye(n,"X-HTTP-Session-Id",this.F),Vl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Mw(s)))+"&"+e:this.o&&wg(n,this.o,s)),Sg(this.i,i),this.bb&&Ye(n,"TYPE","init"),this.P?(Ye(n,"$req",e),Ye(n,"SID","null"),i.aa=!0,wp(i,n,null)):wp(i,n,e),this.H=2}}else this.H==3&&(t?W0(this,t):this.j.length==0||Iw(this.i)||W0(this))};function W0(t,e){var n;e?n=e.m:n=t.W++;const r=Gr(t.I);Ye(r,"SID",t.K),Ye(r,"RID",n),Ye(r,"AID",t.V),Vl(t,r),t.o&&t.s&&wg(r,t.o,t.s),n=new jl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Vw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Sg(t.i,n),wp(n,r,e)}function Vl(t,e){t.na&&cg(t.na,function(n,r){Ye(e,r,n)}),t.h&&Sw({},function(n,r){Ye(e,r,n)})}function Vw(t,e,n){n=Math.min(t.j.length,n);var r=t.h?rn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let a=0;a<n;a++){let c=i[a].g;const u=i[a].map;if(c-=s,0>c)s=Math.max(0,i[a].g-100),l=!1;else try{YO(u,o,"req"+c+"_")}catch{r&&r(u)}}if(l){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Uw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;nl||aw(),rl||(nl(),rl=!0),mg.add(e,t),t.A=0}}function Pg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ol(rn(t.Ma,t),zw(t,t.A)),t.A++,!0)}W.Ma=function(){if(this.u=null,$w(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ol(rn(this.jb,this),t)}};W.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mn(10),Od(this),$w(this))};function Rg(t){t.B!=null&&(ge.clearTimeout(t.B),t.B=null)}function $w(t){t.g=new jl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Gr(t.wa);Ye(e,"RID","rpc"),Ye(e,"SID",t.K),Ye(e,"AID",t.V),Ye(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ye(e,"TO",t.qa),Ye(e,"TYPE","xmlhttp"),Vl(t,e),t.o&&t.s&&wg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=kd(Gr(e)),n.s=null,n.S=!0,yw(n,t)}W.ib=function(){this.v!=null&&(this.v=null,Od(this),Pg(this),mn(19))};function Vu(t){t.v!=null&&(ge.clearTimeout(t.v),t.v=null)}function Bw(t,e){var n=null;if(t.g==e){Vu(t),Rg(t),t.g=null;var r=2}else if(Pp(t.i,e))n=e.F,Aw(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Rd(),Ht(r,new fw(r,n)),Dd(t)}else Uw(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&iD(t,e)||r==2&&Pg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Zi(t,5);break;case 4:Zi(t,10);break;case 3:Zi(t,6);break;default:Zi(t,2)}}}function zw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Zi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=rn(t.pb,t);n||(n=new ss("//www.google.com/images/cleardot.gif"),ge.location&&ge.location.protocol=="http"||Lu(n,"https"),kd(n)),XO(n.toString(),r)}else mn(2);t.H=0,t.h&&t.h.za(e),qw(t),Fw(t)}W.pb=function(t){t?(this.l.info("Successfully pinged google.com"),mn(2)):(this.l.info("Failed to ping google.com"),mn(1))};function qw(t){if(t.H=0,t.ma=[],t.h){const e=kw(t.i);(e.length!=0||t.j.length!=0)&&(M0(t.ma,e),M0(t.ma,t.j),t.i.i.length=0,ag(t.j),t.j.length=0),t.h.ya()}}function Hw(t,e,n){var r=n instanceof ss?Gr(n):new ss(n);if(r.g!="")e&&(r.g=e+"."+r.g),Fu(r,r.m);else{var i=ge.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ss(null);r&&Lu(s,r),e&&(s.g=e),i&&Fu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ye(r,n,e),Ye(r,"VER",t.ra),Vl(t,r),r}function Ww(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ft(new Ll({ob:!0})):new ft(t.va),e.Oa(t.J),e}W.isActive=function(){return!!this.h&&this.h.isActive(this)};function Gw(){}W=Gw.prototype;W.Ba=function(){};W.Aa=function(){};W.za=function(){};W.ya=function(){};W.isActive=function(){return!0};W.Va=function(){};function Uu(){if(go&&!(10<=Number(yO)))throw Error("Environmental error: no available transport.")}Uu.prototype.g=function(t,e){return new On(t,e)};function On(t,e){Lt.call(this),this.g=new Lw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!el(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!el(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new No(this)}Ft(On,Lt);On.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;mn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Hw(t,null,t.Y),Dd(t)};On.prototype.close=function(){Cg(this.g)};On.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=pg(t),t=n);e.j.push(new GO(e.fb++,t)),e.H==3&&Dd(e)};On.prototype.N=function(){this.g.h=null,delete this.j,Cg(this.g),delete this.g,On.$.N.call(this)};function Kw(t){_g.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ft(Kw,_g);function Jw(){Eg.call(this),this.status=1}Ft(Jw,Eg);function No(t){this.g=t}Ft(No,Gw);No.prototype.Ba=function(){Ht(this.g,"a")};No.prototype.Aa=function(t){Ht(this.g,new Kw(t))};No.prototype.za=function(t){Ht(this.g,new Jw)};No.prototype.ya=function(){Ht(this.g,"b")};function sD(){this.blockSize=-1}function cr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ft(cr,sD);cr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function qh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}cr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)qh(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){qh(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){qh(this,r),i=0;break}}this.h=i,this.i+=e};cr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Be(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var oD={};function Ig(t){return-128<=t&&128>t?pO(t,function(e){return new Be([e|0],0>e?-1:0)}):new Be([t|0],0>t?-1:0)}function vr(t){if(isNaN(t)||!isFinite(t))return no;if(0>t)return zt(vr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Rp;return new Be(e,0)}function Qw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return zt(Qw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vr(Math.pow(e,8)),r=no,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=vr(Math.pow(e,s)),r=r.R(s).add(vr(o))):(r=r.R(n),r=r.add(vr(o)))}return r}var Rp=4294967296,no=Ig(0),Ip=Ig(1),G0=Ig(16777216);W=Be.prototype;W.ea=function(){if(Un(this))return-zt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Rp+r)*e,e*=Rp}return t};W.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Fr(this))return"0";if(Un(this))return"-"+zt(this).toString(t);for(var e=vr(Math.pow(t,6)),n=this,r="";;){var i=Bu(n,e).g;n=$u(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Fr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};W.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Fr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Un(t){return t.h==-1}W.X=function(t){return t=$u(this,t),Un(t)?-1:Fr(t)?0:1};function zt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Be(n,~t.h).add(Ip)}W.abs=function(){return Un(this)?zt(this):this};W.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Be(n,n[n.length-1]&-2147483648?-1:0)};function $u(t,e){return t.add(zt(e))}W.R=function(t){if(Fr(this)||Fr(t))return no;if(Un(this))return Un(t)?zt(this).R(zt(t)):zt(zt(this).R(t));if(Un(t))return zt(this.R(zt(t)));if(0>this.X(G0)&&0>t.X(G0))return vr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,l=t.D(i)>>>16,a=t.D(i)&65535;n[2*r+2*i]+=o*a,Sc(n,2*r+2*i),n[2*r+2*i+1]+=s*a,Sc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*l,Sc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*l,Sc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Be(n,0)};function Sc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Zo(t,e){this.g=t,this.h=e}function Bu(t,e){if(Fr(e))throw Error("division by zero");if(Fr(t))return new Zo(no,no);if(Un(t))return e=Bu(zt(t),e),new Zo(zt(e.g),zt(e.h));if(Un(e))return e=Bu(t,zt(e)),new Zo(zt(e.g),e.h);if(30<t.g.length){if(Un(t)||Un(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ip,r=e;0>=r.X(t);)n=K0(n),r=K0(r);var i=Rs(n,1),s=Rs(r,1);for(r=Rs(r,2),n=Rs(n,2);!Fr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Rs(r,1),n=Rs(n,1)}return e=$u(t,i.R(e)),new Zo(i,e)}for(i=no;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=vr(n),o=s.R(e);Un(o)||0<o.X(t);)n-=r,s=vr(n),o=s.R(e);Fr(s)&&(s=Ip),i=i.add(s),t=$u(t,o)}return new Zo(i,t)}W.gb=function(t){return Bu(this,t).h};W.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Be(n,this.h&t.h)};W.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Be(n,this.h|t.h)};W.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Be(n,this.h^t.h)};function K0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Be(n,t.h)}function Rs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Be(i,t.h)}Uu.prototype.createWebChannel=Uu.prototype.g;On.prototype.send=On.prototype.u;On.prototype.open=On.prototype.m;On.prototype.close=On.prototype.close;Id.NO_ERROR=0;Id.TIMEOUT=8;Id.HTTP_ERROR=6;pw.COMPLETE="complete";mw.EventType=Dl;Dl.OPEN="a";Dl.CLOSE="b";Dl.ERROR="c";Dl.MESSAGE="d";Lt.prototype.listen=Lt.prototype.O;ft.prototype.listenOnce=ft.prototype.P;ft.prototype.getLastError=ft.prototype.Sa;ft.prototype.getLastErrorCode=ft.prototype.Ia;ft.prototype.getStatus=ft.prototype.da;ft.prototype.getResponseJson=ft.prototype.Wa;ft.prototype.getResponseText=ft.prototype.ja;ft.prototype.send=ft.prototype.ha;ft.prototype.setWithCredentials=ft.prototype.Oa;cr.prototype.digest=cr.prototype.l;cr.prototype.reset=cr.prototype.reset;cr.prototype.update=cr.prototype.j;Be.prototype.add=Be.prototype.add;Be.prototype.multiply=Be.prototype.R;Be.prototype.modulo=Be.prototype.gb;Be.prototype.compare=Be.prototype.X;Be.prototype.toNumber=Be.prototype.ea;Be.prototype.toString=Be.prototype.toString;Be.prototype.getBits=Be.prototype.D;Be.fromNumber=vr;Be.fromString=Qw;var aD=function(){return new Uu},lD=function(){return Rd()},Hh=Id,cD=pw,uD=Ts,J0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dD=Ll,Tc=mw,hD=ft,fD=cr,ro=Be;const Q0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="10.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Km("@firebase/firestore");function Y0(){return ms.logLevel}function se(t,...e){if(ms.logLevel<=Ne.DEBUG){const n=e.map(bg);ms.debug(`Firestore (${Oo}): ${t}`,...n)}}function Kr(t,...e){if(ms.logLevel<=Ne.ERROR){const n=e.map(bg);ms.error(`Firestore (${Oo}): ${t}`,...n)}}function yo(t,...e){if(ms.logLevel<=Ne.WARN){const n=e.map(bg);ms.warn(`Firestore (${Oo}): ${t}`,...n)}}function bg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function Ze(t,e){t||ye()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class mD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gD{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await i(this.currentUser)})},l=a=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string"),new Yw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new Zt(e)}}class yD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _D{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ED{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string"),this.R=n.token,new _D(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=SD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new At(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new At(0,0))}static max(){return new _e(new At(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(),r===void 0?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ht extends ll{construct(e,n,r){return new ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const TD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends ll{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return TD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[i+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new he(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new he(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(ht.fromString(e))}static fromName(e){return new de(ht.fromString(e).popFirst(5))}static empty(){return new de(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new ht(e.slice()))}}function wD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new xi(i,de.empty(),e)}function CD(t){return new xi(t.readTime,t.key,-1)}class xi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xi(_e.min(),de.empty(),-1)}static max(){return new xi(_e.max(),de.empty(),-1)}}function PD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ID{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==RD)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},a=>r(a))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(u=>{o[c]=u,++l,l===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function $l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ag.ae=-1;function jd(t){return t==null}function zu(t){return t===0&&1/t==-1/0}function bD(t){return typeof t=="number"&&Number.isInteger(t)&&!zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}}class wc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new on(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new ir([])}unionWith(e){let n=new on(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eC("Invalid base64 string: "+s):s}}(e);return new un(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const AD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){if(Ze(!!t),typeof t=="string"){let e=0;const n=AD.exec(t);if(Ze(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?un.fromBase64String(t):un.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xg(t){const e=t.mapValue.fields.__previous_value__;return kg(e)?xg(e):e}function cl(t){const e=Ni(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r,i,s,o,l,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class ul{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kg(t)?4:xD(t)?9007199254740991:10:ye()}function Pr(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cl(t).isEqual(cl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ni(i.timestampValue),l=Ni(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gs(i.bytesValue).isEqual(gs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wt(i.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wt(i.integerValue)===wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wt(i.doubleValue),l=wt(s.doubleValue);return o===l?zu(o)===zu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return vo(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(X0(o)!==X0(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!Pr(o[a],l[a])))return!1;return!0}(t,e);default:return ye()}}function dl(t,e){return(t.values||[]).find(n=>Pr(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=wt(s.integerValue||s.doubleValue),a=wt(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return e_(t.timestampValue,e.timestampValue);case 4:return e_(cl(t),cl(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(s,o){const l=gs(s),a=gs(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),a=o.split("/");for(let c=0;c<l.length&&c<a.length;c++){const u=Me(l[c],a[c]);if(u!==0)return u}return Me(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Me(wt(s.latitude),wt(o.latitude));return l!==0?l:Me(wt(s.longitude),wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],a=o.values||[];for(let c=0;c<l.length&&c<a.length;++c){const u=_o(l[c],a[c]);if(u)return u}return Me(l.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Cc.mapValue&&o===Cc.mapValue)return 0;if(s===Cc.mapValue)return 1;if(o===Cc.mapValue)return-1;const l=s.fields||{},a=Object.keys(l),c=o.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const f=Me(a[h],u[h]);if(f!==0)return f;const g=_o(l[a[h]],c[u[h]]);if(g!==0)return g}return Me(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ye()}}function e_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Ni(t),r=Ni(e),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function Eo(t){return bp(t)}function bp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bp(n.fields[o])}`;return i+"}"}(t.mapValue):ye()}function Ap(t){return!!t&&"integerValue"in t}function Ng(t){return!!t&&"arrayValue"in t}function t_(t){return!!t&&"nullValue"in t}function n_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gc(t){return!!t&&"mapValue"in t}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ia(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $n(Ia(this.value))}}function tC(t){const e=[];return Do(t.fields,(n,r)=>{const i=new nn([n]);if(Gc(r)){const s=tC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tn(e,0,_e.min(),_e.min(),_e.min(),$n.empty(),0)}static newFoundDocument(e,n,r,i){return new tn(e,1,n,_e.min(),r,i,0)}static newNoDocument(e,n){return new tn(e,2,n,_e.min(),_e.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,_e.min(),_e.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.position=e,this.inclusive=n}}function r_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function i_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function ND(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{}class It extends nC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new DD(e,n,r):n==="array-contains"?new LD(e,r):n==="in"?new FD(e,r):n==="not-in"?new VD(e,r):n==="array-contains-any"?new UD(e,r):new It(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jD(e,r):new MD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Rr extends nC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Rr(e,n)}matches(e){return rC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function rC(t){return t.op==="and"}function iC(t){return OD(t)&&rC(t)}function OD(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function kp(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+Eo(t.value);if(iC(t))return t.filters.map(e=>kp(e)).join(",");{const e=t.filters.map(n=>kp(n)).join(",");return`${t.op}(${e})`}}function sC(t,e){return t instanceof It?function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&Pr(r.value,i.value)}(t,e):t instanceof Rr?function(r,i){return i instanceof Rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&sC(o,i.filters[l]),!0):!1}(t,e):void ye()}function oC(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(t):t instanceof Rr?function(n){return n.op.toString()+" {"+n.getFilters().map(oC).join(" ,")+"}"}(t):"Filter"}class DD extends It{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class jD extends It{constructor(e,n){super(e,"in",n),this.keys=aC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MD extends It{constructor(e,n){super(e,"not-in",n),this.keys=aC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class LD extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ng(n)&&dl(n.arrayValue,this.value)}}class FD extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dl(this.value.arrayValue,n)}}class VD extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dl(this.value.arrayValue,n)}}class UD extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.he=null}}function s_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $D(t,e,n,r,i,s,o)}function Og(t){const e=Te(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eo(r)).join(",")),e.he=n}return e.he}function Dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ND(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i_(t.startAt,e.startAt)&&i_(t.endAt,e.endAt)}function xp(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=a,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function BD(t,e,n,r,i,s,o,l){return new Md(t,e,n,r,i,s,o,l)}function jg(t){return new Md(t)}function o_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zD(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function qD(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function HD(t){return t.collectionGroup!==null}function Aa(t){const e=Te(t);if(e.Pe===null){e.Pe=[];const n=qD(e),r=zD(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ba(n)),e.Pe.push(new ba(nn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ba(nn.keyField(),s))}}}return e.Pe}function Jr(t){const e=Te(t);return e.Ie||(e.Ie=WD(e,Aa(t))),e.Ie}function WD(t,e){if(t.limitType==="F")return s_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ba(i.field,s)});const n=t.endAt?new qu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qu(t.startAt.position,t.startAt.inclusive):null;return s_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Np(t,e,n){return new Md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Dg(Jr(t),Jr(e))&&t.limitType===e.limitType}function lC(t){return`${Og(Jr(t))}|lt:${t.limitType}`}function Op(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oC(i)).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Eo(i)).join(",")),`Target(${r})`}(Jr(t))}; limitType=${t.limitType})`}function Fd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Aa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,a){const c=r_(o,l,a);return o.inclusive?c<=0:c<0}(r.startAt,Aa(r),i)||r.endAt&&!function(o,l,a){const c=r_(o,l,a);return o.inclusive?c>=0:c>0}(r.endAt,Aa(r),i))}(t,e)}function GD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cC(t){return(e,n)=>{let r=!1;for(const i of Aa(t)){const s=KD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KD(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,l){const a=o.data.field(s),c=l.data.field(s);return a!==null&&c!==null?_o(a,c):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Zw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new at(de.comparator);function Qr(){return JD}const uC=new at(de.comparator);function ha(...t){let e=uC;for(const n of t)e=e.insert(n.key,n);return e}function dC(t){let e=uC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function es(){return ka()}function hC(){return ka()}function ka(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const QD=new at(de.comparator),YD=new on(de.comparator);function Ce(...t){let e=YD;for(const n of t)e=e.add(n);return e}const XD=new on(Me);function ZD(){return XD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zu(e)?"-0":e}}function pC(t){return{integerValue:""+t}}function ej(t,e){return bD(e)?pC(e):fC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(){this._=void 0}}function tj(t,e,n){return t instanceof Hu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kg(s)&&(s=xg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof hl?gC(t,e):t instanceof fl?yC(t,e):function(i,s){const o=mC(i,s),l=a_(o)+a_(i.Ee);return Ap(o)&&Ap(i.Ee)?pC(l):fC(i.serializer,l)}(t,e)}function nj(t,e,n){return t instanceof hl?gC(t,e):t instanceof fl?yC(t,e):n}function mC(t,e){return t instanceof Wu?function(r){return Ap(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hu extends Vd{}class hl extends Vd{constructor(e){super(),this.elements=e}}function gC(t,e){const n=vC(e);for(const r of t.elements)n.some(i=>Pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class fl extends Vd{constructor(e){super(),this.elements=e}}function yC(t,e){let n=vC(e);for(const r of t.elements)n=n.filter(i=>!Pr(i,r));return{arrayValue:{values:n}}}class Wu extends Vd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function a_(t){return wt(t.integerValue||t.doubleValue)}function vC(t){return Ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hl&&i instanceof hl||r instanceof fl&&i instanceof fl?vo(r.elements,i.elements,Pr):r instanceof Wu&&i instanceof Wu?Pr(r.Ee,i.Ee):r instanceof Hu&&i instanceof Hu}(t.transform,e.transform)}class ij{constructor(e,n){this.version=e,this.transformResults=n}}class Ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ud{}function _C(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new SC(t.key,Ur.none()):new Bl(t.key,t.data,Ur.none());{const n=t.data,r=$n.empty();let i=new on(nn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ws(t.key,r,new ir(i.toArray()),Ur.none())}}function sj(t,e,n){t instanceof Bl?function(i,s,o){const l=i.value.clone(),a=c_(i.fieldTransforms,s,o.transformResults);l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(i,s,o){if(!Kc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=c_(i.fieldTransforms,s,o.transformResults),a=s.data;a.setAll(EC(i)),a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof Bl?function(s,o,l,a){if(!Kc(s.precondition,o))return l;const c=s.value.clone(),u=u_(s.fieldTransforms,a,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ws?function(s,o,l,a){if(!Kc(s.precondition,o))return l;const c=u_(s.fieldTransforms,a,o),u=o.data;return u.setAll(EC(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,l){return Kc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function oj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mC(r.transform,i||null);s!=null&&(n===null&&(n=$n.empty()),n.set(r.field,s))}return n||null}function l_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vo(r,i,(s,o)=>rj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bl extends Ud{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ws extends Ud{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function c_(t,e,n){const r=new Map;Ze(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,nj(o,l,n[i]))}return r}function u_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tj(s,o,e))}return r}class SC extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aj extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const a=_C(o,l);a!==null&&r.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ce())}isEqual(e){return this.batchId===e.batchId&&vo(this.mutations,e.mutations,(n,r)=>l_(n,r))&&vo(this.baseMutations,e.baseMutations,(n,r)=>l_(n,r))}}class Mg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ze(e.mutations.length===r.length);let i=function(){return QD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Mg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,be;function dj(t){switch(t){default:return ye();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function TC(t){if(t===void 0)return Kr("GRPC error has no .code"),L.UNKNOWN;switch(t){case St.OK:return L.OK;case St.CANCELLED:return L.CANCELLED;case St.UNKNOWN:return L.UNKNOWN;case St.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case St.INTERNAL:return L.INTERNAL;case St.UNAVAILABLE:return L.UNAVAILABLE;case St.UNAUTHENTICATED:return L.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case St.NOT_FOUND:return L.NOT_FOUND;case St.ALREADY_EXISTS:return L.ALREADY_EXISTS;case St.PERMISSION_DENIED:return L.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case St.ABORTED:return L.ABORTED;case St.OUT_OF_RANGE:return L.OUT_OF_RANGE;case St.UNIMPLEMENTED:return L.UNIMPLEMENTED;case St.DATA_LOSS:return L.DATA_LOSS;default:return ye()}}(be=St||(St={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Pc}static getOrCreateInstance(){return Pc===null&&(Pc=new Lg),Pc}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Pc=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new ro([4294967295,4294967295],0);function d_(t){const e=hj().encode(t),n=new fD;return n.update(e),new Uint8Array(n.digest())}function h_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ro([n,r],0),new ro([i,s],0)]}class Fg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fa(`Invalid padding: ${n}`);if(r<0)throw new fa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ro.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ro.fromNumber(r)));return i.compare(fj)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=d_(e),[r,i]=h_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Fg(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ae===0)return;const n=d_(e),[r,i]=h_(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $d(_e.min(),i,new at(Me),Qr(),Ce())}}class zl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zl(r,n,Ce(),Ce(),Ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class wC{constructor(e,n){this.targetId=e,this.ye=n}}class CC{constructor(e,n,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class f_{constructor(){this.we=0,this.Se=m_(),this.be=un.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=Ce(),n=Ce(),r=Ce();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ye()}}),new zl(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=m_()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class pj{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Qr(),this.Ue=p_(),this.We=new at(Me)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){var n;const r=e.targetId,i=e.ye.count,s=this.et(r);if(s){const o=s.target;if(xp(o))if(i===0){const l=new de(o.path);this.je(r,l,tn.newNoDocument(l,_e.min()))}else Ze(i===1);else{const l=this.tt(r);if(l!==i){const a=this.nt(e),c=a?this.rt(a,e,l):1;if(c!==0){this.Ze(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(r,u)}(n=Lg.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(h,f,g,m,y){var w,v,p,E,_,C;const k={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},A=f.unchangedNames;return A&&(k.bloomFilter={applied:y===0,hashCount:(w=A==null?void 0:A.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(E=(p=(v=A==null?void 0:A.bits)===null||v===void 0?void 0:v.bitmap)===null||p===void 0?void 0:p.length)!==null&&E!==void 0?E:0,padding:(C=(_=A==null?void 0:A.bits)===null||_===void 0?void 0:_.padding)!==null&&C!==void 0?C:0,mightContain:D=>{var $;return($=m==null?void 0:m.mightContain(D))!==null&&$!==void 0&&$}}),k}(l,e.ye,this.Qe.it(),a,c))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=gs(r).toUint8Array()}catch(a){if(a instanceof eC)return yo("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new Fg(o,i,s)}catch(a){return yo(a instanceof fa?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ae===0?null:l}rt(e,n,r){return n.ye.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.je(n,s,null),i++)}),i}ot(e){const n=new Map;this.Ke.forEach((s,o)=>{const l=this.et(o);if(l){if(s.current&&xp(l.target)){const a=new de(l.target.path);this.$e.get(a)!==null||this._t(o,a)||this.je(o,a,tn.newNoDocument(a,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=Ce();this.Ue.forEach((s,o)=>{let l=!0;o.forEachWhile(a=>{const c=this.et(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new $d(e,n,this.We,this.$e,r);return this.$e=Qr(),this.Ue=p_(),this.We=new at(Me),i}ze(e,n){if(!this.Ye(e))return;const r=this._t(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ut(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this._t(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ut(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new f_,this.Ke.set(e,n)),n}ut(e){let n=this.Ue.get(e);return n||(n=new on(Me),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.ct(e)}Ze(e){this.Ke.set(e,new f_),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}_t(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function p_(){return new at(de.comparator)}function m_(){return new at(de.comparator)}const mj=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),gj=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yj=(()=>({and:"AND",or:"OR"}))();class vj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function Gu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _j(t,e){return Gu(t,e.toTimestamp())}function Cr(t){return Ze(!!t),_e.fromTimestamp(function(n){const r=Ni(n);return new At(r.seconds,r.nanos)}(t))}function Vg(t,e){return function(r){return new ht(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function RC(t){const e=ht.fromString(t);return Ze(kC(e)),e}function jp(t,e){return Vg(t.databaseId,e.path)}function Wh(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new he(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(IC(n))}function Mp(t,e){return Vg(t.databaseId,e)}function Ej(t){const e=RC(t);return e.length===4?ht.emptyPath():IC(e)}function Lp(t){return new ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IC(t){return Ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function g_(t,e,n){return{name:jp(t,e),fields:n.value.mapValue.fields}}function Sj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ze(u===void 0||typeof u=="string"),un.fromBase64String(u||"")):(Ze(u===void 0||u instanceof Uint8Array),un.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const u=c.code===void 0?L.UNKNOWN:TC(c.code);return new he(u,c.message||"")}(o);n=new CC(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wh(t,r.document.name),s=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):_e.min(),l=new $n({mapValue:{fields:r.document.fields}}),a=tn.newFoundDocument(i,s,o,l),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Jc(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wh(t,r.document),s=r.readTime?Cr(r.readTime):_e.min(),o=tn.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Jc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wh(t,r.document),s=r.removedTargetIds||[];n=new Jc([],s,i,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uj(i,s),l=r.targetId;n=new wC(l,o)}}return n}function Tj(t,e){let n;if(e instanceof Bl)n={update:g_(t,e.key,e.value)};else if(e instanceof SC)n={delete:jp(t,e.key)};else if(e instanceof ws)n={update:g_(t,e.key,e.data),updateMask:xj(e.fieldMask)};else{if(!(e instanceof aj))return ye();n={verify:jp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Hu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wu)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_j(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye()}(t,e.precondition)),n}function wj(t,e){return t&&t.length>0?(Ze(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Cr(i.updateTime):Cr(s);return o.isEqual(_e.min())&&(o=Cr(s)),new ij(o,i.transformResults||[])}(n,e))):[]}function Cj(t,e){return{documents:[Mp(t,e.path)]}}function Pj(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Mp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Mp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(a){if(a.length!==0)return AC(Rr.create(a,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(a){if(a.length!==0)return a.map(c=>function(h){return{field:bs(h.field),direction:bj(h.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Dp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(a){return{before:a.inclusive,values:a.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),n}function Rj(t){let e=Ej(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ze(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const f=bC(h);return f instanceof Rr&&iC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(m){return new ba(As(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,jd(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,g=h.values||[];return new qu(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new qu(g,f)}(n.endAt)),BD(e,i,o,s,l,"F",a,c)}function Ij(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=As(n.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=As(n.unaryFilter.field);return It.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(n){return It.create(As(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rr.create(n.compositeFilter.filters.map(r=>bC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye()}function bj(t){return mj[t]}function Aj(t){return gj[t]}function kj(t){return yj[t]}function bs(t){return{fieldPath:t.canonicalString()}}function As(t){return nn.fromServerFormat(t.fieldPath)}function AC(t){return t instanceof It?function(n){if(n.op==="=="){if(n_(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NAN"}};if(t_(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n_(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NAN"}};if(t_(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(n.field),op:Aj(n.op),value:n.value}}}(t):t instanceof Rr?function(n){const r=n.getFilters().map(i=>AC(i));return r.length===1?r[0]:{compositeFilter:{op:kj(n.op),filters:r}}}(t):ye()}function xj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r,i,s=_e.min(),o=_e.min(),l=un.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.lt=e}}function Oj(t){const e=Rj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.on=new jj}addToCollectionParentIndex(e,n){return this.on.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(xi.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class jj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new on(ht.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new on(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new So(0)}static Nn(){return new So(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xa(r.mutation,i,ir.empty(),At.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ce()){const i=es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ha();return s.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Qr();const o=ka(),l=function(){return ka()}();return n.forEach((a,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ws)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),xa(u.mutation,c,u.mutation.getFieldMask(),At.now())):o.set(c.key,ir.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return l.set(c,new Lj(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ka();let i=new at((o,l)=>o-l),s=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let u=r.get(a)||ir.empty();u=l.applyToLocalView(c,u),r.set(a,u);const h=(i.get(l.batchId)||Ce()).add(a);i=i.insert(l.batchId,h)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,h=hC();u.forEach(f=>{if(!s.has(f)){const g=_C(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(es());let l=-1,a=s;return o.next(c=>V.forEach(c,(u,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),s.get(u)?V.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{a=a.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,Ce())).next(u=>({batchId:l,changes:dC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=ha();return this.indexManager.getCollectionParents(e,i).next(o=>V.forEach(o,l=>{const a=function(u,h){return new Md(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((l,a)=>{const c=a.getKey();s.get(c)===null&&(s=s.insert(c,tn.newInvalidDocument(c)))});let o=ha();return s.forEach((l,a)=>{const c=i.get(l);c!==void 0&&xa(c.mutation,a,ir.empty(),At.now()),Fd(n,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return V.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cr(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:Oj(i.bundledQuery),readTime:Cr(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.overlays=new at(de.comparator),this.lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Pt(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=es(),s=n.length+1,o=new de(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&i.set(a.getKey(),a)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new at((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=es(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=es(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=i)););return V.resolve(l)}Pt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cj(n,r));let s=this.lr.get(n);s===void 0&&(s=Ce(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.hr=new on(Dt.Pr),this.Ir=new on(Dt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Dt(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Dt(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new de(new ht([])),r=new Dt(n,e),i=new Dt(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new de(new ht([])),r=new Dt(n,e),i=new Dt(n,e+1);let s=Ce();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Dt(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return de.comparator(e.key,n.key)||Me(e.gr,n.gr)}static Tr(e,n){return Me(e.gr,n.gr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new on(Dt.Pr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lj(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.yr=this.yr.add(new Dt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const l=this.wr(o.gr);s.push(l)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new on(Me);return n.forEach(i=>{const s=new Dt(i,0),o=new Dt(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],l=>{r=r.add(l.gr)})}),V.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new Dt(new de(s),0);let l=new on(Me);return this.yr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(a.gr)),!0)},o),V.resolve(this.br(l))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ze(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return V.forEach(n.mutations,i=>{const s=new Dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Dt(n,0),i=this.yr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.vr=e,this.docs=function(){return new at(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr();const o=n.path,l=new de(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PD(CD(u),r)<=0||(i.has(u.key)||Fd(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ye()}Cr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zj(this)}getSize(e){return V.resolve(this.size)}}class zj extends Mj{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.persistence=e,this.Fr=new jo(n=>Og(n),Dg),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Ug,this.targetCount=0,this.Nr=So.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),V.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new So(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.kn(n),V.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Ag(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new qj(this),this.indexManager=new Dj,this.remoteDocumentCache=function(i){return new Bj(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Nj(n),this.Kr=new Vj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new $j(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new Wj(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class Wj extends ID{constructor(e){super(),this.currentSequenceNumber=e}}class $g{constructor(e){this.persistence=e,this.Gr=new Ug,this.zr=null}static jr(e){return new $g(e)}get Hr(){if(this.zr)return this.zr;throw ye()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Hr,r=>{const i=de.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,_e.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return V.or([()=>V.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ce(),i=Ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Bg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.Ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ui(e,n).next(s=>s||this.Wi(e,n,i,r)).next(s=>s||this.Gi(e,n))}Ui(e,n){if(o_(n))return V.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Np(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ce(...s);return this.$i.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.zi(n,l);return this.ji(n,c,o,a.readTime)?this.Ui(e,Np(n,null,"F")):this.Hi(e,c,n,a)}))})))}Wi(e,n,r,i){return o_(n)||i.isEqual(_e.min())?this.Gi(e,n):this.$i.getDocuments(e,r).next(s=>{const o=this.zi(n,s);return this.ji(n,o,r,i)?this.Gi(e,n):(Y0()<=Ne.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Op(n)),this.Hi(e,o,n,wD(i,-1)))})}zi(e,n){let r=new on(cC(e));return n.forEach((i,s)=>{Fd(e,s)&&(r=r.add(s))}),r}ji(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Gi(e,n){return Y0()<=Ne.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Op(n)),this.$i.getDocumentsMatchingQuery(e,n,xi.min())}Hi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,i){this.persistence=e,this.Ji=n,this.serializer=i,this.Yi=new at(Me),this.Zi=new jo(s=>Og(s),Dg),this.Xi=new Map,this.es=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.ts(r)}ts(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fj(this.es,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.es.setIndexManager(this.indexManager),this.Ji.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Yi))}}function Jj(t,e,n,r){return new Kj(t,e,n,r)}async function xC(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ts(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let a=Ce();for(const c of i){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return n.localDocuments.getDocuments(r,a).next(c=>({ns:c,removedBatchIds:o,addedBatchIds:l}))})})}function Qj(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.es.newChangeBuffer({trackRemovals:!0});return function(l,a,c,u){const h=c.batch,f=h.keys();let g=V.resolve();return f.forEach(m=>{g=g.next(()=>u.getEntry(a,m)).next(y=>{const w=c.docVersions.get(m);Ze(w!==null),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=Ce();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NC(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function Yj(t,e){const n=Te(t),r=e.snapshotVersion;let i=n.Yi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.es.newChangeBuffer({trackRemovals:!0});i=n.Yi;const l=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;l.push(n.qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(s,u.addedDocuments,h)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(un.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),function(y,w,v){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,u)&&l.push(n.qr.updateTargetData(s,g))});let a=Qr(),c=Ce();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(Xj(s,o,e.documentUpdates).next(u=>{a=u.rs,c=u.ss})),!r.isEqual(_e.min())){const u=n.qr.getLastRemoteSnapshotVersion(s).next(h=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(u)}return V.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.Yi=i,s))}function Xj(t,e,n){let r=Ce(),i=Ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((l,a)=>{const c=s.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),a.isNoDocument()&&a.version.isEqual(_e.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{rs:o,ss:i}})}function Zj(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eM(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new gi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Yi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Yi=n.Yi.insert(r.targetId,r),n.Zi.set(e,r.targetId)),r})}async function Fp(t,e,n){const r=Te(t),i=r.Yi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$l(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Yi=r.Yi.remove(e),r.Zi.delete(i.target)}function y_(t,e,n){const r=Te(t);let i=_e.min(),s=Ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const h=Te(a),f=h.Zi.get(u);return f!==void 0?V.resolve(h.Yi.get(f)):h.qr.getTargetData(c,u)}(r,o,Jr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,l.targetId).next(a=>{s=a})}).next(()=>r.Ji.getDocumentsMatchingQuery(o,e,n?i:_e.min(),n?s:Ce())).next(l=>(tM(r,GD(e),l),{documents:l,os:s})))}function tM(t,e,n){let r=t.Xi.get(e)||_e.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class v_{constructor(){this.activeTargetIds=ZD()}Ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}Is(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nM{constructor(){this.Js=new v_,this.Ys={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Js.Ps(e),this.Ys[e]||"not-current"}updateQueryState(e,n,r){this.Ys[e]=n}removeLocalQueryTarget(e){this.Js.Is(e)}isLocalQueryTarget(e){return this.Js.activeTargetIds.has(e)}clearQueryState(e){delete this.Ys[e]}getAllActiveQueryTargets(){return this.Js.activeTargetIds}isActiveQueryTarget(e){return this.Js.activeTargetIds.has(e)}start(){return this.Js=new v_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{Zs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.Xs=()=>this.eo(),this.no=()=>this.ro(),this.io=[],this.so()}Zs(e){this.io.push(e)}shutdown(){window.removeEventListener("online",this.Xs),window.removeEventListener("offline",this.no)}so(){window.addEventListener("online",this.Xs),window.addEventListener("offline",this.no)}eo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.io)e(0)}ro(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.io)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function Gh(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.oo=e.oo,this._o=e._o}ao(e){this.uo=e}co(e){this.lo=e}onMessage(e){this.ho=e}close(){this._o()}send(e){this.oo(e)}Po(){this.uo()}Io(e){this.lo(e)}To(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class oM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Eo=r+"://"+n.host,this.Ao=`projects/${i}/databases/${s}`,this.Ro=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Vo(){return!1}mo(n,r,i,s,o){const l=Gh(),a=this.fo(n,r);se("RestConnection",`Sending RPC '${n}' ${l}:`,a,i);const c={"google-cloud-resource-prefix":this.Ao,"x-goog-request-params":this.Ro};return this.po(c,s,o),this.yo(n,a,c,i).then(u=>(se("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw yo("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",a,"request:",i),u})}wo(n,r,i,s,o,l){return this.mo(n,r,i,s,o)}po(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}fo(n,r){const i=iM[n];return`${this.Eo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}yo(e,n,r,i){const s=Gh();return new Promise((o,l)=>{const a=new hD;a.setWithCredentials(!0),a.listenOnce(cD.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Hh.NO_ERROR:const u=a.getResponseJson();se(Xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Hh.TIMEOUT:se(Xt,`RPC '${e}' ${s} timed out`),l(new he(L.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const h=a.getStatus();if(se(Xt,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const m=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(g.status);l(new he(m,g.message))}else l(new he(L.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new he(L.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{se(Xt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);se(Xt,`RPC '${e}' ${s} sending request:`,i),a.send(n,"POST",c,r,15)})}So(e,n,r){const i=Gh(),s=[this.Eo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aD(),l=lD(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new dD({})),this.po(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=s.join("");se(Xt,`Creating RPC '${e}' stream ${i}: ${u}`,a);const h=o.createWebChannel(u,a);let f=!1,g=!1;const m=new sM({oo:w=>{g?se(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(se(Xt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),se(Xt,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},_o:()=>h.close()}),y=(w,v,p)=>{w.listen(v,E=>{try{p(E)}catch(_){setTimeout(()=>{throw _},0)}})};return y(h,Tc.EventType.OPEN,()=>{g||se(Xt,`RPC '${e}' stream ${i} transport opened.`)}),y(h,Tc.EventType.CLOSE,()=>{g||(g=!0,se(Xt,`RPC '${e}' stream ${i} transport closed`),m.Io())}),y(h,Tc.EventType.ERROR,w=>{g||(g=!0,yo(Xt,`RPC '${e}' stream ${i} transport errored:`,w),m.Io(new he(L.UNAVAILABLE,"The operation could not be completed")))}),y(h,Tc.EventType.MESSAGE,w=>{var v;if(!g){const p=w.data[0];Ze(!!p);const E=p,_=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(_){se(Xt,`RPC '${e}' stream ${i} received error:`,_);const C=_.status;let k=function($){const S=St[$];if(S!==void 0)return TC(S)}(C),A=_.message;k===void 0&&(k=L.INTERNAL,A="Unknown error status: "+C+" with message "+_.message),g=!0,m.Io(new he(k,A)),h.close()}else se(Xt,`RPC '${e}' stream ${i} received:`,p),m.To(p)}}),y(l,uD.STAT_EVENT,w=>{w.stat===J0.PROXY?se(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===J0.NOPROXY&&se(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Po()},0),m}}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){return new vj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.bo=r,this.Do=i,this.vo=s,this.Co=0,this.Fo=null,this.Mo=Date.now(),this.reset()}reset(){this.Co=0}xo(){this.Co=this.vo}Oo(e){this.cancel();const n=Math.floor(this.Co+this.No()),r=Math.max(0,Date.now()-this.Mo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Co} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Fo=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Mo=Date.now(),e())),this.Co*=this.Do,this.Co<this.bo&&(this.Co=this.bo),this.Co>this.vo&&(this.Co=this.vo)}Bo(){this.Fo!==null&&(this.Fo.skipDelay(),this.Fo=null)}cancel(){this.Fo!==null&&(this.Fo.cancel(),this.Fo=null)}No(){return(Math.random()-.5)*this.Co}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i,s,o,l,a){this.si=e,this.Lo=r,this.ko=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.qo=0,this.Qo=null,this.Ko=null,this.stream=null,this.$o=new OC(e,n)}Uo(){return this.state===1||this.state===5||this.Wo()}Wo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}zo(){this.state=0,this.$o.reset()}jo(){this.Wo()&&this.Qo===null&&(this.Qo=this.si.enqueueAfterDelay(this.Lo,6e4,()=>this.Ho()))}Jo(e){this.Yo(),this.stream.send(e)}async Ho(){if(this.Wo())return this.close(0)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}async close(e,n){this.Yo(),this.Zo(),this.$o.cancel(),this.qo++,e!==4?this.$o.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.$o.xo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Xo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Xo(){}auth(){this.state=1;const e=this.e_(this.qo),n=this.qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.qo===n&&this.t_(r,i)},r=>{e(()=>{const i=new he(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.n_(i)})})}t_(e,n){const r=this.e_(this.qo);this.stream=this.r_(e,n),this.stream.ao(()=>{r(()=>(this.state=2,this.Ko=this.si.enqueueAfterDelay(this.ko,1e4,()=>(this.Wo()&&(this.state=3),Promise.resolve())),this.listener.ao()))}),this.stream.co(i=>{r(()=>this.n_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.$o.Oo(async()=>{this.state=0,this.start()})}n_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}e_(e){return n=>{this.si.enqueueAndForget(()=>this.qo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aM extends DC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}r_(e,n){return this.connection.So("Listen",e,n)}onMessage(e){this.$o.reset();const n=Sj(this.serializer,e),r=function(s){if(!("targetChange"in s))return _e.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?Cr(o.readTime):_e.min()}(e);return this.listener.i_(n,r)}s_(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(s,o){let l;const a=o.target;if(l=xp(a)?{documents:Cj(s,a)}:{query:Pj(s,a)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=PC(s,o.resumeToken);const c=Dp(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(_e.min())>0){l.readTime=Gu(s,o.snapshotVersion.toTimestamp());const c=Dp(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=Ij(this.serializer,e);r&&(n.labels=r),this.Jo(n)}o_(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.Jo(n)}}class lM extends DC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.__=!1}get a_(){return this.__}start(){this.__=!1,this.lastStreamToken=void 0,super.start()}Xo(){this.__&&this.u_([])}r_(e,n){return this.connection.So("Write",e,n)}onMessage(e){if(Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.__){this.$o.reset();const n=wj(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.c_(r,n)}return Ze(!e.writeResults||e.writeResults.length===0),this.__=!0,this.listener.l_()}h_(){const e={};e.database=Lp(this.serializer),this.Jo(e)}u_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Tj(this.serializer,r))};this.Jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.P_=!1}I_(){if(this.P_)throw new he(L.FAILED_PRECONDITION,"The client has already been terminated.")}mo(e,n,r){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.mo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new he(L.UNKNOWN,i.toString())})}wo(e,n,r,i){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.wo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(L.UNKNOWN,s.toString())})}terminate(){this.P_=!0}}class uM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.E_=0,this.d_=null,this.A_=!0}R_(){this.E_===0&&(this.V_("Unknown"),this.d_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.d_=null,this.m_("Backend didn't respond within 10 seconds."),this.V_("Offline"),Promise.resolve())))}f_(e){this.state==="Online"?this.V_("Unknown"):(this.E_++,this.E_>=1&&(this.g_(),this.m_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.V_("Offline")))}set(e){this.g_(),this.E_=0,e==="Online"&&(this.A_=!1),this.V_(e)}V_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}m_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.A_?(Kr(n),this.A_=!1):se("OnlineStateTracker",n)}g_(){this.d_!==null&&(this.d_.cancel(),this.d_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.p_=[],this.y_=new Map,this.w_=new Set,this.S_=[],this.b_=s,this.b_.Zs(o=>{r.enqueueAndForget(async()=>{Cs(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=Te(a);c.w_.add(4),await ql(c),c.D_.set("Unknown"),c.w_.delete(4),await zd(c)}(this))})}),this.D_=new uM(r,i)}}async function zd(t){if(Cs(t))for(const e of t.S_)await e(!0)}async function ql(t){for(const e of t.S_)await e(!1)}function jC(t,e){const n=Te(t);n.y_.has(e.targetId)||(n.y_.set(e.targetId,e),Hg(n)?qg(n):Mo(n).Wo()&&zg(n,e))}function MC(t,e){const n=Te(t),r=Mo(n);n.y_.delete(e),r.Wo()&&LC(n,e),n.y_.size===0&&(r.Wo()?r.jo():Cs(n)&&n.D_.set("Unknown"))}function zg(t,e){if(t.v_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).s_(e)}function LC(t,e){t.v_.Le(e),Mo(t).o_(e)}function qg(t){t.v_=new pj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ct:e=>t.y_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.D_.R_()}function Hg(t){return Cs(t)&&!Mo(t).Uo()&&t.y_.size>0}function Cs(t){return Te(t).w_.size===0}function FC(t){t.v_=void 0}async function hM(t){t.y_.forEach((e,n)=>{zg(t,e)})}async function fM(t,e){FC(t),Hg(t)?(t.D_.f_(e),qg(t)):t.D_.set("Unknown")}async function pM(t,e,n){if(t.D_.set("Online"),e instanceof CC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.y_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.y_.delete(l),i.v_.removeTarget(l))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ku(t,r)}else if(e instanceof Jc?t.v_.Ge(e):e instanceof wC?t.v_.Xe(e):t.v_.He(e),!n.isEqual(_e.min()))try{const r=await NC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.v_.ot(o);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.y_.get(c);u&&s.y_.set(c,u.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,c)=>{const u=s.y_.get(a);if(!u)return;s.y_.set(a,u.withResumeToken(un.EMPTY_BYTE_STRING,u.snapshotVersion)),LC(s,a);const h=new gi(u.target,a,c,u.sequenceNumber);zg(s,h)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await Ku(t,r)}}async function Ku(t,e,n){if(!$l(e))throw e;t.w_.add(1),await ql(t),t.D_.set("Offline"),n||(n=()=>NC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.w_.delete(1),await zd(t)})}function VC(t,e){return e().catch(n=>Ku(t,n,e))}async function qd(t){const e=Te(t),n=Oi(e);let r=e.p_.length>0?e.p_[e.p_.length-1].batchId:-1;for(;mM(e);)try{const i=await Zj(e.localStore,r);if(i===null){e.p_.length===0&&n.jo();break}r=i.batchId,gM(e,i)}catch(i){await Ku(e,i)}UC(e)&&$C(e)}function mM(t){return Cs(t)&&t.p_.length<10}function gM(t,e){t.p_.push(e);const n=Oi(t);n.Wo()&&n.a_&&n.u_(e.mutations)}function UC(t){return Cs(t)&&!Oi(t).Uo()&&t.p_.length>0}function $C(t){Oi(t).start()}async function yM(t){Oi(t).h_()}async function vM(t){const e=Oi(t);for(const n of t.p_)e.u_(n.mutations)}async function _M(t,e,n){const r=t.p_.shift(),i=Mg.from(r,e,n);await VC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qd(t)}async function EM(t,e){e&&Oi(t).a_&&await async function(r,i){if(function(o){return dj(o)&&o!==L.ABORTED}(i.code)){const s=r.p_.shift();Oi(r).zo(),await VC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await qd(r)}}(t,e),UC(t)&&$C(t)}async function E_(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Cs(n);n.w_.add(3),await ql(n),r&&n.D_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.w_.delete(3),await zd(n)}async function SM(t,e){const n=Te(t);e?(n.w_.delete(2),await zd(n)):e||(n.w_.add(2),await ql(n),n.D_.set("Unknown"))}function Mo(t){return t.C_||(t.C_=function(n,r,i){const s=Te(n);return s.I_(),new aM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:hM.bind(null,t),co:fM.bind(null,t),i_:pM.bind(null,t)}),t.S_.push(async e=>{e?(t.C_.zo(),Hg(t)?qg(t):t.D_.set("Unknown")):(await t.C_.stop(),FC(t))})),t.C_}function Oi(t){return t.F_||(t.F_=function(n,r,i){const s=Te(n);return s.I_(),new lM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:yM.bind(null,t),co:EM.bind(null,t),l_:vM.bind(null,t),c_:_M.bind(null,t)}),t.S_.push(async e=>{e?(t.F_.zo(),await qd(t)):(await t.F_.stop(),t.p_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.p_.length} pending writes`),t.p_=[]))})),t.F_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Wg(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gg(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),$l(t))return new he(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.M_=new at(de.comparator)}track(e){const n=e.doc.key,r=this.M_.get(n);r?e.type!==0&&r.type===3?this.M_=this.M_.insert(n,e):e.type===3&&r.type!==1?this.M_=this.M_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.M_=this.M_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.M_=this.M_.remove(n):e.type===1&&r.type===2?this.M_=this.M_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):ye():this.M_=this.M_.insert(n,e)}x_(){const e=[];return this.M_.inorderTraversal((n,r)=>{e.push(r)}),e}}class To{constructor(e,n,r,i,s,o,l,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new To(e,n,io.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.O_=void 0,this.listeners=[]}}class wM{constructor(){this.queries=new jo(e=>lC(e),Ld),this.onlineState="Unknown",this.N_=new Set}}async function CM(t,e){const n=Te(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new TM),i)try{s.O_=await n.onListen(r)}catch(o){const l=Gg(o,`Initialization of query '${Op(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.listeners.push(e),e.B_(n.onlineState),s.O_&&e.L_(s.O_)&&Kg(n)}async function PM(t,e){const n=Te(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function RM(t,e){const n=Te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.listeners)l.L_(i)&&(r=!0);o.O_=i}}r&&Kg(n)}function IM(t,e,n){const r=Te(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Kg(t){t.N_.forEach(e=>{e.next()})}class bM{constructor(e,n,r){this.query=e,this.k_=n,this.q_=!1,this.Q_=null,this.onlineState="Unknown",this.options=r||{}}L_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new To(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.q_?this.K_(e)&&(this.k_.next(e),n=!0):this.U_(e,this.onlineState)&&(this.W_(e),n=!0),this.Q_=e,n}onError(e){this.k_.error(e)}B_(e){this.onlineState=e;let n=!1;return this.Q_&&!this.q_&&this.U_(this.Q_,e)&&(this.W_(this.Q_),n=!0),n}U_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.G_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}K_(e){if(e.docChanges.length>0)return!0;const n=this.Q_&&this.Q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}W_(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.q_=!0,this.k_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.key=e}}class zC{constructor(e){this.key=e}}class AM{constructor(e,n){this.query=e,this.ea=n,this.ta=null,this.hasCachedResults=!1,this.current=!1,this.na=Ce(),this.mutatedKeys=Ce(),this.ra=cC(e),this.ia=new io(this.ra)}get sa(){return this.ea}oa(e,n){const r=n?n._a:new S_,i=n?n.ia:this.ia;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const a=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),g=Fd(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;f&&g?f.data.isEqual(g.data)?m!==y&&(r.track({type:3,doc:g}),w=!0):this.aa(f,g)||(r.track({type:2,doc:g}),w=!0,(a&&this.ra(g,a)>0||c&&this.ra(g,c)<0)&&(l=!0)):!f&&g?(r.track({type:0,doc:g}),w=!0):f&&!g&&(r.track({type:1,doc:f}),w=!0,(a||c)&&(l=!0)),w&&(g?(o=o.add(g),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ia:o,_a:r,ji:l,mutatedKeys:s}}aa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ia;this.ia=e.ia,this.mutatedKeys=e.mutatedKeys;const s=e._a.x_();s.sort((c,u)=>function(f,g){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return m(f)-m(g)}(c.type,u.type)||this.ra(c.doc,u.doc)),this.ua(r);const o=n?this.ca():[],l=this.na.size===0&&this.current?1:0,a=l!==this.ta;return this.ta=l,s.length!==0||a?{snapshot:new To(this.query,e.ia,i,s,e.mutatedKeys,l===0,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),la:o}:{la:o}}B_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ia:this.ia,_a:new S_,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{la:[]}}ha(e){return!this.ea.has(e)&&!!this.ia.has(e)&&!this.ia.get(e).hasLocalMutations}ua(e){e&&(e.addedDocuments.forEach(n=>this.ea=this.ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ea=this.ea.delete(n)),this.current=e.current)}ca(){if(!this.current)return[];const e=this.na;this.na=Ce(),this.ia.forEach(r=>{this.ha(r.key)&&(this.na=this.na.add(r.key))});const n=[];return e.forEach(r=>{this.na.has(r)||n.push(new zC(r))}),this.na.forEach(r=>{e.has(r)||n.push(new BC(r))}),n}Pa(e){this.ea=e.os,this.na=Ce();const n=this.oa(e.documents);return this.applyChanges(n,!0)}Ia(){return To.fromInitialDocuments(this.query,this.ia,this.mutatedKeys,this.ta===0,this.hasCachedResults)}}class kM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xM{constructor(e){this.key=e,this.Ta=!1}}class NM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ea={},this.da=new jo(l=>lC(l),Ld),this.Aa=new Map,this.Ra=new Set,this.Va=new at(de.comparator),this.ma=new Map,this.fa=new Ug,this.ga={},this.pa=new Map,this.ya=So.Nn(),this.onlineState="Unknown",this.wa=void 0}get isPrimaryClient(){return this.wa===!0}}async function OM(t,e){const n=zM(t);let r,i;const s=n.da.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ia();else{const o=await eM(n.localStore,Jr(e)),l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await DM(n,e,r,l==="current",o.resumeToken),n.isPrimaryClient&&jC(n.remoteStore,o)}return i}async function DM(t,e,n,r,i){t.Sa=(h,f,g)=>async function(y,w,v,p){let E=w.view.oa(v);E.ji&&(E=await y_(y.localStore,w.query,!1).then(({documents:k})=>w.view.oa(k,E)));const _=p&&p.targetChanges.get(w.targetId),C=w.view.applyChanges(E,y.isPrimaryClient,_);return w_(y,w.targetId,C.la),C.snapshot}(t,h,f,g);const s=await y_(t.localStore,e,!0),o=new AM(e,s.os),l=o.oa(s.documents),a=zl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,a);w_(t,n,c.la);const u=new kM(e,n,o);return t.da.set(e,u),t.Aa.has(n)?t.Aa.get(n).push(e):t.Aa.set(n,[e]),c.snapshot}async function jM(t,e){const n=Te(t),r=n.da.get(e),i=n.Aa.get(r.targetId);if(i.length>1)return n.Aa.set(r.targetId,i.filter(s=>!Ld(s,e))),void n.da.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Fp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),MC(n.remoteStore,r.targetId),Vp(n,r.targetId)}).catch(Ul)):(Vp(n,r.targetId),await Fp(n.localStore,r.targetId,!0))}async function MM(t,e,n){const r=qM(t);try{const i=await function(o,l){const a=Te(o),c=At.now(),u=l.reduce((g,m)=>g.add(m.key),Ce());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let m=Qr(),y=Ce();return a.es.getEntries(g,u).next(w=>{m=w,m.forEach((v,p)=>{p.isValidDocument()||(y=y.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,m)).next(w=>{h=w;const v=[];for(const p of l){const E=oj(p,h.get(p.key).overlayedDocument);E!=null&&v.push(new ws(p.key,E,tC(E.value.mapValue),Ur.exists(!0)))}return a.mutationQueue.addMutationBatch(g,c,v,l)}).next(w=>{f=w;const v=w.applyToLocalDocumentSet(h,y);return a.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:f.batchId,changes:dC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,a){let c=o.ga[o.currentUser.toKey()];c||(c=new at(Me)),c=c.insert(l,a),o.ga[o.currentUser.toKey()]=c}(r,i.batchId,n),await Hl(r,i.changes),await qd(r.remoteStore)}catch(i){const s=Gg(i,"Failed to persist write");n.reject(s)}}async function qC(t,e){const n=Te(t);try{const r=await Yj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ma.get(s);o&&(Ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ta=!0:i.modifiedDocuments.size>0?Ze(o.Ta):i.removedDocuments.size>0&&(Ze(o.Ta),o.Ta=!1))}),await Hl(n,r,e)}catch(r){await Ul(r)}}function T_(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.da.forEach((s,o)=>{const l=o.view.B_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const a=Te(o);a.onlineState=l;let c=!1;a.queries.forEach((u,h)=>{for(const f of h.listeners)f.B_(l)&&(c=!0)}),c&&Kg(a)}(r.eventManager,e),i.length&&r.Ea.i_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LM(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ma.get(e),s=i&&i.key;if(s){let o=new at(de.comparator);o=o.insert(s,tn.newNoDocument(s,_e.min()));const l=Ce().add(s),a=new $d(_e.min(),new Map,new at(Me),o,l);await qC(r,a),r.Va=r.Va.remove(s),r.ma.delete(e),Jg(r)}else await Fp(r.localStore,e,!1).then(()=>Vp(r,e,n)).catch(Ul)}async function FM(t,e){const n=Te(t),r=e.batch.batchId;try{const i=await Qj(n.localStore,e);WC(n,r,null),HC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hl(n,i)}catch(i){await Ul(i)}}async function VM(t,e,n){const r=Te(t);try{const i=await function(o,l){const a=Te(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,l).next(h=>(Ze(h!==null),u=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);WC(r,e,n),HC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hl(r,i)}catch(i){await Ul(i)}}function HC(t,e){(t.pa.get(e)||[]).forEach(n=>{n.resolve()}),t.pa.delete(e)}function WC(t,e,n){const r=Te(t);let i=r.ga[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.ga[r.currentUser.toKey()]=i}}function Vp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Aa.get(e))t.da.delete(r),n&&t.Ea.ba(r,n);t.Aa.delete(e),t.isPrimaryClient&&t.fa.Rr(e).forEach(r=>{t.fa.containsKey(r)||GC(t,r)})}function GC(t,e){t.Ra.delete(e.path.canonicalString());const n=t.Va.get(e);n!==null&&(MC(t.remoteStore,n),t.Va=t.Va.remove(e),t.ma.delete(n),Jg(t))}function w_(t,e,n){for(const r of n)r instanceof BC?(t.fa.addReference(r.key,e),UM(t,r)):r instanceof zC?(se("SyncEngine","Document no longer in limbo: "+r.key),t.fa.removeReference(r.key,e),t.fa.containsKey(r.key)||GC(t,r.key)):ye()}function UM(t,e){const n=e.key,r=n.path.canonicalString();t.Va.get(n)||t.Ra.has(r)||(se("SyncEngine","New document in limbo: "+n),t.Ra.add(r),Jg(t))}function Jg(t){for(;t.Ra.size>0&&t.Va.size<t.maxConcurrentLimboResolutions;){const e=t.Ra.values().next().value;t.Ra.delete(e);const n=new de(ht.fromString(e)),r=t.ya.next();t.ma.set(r,new xM(n)),t.Va=t.Va.insert(n,r),jC(t.remoteStore,new gi(Jr(jg(n.path)),r,"TargetPurposeLimboResolution",Ag.ae))}}async function Hl(t,e,n){const r=Te(t),i=[],s=[],o=[];r.da.isEmpty()||(r.da.forEach((l,a)=>{o.push(r.Sa(a,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Bg.Qi(a.targetId,c);s.push(u)}}))}),await Promise.all(o),r.Ea.i_(i),await async function(a,c){const u=Te(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.ki,g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>V.forEach(f.qi,g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!$l(h))throw h;se("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.Yi.get(f),m=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(m);u.Yi=u.Yi.insert(f,y)}}}(r.localStore,s))}async function $M(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await xC(n.localStore,e);n.currentUser=e,function(s,o){s.pa.forEach(l=>{l.forEach(a=>{a.reject(new he(L.CANCELLED,o))})}),s.pa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hl(n,r.ns)}}function BM(t,e){const n=Te(t),r=n.ma.get(e);if(r&&r.Ta)return Ce().add(r.key);{let i=Ce();const s=n.Aa.get(e);if(!s)return i;for(const o of s){const l=n.da.get(o);i=i.unionWith(l.view.sa)}return i}}function zM(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LM.bind(null,e),e.Ea.i_=RM.bind(null,e.eventManager),e.Ea.ba=IM.bind(null,e.eventManager),e}function qM(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VM.bind(null,e),e}class C_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Jj(this.persistence,new Gj,e.initialUser,this.serializer)}createPersistence(e){return new Hj($g.jr,this.serializer)}createSharedClientState(e){return new nM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class HM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$M.bind(null,this.syncEngine),await SM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wM}()}createDatastore(e){const n=Bd(e.databaseInfo.databaseId),r=function(s){return new oM(s)}(e.databaseInfo);return function(s,o,l,a){return new cM(s,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new dM(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>T_(this.syncEngine,n,0),function(){return __.v()?new __:new rM}())}createSyncEngine(e,n){return function(i,s,o,l,a,c,u){const h=new NM(i,s,o,l,a,c);return u&&(h.wa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Te(n);se("RemoteStore","RemoteStore shutting down."),r.w_.add(5),await ql(r),r.b_.shutdown(),r.D_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ca(this.observer.next,e)}error(e){this.observer.error?this.Ca(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString())}Fa(){this.muted=!0}Ca(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=Xw.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{se("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new he(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jh(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function P_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JM(t);se("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>E_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>E_(e.remoteStore,s)),t._onlineComponents=e}function KM(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function JM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!KM(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await Jh(t,new C_)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Jh(t,new C_);return t._offlineComponents}async function KC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await P_(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await P_(t,new HM))),t._onlineComponents}function QM(t){return KC(t).then(e=>e.syncEngine)}async function YM(t){const e=await KC(t),n=e.eventManager;return n.onListen=OM.bind(null,e.syncEngine),n.onUnlisten=jM.bind(null,e.syncEngine),n}function XM(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,a,c){const u=new WM({next:f=>{o.enqueueAndForget(()=>PM(s,h));const g=f.docs.has(l);!g&&f.fromCache?c.reject(new he(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&a&&a.source==="server"?c.reject(new he(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new bM(jg(l.path),u,{includeMetadataChanges:!0,G_:!0});return CM(s,h)}(await YM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t,e,n){if(!n)throw new he(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eL(t,e,n,r){if(e===!0&&r===!0)throw new he(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I_(t){if(!de.isDocumentKey(t))throw new he(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function pl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qg(t);throw new he(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new he(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new he(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pD;switch(r.type){case"firstParty":return new vD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=R_.get(n);r&&(se("ComponentProvider","Removing Datastore"),R_.delete(n),r.terminate())}(this),Promise.resolve()}}function tL(t,e,n,r={}){var i;const s=(t=pl(t,Yg))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,a;if(typeof r.mockUserToken=="string")l=r.mockUserToken,a=Zt.MOCK_USER;else{l=Ak(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new he(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Zt(c)}t._authCredentials=new mD(new Yw(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xg(this.firestore,e,this._query)}}class qn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class ml extends Xg{constructor(e,n,r){super(e,n,jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new de(e))}withConverter(e){return new ml(this.firestore,e,this._path)}}function Up(t,e,...n){if(t=Kn(t),arguments.length===1&&(e=Xw.V()),ZM("doc","path",e),t instanceof Yg){const r=ht.fromString(e,...n);return I_(r),new qn(t,null,new de(r))}{if(!(t instanceof qn||t instanceof ml))throw new he(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ht.fromString(e,...n));return I_(r),new qn(t.firestore,t instanceof ml?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.Ga=Promise.resolve(),this.za=[],this.ja=!1,this.Ha=[],this.Ja=null,this.Ya=!1,this.Za=!1,this.Xa=[],this.$o=new OC(this,"async_queue_retry"),this.eu=()=>{const n=Kh();n&&se("AsyncQueue","Visibility state changed to "+n.visibilityState),this.$o.Bo()};const e=Kh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.eu)}get isShuttingDown(){return this.ja}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.tu(),this.nu(e)}enterRestrictedMode(e){if(!this.ja){this.ja=!0,this.Za=e||!1;const n=Kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.eu)}}enqueue(e){if(this.tu(),this.ja)return new Promise(()=>{});const n=new bi;return this.nu(()=>this.ja&&this.Za?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.za.push(e),this.ru()))}async ru(){if(this.za.length!==0){try{await this.za[0](),this.za.shift(),this.$o.reset()}catch(e){if(!$l(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.za.length>0&&this.$o.Oo(()=>this.ru())}}nu(e){const n=this.Ga.then(()=>(this.Ya=!0,e().catch(r=>{this.Ja=r,this.Ya=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ya=!1,r))));return this.Ga=n,n}enqueueAfterDelay(e,n,r){this.tu(),this.Xa.indexOf(e)>-1&&(n=0);const i=Wg.createAndSchedule(this,e,n,r,s=>this.iu(s));return this.Ha.push(i),i}tu(){this.Ja&&ye()}verifyOperationInProgress(){}async su(){let e;do e=this.Ga,await e;while(e!==this.Ga)}ou(e){for(const n of this.Ha)if(n.timerId===e)return!0;return!1}_u(e){return this.su().then(()=>{this.Ha.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ha)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.su()})}au(e){this.Xa.push(e)}iu(e){const n=this.Ha.indexOf(e);this.Ha.splice(n,1)}}class Zg extends Yg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new nL}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||YC(this),this._firestoreClient.terminate()}}function $p(t,e){const n=typeof t=="object"?t:mT(),r=typeof t=="string"?t:e||"(default)",i=Qm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Ik("firestore");s&&tL(i,...s)}return i}function QC(t){return t._firestoreClient||YC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function YC(t){var e,n,r;const i=t._freezeSettings(),s=function(l,a,c,u){return new kD(l,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,JC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new GM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(un.fromBase64String(e))}catch(n){throw new he(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wo(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^__.*__$/;class iL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bl(e,this.data,n,this.fieldTransforms)}}function ZC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class ny{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.uu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get cu(){return this.settings.cu}lu(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}hu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.Iu(e),i}Tu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.uu(),i}Eu(e){return this.lu({path:void 0,Pu:!0})}du(e){return Ju(e,this.settings.methodName,this.settings.Au||!1,this.path,this.settings.Ru)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}uu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Iu(this.path.get(e))}Iu(e){if(e.length===0)throw this.du("Document fields must not be empty");if(ZC(this.cu)&&rL.test(e))throw this.du('Document fields cannot begin and end with "__"')}}class sL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bd(e)}Vu(e,n,r,i=!1){return new ny({cu:e,methodName:n,Ru:r,path:nn.emptyPath(),Pu:!1,Au:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oL(t){const e=t._freezeSettings(),n=Bd(t._databaseId);return new sL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aL(t,e,n,r,i,s={}){const o=t.Vu(s.merge||s.mergeFields?2:0,e,n,i);rP("Data must be an object, but it was:",o,r);const l=tP(r,o);let a,c;if(s.merge)a=new ir(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=lL(e,h,n);if(!o.contains(f))throw new he(L.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);uL(u,f)||u.push(f)}a=new ir(u),c=o.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=o.fieldTransforms;return new iL(new $n(l),a,c)}function eP(t,e){if(nP(t=Kn(t)))return rP("Unsupported field value:",e,t),tP(t,e);if(t instanceof XC)return function(r,i){if(!ZC(i.cu))throw i.du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Pu&&e.cu!==4)throw e.du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let a=eP(l,i.Eu(o));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ej(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=At.fromDate(r);return{timestampValue:Gu(i.serializer,s)}}if(r instanceof At){const s=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gu(i.serializer,s)}}if(r instanceof ty)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wo)return{bytesValue:PC(i.serializer,r._byteString)};if(r instanceof qn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.du(`Unsupported field value: ${Qg(r)}`)}(t,e)}function tP(t,e){const n={};return Zw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const s=eP(i,e.hu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function nP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof ty||t instanceof wo||t instanceof qn||t instanceof XC)}function rP(t,e,n){if(!nP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qg(n);throw r==="an object"?e.du(t+" a custom object"):e.du(t+" "+r)}}function lL(t,e,n){if((e=Kn(e))instanceof ey)return e._internalPath;if(typeof e=="string")return iP(t,e);throw Ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const cL=new RegExp("[~\\*/\\[\\]]");function iP(t,e,n){if(e.search(cL)>=0)throw Ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ey(...e.split("."))._internalPath}catch{throw Ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ju(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(s||o)&&(a+=" (found",s&&(a+=` in field ${r}`),o&&(a+=` in document ${i}`),a+=")"),new he(L.INVALID_ARGUMENT,l+t+a)}function uL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dL extends sP{data(){return super.data()}}function oP(t,e){return typeof e=="string"?iP(t,e):e instanceof ey?e._internalPath:e._delegate._internalPath}class hL{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ty(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const n=Ni(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ht.fromString(e);Ze(kC(r));const i=new ul(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||Kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aP extends sP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mL extends aP{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){t=pl(t,qn);const e=pl(t.firestore,Zg);return XM(QC(e),t._key).then(n=>_L(e,t,n))}class gL extends hL{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function yL(t,e,n){t=pl(t,qn);const r=pl(t.firestore,Zg),i=fL(t.converter,e,n);return vL(r,[aL(oL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ur.none())])}function vL(t,e){return function(r,i){const s=new bi;return r.asyncQueue.enqueueAndForget(async()=>MM(await QM(r),i,s)),s.promise}(QC(t),e)}function _L(t,e,n){const r=n.docs.get(e._key),i=new gL(t);return new aP(t,i,e._key,r,new pL(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Oo=i})(Ao),po(new ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Zg(new gD(r.getProvider("auth-internal")),new ED(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new he(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ii(Q0,"4.1.1",e),Ii(Q0,"4.1.1","esm2017")})();function EL(t){const[e,n]=I.useState(!1);return d.jsx(d.Fragment,{children:t.currentUser===void 0?d.jsxs(d.Fragment,{children:[d.jsxs("nav",{className:"login",children:[d.jsx("button",{"data-selected":e===!1,onClick:()=>{n(!1)},children:"LOGIN"}),d.jsx("button",{"data-selected":e===!0,onClick:()=>{n(!0)},children:"REGISTER"})]}),d.jsx("br",{}),d.jsxs("main",{className:"login",children:[e?d.jsx("input",{id:"login-name",type:"text",placeholder:"name"}):d.jsx(d.Fragment,{}),d.jsx("input",{type:"text",id:"login-email",placeholder:"email"}),d.jsx("input",{type:"password",id:"login-password",placeholder:"password"}),d.jsxs("p",{children:["remember this account",d.jsx("input",{type:"checkbox",style:{display:"inline-block"},placeholder:"password",id:"rememberacc"})]})]}),d.jsxs("center",{children:[" ",d.jsx("button",{onClick:()=>{if(t.admin===void 0){alert("firebase couldnot connect");return}const r=oO(t.admin),i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;if(e){const o=document.getElementById("login-name").value;z2(r,i,s).then(l=>{W2(l.user,{displayName:o});const a=l.user.uid;if(document.userid=a,t.admin===void 0){alert("firebase couldnot connect");return}const c=$p(t.admin),u={email:i,name:o,score:0,id:a};yL(Up(c,`Users/${a}`),u),u.id=a,t.onLogin(u,document.getElementById("rememberacc").checked??!1)}).catch(l=>{alert(l)})}else q2(r,i,s).then(o=>{const l=o.user.uid;document.userid=l,t.admin!==void 0?lP(Up($p(t.admin),`Users/${l}`)).then(a=>{const c=a.data();c.id=l,t.onLogin(c,document.getElementById("rememberacc").checked??!1)}).catch(a=>{alert(a)}):alert("couldnt connect to firebase")}).catch(o=>{alert(o)})},children:e?"register":"login"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"user-credentials",children:[d.jsxs("p",{children:[t.currentUser.name," ",d.jsxs("p",{style:{opacity:.5},children:["[",d.jsx("p",{style:{fontStyle:"italic"},children:t.currentUser.email}),"]"]})]}),d.jsx("button",{onClick:()=>{document.userid=void 0,t.onLogout()},children:"loggout"})]}),d.jsx("h2",{children:"User Statistics"}),d.jsx("table",{children:d.jsxs("tr",{children:[d.jsx("td",{children:"score"}),d.jsx("td",{children:t.currentUser.score})]})})]})})}function SL(t){const[e,n]=I.useState(t.deafultIndex??0);return d.jsxs("div",{className:"switcher-component",children:[d.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e-1;r<0&&(r+=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:"<"}),d.jsx("p",{className:"switcher-component",children:t.options[t.Value??e]}),d.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e+1;r>=t.options.length&&(r-=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:">"})]})}function TL(t){const e=["Recruit","Regular","Hardened","Veteran"],[n,r]=I.useState([1]);return I.useEffect(()=>{t.OnChange(n.map(i=>e[i]))},[n]),d.jsxs(d.Fragment,{children:[n.map((i,s)=>d.jsxs("div",{className:"bot-list-element",children:[d.jsx("p",{children:"Bot"}),d.jsx(SL,{options:e,Value:i,deafultIndex:i,onChange:(o,l)=>{const a=JSON.parse(JSON.stringify(n));a[s]=l,r(a)}}),d.jsx("img",{src:"trash.png",alt:"",onClick:()=>{const o=JSON.parse(JSON.stringify(n));o.splice(s,1),r(o)}})]},s)),n.length!==5?d.jsx("div",{className:"bot-list-add",onClick:()=>{n.length<=4&&r(i=>[...i,1])},children:d.jsx("p",{children:"add bot"})}):d.jsx(d.Fragment,{})]})}function wL(t){const[e,n]=I.useState(0);return d.jsxs(d.Fragment,{children:[d.jsxs("nav",{className:"join",children:[d.jsx("button",{"data-tooltip-hover":"online","data-select":e===0,onClick:()=>{n(0)},children:d.jsx("img",{src:"online.png",alt:""})}),d.jsx("button",{"data-tooltip-hover":"computer","data-select":e===1,onClick:()=>{n(1)},children:d.jsx("img",{src:"bot.png",alt:""})})]}),d.jsx("br",{}),e===1?d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?d.jsx("input",{type:"text",id:"name",onChange:r=>{t.SetName(r.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):d.jsx("input",{type:"text",id:"name",disabled:!0,value:t.fbUser.name,placeholder:"enter name"})]},"bots-name"),d.jsx("p",{children:"bots settings:"}),d.jsx(TL,{OnChange:r=>{console.log(r)}}),d.jsx("center",{children:d.jsx("button",{onClick:()=>{},disabled:t.disabled,children:"start"})})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("p",{children:"please enter your code:"}),d.jsx("input",{type:"text",id:"name",onChange:r=>t.SetAddress(r.currentTarget.value),defaultValue:t.addr,placeholder:"enter code"})]},"online-code"),d.jsxs("div",{children:[d.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?d.jsx("input",{type:"text",id:"name",onChange:r=>{t.SetName(r.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):d.jsx("input",{type:"text",id:"name",disabled:!0,value:t.name,placeholder:"enter name"})]},"online-name"),d.jsx("center",{children:d.jsx("button",{onClick:()=>{t.joinViaCode()},disabled:t.disabled,children:"join"})})]})]})}const CL={apiKey:"AIzaSyAWWAOKvGp2rJg2LhVincjI2oPtC9uscds",authDomain:"monopoly-react.firebaseapp.com",projectId:"monopoly-react",storageBucket:"monopoly-react.appspot.com",messagingSenderId:"530562047914",appId:"1:530562047914:web:7c8a437bbff0abd89f55d3",measurementId:"G-PPJLPZZLZ0"},PL={url:"https://api.jsonbin.io/v3/b/64dff3e3b89b1e2299d2cfcf",masterKey:"$2b$10$Wolgp1Pl5jFGDnkTsivU/.pRmpFnK7gC00691IZleh4TplMzzo6bG",accessKey:"$2b$10$j9L0hVDvDISi4oZqAB.hwOhZpH9MdF6xD0d/X5gjLt/nYanpSzbbi"},fr={firebase:CL,JSONBin:PL};var RL="firebase",IL="10.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(RL,IL,"app");function cP(t,e){return function(){return t.apply(e,arguments)}}const{toString:bL}=Object.prototype,{getPrototypeOf:ry}=Object,Hd=(t=>e=>{const n=bL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),br=t=>(t=t.toLowerCase(),e=>Hd(e)===t),Wd=t=>e=>typeof e===t,{isArray:Lo}=Array,gl=Wd("undefined");function AL(t){return t!==null&&!gl(t)&&t.constructor!==null&&!gl(t.constructor)&&Hn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const uP=br("ArrayBuffer");function kL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uP(t.buffer),e}const xL=Wd("string"),Hn=Wd("function"),dP=Wd("number"),Gd=t=>t!==null&&typeof t=="object",NL=t=>t===!0||t===!1,Qc=t=>{if(Hd(t)!=="object")return!1;const e=ry(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},OL=br("Date"),DL=br("File"),jL=br("Blob"),ML=br("FileList"),LL=t=>Gd(t)&&Hn(t.pipe),FL=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hn(t.append)&&((e=Hd(t))==="formdata"||e==="object"&&Hn(t.toString)&&t.toString()==="[object FormData]"))},VL=br("URLSearchParams"),UL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Lo(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function hP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const fP=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),pP=t=>!gl(t)&&t!==fP;function Bp(){const{caseless:t}=pP(this)&&this||{},e={},n=(r,i)=>{const s=t&&hP(e,i)||i;Qc(e[s])&&Qc(r)?e[s]=Bp(e[s],r):Qc(r)?e[s]=Bp({},r):Lo(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Wl(arguments[r],n);return e}const $L=(t,e,n,{allOwnKeys:r}={})=>(Wl(e,(i,s)=>{n&&Hn(i)?t[s]=cP(i,n):t[s]=i},{allOwnKeys:r}),t),BL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},qL=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&ry(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},HL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},WL=t=>{if(!t)return null;if(Lo(t))return t;let e=t.length;if(!dP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},GL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ry(Uint8Array)),KL=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},JL=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},QL=br("HTMLFormElement"),YL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),A_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),XL=br("RegExp"),mP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Wl(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},ZL=t=>{mP(t,(e,n)=>{if(Hn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Hn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},e5=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Lo(t)?r(t):r(String(t).split(e)),n},t5=()=>{},n5=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Qh="abcdefghijklmnopqrstuvwxyz",k_="0123456789",gP={DIGIT:k_,ALPHA:Qh,ALPHA_DIGIT:Qh+Qh.toUpperCase()+k_},r5=(t=16,e=gP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function i5(t){return!!(t&&Hn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const s5=t=>{const e=new Array(10),n=(r,i)=>{if(Gd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Lo(r)?[]:{};return Wl(r,(o,l)=>{const a=n(o,i+1);!gl(a)&&(s[l]=a)}),e[i]=void 0,s}}return r};return n(t,0)},o5=br("AsyncFunction"),a5=t=>t&&(Gd(t)||Hn(t))&&Hn(t.then)&&Hn(t.catch),x={isArray:Lo,isArrayBuffer:uP,isBuffer:AL,isFormData:FL,isArrayBufferView:kL,isString:xL,isNumber:dP,isBoolean:NL,isObject:Gd,isPlainObject:Qc,isUndefined:gl,isDate:OL,isFile:DL,isBlob:jL,isRegExp:XL,isFunction:Hn,isStream:LL,isURLSearchParams:VL,isTypedArray:GL,isFileList:ML,forEach:Wl,merge:Bp,extend:$L,trim:UL,stripBOM:BL,inherits:zL,toFlatObject:qL,kindOf:Hd,kindOfTest:br,endsWith:HL,toArray:WL,forEachEntry:KL,matchAll:JL,isHTMLForm:QL,hasOwnProperty:A_,hasOwnProp:A_,reduceDescriptors:mP,freezeMethods:ZL,toObjectSet:e5,toCamelCase:YL,noop:t5,toFiniteNumber:n5,findKey:hP,global:fP,isContextDefined:pP,ALPHABET:gP,generateString:r5,isSpecCompliantForm:i5,toJSONObject:s5,isAsyncFn:o5,isThenable:a5};function ke(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}x.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yP=ke.prototype,vP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vP[t]={value:t}});Object.defineProperties(ke,vP);Object.defineProperty(yP,"isAxiosError",{value:!0});ke.from=(t,e,n,r,i,s)=>{const o=Object.create(yP);return x.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),ke.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const l5=null;function zp(t){return x.isPlainObject(t)||x.isArray(t)}function _P(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function x_(t,e,n){return t?t.concat(e).map(function(i,s){return i=_P(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function c5(t){return x.isArray(t)&&!t.some(zp)}const u5=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function Kd(t,e,n){if(!x.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=x.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!x.isUndefined(w[y])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(x.isDate(m))return m.toISOString();if(!a&&x.isBlob(m))throw new ke("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(m)||x.isTypedArray(m)?a&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,y,w){let v=m;if(m&&!w&&typeof m=="object"){if(x.endsWith(y,"{}"))y=r?y:y.slice(0,-2),m=JSON.stringify(m);else if(x.isArray(m)&&c5(m)||(x.isFileList(m)||x.endsWith(y,"[]"))&&(v=x.toArray(m)))return y=_P(y),v.forEach(function(E,_){!(x.isUndefined(E)||E===null)&&e.append(o===!0?x_([y],_,s):o===null?y:y+"[]",c(E))}),!1}return zp(m)?!0:(e.append(x_(w,y,s),c(m)),!1)}const h=[],f=Object.assign(u5,{defaultVisitor:u,convertValue:c,isVisitable:zp});function g(m,y){if(!x.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(m),x.forEach(m,function(v,p){(!(x.isUndefined(v)||v===null)&&i.call(e,v,x.isString(p)?p.trim():p,y,f))===!0&&g(v,y?y.concat(p):[p])}),h.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return g(t),e}function N_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iy(t,e){this._pairs=[],t&&Kd(t,this,e)}const EP=iy.prototype;EP.append=function(e,n){this._pairs.push([e,n])};EP.toString=function(e){const n=e?function(r){return e.call(this,r,N_)}:N_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function d5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SP(t,e,n){if(!e)return t;const r=n&&n.encode||d5,i=n&&n.serialize;let s;if(i?s=i(e,n):s=x.isURLSearchParams(e)?e.toString():new iy(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class h5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(r){r!==null&&e(r)})}}const O_=h5,TP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},f5=typeof URLSearchParams<"u"?URLSearchParams:iy,p5=typeof FormData<"u"?FormData:null,m5=typeof Blob<"u"?Blob:null,g5=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),y5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),_r={isBrowser:!0,classes:{URLSearchParams:f5,FormData:p5,Blob:m5},isStandardBrowserEnv:g5,isStandardBrowserWebWorkerEnv:y5,protocols:["http","https","file","blob","url","data"]};function v5(t,e){return Kd(t,new _r.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return _r.isNode&&x.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function _5(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function E5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function wP(t){function e(n,r,i,s){let o=n[s++];const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&x.isArray(i)?i.length:o,a?(x.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!x.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&x.isArray(i[o])&&(i[o]=E5(i[o])),!l)}if(x.isFormData(t)&&x.isFunction(t.entries)){const n={};return x.forEachEntry(t,(r,i)=>{e(_5(r),i,n,0)}),n}return null}const S5={"Content-Type":void 0};function T5(t,e,n){if(x.isString(t))try{return(e||JSON.parse)(t),x.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Jd={transitional:TP,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=x.isObject(e);if(s&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return i&&i?JSON.stringify(wP(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return v5(e,this.formSerializer).toString();if((l=x.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Kd(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),T5(e)):e}],transformResponse:[function(e){const n=this.transitional||Jd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&x.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?ke.from(l,ke.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_r.classes.FormData,Blob:_r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};x.forEach(["delete","get","head"],function(e){Jd.headers[e]={}});x.forEach(["post","put","patch"],function(e){Jd.headers[e]=x.merge(S5)});const sy=Jd,w5=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),C5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&w5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},D_=Symbol("internals");function ea(t){return t&&String(t).trim().toLowerCase()}function Yc(t){return t===!1||t==null?t:x.isArray(t)?t.map(Yc):String(t)}function P5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const R5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Yh(t,e,n,r,i){if(x.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!x.isString(e)){if(x.isString(r))return e.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(e)}}function I5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function b5(t,e){const n=x.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Qd{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,a,c){const u=ea(a);if(!u)throw new Error("header name must be a non-empty string");const h=x.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||a]=Yc(l))}const o=(l,a)=>x.forEach(l,(c,u)=>s(c,u,a));return x.isPlainObject(e)||e instanceof this.constructor?o(e,n):x.isString(e)&&(e=e.trim())&&!R5(e)?o(C5(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=ea(e),e){const r=x.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return P5(i);if(x.isFunction(n))return n.call(this,i,r);if(x.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ea(e),e){const r=x.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Yh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ea(o),o){const l=x.findKey(r,o);l&&(!n||Yh(r,r[l],l,n))&&(delete r[l],i=!0)}}return x.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Yh(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return x.forEach(this,(i,s)=>{const o=x.findKey(r,s);if(o){n[o]=Yc(i),delete n[s];return}const l=e?I5(s):String(s).trim();l!==s&&delete n[s],n[l]=Yc(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return x.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&x.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[D_]=this[D_]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=ea(o);r[l]||(b5(i,o),r[l]=!0)}return x.isArray(e)?e.forEach(s):s(e),this}}Qd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.freezeMethods(Qd.prototype);x.freezeMethods(Qd);const $r=Qd;function Xh(t,e){const n=this||sy,r=e||n,i=$r.from(r.headers);let s=r.data;return x.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function CP(t){return!!(t&&t.__CANCEL__)}function Gl(t,e,n){ke.call(this,t??"canceled",ke.ERR_CANCELED,e,n),this.name="CanceledError"}x.inherits(Gl,ke,{__CANCEL__:!0});function A5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ke("Request failed with status code "+n.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const k5=_r.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,l){const a=[];a.push(n+"="+encodeURIComponent(r)),x.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),x.isString(s)&&a.push("path="+s),x.isString(o)&&a.push("domain="+o),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function x5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function N5(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function PP(t,e){return t&&!x5(e)?N5(t,e):e}const O5=_r.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const l=x.isString(o)?i(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function D5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function j5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=u&&c-u;return g?Math.round(f*1e3/g):void 0}}function j_(t,e){let n=0;const r=j5(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,l=s-n,a=r(l),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:a||void 0,estimated:a&&o&&c?(o-s)/a:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const M5=typeof XMLHttpRequest<"u",L5=M5&&function(t){return new Promise(function(n,r){let i=t.data;const s=$r.from(t.headers).normalize(),o=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}x.isFormData(i)&&(_r.isStandardBrowserEnv||_r.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+m))}const u=PP(t.baseURL,t.url);c.open(t.method.toUpperCase(),SP(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function h(){if(!c)return;const g=$r.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:g,config:t,request:c};A5(function(v){n(v),a()},function(v){r(v),a()},y),c=null}if("onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(h)},c.onabort=function(){c&&(r(new ke("Request aborted",ke.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new ke("Network Error",ke.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||TP;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),r(new ke(m,y.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,t,c)),c=null},_r.isStandardBrowserEnv){const g=(t.withCredentials||O5(u))&&t.xsrfCookieName&&k5.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&x.forEach(s.toJSON(),function(m,y){c.setRequestHeader(y,m)}),x.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",j_(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",j_(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=g=>{c&&(r(!g||g.type?new Gl(null,t,c):g),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const f=D5(u);if(f&&_r.protocols.indexOf(f)===-1){r(new ke("Unsupported protocol "+f+":",ke.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Xc={http:l5,xhr:L5};x.forEach(Xc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const F5={getAdapter:t=>{t=x.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=x.isString(n)?Xc[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new ke(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(x.hasOwnProp(Xc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!x.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Xc};function Zh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gl(null,t)}function M_(t){return Zh(t),t.headers=$r.from(t.headers),t.data=Xh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),F5.getAdapter(t.adapter||sy.adapter)(t).then(function(r){return Zh(t),r.data=Xh.call(t,t.transformResponse,r),r.headers=$r.from(r.headers),r},function(r){return CP(r)||(Zh(t),r&&r.response&&(r.response.data=Xh.call(t,t.transformResponse,r.response),r.response.headers=$r.from(r.response.headers))),Promise.reject(r)})}const L_=t=>t instanceof $r?t.toJSON():t;function Co(t,e){e=e||{};const n={};function r(c,u,h){return x.isPlainObject(c)&&x.isPlainObject(u)?x.merge.call({caseless:h},c,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function i(c,u,h){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c,h)}else return r(c,u,h)}function s(c,u){if(!x.isUndefined(u))return r(void 0,u)}function o(c,u){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,h){if(h in e)return r(c,u);if(h in t)return r(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u)=>i(L_(c),L_(u),!0)};return x.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=a[u]||i,f=h(t[u],e[u],u);x.isUndefined(f)&&h!==l||(n[u]=f)}),n}const RP="1.4.0",oy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const F_={};oy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+RP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new ke(i(o," has been removed"+(n?" in "+n:"")),ke.ERR_DEPRECATED);return n&&!F_[o]&&(F_[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};function V5(t,e,n){if(typeof t!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new ke("option "+s+" must be "+a,ke.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ke("Unknown option "+s,ke.ERR_BAD_OPTION)}}const qp={assertOptions:V5,validators:oy},ii=qp.validators;class Qu{constructor(e){this.defaults=e,this.interceptors={request:new O_,response:new O_}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Co(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&qp.assertOptions(r,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),i!=null&&(x.isFunction(i)?n.paramsSerializer={serialize:i}:qp.assertOptions(i,{encode:ii.function,serialize:ii.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&x.merge(s.common,s[n.method]),o&&x.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=$r.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(a=a&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,h=0,f;if(!a){const m=[M_.bind(this),void 0];for(m.unshift.apply(m,l),m.push.apply(m,c),f=m.length,u=Promise.resolve(n);h<f;)u=u.then(m[h++],m[h++]);return u}f=l.length;let g=n;for(h=0;h<f;){const m=l[h++],y=l[h++];try{g=m(g)}catch(w){y.call(this,w);break}}try{u=M_.call(this,g)}catch(m){return Promise.reject(m)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=Co(this.defaults,e);const n=PP(e.baseURL,e.url);return SP(n,e.params,e.paramsSerializer)}}x.forEach(["delete","get","head","options"],function(e){Qu.prototype[e]=function(n,r){return this.request(Co(r||{},{method:e,url:n,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Co(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Qu.prototype[e]=n(),Qu.prototype[e+"Form"]=n(!0)});const Zc=Qu;class ay{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new Gl(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ay(function(i){e=i}),cancel:e}}}const U5=ay;function $5(t){return function(n){return t.apply(null,n)}}function B5(t){return x.isObject(t)&&t.isAxiosError===!0}const Hp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hp).forEach(([t,e])=>{Hp[e]=t});const z5=Hp;function IP(t){const e=new Zc(t),n=cP(Zc.prototype.request,e);return x.extend(n,Zc.prototype,e,{allOwnKeys:!0}),x.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return IP(Co(t,i))},n}const kt=IP(sy);kt.Axios=Zc;kt.CanceledError=Gl;kt.CancelToken=U5;kt.isCancel=CP;kt.VERSION=RP;kt.toFormData=Kd;kt.AxiosError=ke;kt.Cancel=kt.CanceledError;kt.all=function(e){return Promise.all(e)};kt.spread=$5;kt.isAxiosError=B5;kt.mergeConfig=Co;kt.AxiosHeaders=$r;kt.formToJSON=t=>wP(x.isHTMLForm(t)?new FormData(t):t);kt.HttpStatusCode=z5;kt.default=kt;const V_=kt;class q5{constructor(e,n,r,i){Ve(this,"id");Ve(this,"username");Ve(this,"icon");Ve(this,"position");Ve(this,"balance");Ve(this,"properties");Ve(this,"isInJail");Ve(this,"jailTurnsRemaining");Ve(this,"getoutCards");this.id=e,this.username=n,this.icon=r,this.position=0,this.balance=i??1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0}to_json(){return{id:this.id,username:this.username,icon:this.icon,position:this.position,balance:this.balance,properties:this.properties,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,getoutCards:this.getoutCards}}from_json(e){this.id==e.id&&(this.position=e.position,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards)}}async function H5(t,e){const n=()=>{async function f(){try{return(await V_.get(`${fr.JSONBin.url}/latest`,{headers:{"X-Master-Key":fr.JSONBin.masterKey,"X-Access-Key":fr.JSONBin.accessKey}})).data.record}catch(v){console.error("Error reading data:",v)}}async function g(v){try{await V_.put(`${fr.JSONBin.url}`,v,{headers:{"Content-Type":"application/json","X-Master-Key":fr.JSONBin.masterKey,"X-Access-Key":fr.JSONBin.accessKey}})}catch(p){console.error("Error writing data:",p)}}async function m(v){const p=await f();Object.keys(p).includes(v)&&delete p[v],await g(p)}async function y(){await g({clear:new Date().toISOString()})}async function w(v){function p(k){const A="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let D="";for(let $=0;$<k;$++){const S=Math.floor(Math.random()*A.length);D+=A[S]}return D}var E=p(6);const _=await f();for(;Object.keys(_).includes(E);)E=p(6);const C=v;if(Object.values(_).includes(C))for(const k of Object.entries(_))k[1]===C&&delete _[k[0]];return _[E]=C,await g(_),E}return{Write:g,Read:f,Delete:m,Generate:w,Clear:y}},r=t>0?Math.min(t,6):6;console.log(`Max Players is ${r}...
`);const i=new Map,s=[];let o="",l=!1,a=ep[0];function c(){const f=new Date,g=String(f.getHours()).padStart(2,"0"),m=String(f.getMinutes()).padStart(2,"0");return`${g}:${m}`}function u(f,g){for(const m of Array.from(i.values()))m.socket.emit(f,g)}function h(f,g,m){for(const y of Array.from(i.entries()))y[0]!=f&&y[1].socket.emit(g,m)}new _k(async(f,g)=>{var m=await n().Generate(f);return e==null||e(m,g),g.code=m,async()=>{await n().Delete(m)}},(f,g)=>{const m=l?1:i.size>=r?2:0;f.emit("state",m),m===0?(f.on("name",y=>{try{const w=new q5(f.id,y,Array.from(i.keys()).length,a.startingCash);(o===""||!Array.from(i.keys()).includes(o))&&(o=f.id),i.set(f.id,{player:w,socket:f,ready:!1,positions:{x:0,y:0}}),g.logFunction(`{${c()}} [${f.id}] Player "${w.username}" has connected.`),s.push(`{${c()}} [${f.id}] Player "${w.username}" has connected.`);const v=[];for(const p of Array.from(i.values()))v.push(p.player.to_json());f.emit("initials",{turn_id:o,other_players:v,selectedMode:a}),h(f.id,"new-player",w.to_json()),f.on("unjail",p=>{try{u("unjail",{to:w.id,option:p})}catch(E){g.logFunction(E)}}),f.on("roll_dice",()=>{try{const E=Math.floor(Math.random()*6)+1,_=Math.floor(Math.random()*6)+1,C=`{${c()}} [${f.id}] Player "${w.username}" rolled a [${E},${_}].`;s.push(C),g.logFunction(C);const k=E+_;var p=(w.position+k)%40;u("dice_roll_result",{listOfNums:[E,_,p],turnId:o})}catch(E){g.logFunction(E)}}),f.on("chorch_roll",p=>{try{const E=p.is_chance?gr.chance:gr.communitychest,_=E[Math.floor(Math.random()*E.length)];u("chorch_result",{element:_,is_chance:p.is_chance,rolls:p.rolls,turnId:o})}catch(E){g.logFunction(E)}}),f.on("player_update",p=>{const E=i.get(p.playerId);E!==void 0&&(E.player.from_json(p.pJson),h(p.playerId,"player_update",p))}),f.on("finish-turn",p=>{try{if(w.from_json(p),o!=f.id)return;const _=Array.from(i.values()).filter(C=>C.player.balance>0).map(C=>C.player.id);var E=_.indexOf(f.id);E=(E+1)%_.length,o=_[E],u("turn-finished",{from:f.id,turnId:o,pJson:w.to_json(),WinningMode:a.WinningMode})}catch(_){g.logFunction(_)}}),f.on("message",p=>{var E;try{g.logFunction(`{${c()}} [${f.id}] Player "${(E=i.get(f.id))==null?void 0:E.player.username}" has messaged "${p}".`),u("message",{from:w.username,message:p})}catch(_){g.logFunction(_)}}),f.on("pay",p=>{var E,_;try{const C=(E=i.get(p.to))==null?void 0:E.player,k=(_=i.get(p.from))==null?void 0:_.player;if(C===void 0||(C.balance+=p.balance,k===void 0))return;k.balance-=p.balance,u("member_updating",{playerId:p.to,animation:"recieveMoney",additional_props:[p.from],pJson:[C.to_json(),k.to_json()]})}catch(C){g.logFunction(C)}}),f.on("mouse",p=>{const E=i.get(f.id);E!==void 0&&(E.positions=p,i.set(f.id,E),h(f.id,"mouse",{id:f.id,x:p.x,y:p.y}))}),f.on("history",p=>{u("history",p)}),f.on("trade",()=>{a.AllowDeals&&u("trade",{})}),f.on("cancel-trade",()=>{a.AllowDeals&&u("cancel-trade",{})}),f.on("submit-trade",p=>{if(!a.AllowDeals)return;const E=i.get(p.turnPlayer.id),_=i.get(p.againstPlayer.id);if(E===void 0||_===void 0)return;const C=_.player.properties.filter(A=>p.againstPlayer.prop.map(D=>JSON.stringify(D)).includes(JSON.stringify(A)));_.player.properties=_.player.properties.filter(A=>!p.againstPlayer.prop.map(D=>JSON.stringify(D)).includes(JSON.stringify(A)));const k=_.player.properties.filter(A=>p.turnPlayer.prop.map(D=>JSON.stringify(D)).includes(JSON.stringify(A)));E.player.properties=_.player.properties.filter(A=>!p.turnPlayer.prop.map(D=>JSON.stringify(D)).includes(JSON.stringify(A))),_.player.balance-=p.againstPlayer.balance,E.player.balance-=p.turnPlayer.balance,E.player.balance+=p.againstPlayer.balance,_.player.balance+=p.turnPlayer.balance,E.player.properties.push(...C),_.player.properties.push(...k),u("submit-trade",{pJsons:[E.player.to_json(),_.player.to_json()],action:`
                            ${E.player.username} done a trade with ${_.player.username}
                            `})}),f.on("trade-update",p=>{a.AllowDeals&&u("trade-update",p)})}catch(w){g.logFunction(w)}}),f.on("ready",y=>{try{const w=i.get(f.id);if(w===void 0)return;y.ready!==void 0&&(w.ready=y.ready),y.mode!==void 0&&(a=y.mode),i.set(f.id,w);const v=Array.from(i.values()).map(p=>p.ready);u("ready",{id:f.id,state:w.ready,selectedMode:a}),v.includes(!1)||(g.logFunction("Game has Started, No more Players can join the Server"),l=!0,g.whenCloseF(),u("start-game",{}))}catch(w){g.logFunction(w)}})):f.disconnect(),f.on("disconnect",()=>{var w,v;try{if(i.has(f.id)&&(g.logFunction(`{${c()}} [${f.id}] Player "${(w=i.get(f.id))==null?void 0:w.player.username}" has disconnected.`),s.push(`{${c()}} [${f.id}] Player "${(v=i.get(f.id))==null?void 0:v.player.username}" has disconnected.`)),i.delete(f.id),o===f.id){const p=Array.from(i.values()).filter(E=>E.player.balance>0).map(E=>E.player.id);var y=p.indexOf(f.id);y=(y+1)%p.length,o=p[y]}u("disconnected-player",{id:f.id,turn:o}),Array.from(i.keys()).length===0&&(l&&g.logFunction("Game has Ended. Server is currently Open to new Players"),l=!1)}catch(p){g.logFunction(p)}})})}function W5(){var t;try{t=JSON.parse(document.cookie)}catch{t={login:{remember:!1,id:""}},document.cookie=JSON.stringify(t)}const e=I.useRef(null),[n,r]=I.useState(),[i,s]=I.useState(""),[o,l]=I.useState(""),[a,c]=I.useState(),[u,h]=I.useState(t.login.remember),[f,g]=I.useState(),[m,y]=I.useState(!1),[w,v]=I.useState(!1),[p,E]=I.useState(0),[_,C]=I.useState(void 0),[k,A]=I.useState(6);I.useEffect(()=>{document.title="Monopoly";const $=pT(fr.firebase);c($);var S;try{if(S=JSON.parse(document.cookie),S.login.remember&&S.login.id.length>0){const P=$p($);lP(Up(P,`Users/${S.login.id}`)).then(oe=>{const T=oe.data();g(T),s(T.name)})}}catch{}},[]);const D=async()=>{var oe,T,ce;async function $(){return(await(await fetch(`${fr.JSONBin.url}/latest`,{method:"GET",headers:{"X-Master-Key":fr.JSONBin.masterKey,"X-Access-Key":fr.JSONBin.accessKey}})).json()).record}if(i.replace(" ","").length===0){(oe=e.current)==null||oe.message("please add your name before joining","info",2);return}try{const X=JSON.parse(document.cookie);if(f===void 0)throw Error("undefined");console.log(JSON.stringify(f)),X.login={id:f.id,remember:u},document.cookie=JSON.stringify(X)}catch{const X={login:{id:"",remember:!1}};document.cookie=JSON.stringify(X)}y(!0);const S=await $();if(!Object.keys(S).includes(o)){(T=e.current)==null||T.message("code isnt available on systems","info",2,()=>{y(!1)});return}const M=S[o];console.log(M);var P;try{P=await vk(M),P.on("state",X=>{var te,N,z;switch(X){case 0:r(P),v(!0),y(!1);break;case 1:(te=e.current)==null||te.message("the game has already begun","error",2,()=>{y(!1)}),P.disconnect();break;case 2:(N=e.current)==null||N.message("too many players on the server","error",2,()=>{y(!1)}),P.disconnect();break;default:(z=e.current)==null||z.message("unkown error","error",2,()=>{y(!1)}),P.disconnect();break}})}catch(X){(ce=e.current)==null||ce.message(X,"error",2,()=>{y(!1)})}};return I.useEffect(()=>{const $=new URLSearchParams(document.location.search);$.has("ip")&&l($.get("ip")??"")},[]),n!==void 0&&w===!0?d.jsx(LA,{socket:n,name:i,server:_}):d.jsxs(d.Fragment,{children:[d.jsx(pS,{ref:e}),d.jsxs("div",{className:"entry",children:[d.jsxs("nav",{children:[d.jsx("button",{"data-select":p===0,onClick:()=>{E(0)},"data-tooltip-hover":"play",children:d.jsx("img",{src:"./icon.png",alt:""})}),d.jsx("button",{"data-select":p===1,onClick:()=>{E(1)},"data-tooltip-hover":"server",children:d.jsx("img",{src:"./server.png",alt:""})}),d.jsx("button",{"data-select":p===2,onClick:()=>{E(2)},"data-tooltip-hover":"account",children:d.jsx("img",{src:"./human.png",alt:""})}),d.jsx("br",{}),d.jsx("button",{"data-select":p===3,onClick:()=>{E(3)},"data-tooltip-hover":"credits",children:d.jsx("img",{src:"./credits.png",alt:""})}),d.jsx("button",{"data-select":p===4,onClick:()=>{E(4)},"data-tooltip-hover":"settings",children:d.jsx("img",{src:"./settings.png",alt:""})})]}),d.jsx("main",{children:p===4?d.jsx(fS,{}):p===3?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"This Project was made by Itay Layzerovich"}),d.jsxs("div",{style:{color:"white"},children:[d.jsx("p",{children:" As the developer of this Monopoly game project, it is essential to clarify the following legal aspects: "}),d.jsxs("ol",{children:[d.jsxs("li",{children:[d.jsx("i",{children:"Game Mechanics and Rules:"})," The game mechanics and rules of Monopoly have been widely known and played for many years. This project aims to offer a digital rendition of the classic Monopoly experience, utilizing original concepts that have become common knowledge."]}),d.jsxs("li",{children:[" ",d.jsx("i",{children:"Original Monopoly Intellectual Property:"}),"The Monopoly board game is a registered trademark and copyrighted property of Hasbro Inc. and its respective licensors. This project is not an official representation or product of Hasbro Inc., and no direct affiliation or endorsement is implied."]}),d.jsxs("li",{children:[d.jsx("i",{children:"License and Usage:"})," This Monopoly game project is developed with the intent of being an educational and personal project. It is offered as a free-to-use, open-source initiative for learning purposes, and no commercial use or distribution is intended."]}),d.jsxs("li",{children:[d.jsx("i",{children:"Fair Use and Transformative Work:"}),'This project may fall under the category of "fair use" as it is a transformative work that provides a unique digital experience based on the original Monopoly game. It is not intended to compete with or harm the commercial interests of the original trademark owner.']}),d.jsxs("li",{children:[d.jsx("i",{children:"No Warranty or Liability:"})," While efforts have been made to create an enjoyable and bug-free experience, this project is provided as-is without any warranty. The developer shall not be liable for any issues or damages arising from the use of this software."]}),d.jsxs("li",{children:[d.jsx("i",{children:"Attribution:"})," This project may include third-party libraries or assets that are appropriately credited and licensed under their respective terms. Any attributions and licenses should be preserved as required by the respective authors."]}),d.jsxs("li",{children:[d.jsx("i",{children:"Personal Responsibility:"})," As the developer, you are responsible for complying with all applicable laws, including intellectual property laws, and ensuring that your usage of this project is within legal boundaries."]})]})]})]}):p===2?d.jsxs(d.Fragment,{children:[d.jsxs("header",{children:[d.jsx("p",{style:{fontSize:13,marginBottom:0},children:"Account"}),d.jsxs("div",{className:"loginPageHeader",children:[d.jsx("h3",{children:"Login"}),d.jsx("div",{className:"scoreboardIcon",children:d.jsx("img",{onClick:()=>{document.location.href="/Monopoly/users"},src:"scoreboard.png"})})]})]}),d.jsx(EL,{admin:a,currentUser:f,onLogout:()=>{h(!1),g(void 0),s("")},onLogin:($,S)=>{if(E(0),h(S),g($),s($.name),!!S)try{var M=JSON.parse(document.cookie);M.login={remember:!0,id:$.id},document.cookie=JSON.stringify(M)}catch{var M={login:{remember:!0,id:$.id}};document.cookie=JSON.stringify(M)}}})]}):p===1?d.jsxs(d.Fragment,{children:[d.jsxs("header",{children:[d.jsx("p",{style:{fontSize:12,marginBottom:0},children:"peerjs hosting"}),d.jsx("h3",{children:"Run A Server"})]}),_!==void 0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"server is already running, check the console."}),d.jsx("table",{children:d.jsxs("tr",{children:[d.jsx("td",{children:"Code"}),d.jsx("td",{style:{userSelect:"all"},children:_.code})]})}),d.jsxs("center",{children:[" ",d.jsx("button",{style:{backgroundColor:"red",marginTop:12},onClick:()=>{_.stop(),C(void 0)},children:"Kill Server"},"kllserver-button")]})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"all the servers logs will can be seen in the console"}),d.jsx("table",{children:d.jsxs("tr",{children:[d.jsx("td",{children:"PlayersCount"}),d.jsx("td",{children:d.jsx(Gi,{onChange:$=>{A(parseInt($.currentTarget.value))},max:6,min:1,defaultValue:k,step:1})})]})}),d.jsxs("center",{children:[" ",d.jsx("button",{style:{marginTop:13},onClick:$=>{$.currentTarget.disabled=!0,$.currentTarget.innerHTML="Starting Server",H5(k,(S,M)=>{M.code=S,l(S),C(M);try{$.currentTarget.disabled=!1}catch{}})},children:"Run Server"},"startserver-button")]})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("header",{children:[d.jsx("p",{style:{fontSize:9},children:"28.8.23 - Trades & GameModes"}),"Welcome to the ",d.jsx("h3",{children:"MONOPOLY"})," Game"]}),d.jsx(wL,{disabled:m,fbUser:f,joinBots:()=>{},joinViaCode:()=>{D()},SetAddress:l,SetName:s,addr:o,name:i})]})})]})]})}function G5(){I.useEffect(()=>{document.title="Monopoly Users"},[]);const[t,e]=I.useState(0);return d.jsxs("main",{className:"users",children:[d.jsxs("nav",{children:[d.jsx("button",{"data-select":t===0,onClick:()=>{e(0)},children:"Friends"}),d.jsx("button",{"data-select":t===1,onClick:()=>{e(1)},children:"Leaderboard"})]}),d.jsx("main",{})]})}const K5=dA([{path:"Monopoly",element:d.jsx(W5,{})},{path:"Monopoly/gallery",element:d.jsx(pA,{})},{path:"/Monopoly/users",element:d.jsx(G5,{})}]);function J5(){return d.jsx(aA,{router:K5})}document.title="Monopoly";ef.createRoot(document.getElementById("root")).render(d.jsx(J5,{}));
